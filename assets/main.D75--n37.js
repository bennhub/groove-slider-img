import{F as z0,f as Cm}from"./ffmpeg.C6phY-E3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();var Fh={exports:{}},Na={},Lh={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function $0(){if(Nm)return Ve;Nm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,V={};function b(F,K,me){this.props=F,this.context=K,this.refs=V,this.updater=me||C}b.prototype.isReactComponent={},b.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=b.prototype;function G(F,K,me){this.props=F,this.context=K,this.refs=V,this.updater=me||C}var Q=G.prototype=new B;Q.constructor=G,P(Q,b.prototype),Q.isPureReactComponent=!0;var Y=Array.isArray,j=Object.prototype.hasOwnProperty,W={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function T(F,K,me){var Se,fe={},Pe=null,Me=null;if(K!=null)for(Se in K.ref!==void 0&&(Me=K.ref),K.key!==void 0&&(Pe=""+K.key),K)j.call(K,Se)&&!R.hasOwnProperty(Se)&&(fe[Se]=K[Se]);var ue=arguments.length-2;if(ue===1)fe.children=me;else if(1<ue){for(var Be=Array(ue),Qe=0;Qe<ue;Qe++)Be[Qe]=arguments[Qe+2];fe.children=Be}if(F&&F.defaultProps)for(Se in ue=F.defaultProps,ue)fe[Se]===void 0&&(fe[Se]=ue[Se]);return{$$typeof:r,type:F,key:Pe,ref:Me,props:fe,_owner:W.current}}function N(F,K){return{$$typeof:r,type:F.type,key:K,ref:F.ref,props:F.props,_owner:F._owner}}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function x(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(me){return K[me]})}var D=/\/+/g;function k(F,K){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):K.toString(36)}function oe(F,K,me,Se,fe){var Pe=typeof F;(Pe==="undefined"||Pe==="boolean")&&(F=null);var Me=!1;if(F===null)Me=!0;else switch(Pe){case"string":case"number":Me=!0;break;case"object":switch(F.$$typeof){case r:case e:Me=!0}}if(Me)return Me=F,fe=fe(Me),F=Se===""?"."+k(Me,0):Se,Y(fe)?(me="",F!=null&&(me=F.replace(D,"$&/")+"/"),oe(fe,K,me,"",function(Qe){return Qe})):fe!=null&&(M(fe)&&(fe=N(fe,me+(!fe.key||Me&&Me.key===fe.key?"":(""+fe.key).replace(D,"$&/")+"/")+F)),K.push(fe)),1;if(Me=0,Se=Se===""?".":Se+":",Y(F))for(var ue=0;ue<F.length;ue++){Pe=F[ue];var Be=Se+k(Pe,ue);Me+=oe(Pe,K,me,Be,fe)}else if(Be=I(F),typeof Be=="function")for(F=Be.call(F),ue=0;!(Pe=F.next()).done;)Pe=Pe.value,Be=Se+k(Pe,ue++),Me+=oe(Pe,K,me,Be,fe);else if(Pe==="object")throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Me}function he(F,K,me){if(F==null)return F;var Se=[],fe=0;return oe(F,Se,"","",function(Pe){return K.call(me,Pe,fe++)}),Se}function pe(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(me){(F._status===0||F._status===-1)&&(F._status=1,F._result=me)},function(me){(F._status===0||F._status===-1)&&(F._status=2,F._result=me)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var ie={current:null},Z={transition:null},te={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:W};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:he,forEach:function(F,K,me){he(F,function(){K.apply(this,arguments)},me)},count:function(F){var K=0;return he(F,function(){K++}),K},toArray:function(F){return he(F,function(K){return K})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ve.Component=b,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=G,Ve.StrictMode=o,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Ve.act=J,Ve.cloneElement=function(F,K,me){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Se=P({},F.props),fe=F.key,Pe=F.ref,Me=F._owner;if(K!=null){if(K.ref!==void 0&&(Pe=K.ref,Me=W.current),K.key!==void 0&&(fe=""+K.key),F.type&&F.type.defaultProps)var ue=F.type.defaultProps;for(Be in K)j.call(K,Be)&&!R.hasOwnProperty(Be)&&(Se[Be]=K[Be]===void 0&&ue!==void 0?ue[Be]:K[Be])}var Be=arguments.length-2;if(Be===1)Se.children=me;else if(1<Be){ue=Array(Be);for(var Qe=0;Qe<Be;Qe++)ue[Qe]=arguments[Qe+2];Se.children=ue}return{$$typeof:r,type:F.type,key:fe,ref:Pe,props:Se,_owner:Me}},Ve.createContext=function(F){return F={$$typeof:h,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Ve.createElement=T,Ve.createFactory=function(F){var K=T.bind(null,F);return K.type=F,K},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:d,render:F}},Ve.isValidElement=M,Ve.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:pe}},Ve.memo=function(F,K){return{$$typeof:m,type:F,compare:K===void 0?null:K}},Ve.startTransition=function(F){var K=Z.transition;Z.transition={};try{F()}finally{Z.transition=K}},Ve.unstable_act=J,Ve.useCallback=function(F,K){return ie.current.useCallback(F,K)},Ve.useContext=function(F){return ie.current.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F){return ie.current.useDeferredValue(F)},Ve.useEffect=function(F,K){return ie.current.useEffect(F,K)},Ve.useId=function(){return ie.current.useId()},Ve.useImperativeHandle=function(F,K,me){return ie.current.useImperativeHandle(F,K,me)},Ve.useInsertionEffect=function(F,K){return ie.current.useInsertionEffect(F,K)},Ve.useLayoutEffect=function(F,K){return ie.current.useLayoutEffect(F,K)},Ve.useMemo=function(F,K){return ie.current.useMemo(F,K)},Ve.useReducer=function(F,K,me){return ie.current.useReducer(F,K,me)},Ve.useRef=function(F){return ie.current.useRef(F)},Ve.useState=function(F){return ie.current.useState(F)},Ve.useSyncExternalStore=function(F,K,me){return ie.current.useSyncExternalStore(F,K,me)},Ve.useTransition=function(){return ie.current.useTransition()},Ve.version="18.3.1",Ve}var Am;function xd(){return Am||(Am=1,Lh.exports=$0()),Lh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function W0(){if(km)return Na;km=1;var r=xd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,f,m){var v,_={},I=null,C=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(C=f.ref);for(v in f)o.call(f,v)&&!l.hasOwnProperty(v)&&(_[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)_[v]===void 0&&(_[v]=f[v]);return{$$typeof:e,type:d,key:I,ref:C,props:_,_owner:i.current}}return Na.Fragment=t,Na.jsx=h,Na.jsxs=h,Na}var Rm;function q0(){return Rm||(Rm=1,Fh.exports=W0()),Fh.exports}var E=q0(),le=xd(),pu={},jh={exports:{}},mn={},Uh={exports:{}},Bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function H0(){return Pm||(Pm=1,function(r){function e(Z,te){var J=Z.length;Z.push(te);e:for(;0<J;){var F=J-1>>>1,K=Z[F];if(0<i(K,te))Z[F]=te,Z[J]=K,J=F;else break e}}function t(Z){return Z.length===0?null:Z[0]}function o(Z){if(Z.length===0)return null;var te=Z[0],J=Z.pop();if(J!==te){Z[0]=J;e:for(var F=0,K=Z.length,me=K>>>1;F<me;){var Se=2*(F+1)-1,fe=Z[Se],Pe=Se+1,Me=Z[Pe];if(0>i(fe,J))Pe<K&&0>i(Me,fe)?(Z[F]=Me,Z[Pe]=J,F=Pe):(Z[F]=fe,Z[Se]=J,F=Se);else if(Pe<K&&0>i(Me,J))Z[F]=Me,Z[Pe]=J,F=Pe;else break e}}return te}function i(Z,te){var J=Z.sortIndex-te.sortIndex;return J!==0?J:Z.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var f=[],m=[],v=1,_=null,I=3,C=!1,P=!1,V=!1,b=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Z){for(var te=t(m);te!==null;){if(te.callback===null)o(m);else if(te.startTime<=Z)o(m),te.sortIndex=te.expirationTime,e(f,te);else break;te=t(m)}}function Y(Z){if(V=!1,Q(Z),!P)if(t(f)!==null)P=!0,pe(j);else{var te=t(m);te!==null&&ie(Y,te.startTime-Z)}}function j(Z,te){P=!1,V&&(V=!1,B(T),T=-1),C=!0;var J=I;try{for(Q(te),_=t(f);_!==null&&(!(_.expirationTime>te)||Z&&!x());){var F=_.callback;if(typeof F=="function"){_.callback=null,I=_.priorityLevel;var K=F(_.expirationTime<=te);te=r.unstable_now(),typeof K=="function"?_.callback=K:_===t(f)&&o(f),Q(te)}else o(f);_=t(f)}if(_!==null)var me=!0;else{var Se=t(m);Se!==null&&ie(Y,Se.startTime-te),me=!1}return me}finally{_=null,I=J,C=!1}}var W=!1,R=null,T=-1,N=5,M=-1;function x(){return!(r.unstable_now()-M<N)}function D(){if(R!==null){var Z=r.unstable_now();M=Z;var te=!0;try{te=R(!0,Z)}finally{te?k():(W=!1,R=null)}}else W=!1}var k;if(typeof G=="function")k=function(){G(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,he=oe.port2;oe.port1.onmessage=D,k=function(){he.postMessage(null)}}else k=function(){b(D,0)};function pe(Z){R=Z,W||(W=!0,k())}function ie(Z,te){T=b(function(){Z(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){P||C||(P=!0,pe(j))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(Z){switch(I){case 1:case 2:case 3:var te=3;break;default:te=I}var J=I;I=te;try{return Z()}finally{I=J}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,te){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=I;I=Z;try{return te()}finally{I=J}},r.unstable_scheduleCallback=function(Z,te,J){var F=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,Z={id:v++,callback:te,priorityLevel:Z,startTime:J,expirationTime:K,sortIndex:-1},J>F?(Z.sortIndex=J,e(m,Z),t(f)===null&&Z===t(m)&&(V?(B(T),T=-1):V=!0,ie(Y,J-F))):(Z.sortIndex=K,e(f,Z),P||C||(P=!0,pe(j))),Z},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(Z){var te=I;return function(){var J=I;I=te;try{return Z.apply(this,arguments)}finally{I=J}}}}(Bh)),Bh}var xm;function G0(){return xm||(xm=1,Uh.exports=H0()),Uh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function Q0(){if(Dm)return mn;Dm=1;var r=xd(),e=G0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(i[n]=s,n=0;n<s.length;n++)o.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function I(n){return f.call(_,n)?!0:f.call(v,n)?!1:m.test(n)?_[n]=!0:(v[n]=!0,!1)}function C(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,s,a,c){if(s===null||typeof s>"u"||C(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function V(n,s,a,c,p,y,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new V(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];b[s]=new V(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new V(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new V(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new V(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new V(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new V(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new V(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new V(n,5,!1,n.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(B,G);b[s]=new V(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(B,G);b[s]=new V(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(B,G);b[s]=new V(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new V(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new V(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,s,a,c){var p=b.hasOwnProperty(s)?b[s]:null;(p!==null?p.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,a,p,c)&&(a=null),c||p===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(s=p.attributeName,c=p.attributeNamespace,a===null?n.removeAttribute(s):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),W=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function te(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,F;function K(n){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+n}var me=!1;function Se(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var c=H}Reflect.construct(n,[],s)}else{try{s.call()}catch(H){c=H}n.call(s.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),y=c.stack.split(`
`),S=p.length-1,O=y.length-1;1<=S&&0<=O&&p[S]!==y[O];)O--;for(;1<=S&&0<=O;S--,O--)if(p[S]!==y[O]){if(S!==1||O!==1)do if(S--,O--,0>O||p[S]!==y[O]){var L=`
`+p[S].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=S&&0<=O);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function fe(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case W:return"Portal";case N:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case oe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case M:return(n._context.displayName||"Context")+".Provider";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case he:return s=n.displayName||null,s!==null?s:Pe(n.type)||"Memo";case pe:s=n._payload,n=n._init;try{return Pe(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qe(n){var s=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(S){c=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function xt(n){n._valueTracker||(n._valueTracker=Qe(n))}function Jt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function en(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ze(n,s){var a=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function wn(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ue(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Qs(n,s){s=s.checked,s!=null&&Q(n,"checked",s,!1)}function Ks(n,s){Qs(n,s);var a=ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?br(n,s.type,a):s.hasOwnProperty("defaultValue")&&br(n,s.type,ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Lo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function br(n,s,a){(s!=="number"||en(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Hn=Array.isArray;function Gn(n,s,a,c){if(n=n.options,s){s={};for(var p=0;p<a.length;p++)s["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=s.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&c&&(n[a].defaultSelected=!0)}else{for(a=""+ue(a),s=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function os(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function En(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Hn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:ue(a)}}function is(n,s){var a=ue(s.value),c=ue(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function as(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ct(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qn,Xs=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,p){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,p)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Kn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fr=["Webkit","ms","Moz","O"];Object.keys(gr).forEach(function(n){Fr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),gr[s]=gr[n]})});function Ys(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||gr.hasOwnProperty(n)&&gr[n]?(""+s).trim():s+"px"}function Zs(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,p=Ys(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,p):n[a]=p}}var Js=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Te(n,s){if(s){if(Js[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ke(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function Ye(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xn=null,Ct=null,Tn=null;function Yn(n){if(n=ha(n)){if(typeof Xn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Rl(s),Xn(n.stateNode,n.type,s))}}function Sn(n){Ct?Tn?Tn.push(n):Tn=[n]:Ct=n}function eo(){if(Ct){var n=Ct,s=Tn;if(Tn=Ct=null,Yn(n),s)for(n=0;n<s.length;n++)Yn(s[n])}}function Lr(n,s){return n(s)}function to(){}var In=!1;function no(n,s,a){if(In)return n(s,a);In=!0;try{return Lr(n,s,a)}finally{In=!1,(Ct!==null||Tn!==null)&&(to(),eo())}}function nt(n,s){var a=n.stateNode;if(a===null)return null;var c=Rl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var gt=!1;if(d)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){gt=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{gt=!1}function Vn(n,s,a,c,p,y,S,O,L){var H=Array.prototype.slice.call(arguments,3);try{s.apply(a,H)}catch(re){this.onError(re)}}var Zn=!1,yr=null,Jn=!1,qi=null,hc={onError:function(n){Zn=!0,yr=n}};function jo(n,s,a,c,p,y,S,O,L){Zn=!1,yr=null,Vn.apply(hc,arguments)}function el(n,s,a,c,p,y,S,O,L){if(jo.apply(this,arguments),Zn){if(Zn){var H=yr;Zn=!1,yr=null}else throw Error(t(198));Jn||(Jn=!0,qi=H)}}function er(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ro(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function tr(n){if(er(n)!==n)throw Error(t(188))}function tl(n){var s=n.alternate;if(!s){if(s=er(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var p=a.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){a=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===a)return tr(p),n;if(y===c)return tr(p),s;y=y.sibling}throw Error(t(188))}if(a.return!==c.return)a=p,c=y;else{for(var S=!1,O=p.child;O;){if(O===a){S=!0,a=p,c=y;break}if(O===c){S=!0,c=p,a=y;break}O=O.sibling}if(!S){for(O=y.child;O;){if(O===a){S=!0,a=y,c=p;break}if(O===c){S=!0,c=y,a=p;break}O=O.sibling}if(!S)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Hi(n){return n=tl(n),n!==null?Uo(n):null}function Uo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Uo(n);if(s!==null)return s;n=n.sibling}return null}var Bo=e.unstable_scheduleCallback,Gi=e.unstable_cancelCallback,nl=e.unstable_shouldYield,dc=e.unstable_requestPaint,Ze=e.unstable_now,rl=e.unstable_getCurrentPriorityLevel,so=e.unstable_ImmediatePriority,ls=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,Qi=e.unstable_LowPriority,sl=e.unstable_IdlePriority,oo=null,Cn=null;function ol(n){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(oo,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:al,Ki=Math.log,il=Math.LN2;function al(n){return n>>>=0,n===0?32:31-(Ki(n)/il|0)|0}var zo=64,$o=4194304;function us(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function io(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,p=n.suspendedLanes,y=n.pingedLanes,S=a&268435455;if(S!==0){var O=S&~p;O!==0?c=us(O):(y&=S,y!==0&&(c=us(y)))}else S=a&~p,S!==0?c=us(S):y!==0&&(c=us(y));if(c===0)return 0;if(s!==0&&s!==c&&!(s&p)&&(p=c&-c,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if(c&4&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-tn(s),p=1<<a,c|=n[a],s&=~p;return c}function fc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes;0<y;){var S=31-tn(y),O=1<<S,L=p[S];L===-1?(!(O&a)||O&c)&&(p[S]=fc(O,s)):L<=s&&(n.expiredLanes|=O),y&=~O}}function Nn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ao(){var n=zo;return zo<<=1,!(zo&4194240)&&(zo=64),n}function cs(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function hs(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-tn(s),n[s]=a}function Ke(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var p=31-tn(a),y=1<<p;s[p]=0,c[p]=-1,n[p]=-1,a&=~y}}function ds(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-tn(a),p=1<<c;p&s|n[c]&s&&(n[c]|=s),a&=~p}}var Oe=0;function fs(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ll,Wo,ul,cl,hl,Xi=!1,vr=[],Lt=null,nr=null,rr=null,ps=new Map,bn=new Map,_r=[],pc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dl(n,s){switch(n){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":ps.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(s.pointerId)}}function ln(n,s,a,c,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},s!==null&&(s=ha(s),s!==null&&Wo(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function mc(n,s,a,c,p){switch(s){case"focusin":return Lt=ln(Lt,n,s,a,c,p),!0;case"dragenter":return nr=ln(nr,n,s,a,c,p),!0;case"mouseover":return rr=ln(rr,n,s,a,c,p),!0;case"pointerover":var y=p.pointerId;return ps.set(y,ln(ps.get(y)||null,n,s,a,c,p)),!0;case"gotpointercapture":return y=p.pointerId,bn.set(y,ln(bn.get(y)||null,n,s,a,c,p)),!0}return!1}function fl(n){var s=fo(n.target);if(s!==null){var a=er(s);if(a!==null){if(s=a.tag,s===13){if(s=ro(a),s!==null){n.blockedOn=s,hl(n.priority,function(){ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ur(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=qo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);He=c,a.target.dispatchEvent(c),He=null}else return s=ha(a),s!==null&&Wo(s),n.blockedOn=a,!1;s.shift()}return!0}function lo(n,s,a){Ur(n)&&a.delete(s)}function pl(){Xi=!1,Lt!==null&&Ur(Lt)&&(Lt=null),nr!==null&&Ur(nr)&&(nr=null),rr!==null&&Ur(rr)&&(rr=null),ps.forEach(lo),bn.forEach(lo)}function sr(n,s){n.blockedOn===s&&(n.blockedOn=null,Xi||(Xi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pl)))}function or(n){function s(p){return sr(p,n)}if(0<vr.length){sr(vr[0],n);for(var a=1;a<vr.length;a++){var c=vr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Lt!==null&&sr(Lt,n),nr!==null&&sr(nr,n),rr!==null&&sr(rr,n),ps.forEach(s),bn.forEach(s),a=0;a<_r.length;a++)c=_r[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<_r.length&&(a=_r[0],a.blockedOn===null);)fl(a),a.blockedOn===null&&_r.shift()}var Br=Y.ReactCurrentBatchConfig,ms=!0;function rt(n,s,a,c){var p=Oe,y=Br.transition;Br.transition=null;try{Oe=1,Yi(n,s,a,c)}finally{Oe=p,Br.transition=y}}function gc(n,s,a,c){var p=Oe,y=Br.transition;Br.transition=null;try{Oe=4,Yi(n,s,a,c)}finally{Oe=p,Br.transition=y}}function Yi(n,s,a,c){if(ms){var p=qo(n,s,a,c);if(p===null)Ac(n,s,c,uo,a),dl(n,c);else if(mc(p,n,s,a,c))c.stopPropagation();else if(dl(n,c),s&4&&-1<pc.indexOf(n)){for(;p!==null;){var y=ha(p);if(y!==null&&ll(y),y=qo(n,s,a,c),y===null&&Ac(n,s,c,uo,a),y===p)break;p=y}p!==null&&c.stopPropagation()}else Ac(n,s,c,null,a)}}var uo=null;function qo(n,s,a,c){if(uo=null,n=Ye(c),n=fo(n),n!==null)if(s=er(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ro(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return uo=n,null}function Zi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rl()){case so:return 1;case ls:return 4;case On:case Qi:return 16;case sl:return 536870912;default:return 16}default:return 16}}var An=null,Ho=null,un=null;function Ji(){if(un)return un;var n,s=Ho,a=s.length,c,p="value"in An?An.value:An.textContent,y=p.length;for(n=0;n<a&&s[n]===p[n];n++);var S=a-n;for(c=1;c<=S&&s[a-c]===p[y-c];c++);return un=p.slice(n,1<c?1-c:void 0)}function Go(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function wr(){return!0}function ea(){return!1}function jt(n){function s(a,c,p,y,S){this._reactName=a,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(a=n[O],this[O]=a?a(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wr:ea,this.isPropagationStopped=ea,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=jt(ir),Er=J({},ir,{view:0,detail:0}),yc=jt(Er),Ko,zr,gs,co=J({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gs&&(gs&&n.type==="mousemove"?(Ko=n.screenX-gs.screenX,zr=n.screenY-gs.screenY):zr=Ko=0,gs=n),Ko)},movementY:function(n){return"movementY"in n?n.movementY:zr}}),Xo=jt(co),ta=J({},co,{dataTransfer:0}),ml=jt(ta),Yo=J({},Er,{relatedTarget:0}),Zo=jt(Yo),gl=J({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),$r=jt(gl),yl=J({},ir,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vl=jt(yl),_l=J({},ir,{data:0}),na=jt(_l),Jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function El(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=wl[n])?!!s[n]:!1}function Tr(){return El}var u=J({},Er,{key:function(n){if(n.key){var s=Jo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Go(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(n){return n.type==="keypress"?Go(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Go(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g=jt(u),w=J({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=jt(w),z=J({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),X=jt(z),ce=J({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=jt(ce),Nt=J({},co,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),be=jt(Nt),Dt=[9,13,27,32],Tt=d&&"CompositionEvent"in window,Fn=null;d&&"documentMode"in document&&(Fn=document.documentMode);var kn=d&&"TextEvent"in window&&!Fn,ho=d&&(!Tt||Fn&&8<Fn&&11>=Fn),ei=" ",_f=!1;function wf(n,s){switch(n){case"keyup":return Dt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ef(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ti=!1;function j_(n,s){switch(n){case"compositionend":return Ef(s);case"keypress":return s.which!==32?null:(_f=!0,ei);case"textInput":return n=s.data,n===ei&&_f?null:n;default:return null}}function U_(n,s){if(ti)return n==="compositionend"||!Tt&&wf(n,s)?(n=Ji(),un=Ho=An=null,ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ho&&s.locale!=="ko"?null:s.data;default:return null}}var B_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!B_[n.type]:s==="textarea"}function Sf(n,s,a,c){Sn(c),s=Nl(s,"onChange"),0<s.length&&(a=new Qo("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ra=null,sa=null;function z_(n){Bf(n,0)}function Tl(n){var s=ii(n);if(Jt(s))return n}function $_(n,s){if(n==="change")return s}var If=!1;if(d){var vc;if(d){var _c="oninput"in document;if(!_c){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),_c=typeof Cf.oninput=="function"}vc=_c}else vc=!1;If=vc&&(!document.documentMode||9<document.documentMode)}function Nf(){ra&&(ra.detachEvent("onpropertychange",Af),sa=ra=null)}function Af(n){if(n.propertyName==="value"&&Tl(sa)){var s=[];Sf(s,sa,n,Ye(n)),no(z_,s)}}function W_(n,s,a){n==="focusin"?(Nf(),ra=s,sa=a,ra.attachEvent("onpropertychange",Af)):n==="focusout"&&Nf()}function q_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tl(sa)}function H_(n,s){if(n==="click")return Tl(s)}function G_(n,s){if(n==="input"||n==="change")return Tl(s)}function Q_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ar=typeof Object.is=="function"?Object.is:Q_;function oa(n,s){if(ar(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var p=a[c];if(!f.call(s,p)||!ar(n[p],s[p]))return!1}return!0}function kf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rf(n,s){var a=kf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kf(a)}}function Pf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Pf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function xf(){for(var n=window,s=en();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=en(n.document)}return s}function wc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function K_(n){var s=xf(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Pf(a.ownerDocument.documentElement,a)){if(c!==null&&wc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var p=a.textContent.length,y=Math.min(c.start,p);c=c.end===void 0?y:Math.min(c.end,p),!n.extend&&y>c&&(p=c,c=y,y=p),p=Rf(a,y);var S=Rf(a,c);p&&S&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),n.removeAllRanges(),y>c?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var X_=d&&"documentMode"in document&&11>=document.documentMode,ni=null,Ec=null,ia=null,Tc=!1;function Df(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tc||ni==null||ni!==en(c)||(c=ni,"selectionStart"in c&&wc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ia&&oa(ia,c)||(ia=c,c=Nl(Ec,"onSelect"),0<c.length&&(s=new Qo("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=ni)))}function Sl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ri={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},Sc={},Mf={};d&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Il(n){if(Sc[n])return Sc[n];if(!ri[n])return n;var s=ri[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mf)return Sc[n]=s[a];return n}var Vf=Il("animationend"),Of=Il("animationiteration"),bf=Il("animationstart"),Ff=Il("transitionend"),Lf=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(n,s){Lf.set(n,s),l(s,[n])}for(var Ic=0;Ic<jf.length;Ic++){var Cc=jf[Ic],Y_=Cc.toLowerCase(),Z_=Cc[0].toUpperCase()+Cc.slice(1);ys(Y_,"on"+Z_)}ys(Vf,"onAnimationEnd"),ys(Of,"onAnimationIteration"),ys(bf,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(Ff,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J_=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Uf(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,el(c,s,void 0,n),n.currentTarget=null}function Bf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],p=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var S=c.length-1;0<=S;S--){var O=c[S],L=O.instance,H=O.currentTarget;if(O=O.listener,L!==y&&p.isPropagationStopped())break e;Uf(p,O,H),y=L}else for(S=0;S<c.length;S++){if(O=c[S],L=O.instance,H=O.currentTarget,O=O.listener,L!==y&&p.isPropagationStopped())break e;Uf(p,O,H),y=L}}}if(Jn)throw n=qi,Jn=!1,qi=null,n}function et(n,s){var a=s[Mc];a===void 0&&(a=s[Mc]=new Set);var c=n+"__bubble";a.has(c)||(zf(s,n,2,!1),a.add(c))}function Nc(n,s,a){var c=0;s&&(c|=4),zf(a,n,c,s)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function la(n){if(!n[Cl]){n[Cl]=!0,o.forEach(function(a){a!=="selectionchange"&&(J_.has(a)||Nc(a,!1,n),Nc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Cl]||(s[Cl]=!0,Nc("selectionchange",!1,s))}}function zf(n,s,a,c){switch(Zi(s)){case 1:var p=rt;break;case 4:p=gc;break;default:p=Yi}a=p.bind(null,s,a,n),p=void 0,!gt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(s,a,{capture:!0,passive:p}):n.addEventListener(s,a,!0):p!==void 0?n.addEventListener(s,a,{passive:p}):n.addEventListener(s,a,!1)}function Ac(n,s,a,c,p){var y=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var O=c.stateNode.containerInfo;if(O===p||O.nodeType===8&&O.parentNode===p)break;if(S===4)for(S=c.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;S=S.return}for(;O!==null;){if(S=fo(O),S===null)return;if(L=S.tag,L===5||L===6){c=y=S;continue e}O=O.parentNode}}c=c.return}no(function(){var H=y,re=Ye(a),se=[];e:{var ne=Lf.get(n);if(ne!==void 0){var ge=Qo,_e=n;switch(n){case"keypress":if(Go(a)===0)break e;case"keydown":case"keyup":ge=g;break;case"focusin":_e="focus",ge=Zo;break;case"focusout":_e="blur",ge=Zo;break;case"beforeblur":case"afterblur":ge=Zo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=X;break;case Vf:case Of:case bf:ge=$r;break;case Ff:ge=Ge;break;case"scroll":ge=yc;break;case"wheel":ge=be;break;case"copy":case"cut":case"paste":ge=vl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=A}var we=(s&4)!==0,vt=!we&&n==="scroll",$=we?ne!==null?ne+"Capture":null:ne;we=[];for(var U=H,q;U!==null;){q=U;var ae=q.stateNode;if(q.tag===5&&ae!==null&&(q=ae,$!==null&&(ae=nt(U,$),ae!=null&&we.push(ua(U,ae,q)))),vt)break;U=U.return}0<we.length&&(ne=new ge(ne,_e,null,a,re),se.push({event:ne,listeners:we}))}}if(!(s&7)){e:{if(ne=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",ne&&a!==He&&(_e=a.relatedTarget||a.fromElement)&&(fo(_e)||_e[Wr]))break e;if((ge||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ge?(_e=a.relatedTarget||a.toElement,ge=H,_e=_e?fo(_e):null,_e!==null&&(vt=er(_e),_e!==vt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ge=null,_e=H),ge!==_e)){if(we=Xo,ae="onMouseLeave",$="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(we=A,ae="onPointerLeave",$="onPointerEnter",U="pointer"),vt=ge==null?ne:ii(ge),q=_e==null?ne:ii(_e),ne=new we(ae,U+"leave",ge,a,re),ne.target=vt,ne.relatedTarget=q,ae=null,fo(re)===H&&(we=new we($,U+"enter",_e,a,re),we.target=q,we.relatedTarget=vt,ae=we),vt=ae,ge&&_e)t:{for(we=ge,$=_e,U=0,q=we;q;q=si(q))U++;for(q=0,ae=$;ae;ae=si(ae))q++;for(;0<U-q;)we=si(we),U--;for(;0<q-U;)$=si($),q--;for(;U--;){if(we===$||$!==null&&we===$.alternate)break t;we=si(we),$=si($)}we=null}else we=null;ge!==null&&$f(se,ne,ge,we,!1),_e!==null&&vt!==null&&$f(se,vt,_e,we,!0)}}e:{if(ne=H?ii(H):window,ge=ne.nodeName&&ne.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ne.type==="file")var Ee=$_;else if(Tf(ne))if(If)Ee=G_;else{Ee=q_;var Ie=W_}else(ge=ne.nodeName)&&ge.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ee=H_);if(Ee&&(Ee=Ee(n,H))){Sf(se,Ee,a,re);break e}Ie&&Ie(n,ne,H),n==="focusout"&&(Ie=ne._wrapperState)&&Ie.controlled&&ne.type==="number"&&br(ne,"number",ne.value)}switch(Ie=H?ii(H):window,n){case"focusin":(Tf(Ie)||Ie.contentEditable==="true")&&(ni=Ie,Ec=H,ia=null);break;case"focusout":ia=Ec=ni=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,Df(se,a,re);break;case"selectionchange":if(X_)break;case"keydown":case"keyup":Df(se,a,re)}var Ce;if(Tt)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ti?wf(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(ho&&a.locale!=="ko"&&(ti||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ti&&(Ce=Ji()):(An=re,Ho="value"in An?An.value:An.textContent,ti=!0)),Ie=Nl(H,Re),0<Ie.length&&(Re=new na(Re,n,null,a,re),se.push({event:Re,listeners:Ie}),Ce?Re.data=Ce:(Ce=Ef(a),Ce!==null&&(Re.data=Ce)))),(Ce=kn?j_(n,a):U_(n,a))&&(H=Nl(H,"onBeforeInput"),0<H.length&&(re=new na("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:H}),re.data=Ce))}Bf(se,s)})}function ua(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Nl(n,s){for(var a=s+"Capture",c=[];n!==null;){var p=n,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=nt(n,a),y!=null&&c.unshift(ua(n,y,p)),y=nt(n,s),y!=null&&c.push(ua(n,y,p))),n=n.return}return c}function si(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $f(n,s,a,c,p){for(var y=s._reactName,S=[];a!==null&&a!==c;){var O=a,L=O.alternate,H=O.stateNode;if(L!==null&&L===c)break;O.tag===5&&H!==null&&(O=H,p?(L=nt(a,y),L!=null&&S.unshift(ua(a,L,O))):p||(L=nt(a,y),L!=null&&S.push(ua(a,L,O)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var e0=/\r\n?/g,t0=/\u0000|\uFFFD/g;function Wf(n){return(typeof n=="string"?n:""+n).replace(e0,`
`).replace(t0,"")}function Al(n,s,a){if(s=Wf(s),Wf(n)!==s&&a)throw Error(t(425))}function kl(){}var kc=null,Rc=null;function Pc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xc=typeof setTimeout=="function"?setTimeout:void 0,n0=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,r0=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(n){return qf.resolve(null).then(n).catch(s0)}:xc;function s0(n){setTimeout(function(){throw n})}function Dc(n,s){var a=s,c=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(c===0){n.removeChild(p),or(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=p}while(a);or(s)}function vs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Hf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var oi=Math.random().toString(36).slice(2),Sr="__reactFiber$"+oi,ca="__reactProps$"+oi,Wr="__reactContainer$"+oi,Mc="__reactEvents$"+oi,o0="__reactListeners$"+oi,i0="__reactHandles$"+oi;function fo(n){var s=n[Sr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Wr]||a[Sr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Hf(n);n!==null;){if(a=n[Sr])return a;n=Hf(n)}return s}n=a,a=n.parentNode}return null}function ha(n){return n=n[Sr]||n[Wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ii(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Rl(n){return n[ca]||null}var Vc=[],ai=-1;function _s(n){return{current:n}}function tt(n){0>ai||(n.current=Vc[ai],Vc[ai]=null,ai--)}function Je(n,s){ai++,Vc[ai]=n.current,n.current=s}var ws={},Wt=_s(ws),cn=_s(!1),po=ws;function li(n,s){var a=n.type.contextTypes;if(!a)return ws;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in a)p[y]=s[y];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=p),p}function hn(n){return n=n.childContextTypes,n!=null}function Pl(){tt(cn),tt(Wt)}function Gf(n,s,a){if(Wt.current!==ws)throw Error(t(168));Je(Wt,s),Je(cn,a)}function Qf(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var p in c)if(!(p in s))throw Error(t(108,Me(n)||"Unknown",p));return J({},a,c)}function xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ws,po=Wt.current,Je(Wt,n),Je(cn,cn.current),!0}function Kf(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Qf(n,s,po),c.__reactInternalMemoizedMergedChildContext=n,tt(cn),tt(Wt),Je(Wt,n)):tt(cn),Je(cn,a)}var qr=null,Dl=!1,Oc=!1;function Xf(n){qr===null?qr=[n]:qr.push(n)}function a0(n){Dl=!0,Xf(n)}function Es(){if(!Oc&&qr!==null){Oc=!0;var n=0,s=Oe;try{var a=qr;for(Oe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}qr=null,Dl=!1}catch(p){throw qr!==null&&(qr=qr.slice(n+1)),Bo(so,Es),p}finally{Oe=s,Oc=!1}}return null}var ui=[],ci=0,Ml=null,Vl=0,Ln=[],jn=0,mo=null,Hr=1,Gr="";function go(n,s){ui[ci++]=Vl,ui[ci++]=Ml,Ml=n,Vl=s}function Yf(n,s,a){Ln[jn++]=Hr,Ln[jn++]=Gr,Ln[jn++]=mo,mo=n;var c=Hr;n=Gr;var p=32-tn(c)-1;c&=~(1<<p),a+=1;var y=32-tn(s)+p;if(30<y){var S=p-p%5;y=(c&(1<<S)-1).toString(32),c>>=S,p-=S,Hr=1<<32-tn(s)+p|a<<p|c,Gr=y+n}else Hr=1<<y|a<<p|c,Gr=n}function bc(n){n.return!==null&&(go(n,1),Yf(n,1,0))}function Fc(n){for(;n===Ml;)Ml=ui[--ci],ui[ci]=null,Vl=ui[--ci],ui[ci]=null;for(;n===mo;)mo=Ln[--jn],Ln[jn]=null,Gr=Ln[--jn],Ln[jn]=null,Hr=Ln[--jn],Ln[jn]=null}var Rn=null,Pn=null,st=!1,lr=null;function Zf(n,s){var a=$n(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Jf(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Rn=n,Pn=vs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Rn=n,Pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=mo!==null?{id:Hr,overflow:Gr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=$n(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Rn=n,Pn=null,!0):!1;default:return!1}}function Lc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jc(n){if(st){var s=Pn;if(s){var a=s;if(!Jf(n,s)){if(Lc(n))throw Error(t(418));s=vs(a.nextSibling);var c=Rn;s&&Jf(n,s)?Zf(c,a):(n.flags=n.flags&-4097|2,st=!1,Rn=n)}}else{if(Lc(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,Rn=n}}}function ep(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rn=n}function Ol(n){if(n!==Rn)return!1;if(!st)return ep(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Pc(n.type,n.memoizedProps)),s&&(s=Pn)){if(Lc(n))throw tp(),Error(t(418));for(;s;)Zf(n,s),s=vs(s.nextSibling)}if(ep(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Pn=vs(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Pn=null}}else Pn=Rn?vs(n.stateNode.nextSibling):null;return!0}function tp(){for(var n=Pn;n;)n=vs(n.nextSibling)}function hi(){Pn=Rn=null,st=!1}function Uc(n){lr===null?lr=[n]:lr.push(n)}var l0=Y.ReactCurrentBatchConfig;function da(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var p=c,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(S){var O=p.refs;S===null?delete O[y]:O[y]=S},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function bl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function np(n){var s=n._init;return s(n._payload)}function rp(n){function s($,U){if(n){var q=$.deletions;q===null?($.deletions=[U],$.flags|=16):q.push(U)}}function a($,U){if(!n)return null;for(;U!==null;)s($,U),U=U.sibling;return null}function c($,U){for($=new Map;U!==null;)U.key!==null?$.set(U.key,U):$.set(U.index,U),U=U.sibling;return $}function p($,U){return $=Rs($,U),$.index=0,$.sibling=null,$}function y($,U,q){return $.index=q,n?(q=$.alternate,q!==null?(q=q.index,q<U?($.flags|=2,U):q):($.flags|=2,U)):($.flags|=1048576,U)}function S($){return n&&$.alternate===null&&($.flags|=2),$}function O($,U,q,ae){return U===null||U.tag!==6?(U=xh(q,$.mode,ae),U.return=$,U):(U=p(U,q),U.return=$,U)}function L($,U,q,ae){var Ee=q.type;return Ee===R?re($,U,q.props.children,ae,q.key):U!==null&&(U.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===pe&&np(Ee)===U.type)?(ae=p(U,q.props),ae.ref=da($,U,q),ae.return=$,ae):(ae=iu(q.type,q.key,q.props,null,$.mode,ae),ae.ref=da($,U,q),ae.return=$,ae)}function H($,U,q,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=Dh(q,$.mode,ae),U.return=$,U):(U=p(U,q.children||[]),U.return=$,U)}function re($,U,q,ae,Ee){return U===null||U.tag!==7?(U=Io(q,$.mode,ae,Ee),U.return=$,U):(U=p(U,q),U.return=$,U)}function se($,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=xh(""+U,$.mode,q),U.return=$,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return q=iu(U.type,U.key,U.props,null,$.mode,q),q.ref=da($,null,U),q.return=$,q;case W:return U=Dh(U,$.mode,q),U.return=$,U;case pe:var ae=U._init;return se($,ae(U._payload),q)}if(Hn(U)||te(U))return U=Io(U,$.mode,q,null),U.return=$,U;bl($,U)}return null}function ne($,U,q,ae){var Ee=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ee!==null?null:O($,U,""+q,ae);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return q.key===Ee?L($,U,q,ae):null;case W:return q.key===Ee?H($,U,q,ae):null;case pe:return Ee=q._init,ne($,U,Ee(q._payload),ae)}if(Hn(q)||te(q))return Ee!==null?null:re($,U,q,ae,null);bl($,q)}return null}function ge($,U,q,ae,Ee){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $=$.get(q)||null,O(U,$,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case j:return $=$.get(ae.key===null?q:ae.key)||null,L(U,$,ae,Ee);case W:return $=$.get(ae.key===null?q:ae.key)||null,H(U,$,ae,Ee);case pe:var Ie=ae._init;return ge($,U,q,Ie(ae._payload),Ee)}if(Hn(ae)||te(ae))return $=$.get(q)||null,re(U,$,ae,Ee,null);bl(U,ae)}return null}function _e($,U,q,ae){for(var Ee=null,Ie=null,Ce=U,Re=U=0,Ot=null;Ce!==null&&Re<q.length;Re++){Ce.index>Re?(Ot=Ce,Ce=null):Ot=Ce.sibling;var qe=ne($,Ce,q[Re],ae);if(qe===null){Ce===null&&(Ce=Ot);break}n&&Ce&&qe.alternate===null&&s($,Ce),U=y(qe,U,Re),Ie===null?Ee=qe:Ie.sibling=qe,Ie=qe,Ce=Ot}if(Re===q.length)return a($,Ce),st&&go($,Re),Ee;if(Ce===null){for(;Re<q.length;Re++)Ce=se($,q[Re],ae),Ce!==null&&(U=y(Ce,U,Re),Ie===null?Ee=Ce:Ie.sibling=Ce,Ie=Ce);return st&&go($,Re),Ee}for(Ce=c($,Ce);Re<q.length;Re++)Ot=ge(Ce,$,Re,q[Re],ae),Ot!==null&&(n&&Ot.alternate!==null&&Ce.delete(Ot.key===null?Re:Ot.key),U=y(Ot,U,Re),Ie===null?Ee=Ot:Ie.sibling=Ot,Ie=Ot);return n&&Ce.forEach(function(Ps){return s($,Ps)}),st&&go($,Re),Ee}function we($,U,q,ae){var Ee=te(q);if(typeof Ee!="function")throw Error(t(150));if(q=Ee.call(q),q==null)throw Error(t(151));for(var Ie=Ee=null,Ce=U,Re=U=0,Ot=null,qe=q.next();Ce!==null&&!qe.done;Re++,qe=q.next()){Ce.index>Re?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ps=ne($,Ce,qe.value,ae);if(Ps===null){Ce===null&&(Ce=Ot);break}n&&Ce&&Ps.alternate===null&&s($,Ce),U=y(Ps,U,Re),Ie===null?Ee=Ps:Ie.sibling=Ps,Ie=Ps,Ce=Ot}if(qe.done)return a($,Ce),st&&go($,Re),Ee;if(Ce===null){for(;!qe.done;Re++,qe=q.next())qe=se($,qe.value,ae),qe!==null&&(U=y(qe,U,Re),Ie===null?Ee=qe:Ie.sibling=qe,Ie=qe);return st&&go($,Re),Ee}for(Ce=c($,Ce);!qe.done;Re++,qe=q.next())qe=ge(Ce,$,Re,qe.value,ae),qe!==null&&(n&&qe.alternate!==null&&Ce.delete(qe.key===null?Re:qe.key),U=y(qe,U,Re),Ie===null?Ee=qe:Ie.sibling=qe,Ie=qe);return n&&Ce.forEach(function(B0){return s($,B0)}),st&&go($,Re),Ee}function vt($,U,q,ae){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case j:e:{for(var Ee=q.key,Ie=U;Ie!==null;){if(Ie.key===Ee){if(Ee=q.type,Ee===R){if(Ie.tag===7){a($,Ie.sibling),U=p(Ie,q.props.children),U.return=$,$=U;break e}}else if(Ie.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===pe&&np(Ee)===Ie.type){a($,Ie.sibling),U=p(Ie,q.props),U.ref=da($,Ie,q),U.return=$,$=U;break e}a($,Ie);break}else s($,Ie);Ie=Ie.sibling}q.type===R?(U=Io(q.props.children,$.mode,ae,q.key),U.return=$,$=U):(ae=iu(q.type,q.key,q.props,null,$.mode,ae),ae.ref=da($,U,q),ae.return=$,$=ae)}return S($);case W:e:{for(Ie=q.key;U!==null;){if(U.key===Ie)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){a($,U.sibling),U=p(U,q.children||[]),U.return=$,$=U;break e}else{a($,U);break}else s($,U);U=U.sibling}U=Dh(q,$.mode,ae),U.return=$,$=U}return S($);case pe:return Ie=q._init,vt($,U,Ie(q._payload),ae)}if(Hn(q))return _e($,U,q,ae);if(te(q))return we($,U,q,ae);bl($,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(a($,U.sibling),U=p(U,q),U.return=$,$=U):(a($,U),U=xh(q,$.mode,ae),U.return=$,$=U),S($)):a($,U)}return vt}var di=rp(!0),sp=rp(!1),Fl=_s(null),Ll=null,fi=null,Bc=null;function zc(){Bc=fi=Ll=null}function $c(n){var s=Fl.current;tt(Fl),n._currentValue=s}function Wc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function pi(n,s){Ll=n,Bc=fi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(dn=!0),n.firstContext=null)}function Un(n){var s=n._currentValue;if(Bc!==n)if(n={context:n,memoizedValue:s,next:null},fi===null){if(Ll===null)throw Error(t(308));fi=n,Ll.dependencies={lanes:0,firstContext:n}}else fi=fi.next=n;return s}var yo=null;function qc(n){yo===null?yo=[n]:yo.push(n)}function op(n,s,a,c){var p=s.interleaved;return p===null?(a.next=a,qc(s)):(a.next=p.next,p.next=a),s.interleaved=a,Qr(n,c)}function Qr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ts=!1;function Hc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ip(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ss(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,$e&2){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,Qr(n,a)}return p=c.interleaved,p===null?(s.next=s,qc(c)):(s.next=p.next,p.next=s),c.interleaved=s,Qr(n,a)}function jl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ds(n,a)}}function ap(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var p=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?p=y=S:y=y.next=S,a=a.next}while(a!==null);y===null?p=y=s:y=y.next=s}else p=y=s;a={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ul(n,s,a,c){var p=n.updateQueue;Ts=!1;var y=p.firstBaseUpdate,S=p.lastBaseUpdate,O=p.shared.pending;if(O!==null){p.shared.pending=null;var L=O,H=L.next;L.next=null,S===null?y=H:S.next=H,S=L;var re=n.alternate;re!==null&&(re=re.updateQueue,O=re.lastBaseUpdate,O!==S&&(O===null?re.firstBaseUpdate=H:O.next=H,re.lastBaseUpdate=L))}if(y!==null){var se=p.baseState;S=0,re=H=L=null,O=y;do{var ne=O.lane,ge=O.eventTime;if((c&ne)===ne){re!==null&&(re=re.next={eventTime:ge,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var _e=n,we=O;switch(ne=s,ge=a,we.tag){case 1:if(_e=we.payload,typeof _e=="function"){se=_e.call(ge,se,ne);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,ne=typeof _e=="function"?_e.call(ge,se,ne):_e,ne==null)break e;se=J({},se,ne);break e;case 2:Ts=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,ne=p.effects,ne===null?p.effects=[O]:ne.push(O))}else ge={eventTime:ge,lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},re===null?(H=re=ge,L=se):re=re.next=ge,S|=ne;if(O=O.next,O===null){if(O=p.shared.pending,O===null)break;ne=O,O=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);if(re===null&&(L=se),p.baseState=L,p.firstBaseUpdate=H,p.lastBaseUpdate=re,s=p.shared.interleaved,s!==null){p=s;do S|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);wo|=S,n.lanes=S,n.memoizedState=se}}function lp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],p=c.callback;if(p!==null){if(c.callback=null,c=a,typeof p!="function")throw Error(t(191,p));p.call(c)}}}var fa={},Ir=_s(fa),pa=_s(fa),ma=_s(fa);function vo(n){if(n===fa)throw Error(t(174));return n}function Gc(n,s){switch(Je(ma,s),Je(pa,n),Je(Ir,fa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}tt(Ir),Je(Ir,s)}function mi(){tt(Ir),tt(pa),tt(ma)}function up(n){vo(ma.current);var s=vo(Ir.current),a=mt(s,n.type);s!==a&&(Je(pa,n),Je(Ir,a))}function Qc(n){pa.current===n&&(tt(Ir),tt(pa))}var it=_s(0);function Bl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Kc=[];function Xc(){for(var n=0;n<Kc.length;n++)Kc[n]._workInProgressVersionPrimary=null;Kc.length=0}var zl=Y.ReactCurrentDispatcher,Yc=Y.ReactCurrentBatchConfig,_o=0,at=null,At=null,Mt=null,$l=!1,ga=!1,ya=0,u0=0;function qt(){throw Error(t(321))}function Zc(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!ar(n[a],s[a]))return!1;return!0}function Jc(n,s,a,c,p,y){if(_o=y,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,zl.current=n===null||n.memoizedState===null?f0:p0,n=a(c,p),ga){y=0;do{if(ga=!1,ya=0,25<=y)throw Error(t(301));y+=1,Mt=At=null,s.updateQueue=null,zl.current=m0,n=a(c,p)}while(ga)}if(zl.current=Hl,s=At!==null&&At.next!==null,_o=0,Mt=At=at=null,$l=!1,s)throw Error(t(300));return n}function eh(){var n=ya!==0;return ya=0,n}function Cr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?at.memoizedState=Mt=n:Mt=Mt.next=n,Mt}function Bn(){if(At===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var s=Mt===null?at.memoizedState:Mt.next;if(s!==null)Mt=s,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Mt===null?at.memoizedState=Mt=n:Mt=Mt.next=n}return Mt}function va(n,s){return typeof s=="function"?s(n):s}function th(n){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=At,p=c.baseQueue,y=a.pending;if(y!==null){if(p!==null){var S=p.next;p.next=y.next,y.next=S}c.baseQueue=p=y,a.pending=null}if(p!==null){y=p.next,c=c.baseState;var O=S=null,L=null,H=y;do{var re=H.lane;if((_o&re)===re)L!==null&&(L=L.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var se={lane:re,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};L===null?(O=L=se,S=c):L=L.next=se,at.lanes|=re,wo|=re}H=H.next}while(H!==null&&H!==y);L===null?S=c:L.next=O,ar(c,s.memoizedState)||(dn=!0),s.memoizedState=c,s.baseState=S,s.baseQueue=L,a.lastRenderedState=c}if(n=a.interleaved,n!==null){p=n;do y=p.lane,at.lanes|=y,wo|=y,p=p.next;while(p!==n)}else p===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function nh(n){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,p=a.pending,y=s.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do y=n(y,S.action),S=S.next;while(S!==p);ar(y,s.memoizedState)||(dn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,c]}function cp(){}function hp(n,s){var a=at,c=Bn(),p=s(),y=!ar(c.memoizedState,p);if(y&&(c.memoizedState=p,dn=!0),c=c.queue,rh(pp.bind(null,a,c,n),[n]),c.getSnapshot!==s||y||Mt!==null&&Mt.memoizedState.tag&1){if(a.flags|=2048,_a(9,fp.bind(null,a,c,p,s),void 0,null),Vt===null)throw Error(t(349));_o&30||dp(a,s,p)}return p}function dp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function fp(n,s,a,c){s.value=a,s.getSnapshot=c,mp(s)&&gp(n)}function pp(n,s,a){return a(function(){mp(s)&&gp(n)})}function mp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!ar(n,a)}catch{return!0}}function gp(n){var s=Qr(n,1);s!==null&&dr(s,n,1,-1)}function yp(n){var s=Cr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},s.queue=n,n=n.dispatch=d0.bind(null,at,n),[s.memoizedState,n]}function _a(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function vp(){return Bn().memoizedState}function Wl(n,s,a,c){var p=Cr();at.flags|=n,p.memoizedState=_a(1|s,a,void 0,c===void 0?null:c)}function ql(n,s,a,c){var p=Bn();c=c===void 0?null:c;var y=void 0;if(At!==null){var S=At.memoizedState;if(y=S.destroy,c!==null&&Zc(c,S.deps)){p.memoizedState=_a(s,a,y,c);return}}at.flags|=n,p.memoizedState=_a(1|s,a,y,c)}function _p(n,s){return Wl(8390656,8,n,s)}function rh(n,s){return ql(2048,8,n,s)}function wp(n,s){return ql(4,2,n,s)}function Ep(n,s){return ql(4,4,n,s)}function Tp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sp(n,s,a){return a=a!=null?a.concat([n]):null,ql(4,4,Tp.bind(null,s,n),a)}function sh(){}function Ip(n,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Zc(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Cp(n,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Zc(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Np(n,s,a){return _o&21?(ar(a,s)||(a=ao(),at.lanes|=a,wo|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,dn=!0),n.memoizedState=a)}function c0(n,s){var a=Oe;Oe=a!==0&&4>a?a:4,n(!0);var c=Yc.transition;Yc.transition={};try{n(!1),s()}finally{Oe=a,Yc.transition=c}}function Ap(){return Bn().memoizedState}function h0(n,s,a){var c=As(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},kp(n))Rp(s,a);else if(a=op(n,s,a,c),a!==null){var p=sn();dr(a,n,c,p),Pp(a,s,c)}}function d0(n,s,a){var c=As(n),p={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(kp(n))Rp(s,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,O=y(S,a);if(p.hasEagerState=!0,p.eagerState=O,ar(O,S)){var L=s.interleaved;L===null?(p.next=p,qc(s)):(p.next=L.next,L.next=p),s.interleaved=p;return}}catch{}finally{}a=op(n,s,p,c),a!==null&&(p=sn(),dr(a,n,c,p),Pp(a,s,c))}}function kp(n){var s=n.alternate;return n===at||s!==null&&s===at}function Rp(n,s){ga=$l=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Pp(n,s,a){if(a&4194240){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ds(n,a)}}var Hl={readContext:Un,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},f0={readContext:Un,useCallback:function(n,s){return Cr().memoizedState=[n,s===void 0?null:s],n},useContext:Un,useEffect:_p,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Wl(4194308,4,Tp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Wl(4194308,4,n,s)},useInsertionEffect:function(n,s){return Wl(4,2,n,s)},useMemo:function(n,s){var a=Cr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Cr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=h0.bind(null,at,n),[c.memoizedState,n]},useRef:function(n){var s=Cr();return n={current:n},s.memoizedState=n},useState:yp,useDebugValue:sh,useDeferredValue:function(n){return Cr().memoizedState=n},useTransition:function(){var n=yp(!1),s=n[0];return n=c0.bind(null,n[1]),Cr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=at,p=Cr();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Vt===null)throw Error(t(349));_o&30||dp(c,s,a)}p.memoizedState=a;var y={value:a,getSnapshot:s};return p.queue=y,_p(pp.bind(null,c,y,n),[n]),c.flags|=2048,_a(9,fp.bind(null,c,y,a,s),void 0,null),a},useId:function(){var n=Cr(),s=Vt.identifierPrefix;if(st){var a=Gr,c=Hr;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ya++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=u0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},p0={readContext:Un,useCallback:Ip,useContext:Un,useEffect:rh,useImperativeHandle:Sp,useInsertionEffect:wp,useLayoutEffect:Ep,useMemo:Cp,useReducer:th,useRef:vp,useState:function(){return th(va)},useDebugValue:sh,useDeferredValue:function(n){var s=Bn();return Np(s,At.memoizedState,n)},useTransition:function(){var n=th(va)[0],s=Bn().memoizedState;return[n,s]},useMutableSource:cp,useSyncExternalStore:hp,useId:Ap,unstable_isNewReconciler:!1},m0={readContext:Un,useCallback:Ip,useContext:Un,useEffect:rh,useImperativeHandle:Sp,useInsertionEffect:wp,useLayoutEffect:Ep,useMemo:Cp,useReducer:nh,useRef:vp,useState:function(){return nh(va)},useDebugValue:sh,useDeferredValue:function(n){var s=Bn();return At===null?s.memoizedState=n:Np(s,At.memoizedState,n)},useTransition:function(){var n=nh(va)[0],s=Bn().memoizedState;return[n,s]},useMutableSource:cp,useSyncExternalStore:hp,useId:Ap,unstable_isNewReconciler:!1};function ur(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function oh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:J({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gl={isMounted:function(n){return(n=n._reactInternals)?er(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=sn(),p=As(n),y=Kr(c,p);y.payload=s,a!=null&&(y.callback=a),s=Ss(n,y,p),s!==null&&(dr(s,n,p,c),jl(s,n,p))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=sn(),p=As(n),y=Kr(c,p);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Ss(n,y,p),s!==null&&(dr(s,n,p,c),jl(s,n,p))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=sn(),c=As(n),p=Kr(a,c);p.tag=2,s!=null&&(p.callback=s),s=Ss(n,p,c),s!==null&&(dr(s,n,c,a),jl(s,n,c))}};function xp(n,s,a,c,p,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,S):s.prototype&&s.prototype.isPureReactComponent?!oa(a,c)||!oa(p,y):!0}function Dp(n,s,a){var c=!1,p=ws,y=s.contextType;return typeof y=="object"&&y!==null?y=Un(y):(p=hn(s)?po:Wt.current,c=s.contextTypes,y=(c=c!=null)?li(n,p):ws),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gl,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=y),s}function Mp(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Gl.enqueueReplaceState(s,s.state,null)}function ih(n,s,a,c){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs={},Hc(n);var y=s.contextType;typeof y=="object"&&y!==null?p.context=Un(y):(y=hn(s)?po:Wt.current,p.context=li(n,y)),p.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(oh(n,s,y,a),p.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Gl.enqueueReplaceState(p,p.state,null),Ul(n,a,p,c),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function gi(n,s){try{var a="",c=s;do a+=fe(c),c=c.return;while(c);var p=a}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:p,digest:null}}function ah(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function lh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var g0=typeof WeakMap=="function"?WeakMap:Map;function Vp(n,s,a){a=Kr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){eu||(eu=!0,Sh=c),lh(n,s)},a}function Op(n,s,a){a=Kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var p=s.value;a.payload=function(){return c(p)},a.callback=function(){lh(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){lh(n,s),typeof c!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),a}function bp(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new g0;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(a)||(p.add(a),n=P0.bind(null,n,s,a),s.then(n,n))}function Fp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Lp(n,s,a,c,p){return n.mode&1?(n.flags|=65536,n.lanes=p,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Kr(-1,1),s.tag=2,Ss(a,s,1))),a.lanes|=1),n)}var y0=Y.ReactCurrentOwner,dn=!1;function rn(n,s,a,c){s.child=n===null?sp(s,null,a,c):di(s,n.child,a,c)}function jp(n,s,a,c,p){a=a.render;var y=s.ref;return pi(s,p),c=Jc(n,s,a,c,y,p),a=eh(),n!==null&&!dn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~p,Xr(n,s,p)):(st&&a&&bc(s),s.flags|=1,rn(n,s,c,p),s.child)}function Up(n,s,a,c,p){if(n===null){var y=a.type;return typeof y=="function"&&!Ph(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Bp(n,s,y,c,p)):(n=iu(a.type,null,c,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&p)){var S=y.memoizedProps;if(a=a.compare,a=a!==null?a:oa,a(S,c)&&n.ref===s.ref)return Xr(n,s,p)}return s.flags|=1,n=Rs(y,c),n.ref=s.ref,n.return=s,s.child=n}function Bp(n,s,a,c,p){if(n!==null){var y=n.memoizedProps;if(oa(y,c)&&n.ref===s.ref)if(dn=!1,s.pendingProps=c=y,(n.lanes&p)!==0)n.flags&131072&&(dn=!0);else return s.lanes=n.lanes,Xr(n,s,p)}return uh(n,s,a,c,p)}function zp(n,s,a){var c=s.pendingProps,p=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(vi,xn),xn|=a;else{if(!(a&1073741824))return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(vi,xn),xn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=y!==null?y.baseLanes:a,Je(vi,xn),xn|=c}else y!==null?(c=y.baseLanes|a,s.memoizedState=null):c=a,Je(vi,xn),xn|=c;return rn(n,s,p,a),s.child}function $p(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function uh(n,s,a,c,p){var y=hn(a)?po:Wt.current;return y=li(s,y),pi(s,p),a=Jc(n,s,a,c,y,p),c=eh(),n!==null&&!dn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~p,Xr(n,s,p)):(st&&c&&bc(s),s.flags|=1,rn(n,s,a,p),s.child)}function Wp(n,s,a,c,p){if(hn(a)){var y=!0;xl(s)}else y=!1;if(pi(s,p),s.stateNode===null)Kl(n,s),Dp(s,a,c),ih(s,a,c,p),c=!0;else if(n===null){var S=s.stateNode,O=s.memoizedProps;S.props=O;var L=S.context,H=a.contextType;typeof H=="object"&&H!==null?H=Un(H):(H=hn(a)?po:Wt.current,H=li(s,H));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function";se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==c||L!==H)&&Mp(s,S,c,H),Ts=!1;var ne=s.memoizedState;S.state=ne,Ul(s,c,S,p),L=s.memoizedState,O!==c||ne!==L||cn.current||Ts?(typeof re=="function"&&(oh(s,a,re,c),L=s.memoizedState),(O=Ts||xp(s,a,O,c,ne,L,H))?(se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=L),S.props=c,S.state=L,S.context=H,c=O):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{S=s.stateNode,ip(n,s),O=s.memoizedProps,H=s.type===s.elementType?O:ur(s.type,O),S.props=H,se=s.pendingProps,ne=S.context,L=a.contextType,typeof L=="object"&&L!==null?L=Un(L):(L=hn(a)?po:Wt.current,L=li(s,L));var ge=a.getDerivedStateFromProps;(re=typeof ge=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==se||ne!==L)&&Mp(s,S,c,L),Ts=!1,ne=s.memoizedState,S.state=ne,Ul(s,c,S,p);var _e=s.memoizedState;O!==se||ne!==_e||cn.current||Ts?(typeof ge=="function"&&(oh(s,a,ge,c),_e=s.memoizedState),(H=Ts||xp(s,a,H,c,ne,_e,L)||!1)?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(c,_e,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(c,_e,L)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=_e),S.props=c,S.state=_e,S.context=L,c=H):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return ch(n,s,a,c,y,p)}function ch(n,s,a,c,p,y){$p(n,s);var S=(s.flags&128)!==0;if(!c&&!S)return p&&Kf(s,a,!1),Xr(n,s,y);c=s.stateNode,y0.current=s;var O=S&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&S?(s.child=di(s,n.child,null,y),s.child=di(s,null,O,y)):rn(n,s,O,y),s.memoizedState=c.state,p&&Kf(s,a,!0),s.child}function qp(n){var s=n.stateNode;s.pendingContext?Gf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Gf(n,s.context,!1),Gc(n,s.containerInfo)}function Hp(n,s,a,c,p){return hi(),Uc(p),s.flags|=256,rn(n,s,a,c),s.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gp(n,s,a){var c=s.pendingProps,p=it.current,y=!1,S=(s.flags&128)!==0,O;if((O=S)||(O=n!==null&&n.memoizedState===null?!1:(p&2)!==0),O?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Je(it,p&1),n===null)return jc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=c.children,n=c.fallback,y?(c=s.mode,y=s.child,S={mode:"hidden",children:S},!(c&1)&&y!==null?(y.childLanes=0,y.pendingProps=S):y=au(S,c,0,null),n=Io(n,c,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=dh(a),s.memoizedState=hh,n):fh(s,S));if(p=n.memoizedState,p!==null&&(O=p.dehydrated,O!==null))return v0(n,s,S,c,O,p,a);if(y){y=c.fallback,S=s.mode,p=n.child,O=p.sibling;var L={mode:"hidden",children:c.children};return!(S&1)&&s.child!==p?(c=s.child,c.childLanes=0,c.pendingProps=L,s.deletions=null):(c=Rs(p,L),c.subtreeFlags=p.subtreeFlags&14680064),O!==null?y=Rs(O,y):(y=Io(y,S,a,null),y.flags|=2),y.return=s,c.return=s,c.sibling=y,s.child=c,c=y,y=s.child,S=n.child.memoizedState,S=S===null?dh(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=n.childLanes&~a,s.memoizedState=hh,c}return y=n.child,n=y.sibling,c=Rs(y,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function fh(n,s){return s=au({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ql(n,s,a,c){return c!==null&&Uc(c),di(s,n.child,null,a),n=fh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function v0(n,s,a,c,p,y,S){if(a)return s.flags&256?(s.flags&=-257,c=ah(Error(t(422))),Ql(n,s,S,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=c.fallback,p=s.mode,c=au({mode:"visible",children:c.children},p,0,null),y=Io(y,p,S,null),y.flags|=2,c.return=s,y.return=s,c.sibling=y,s.child=c,s.mode&1&&di(s,n.child,null,S),s.child.memoizedState=dh(S),s.memoizedState=hh,y);if(!(s.mode&1))return Ql(n,s,S,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var O=c.dgst;return c=O,y=Error(t(419)),c=ah(y,c,void 0),Ql(n,s,S,c)}if(O=(S&n.childLanes)!==0,dn||O){if(c=Vt,c!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(c.suspendedLanes|S)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Qr(n,p),dr(c,n,p,-1))}return Rh(),c=ah(Error(t(421))),Ql(n,s,S,c)}return p.data==="$?"?(s.flags|=128,s.child=n.child,s=x0.bind(null,n),p._reactRetry=s,null):(n=y.treeContext,Pn=vs(p.nextSibling),Rn=s,st=!0,lr=null,n!==null&&(Ln[jn++]=Hr,Ln[jn++]=Gr,Ln[jn++]=mo,Hr=n.id,Gr=n.overflow,mo=s),s=fh(s,c.children),s.flags|=4096,s)}function Qp(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Wc(n.return,s,a)}function ph(n,s,a,c,p){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=p)}function Kp(n,s,a){var c=s.pendingProps,p=c.revealOrder,y=c.tail;if(rn(n,s,c.children,a),c=it.current,c&2)c=c&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qp(n,a,s);else if(n.tag===19)Qp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Je(it,c),!(s.mode&1))s.memoizedState=null;else switch(p){case"forwards":for(a=s.child,p=null;a!==null;)n=a.alternate,n!==null&&Bl(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=s.child,s.child=null):(p=a.sibling,a.sibling=null),ph(s,!1,p,a,y);break;case"backwards":for(a=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Bl(n)===null){s.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}ph(s,!0,a,null,y);break;case"together":ph(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Kl(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Xr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),wo|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Rs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Rs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function _0(n,s,a){switch(s.tag){case 3:qp(s),hi();break;case 5:up(s);break;case 1:hn(s.type)&&xl(s);break;case 4:Gc(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,p=s.memoizedProps.value;Je(Fl,c._currentValue),c._currentValue=p;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Je(it,it.current&1),s.flags|=128,null):a&s.child.childLanes?Gp(n,s,a):(Je(it,it.current&1),n=Xr(n,s,a),n!==null?n.sibling:null);Je(it,it.current&1);break;case 19:if(c=(a&s.childLanes)!==0,n.flags&128){if(c)return Kp(n,s,a);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Je(it,it.current),c)break;return null;case 22:case 23:return s.lanes=0,zp(n,s,a)}return Xr(n,s,a)}var Xp,mh,Yp,Zp;Xp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},mh=function(){},Yp=function(n,s,a,c){var p=n.memoizedProps;if(p!==c){n=s.stateNode,vo(Ir.current);var y=null;switch(a){case"input":p=ze(n,p),c=ze(n,c),y=[];break;case"select":p=J({},p,{value:void 0}),c=J({},c,{value:void 0}),y=[];break;case"textarea":p=os(n,p),c=os(n,c),y=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=kl)}Te(a,c);var S;a=null;for(H in p)if(!c.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var O=p[H];for(S in O)O.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in c){var L=c[H];if(O=p!=null?p[H]:void 0,c.hasOwnProperty(H)&&L!==O&&(L!=null||O!=null))if(H==="style")if(O){for(S in O)!O.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in L)L.hasOwnProperty(S)&&O[S]!==L[S]&&(a||(a={}),a[S]=L[S])}else a||(y||(y=[]),y.push(H,a)),a=L;else H==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,O=O?O.__html:void 0,L!=null&&O!==L&&(y=y||[]).push(H,L)):H==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(H,""+L):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(L!=null&&H==="onScroll"&&et("scroll",n),y||O===L||(y=[])):(y=y||[]).push(H,L))}a&&(y=y||[]).push("style",a);var H=y;(s.updateQueue=H)&&(s.flags|=4)}},Zp=function(n,s,a,c){a!==c&&(s.flags|=4)};function wa(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var p=n.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function w0(n,s,a){var c=s.pendingProps;switch(Fc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return hn(s.type)&&Pl(),Ht(s),null;case 3:return c=s.stateNode,mi(),tt(cn),tt(Wt),Xc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ol(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,lr!==null&&(Nh(lr),lr=null))),mh(n,s),Ht(s),null;case 5:Qc(s);var p=vo(ma.current);if(a=s.type,n!==null&&s.stateNode!=null)Yp(n,s,a,c,p),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ht(s),null}if(n=vo(Ir.current),Ol(s)){c=s.stateNode,a=s.type;var y=s.memoizedProps;switch(c[Sr]=s,c[ca]=y,n=(s.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(p=0;p<aa.length;p++)et(aa[p],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":wn(c,y),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!y.multiple},et("invalid",c);break;case"textarea":En(c,y),et("invalid",c)}Te(a,y),p=null;for(var S in y)if(y.hasOwnProperty(S)){var O=y[S];S==="children"?typeof O=="string"?c.textContent!==O&&(y.suppressHydrationWarning!==!0&&Al(c.textContent,O,n),p=["children",O]):typeof O=="number"&&c.textContent!==""+O&&(y.suppressHydrationWarning!==!0&&Al(c.textContent,O,n),p=["children",""+O]):i.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&et("scroll",c)}switch(a){case"input":xt(c),Lo(c,y,!0);break;case"textarea":xt(c),as(c);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(c.onclick=kl)}c=p,s.updateQueue=c,c!==null&&(s.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ct(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=S.createElement(a,{is:c.is}):(n=S.createElement(a),a==="select"&&(S=n,c.multiple?S.multiple=!0:c.size&&(S.size=c.size))):n=S.createElementNS(n,a),n[Sr]=s,n[ca]=c,Xp(n,s,!1,!1),s.stateNode=n;e:{switch(S=ke(a,c),a){case"dialog":et("cancel",n),et("close",n),p=c;break;case"iframe":case"object":case"embed":et("load",n),p=c;break;case"video":case"audio":for(p=0;p<aa.length;p++)et(aa[p],n);p=c;break;case"source":et("error",n),p=c;break;case"img":case"image":case"link":et("error",n),et("load",n),p=c;break;case"details":et("toggle",n),p=c;break;case"input":wn(n,c),p=ze(n,c),et("invalid",n);break;case"option":p=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},p=J({},c,{value:void 0}),et("invalid",n);break;case"textarea":En(n,c),p=os(n,c),et("invalid",n);break;default:p=c}Te(a,p),O=p;for(y in O)if(O.hasOwnProperty(y)){var L=O[y];y==="style"?Zs(n,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Xs(n,L)):y==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&Kn(n,L):typeof L=="number"&&Kn(n,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?L!=null&&y==="onScroll"&&et("scroll",n):L!=null&&Q(n,y,L,S))}switch(a){case"input":xt(n),Lo(n,c,!1);break;case"textarea":xt(n),as(n);break;case"option":c.value!=null&&n.setAttribute("value",""+ue(c.value));break;case"select":n.multiple=!!c.multiple,y=c.value,y!=null?Gn(n,!!c.multiple,y,!1):c.defaultValue!=null&&Gn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=kl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ht(s),null;case 6:if(n&&s.stateNode!=null)Zp(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=vo(ma.current),vo(Ir.current),Ol(s)){if(c=s.stateNode,a=s.memoizedProps,c[Sr]=s,(y=c.nodeValue!==a)&&(n=Rn,n!==null))switch(n.tag){case 3:Al(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Al(c.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Sr]=s,s.stateNode=c}return Ht(s),null;case 13:if(tt(it),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&Pn!==null&&s.mode&1&&!(s.flags&128))tp(),hi(),s.flags|=98560,y=!1;else if(y=Ol(s),c!==null&&c.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Sr]=s}else hi(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ht(s),y=!1}else lr!==null&&(Nh(lr),lr=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(n===null||it.current&1?kt===0&&(kt=3):Rh())),s.updateQueue!==null&&(s.flags|=4),Ht(s),null);case 4:return mi(),mh(n,s),n===null&&la(s.stateNode.containerInfo),Ht(s),null;case 10:return $c(s.type._context),Ht(s),null;case 17:return hn(s.type)&&Pl(),Ht(s),null;case 19:if(tt(it),y=s.memoizedState,y===null)return Ht(s),null;if(c=(s.flags&128)!==0,S=y.rendering,S===null)if(c)wa(y,!1);else{if(kt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(S=Bl(n),S!==null){for(s.flags|=128,wa(y,!1),c=S.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)y=a,n=c,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,n=S.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(it,it.current&1|2),s.child}n=n.sibling}y.tail!==null&&Ze()>_i&&(s.flags|=128,c=!0,wa(y,!1),s.lanes=4194304)}else{if(!c)if(n=Bl(S),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),wa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!st)return Ht(s),null}else 2*Ze()-y.renderingStartTime>_i&&a!==1073741824&&(s.flags|=128,c=!0,wa(y,!1),s.lanes=4194304);y.isBackwards?(S.sibling=s.child,s.child=S):(a=y.last,a!==null?a.sibling=S:s.child=S,y.last=S)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ze(),s.sibling=null,a=it.current,Je(it,c?a&1|2:a&1),s):(Ht(s),null);case 22:case 23:return kh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?xn&1073741824&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function E0(n,s){switch(Fc(s),s.tag){case 1:return hn(s.type)&&Pl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return mi(),tt(cn),tt(Wt),Xc(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Qc(s),null;case 13:if(tt(it),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));hi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(it),null;case 4:return mi(),null;case 10:return $c(s.type._context),null;case 22:case 23:return kh(),null;case 24:return null;default:return null}}var Xl=!1,Gt=!1,T0=typeof WeakSet=="function"?WeakSet:Set,ve=null;function yi(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ht(n,s,c)}else a.current=null}function gh(n,s,a){try{a()}catch(c){ht(n,s,c)}}var Jp=!1;function S0(n,s){if(kc=ms,n=xf(),wc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var S=0,O=-1,L=-1,H=0,re=0,se=n,ne=null;t:for(;;){for(var ge;se!==a||p!==0&&se.nodeType!==3||(O=S+p),se!==y||c!==0&&se.nodeType!==3||(L=S+c),se.nodeType===3&&(S+=se.nodeValue.length),(ge=se.firstChild)!==null;)ne=se,se=ge;for(;;){if(se===n)break t;if(ne===a&&++H===p&&(O=S),ne===y&&++re===c&&(L=S),(ge=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=ge}a=O===-1||L===-1?null:{start:O,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rc={focusedElem:n,selectionRange:a},ms=!1,ve=s;ve!==null;)if(s=ve,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ve=n;else for(;ve!==null;){s=ve;try{var _e=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var we=_e.memoizedProps,vt=_e.memoizedState,$=s.stateNode,U=$.getSnapshotBeforeUpdate(s.elementType===s.type?we:ur(s.type,we),vt);$.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ht(s,s.return,ae)}if(n=s.sibling,n!==null){n.return=s.return,ve=n;break}ve=s.return}return _e=Jp,Jp=!1,_e}function Ea(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&n)===n){var y=p.destroy;p.destroy=void 0,y!==void 0&&gh(s,a,y)}p=p.next}while(p!==c)}}function Yl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function yh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function em(n){var s=n.alternate;s!==null&&(n.alternate=null,em(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Sr],delete s[ca],delete s[Mc],delete s[o0],delete s[i0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tm(n){return n.tag===5||n.tag===3||n.tag===4}function nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=kl));else if(c!==4&&(n=n.child,n!==null))for(vh(n,s,a),n=n.sibling;n!==null;)vh(n,s,a),n=n.sibling}function _h(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(_h(n,s,a),n=n.sibling;n!==null;)_h(n,s,a),n=n.sibling}var Ut=null,cr=!1;function Is(n,s,a){for(a=a.child;a!==null;)rm(n,s,a),a=a.sibling}function rm(n,s,a){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(oo,a)}catch{}switch(a.tag){case 5:Gt||yi(a,s);case 6:var c=Ut,p=cr;Ut=null,Is(n,s,a),Ut=c,cr=p,Ut!==null&&(cr?(n=Ut,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ut.removeChild(a.stateNode));break;case 18:Ut!==null&&(cr?(n=Ut,a=a.stateNode,n.nodeType===8?Dc(n.parentNode,a):n.nodeType===1&&Dc(n,a),or(n)):Dc(Ut,a.stateNode));break;case 4:c=Ut,p=cr,Ut=a.stateNode.containerInfo,cr=!0,Is(n,s,a),Ut=c,cr=p;break;case 0:case 11:case 14:case 15:if(!Gt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var y=p,S=y.destroy;y=y.tag,S!==void 0&&(y&2||y&4)&&gh(a,s,S),p=p.next}while(p!==c)}Is(n,s,a);break;case 1:if(!Gt&&(yi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(O){ht(a,s,O)}Is(n,s,a);break;case 21:Is(n,s,a);break;case 22:a.mode&1?(Gt=(c=Gt)||a.memoizedState!==null,Is(n,s,a),Gt=c):Is(n,s,a);break;default:Is(n,s,a)}}function sm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new T0),s.forEach(function(c){var p=D0.bind(null,n,c);a.has(c)||(a.add(c),c.then(p,p))})}}function hr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];try{var y=n,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 5:Ut=O.stateNode,cr=!1;break e;case 3:Ut=O.stateNode.containerInfo,cr=!0;break e;case 4:Ut=O.stateNode.containerInfo,cr=!0;break e}O=O.return}if(Ut===null)throw Error(t(160));rm(y,S,p),Ut=null,cr=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch(H){ht(p,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)om(s,n),s=s.sibling}function om(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(hr(s,n),Nr(n),c&4){try{Ea(3,n,n.return),Yl(3,n)}catch(we){ht(n,n.return,we)}try{Ea(5,n,n.return)}catch(we){ht(n,n.return,we)}}break;case 1:hr(s,n),Nr(n),c&512&&a!==null&&yi(a,a.return);break;case 5:if(hr(s,n),Nr(n),c&512&&a!==null&&yi(a,a.return),n.flags&32){var p=n.stateNode;try{Kn(p,"")}catch(we){ht(n,n.return,we)}}if(c&4&&(p=n.stateNode,p!=null)){var y=n.memoizedProps,S=a!==null?a.memoizedProps:y,O=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{O==="input"&&y.type==="radio"&&y.name!=null&&Qs(p,y),ke(O,S);var H=ke(O,y);for(S=0;S<L.length;S+=2){var re=L[S],se=L[S+1];re==="style"?Zs(p,se):re==="dangerouslySetInnerHTML"?Xs(p,se):re==="children"?Kn(p,se):Q(p,re,se,H)}switch(O){case"input":Ks(p,y);break;case"textarea":is(p,y);break;case"select":var ne=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Gn(p,!!y.multiple,ge,!1):ne!==!!y.multiple&&(y.defaultValue!=null?Gn(p,!!y.multiple,y.defaultValue,!0):Gn(p,!!y.multiple,y.multiple?[]:"",!1))}p[ca]=y}catch(we){ht(n,n.return,we)}}break;case 6:if(hr(s,n),Nr(n),c&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,y=n.memoizedProps;try{p.nodeValue=y}catch(we){ht(n,n.return,we)}}break;case 3:if(hr(s,n),Nr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{or(s.containerInfo)}catch(we){ht(n,n.return,we)}break;case 4:hr(s,n),Nr(n);break;case 13:hr(s,n),Nr(n),p=n.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Th=Ze())),c&4&&sm(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(Gt=(H=Gt)||re,hr(s,n),Gt=H):hr(s,n),Nr(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!re&&n.mode&1)for(ve=n,re=n.child;re!==null;){for(se=ve=re;ve!==null;){switch(ne=ve,ge=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ea(4,ne,ne.return);break;case 1:yi(ne,ne.return);var _e=ne.stateNode;if(typeof _e.componentWillUnmount=="function"){c=ne,a=ne.return;try{s=c,_e.props=s.memoizedProps,_e.state=s.memoizedState,_e.componentWillUnmount()}catch(we){ht(c,a,we)}}break;case 5:yi(ne,ne.return);break;case 22:if(ne.memoizedState!==null){lm(se);continue}}ge!==null?(ge.return=ne,ve=ge):lm(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{p=se.stateNode,H?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(O=se.stateNode,L=se.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,O.style.display=Ys("display",S))}catch(we){ht(n,n.return,we)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=H?"":se.memoizedProps}catch(we){ht(n,n.return,we)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:hr(s,n),Nr(n),c&4&&sm(n);break;case 21:break;default:hr(s,n),Nr(n)}}function Nr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(tm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(Kn(p,""),c.flags&=-33);var y=nm(n);_h(n,y,p);break;case 3:case 4:var S=c.stateNode.containerInfo,O=nm(n);vh(n,O,S);break;default:throw Error(t(161))}}catch(L){ht(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function I0(n,s,a){ve=n,im(n)}function im(n,s,a){for(var c=(n.mode&1)!==0;ve!==null;){var p=ve,y=p.child;if(p.tag===22&&c){var S=p.memoizedState!==null||Xl;if(!S){var O=p.alternate,L=O!==null&&O.memoizedState!==null||Gt;O=Xl;var H=Gt;if(Xl=S,(Gt=L)&&!H)for(ve=p;ve!==null;)S=ve,L=S.child,S.tag===22&&S.memoizedState!==null?um(p):L!==null?(L.return=S,ve=L):um(p);for(;y!==null;)ve=y,im(y),y=y.sibling;ve=p,Xl=O,Gt=H}am(n)}else p.subtreeFlags&8772&&y!==null?(y.return=p,ve=y):am(n)}}function am(n){for(;ve!==null;){var s=ve;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Gt||Yl(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Gt)if(a===null)c.componentDidMount();else{var p=s.elementType===s.type?a.memoizedProps:ur(s.type,a.memoizedProps);c.componentDidUpdate(p,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&lp(s,y,c);break;case 3:var S=s.updateQueue;if(S!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}lp(s,S,a)}break;case 5:var O=s.stateNode;if(a===null&&s.flags&4){a=O;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var re=H.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&or(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&yh(s)}catch(ne){ht(s,s.return,ne)}}if(s===n){ve=null;break}if(a=s.sibling,a!==null){a.return=s.return,ve=a;break}ve=s.return}}function lm(n){for(;ve!==null;){var s=ve;if(s===n){ve=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ve=a;break}ve=s.return}}function um(n){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Yl(4,s)}catch(L){ht(s,a,L)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var p=s.return;try{c.componentDidMount()}catch(L){ht(s,p,L)}}var y=s.return;try{yh(s)}catch(L){ht(s,y,L)}break;case 5:var S=s.return;try{yh(s)}catch(L){ht(s,S,L)}}}catch(L){ht(s,s.return,L)}if(s===n){ve=null;break}var O=s.sibling;if(O!==null){O.return=s.return,ve=O;break}ve=s.return}}var C0=Math.ceil,Zl=Y.ReactCurrentDispatcher,wh=Y.ReactCurrentOwner,zn=Y.ReactCurrentBatchConfig,$e=0,Vt=null,St=null,Bt=0,xn=0,vi=_s(0),kt=0,Ta=null,wo=0,Jl=0,Eh=0,Sa=null,fn=null,Th=0,_i=1/0,Yr=null,eu=!1,Sh=null,Cs=null,tu=!1,Ns=null,nu=0,Ia=0,Ih=null,ru=-1,su=0;function sn(){return $e&6?Ze():ru!==-1?ru:ru=Ze()}function As(n){return n.mode&1?$e&2&&Bt!==0?Bt&-Bt:l0.transition!==null?(su===0&&(su=ao()),su):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:Zi(n.type)),n):1}function dr(n,s,a,c){if(50<Ia)throw Ia=0,Ih=null,Error(t(185));hs(n,a,c),(!($e&2)||n!==Vt)&&(n===Vt&&(!($e&2)&&(Jl|=a),kt===4&&ks(n,Bt)),pn(n,c),a===1&&$e===0&&!(s.mode&1)&&(_i=Ze()+500,Dl&&Es()))}function pn(n,s){var a=n.callbackNode;jr(n,s);var c=io(n,n===Vt?Bt:0);if(c===0)a!==null&&Gi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Gi(a),s===1)n.tag===0?a0(hm.bind(null,n)):Xf(hm.bind(null,n)),r0(function(){!($e&6)&&Es()}),a=null;else{switch(fs(c)){case 1:a=so;break;case 4:a=ls;break;case 16:a=On;break;case 536870912:a=sl;break;default:a=On}a=_m(a,cm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function cm(n,s){if(ru=-1,su=0,$e&6)throw Error(t(327));var a=n.callbackNode;if(wi()&&n.callbackNode!==a)return null;var c=io(n,n===Vt?Bt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||s)s=ou(n,c);else{s=c;var p=$e;$e|=2;var y=fm();(Vt!==n||Bt!==s)&&(Yr=null,_i=Ze()+500,To(n,s));do try{k0();break}catch(O){dm(n,O)}while(!0);zc(),Zl.current=y,$e=p,St!==null?s=0:(Vt=null,Bt=0,s=kt)}if(s!==0){if(s===2&&(p=Nn(n),p!==0&&(c=p,s=Ch(n,p))),s===1)throw a=Ta,To(n,0),ks(n,c),pn(n,Ze()),a;if(s===6)ks(n,c);else{if(p=n.current.alternate,!(c&30)&&!N0(p)&&(s=ou(n,c),s===2&&(y=Nn(n),y!==0&&(c=y,s=Ch(n,y))),s===1))throw a=Ta,To(n,0),ks(n,c),pn(n,Ze()),a;switch(n.finishedWork=p,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:So(n,fn,Yr);break;case 3:if(ks(n,c),(c&130023424)===c&&(s=Th+500-Ze(),10<s)){if(io(n,0)!==0)break;if(p=n.suspendedLanes,(p&c)!==c){sn(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=xc(So.bind(null,n,fn,Yr),s);break}So(n,fn,Yr);break;case 4:if(ks(n,c),(c&4194240)===c)break;for(s=n.eventTimes,p=-1;0<c;){var S=31-tn(c);y=1<<S,S=s[S],S>p&&(p=S),c&=~y}if(c=p,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*C0(c/1960))-c,10<c){n.timeoutHandle=xc(So.bind(null,n,fn,Yr),c);break}So(n,fn,Yr);break;case 5:So(n,fn,Yr);break;default:throw Error(t(329))}}}return pn(n,Ze()),n.callbackNode===a?cm.bind(null,n):null}function Ch(n,s){var a=Sa;return n.current.memoizedState.isDehydrated&&(To(n,s).flags|=256),n=ou(n,s),n!==2&&(s=fn,fn=a,s!==null&&Nh(s)),n}function Nh(n){fn===null?fn=n:fn.push.apply(fn,n)}function N0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var p=a[c],y=p.getSnapshot;p=p.value;try{if(!ar(y(),p))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ks(n,s){for(s&=~Eh,s&=~Jl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-tn(s),c=1<<a;n[a]=-1,s&=~c}}function hm(n){if($e&6)throw Error(t(327));wi();var s=io(n,0);if(!(s&1))return pn(n,Ze()),null;var a=ou(n,s);if(n.tag!==0&&a===2){var c=Nn(n);c!==0&&(s=c,a=Ch(n,c))}if(a===1)throw a=Ta,To(n,0),ks(n,s),pn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,So(n,fn,Yr),pn(n,Ze()),null}function Ah(n,s){var a=$e;$e|=1;try{return n(s)}finally{$e=a,$e===0&&(_i=Ze()+500,Dl&&Es())}}function Eo(n){Ns!==null&&Ns.tag===0&&!($e&6)&&wi();var s=$e;$e|=1;var a=zn.transition,c=Oe;try{if(zn.transition=null,Oe=1,n)return n()}finally{Oe=c,zn.transition=a,$e=s,!($e&6)&&Es()}}function kh(){xn=vi.current,tt(vi)}function To(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,n0(a)),St!==null)for(a=St.return;a!==null;){var c=a;switch(Fc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Pl();break;case 3:mi(),tt(cn),tt(Wt),Xc();break;case 5:Qc(c);break;case 4:mi();break;case 13:tt(it);break;case 19:tt(it);break;case 10:$c(c.type._context);break;case 22:case 23:kh()}a=a.return}if(Vt=n,St=n=Rs(n.current,null),Bt=xn=s,kt=0,Ta=null,Eh=Jl=wo=0,fn=Sa=null,yo!==null){for(s=0;s<yo.length;s++)if(a=yo[s],c=a.interleaved,c!==null){a.interleaved=null;var p=c.next,y=a.pending;if(y!==null){var S=y.next;y.next=p,c.next=S}a.pending=c}yo=null}return n}function dm(n,s){do{var a=St;try{if(zc(),zl.current=Hl,$l){for(var c=at.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}$l=!1}if(_o=0,Mt=At=at=null,ga=!1,ya=0,wh.current=null,a===null||a.return===null){kt=1,Ta=s,St=null;break}e:{var y=n,S=a.return,O=a,L=s;if(s=Bt,O.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var H=L,re=O,se=re.tag;if(!(re.mode&1)&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var ge=Fp(S);if(ge!==null){ge.flags&=-257,Lp(ge,S,O,y,s),ge.mode&1&&bp(y,H,s),s=ge,L=H;var _e=s.updateQueue;if(_e===null){var we=new Set;we.add(L),s.updateQueue=we}else _e.add(L);break e}else{if(!(s&1)){bp(y,H,s),Rh();break e}L=Error(t(426))}}else if(st&&O.mode&1){var vt=Fp(S);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Lp(vt,S,O,y,s),Uc(gi(L,O));break e}}y=L=gi(L,O),kt!==4&&(kt=2),Sa===null?Sa=[y]:Sa.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var $=Vp(y,L,s);ap(y,$);break e;case 1:O=L;var U=y.type,q=y.stateNode;if(!(y.flags&128)&&(typeof U.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Cs===null||!Cs.has(q)))){y.flags|=65536,s&=-s,y.lanes|=s;var ae=Op(y,O,s);ap(y,ae);break e}}y=y.return}while(y!==null)}mm(a)}catch(Ee){s=Ee,St===a&&a!==null&&(St=a=a.return);continue}break}while(!0)}function fm(){var n=Zl.current;return Zl.current=Hl,n===null?Hl:n}function Rh(){(kt===0||kt===3||kt===2)&&(kt=4),Vt===null||!(wo&268435455)&&!(Jl&268435455)||ks(Vt,Bt)}function ou(n,s){var a=$e;$e|=2;var c=fm();(Vt!==n||Bt!==s)&&(Yr=null,To(n,s));do try{A0();break}catch(p){dm(n,p)}while(!0);if(zc(),$e=a,Zl.current=c,St!==null)throw Error(t(261));return Vt=null,Bt=0,kt}function A0(){for(;St!==null;)pm(St)}function k0(){for(;St!==null&&!nl();)pm(St)}function pm(n){var s=vm(n.alternate,n,xn);n.memoizedProps=n.pendingProps,s===null?mm(n):St=s,wh.current=null}function mm(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=E0(a,s),a!==null){a.flags&=32767,St=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,St=null;return}}else if(a=w0(a,s,xn),a!==null){St=a;return}if(s=s.sibling,s!==null){St=s;return}St=s=n}while(s!==null);kt===0&&(kt=5)}function So(n,s,a){var c=Oe,p=zn.transition;try{zn.transition=null,Oe=1,R0(n,s,a,c)}finally{zn.transition=p,Oe=c}return null}function R0(n,s,a,c){do wi();while(Ns!==null);if($e&6)throw Error(t(327));a=n.finishedWork;var p=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(Ke(n,y),n===Vt&&(St=Vt=null,Bt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||tu||(tu=!0,_m(On,function(){return wi(),null})),y=(a.flags&15990)!==0,a.subtreeFlags&15990||y){y=zn.transition,zn.transition=null;var S=Oe;Oe=1;var O=$e;$e|=4,wh.current=null,S0(n,a),om(a,n),K_(Rc),ms=!!kc,Rc=kc=null,n.current=a,I0(a),dc(),$e=O,Oe=S,zn.transition=y}else n.current=a;if(tu&&(tu=!1,Ns=n,nu=p),y=n.pendingLanes,y===0&&(Cs=null),ol(a.stateNode),pn(n,Ze()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)p=s[a],c(p.value,{componentStack:p.stack,digest:p.digest});if(eu)throw eu=!1,n=Sh,Sh=null,n;return nu&1&&n.tag!==0&&wi(),y=n.pendingLanes,y&1?n===Ih?Ia++:(Ia=0,Ih=n):Ia=0,Es(),null}function wi(){if(Ns!==null){var n=fs(nu),s=zn.transition,a=Oe;try{if(zn.transition=null,Oe=16>n?16:n,Ns===null)var c=!1;else{if(n=Ns,Ns=null,nu=0,$e&6)throw Error(t(331));var p=$e;for($e|=4,ve=n.current;ve!==null;){var y=ve,S=y.child;if(ve.flags&16){var O=y.deletions;if(O!==null){for(var L=0;L<O.length;L++){var H=O[L];for(ve=H;ve!==null;){var re=ve;switch(re.tag){case 0:case 11:case 15:Ea(8,re,y)}var se=re.child;if(se!==null)se.return=re,ve=se;else for(;ve!==null;){re=ve;var ne=re.sibling,ge=re.return;if(em(re),re===H){ve=null;break}if(ne!==null){ne.return=ge,ve=ne;break}ve=ge}}}var _e=y.alternate;if(_e!==null){var we=_e.child;if(we!==null){_e.child=null;do{var vt=we.sibling;we.sibling=null,we=vt}while(we!==null)}}ve=y}}if(y.subtreeFlags&2064&&S!==null)S.return=y,ve=S;else e:for(;ve!==null;){if(y=ve,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Ea(9,y,y.return)}var $=y.sibling;if($!==null){$.return=y.return,ve=$;break e}ve=y.return}}var U=n.current;for(ve=U;ve!==null;){S=ve;var q=S.child;if(S.subtreeFlags&2064&&q!==null)q.return=S,ve=q;else e:for(S=U;ve!==null;){if(O=ve,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Yl(9,O)}}catch(Ee){ht(O,O.return,Ee)}if(O===S){ve=null;break e}var ae=O.sibling;if(ae!==null){ae.return=O.return,ve=ae;break e}ve=O.return}}if($e=p,Es(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(oo,n)}catch{}c=!0}return c}finally{Oe=a,zn.transition=s}}return!1}function gm(n,s,a){s=gi(a,s),s=Vp(n,s,1),n=Ss(n,s,1),s=sn(),n!==null&&(hs(n,1,s),pn(n,s))}function ht(n,s,a){if(n.tag===3)gm(n,n,a);else for(;s!==null;){if(s.tag===3){gm(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Cs===null||!Cs.has(c))){n=gi(a,n),n=Op(s,n,1),s=Ss(s,n,1),n=sn(),s!==null&&(hs(s,1,n),pn(s,n));break}}s=s.return}}function P0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=sn(),n.pingedLanes|=n.suspendedLanes&a,Vt===n&&(Bt&a)===a&&(kt===4||kt===3&&(Bt&130023424)===Bt&&500>Ze()-Th?To(n,0):Eh|=a),pn(n,s)}function ym(n,s){s===0&&(n.mode&1?(s=$o,$o<<=1,!($o&130023424)&&($o=4194304)):s=1);var a=sn();n=Qr(n,s),n!==null&&(hs(n,s,a),pn(n,a))}function x0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ym(n,a)}function D0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(a=p.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ym(n,a)}var vm;vm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||cn.current)dn=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return dn=!1,_0(n,s,a);dn=!!(n.flags&131072)}else dn=!1,st&&s.flags&1048576&&Yf(s,Vl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Kl(n,s),n=s.pendingProps;var p=li(s,Wt.current);pi(s,a),p=Jc(null,s,c,n,p,a);var y=eh();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,hn(c)?(y=!0,xl(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Hc(s),p.updater=Gl,s.stateNode=p,p._reactInternals=s,ih(s,c,n,a),s=ch(null,s,c,!0,y,a)):(s.tag=0,st&&y&&bc(s),rn(null,s,p,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Kl(n,s),n=s.pendingProps,p=c._init,c=p(c._payload),s.type=c,p=s.tag=V0(c),n=ur(c,n),p){case 0:s=uh(null,s,c,n,a);break e;case 1:s=Wp(null,s,c,n,a);break e;case 11:s=jp(null,s,c,n,a);break e;case 14:s=Up(null,s,c,ur(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,p=s.pendingProps,p=s.elementType===c?p:ur(c,p),uh(n,s,c,p,a);case 1:return c=s.type,p=s.pendingProps,p=s.elementType===c?p:ur(c,p),Wp(n,s,c,p,a);case 3:e:{if(qp(s),n===null)throw Error(t(387));c=s.pendingProps,y=s.memoizedState,p=y.element,ip(n,s),Ul(s,c,null,a);var S=s.memoizedState;if(c=S.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=gi(Error(t(423)),s),s=Hp(n,s,c,a,p);break e}else if(c!==p){p=gi(Error(t(424)),s),s=Hp(n,s,c,a,p);break e}else for(Pn=vs(s.stateNode.containerInfo.firstChild),Rn=s,st=!0,lr=null,a=sp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(hi(),c===p){s=Xr(n,s,a);break e}rn(n,s,c,a)}s=s.child}return s;case 5:return up(s),n===null&&jc(s),c=s.type,p=s.pendingProps,y=n!==null?n.memoizedProps:null,S=p.children,Pc(c,p)?S=null:y!==null&&Pc(c,y)&&(s.flags|=32),$p(n,s),rn(n,s,S,a),s.child;case 6:return n===null&&jc(s),null;case 13:return Gp(n,s,a);case 4:return Gc(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=di(s,null,c,a):rn(n,s,c,a),s.child;case 11:return c=s.type,p=s.pendingProps,p=s.elementType===c?p:ur(c,p),jp(n,s,c,p,a);case 7:return rn(n,s,s.pendingProps,a),s.child;case 8:return rn(n,s,s.pendingProps.children,a),s.child;case 12:return rn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,p=s.pendingProps,y=s.memoizedProps,S=p.value,Je(Fl,c._currentValue),c._currentValue=S,y!==null)if(ar(y.value,S)){if(y.children===p.children&&!cn.current){s=Xr(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var O=y.dependencies;if(O!==null){S=y.child;for(var L=O.firstContext;L!==null;){if(L.context===c){if(y.tag===1){L=Kr(-1,a&-a),L.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var re=H.pending;re===null?L.next=L:(L.next=re.next,re.next=L),H.pending=L}}y.lanes|=a,L=y.alternate,L!==null&&(L.lanes|=a),Wc(y.return,a,s),O.lanes|=a;break}L=L.next}}else if(y.tag===10)S=y.type===s.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(t(341));S.lanes|=a,O=S.alternate,O!==null&&(O.lanes|=a),Wc(S,a,s),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}rn(n,s,p.children,a),s=s.child}return s;case 9:return p=s.type,c=s.pendingProps.children,pi(s,a),p=Un(p),c=c(p),s.flags|=1,rn(n,s,c,a),s.child;case 14:return c=s.type,p=ur(c,s.pendingProps),p=ur(c.type,p),Up(n,s,c,p,a);case 15:return Bp(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,p=s.pendingProps,p=s.elementType===c?p:ur(c,p),Kl(n,s),s.tag=1,hn(c)?(n=!0,xl(s)):n=!1,pi(s,a),Dp(s,c,p),ih(s,c,p,a),ch(null,s,c,!0,n,a);case 19:return Kp(n,s,a);case 22:return zp(n,s,a)}throw Error(t(156,s.tag))};function _m(n,s){return Bo(n,s)}function M0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(n,s,a,c){return new M0(n,s,a,c)}function Ph(n){return n=n.prototype,!(!n||!n.isReactComponent)}function V0(n){if(typeof n=="function")return Ph(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===he)return 14}return 2}function Rs(n,s){var a=n.alternate;return a===null?(a=$n(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function iu(n,s,a,c,p,y){var S=2;if(c=n,typeof n=="function")Ph(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case R:return Io(a.children,p,y,s);case T:S=8,p|=8;break;case N:return n=$n(12,a,s,p|2),n.elementType=N,n.lanes=y,n;case k:return n=$n(13,a,s,p),n.elementType=k,n.lanes=y,n;case oe:return n=$n(19,a,s,p),n.elementType=oe,n.lanes=y,n;case ie:return au(a,p,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:S=10;break e;case x:S=9;break e;case D:S=11;break e;case he:S=14;break e;case pe:S=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=$n(S,a,s,p),s.elementType=n,s.type=c,s.lanes=y,s}function Io(n,s,a,c){return n=$n(7,n,c,s),n.lanes=a,n}function au(n,s,a,c){return n=$n(22,n,c,s),n.elementType=ie,n.lanes=a,n.stateNode={isHidden:!1},n}function xh(n,s,a){return n=$n(6,n,null,s),n.lanes=a,n}function Dh(n,s,a){return s=$n(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function O0(n,s,a,c,p){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cs(0),this.expirationTimes=cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cs(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Mh(n,s,a,c,p,y,S,O,L){return n=new O0(n,s,a,O,L),s===1?(s=1,y===!0&&(s|=8)):s=0,y=$n(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(y),n}function b0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function wm(n){if(!n)return ws;n=n._reactInternals;e:{if(er(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(hn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(hn(a))return Qf(n,a,s)}return s}function Em(n,s,a,c,p,y,S,O,L){return n=Mh(a,c,!0,n,p,y,S,O,L),n.context=wm(null),a=n.current,c=sn(),p=As(a),y=Kr(c,p),y.callback=s??null,Ss(a,y,p),n.current.lanes=p,hs(n,p,c),pn(n,c),n}function lu(n,s,a,c){var p=s.current,y=sn(),S=As(p);return a=wm(a),s.context===null?s.context=a:s.pendingContext=a,s=Kr(y,S),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ss(p,s,S),n!==null&&(dr(n,p,S,y),jl(n,p,S)),S}function uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Vh(n,s){Tm(n,s),(n=n.alternate)&&Tm(n,s)}function F0(){return null}var Sm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Oh(n){this._internalRoot=n}cu.prototype.render=Oh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));lu(n,s,null,null)},cu.prototype.unmount=Oh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Eo(function(){lu(null,n,null,null)}),s[Wr]=null}};function cu(n){this._internalRoot=n}cu.prototype.unstable_scheduleHydration=function(n){if(n){var s=cl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<_r.length&&s!==0&&s<_r[a].priority;a++);_r.splice(a,0,n),a===0&&fl(n)}};function bh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function hu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Im(){}function L0(n,s,a,c,p){if(p){if(typeof c=="function"){var y=c;c=function(){var H=uu(S);y.call(H)}}var S=Em(s,c,n,0,null,!1,!1,"",Im);return n._reactRootContainer=S,n[Wr]=S.current,la(n.nodeType===8?n.parentNode:n),Eo(),S}for(;p=n.lastChild;)n.removeChild(p);if(typeof c=="function"){var O=c;c=function(){var H=uu(L);O.call(H)}}var L=Mh(n,0,!1,null,null,!1,!1,"",Im);return n._reactRootContainer=L,n[Wr]=L.current,la(n.nodeType===8?n.parentNode:n),Eo(function(){lu(s,L,a,c)}),L}function du(n,s,a,c,p){var y=a._reactRootContainer;if(y){var S=y;if(typeof p=="function"){var O=p;p=function(){var L=uu(S);O.call(L)}}lu(s,S,n,p)}else S=L0(a,s,n,p,c);return uu(S)}ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=us(s.pendingLanes);a!==0&&(ds(s,a|1),pn(s,Ze()),!($e&6)&&(_i=Ze()+500,Es()))}break;case 13:Eo(function(){var c=Qr(n,1);if(c!==null){var p=sn();dr(c,n,1,p)}}),Vh(n,1)}},Wo=function(n){if(n.tag===13){var s=Qr(n,134217728);if(s!==null){var a=sn();dr(s,n,134217728,a)}Vh(n,134217728)}},ul=function(n){if(n.tag===13){var s=As(n),a=Qr(n,s);if(a!==null){var c=sn();dr(a,n,s,c)}Vh(n,s)}},cl=function(){return Oe},hl=function(n,s){var a=Oe;try{return Oe=n,s()}finally{Oe=a}},Xn=function(n,s,a){switch(s){case"input":if(Ks(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var p=Rl(c);if(!p)throw Error(t(90));Jt(c),Ks(c,p)}}}break;case"textarea":is(n,a);break;case"select":s=a.value,s!=null&&Gn(n,!!a.multiple,s,!1)}},Lr=Ah,to=Eo;var j0={usingClientEntryPoint:!1,Events:[ha,ii,Rl,Sn,eo,Ah]},Ca={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Hi(n),n===null?null:n.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance||F0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{oo=fu.inject(U0),Cn=fu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0,mn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(s))throw Error(t(200));return b0(n,s,null,a)},mn.createRoot=function(n,s){if(!bh(n))throw Error(t(299));var a=!1,c="",p=Sm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=Mh(n,1,!1,null,null,a,!1,c,p),n[Wr]=s.current,la(n.nodeType===8?n.parentNode:n),new Oh(s)},mn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Hi(s),n=n===null?null:n.stateNode,n},mn.flushSync=function(n){return Eo(n)},mn.hydrate=function(n,s,a){if(!hu(s))throw Error(t(200));return du(null,n,s,!0,a)},mn.hydrateRoot=function(n,s,a){if(!bh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,p=!1,y="",S=Sm;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),s=Em(s,null,n,1,a??null,p,!1,y,S),n[Wr]=s.current,la(n),c)for(n=0;n<c.length;n++)a=c[n],p=a._getVersion,p=p(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,p]:s.mutableSourceEagerHydrationData.push(a,p);return new cu(s)},mn.render=function(n,s,a){if(!hu(s))throw Error(t(200));return du(null,n,s,!1,a)},mn.unmountComponentAtNode=function(n){if(!hu(n))throw Error(t(40));return n._reactRootContainer?(Eo(function(){du(null,null,n,!1,function(){n._reactRootContainer=null,n[Wr]=null})}),!0):!1},mn.unstable_batchedUpdates=Ah,mn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!hu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return du(n,s,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var Mm;function K0(){if(Mm)return jh.exports;Mm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jh.exports=Q0(),jh.exports}var Vm;function X0(){if(Vm)return pu;Vm=1;var r=K0();return pu.createRoot=r.createRoot,pu.hydrateRoot=r.hydrateRoot,pu}var Y0=X0();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gy=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=le.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:i="",children:l,iconNode:h,...d},f)=>le.createElement("svg",{ref:f,...J0,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:gy("lucide",i),...d},[...h.map(([m,v])=>le.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(r,e)=>{const t=le.forwardRef(({className:o,...i},l)=>le.createElement(ew,{ref:l,iconNode:e,className:gy(`lucide-${Z0(r)}`,o),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],nw=Xe("Award",tw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Co=Xe("ChevronLeft",rw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ds=Xe("ChevronRight",sw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],iw=Xe("CirclePlus",ow);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],lw=Xe("CircleSlash",aw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yy=Xe("Clock",uw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],vy=Xe("Download",cw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16.2V21h-4.8",key:"1hrera"}],["path",{d:"M21 7.8V3h-4.8",key:"ul1q53"}],["path",{d:"M3 16.2V21h4.8",key:"1x04uo"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 7.8V3h4.8",key:"1ijppm"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],dw=Xe("Expand",hw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pw=Xe("FileText",fw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],gw=Xe("GitCommitHorizontal",mw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vw=Xe("Globe",yw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],ww=Xe("ImagePlus",_w);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Tw=Xe("Loader",Ew);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Iw=Xe("Lock",Sw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Nw=Xe("MessageSquare",Cw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],kw=Xe("Minimize",Aw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Dd=Xe("Music",Rw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],_y=Xe("Pause",Pw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],wy=Xe("Play",xw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Mw=Xe("RotateCw",Dw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ey=Xe("Save",Vw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],bw=Xe("Share",Ow);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Lw=Xe("ShoppingBag",Fw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Uw=Xe("SquarePen",jw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zw=Xe("Trash2",Bw);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],Ww=Xe("Volume",$w);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Po=Xe("X",qw),Hw=()=>{};var Om={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let i=r.charCodeAt(o);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Gw=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const i=r[t++];if(i<128)e[o++]=String.fromCharCode(i);else if(i>191&&i<224){const l=r[t++];e[o++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=r[t++],h=r[t++],d=r[t++],f=((i&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(f>>10)),e[o++]=String.fromCharCode(56320+(f&1023))}else{const l=r[t++],h=r[t++];e[o++]=String.fromCharCode((i&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Sy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let i=0;i<r.length;i+=3){const l=r[i],h=i+1<r.length,d=h?r[i+1]:0,f=i+2<r.length,m=f?r[i+2]:0,v=l>>2,_=(l&3)<<4|d>>4;let I=(d&15)<<2|m>>6,C=m&63;f||(C=64,h||(I=64)),o.push(t[v],t[_],t[I],t[C])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ty(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Gw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let i=0;i<r.length;){const l=t[r.charAt(i++)],d=i<r.length?t[r.charAt(i)]:0;++i;const m=i<r.length?t[r.charAt(i)]:64;++i;const _=i<r.length?t[r.charAt(i)]:64;if(++i,l==null||d==null||m==null||_==null)throw new Qw;const I=l<<2|d>>4;if(o.push(I),m!==64){const C=d<<4&240|m>>2;if(o.push(C),_!==64){const P=m<<6&192|_;o.push(P)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Qw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kw=function(r){const e=Ty(r);return Sy.encodeByteArray(e,!0)},Au=function(r){return Kw(r).replace(/\./g,"")},Xw=function(r){try{return Sy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=()=>Yw().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof Om>"u")return;const r=Om.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},eE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xw(r[1]);return e&&JSON.parse(e)},Md=()=>{try{return Hw()||Zw()||Jw()||eE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tE=r=>{var e,t;return(t=(e=Md())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Iy=r=>{const e=tE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},Cy=()=>{var r;return(r=Md())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",i=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Au(JSON.stringify(t)),Au(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sE(){var r;const e=(r=Md())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oE(){return!sE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iE(){try{return typeof indexedDB=="object"}catch{return!1}}function aE(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(o);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="FirebaseError";class Mo extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=lE,Object.setPrototypeOf(this,Mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ay.prototype.create)}}class Ay{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],h=l?uE(l,o):"Error",d=`${this.serviceName}: ${h} (${i}).`;return new Mo(i,d,o)}}function uE(r,e){return r.replace(cE,(t,o)=>{const i=e[o];return i!=null?String(i):`<${o}?>`})}const cE=/\{\$([^}]+)}/g;function ku(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const i of t){if(!o.includes(i))return!1;const l=r[i],h=e[i];if(bm(l)&&bm(h)){if(!ku(l,h))return!1}else if(l!==h)return!1}for(const i of o)if(!t.includes(i))return!1;return!0}function bm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(r){return r&&r._delegate?r._delegate:r}class ki{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new nE;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&o.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fE(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});o.resolve(l)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&h.resolve(i)}return i}onInit(e,t){var o;const i=this.normalizeInstanceIdentifier(t),l=(o=this.onInitCallbacks.get(i))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(i,l);const h=this.instances.get(i);return h&&e(h,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const i of o)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:dE(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dE(r){return r===No?void 0:r}function fE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const mE={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},gE=Le.INFO,yE={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},vE=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),i=yE[e];if(i)console[i](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=gE,this._logHandler=vE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const _E=(r,e)=>e.some(t=>r instanceof t);let Fm,Lm;function wE(){return Fm||(Fm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EE(){return Lm||(Lm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Py=new WeakMap,td=new WeakMap,xy=new WeakMap,zh=new WeakMap,Vd=new WeakMap;function TE(r){const e=new Promise((t,o)=>{const i=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(bs(r.result)),i()},h=()=>{o(r.error),i()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Py.set(t,r)}).catch(()=>{}),Vd.set(e,r),e}function SE(r){if(td.has(r))return;const e=new Promise((t,o)=>{const i=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),i()},h=()=>{o(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});td.set(r,e)}let nd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return td.get(r);if(e==="objectStoreNames")return r.objectStoreNames||xy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function IE(r){nd=r(nd)}function CE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call($h(this),e,...t);return xy.set(o,e.sort?e.sort():[e]),bs(o)}:EE().includes(r)?function(...e){return r.apply($h(this),e),bs(Py.get(this))}:function(...e){return bs(r.apply($h(this),e))}}function NE(r){return typeof r=="function"?CE(r):(r instanceof IDBTransaction&&SE(r),_E(r,wE())?new Proxy(r,nd):r)}function bs(r){if(r instanceof IDBRequest)return TE(r);if(zh.has(r))return zh.get(r);const e=NE(r);return e!==r&&(zh.set(r,e),Vd.set(e,r)),e}const $h=r=>Vd.get(r);function AE(r,e,{blocked:t,upgrade:o,blocking:i,terminated:l}={}){const h=indexedDB.open(r,e),d=bs(h);return o&&h.addEventListener("upgradeneeded",f=>{o(bs(h.result),f.oldVersion,f.newVersion,bs(h.transaction),f)}),t&&h.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const kE=["get","getKey","getAll","getAllKeys","count"],RE=["put","add","delete","clear"],Wh=new Map;function jm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wh.get(e))return Wh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,i=RE.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(i||kE.includes(t)))return;const l=async function(h,...d){const f=this.transaction(h,i?"readwrite":"readonly");let m=f.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&f.done]))[0]};return Wh.set(e,l),l}IE(r=>({...r,get:(e,t,o)=>jm(e,t)||r.get(e,t,o),has:(e,t)=>!!jm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xE(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function xE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rd="@firebase/app",Um="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new Ry("@firebase/app"),DE="@firebase/app-compat",ME="@firebase/analytics-compat",VE="@firebase/analytics",OE="@firebase/app-check-compat",bE="@firebase/app-check",FE="@firebase/auth",LE="@firebase/auth-compat",jE="@firebase/database",UE="@firebase/data-connect",BE="@firebase/database-compat",zE="@firebase/functions",$E="@firebase/functions-compat",WE="@firebase/installations",qE="@firebase/installations-compat",HE="@firebase/messaging",GE="@firebase/messaging-compat",QE="@firebase/performance",KE="@firebase/performance-compat",XE="@firebase/remote-config",YE="@firebase/remote-config-compat",ZE="@firebase/storage",JE="@firebase/storage-compat",e1="@firebase/firestore",t1="@firebase/vertexai",n1="@firebase/firestore-compat",r1="firebase",s1="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="[DEFAULT]",o1={[rd]:"fire-core",[DE]:"fire-core-compat",[VE]:"fire-analytics",[ME]:"fire-analytics-compat",[bE]:"fire-app-check",[OE]:"fire-app-check-compat",[FE]:"fire-auth",[LE]:"fire-auth-compat",[jE]:"fire-rtdb",[UE]:"fire-data-connect",[BE]:"fire-rtdb-compat",[zE]:"fire-fn",[$E]:"fire-fn-compat",[WE]:"fire-iid",[qE]:"fire-iid-compat",[HE]:"fire-fcm",[GE]:"fire-fcm-compat",[QE]:"fire-perf",[KE]:"fire-perf-compat",[XE]:"fire-rc",[YE]:"fire-rc-compat",[ZE]:"fire-gcs",[JE]:"fire-gcs-compat",[e1]:"fire-fst",[n1]:"fire-fst-compat",[t1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,i1=new Map,od=new Map;function Bm(r,e){try{r.container.addComponent(e)}catch(t){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Va(r){const e=r.name;if(od.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;od.set(e,r);for(const t of Ru.values())Bm(t,r);for(const t of i1.values())Bm(t,r);return!0}function Dy(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function My(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new Ay("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=s1;function Oy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o=Object.assign({name:sd,automaticDataCollectionEnabled:!1},e),i=o.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(t||(t=Cy()),!t)throw Fs.create("no-options");const l=Ru.get(i);if(l){if(ku(t,l.options)&&ku(o,l.config))return l;throw Fs.create("duplicate-app",{appName:i})}const h=new pE(i);for(const f of od.values())h.addComponent(f);const d=new l1(t,o,h);return Ru.set(i,d),d}function by(r=sd){const e=Ru.get(r);if(!e&&r===sd&&Cy())return Oy();if(!e)throw Fs.create("no-app",{appName:r});return e}function Ls(r,e,t){var o;let i=(o=o1[r])!==null&&o!==void 0?o:r;t&&(i+=`-${t}`);const l=i.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Va(new ki(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",c1=1,Oa="firebase-heartbeat-store";let qh=null;function Fy(){return qh||(qh=AE(u1,c1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Oa)}catch(t){console.warn(t)}}}}).catch(r=>{throw Fs.create("idb-open",{originalErrorMessage:r.message})})),qh}async function h1(r){try{const t=(await Fy()).transaction(Oa),o=await t.objectStore(Oa).get(Ly(r));return await t.done,o}catch(e){if(e instanceof Mo)ts.warn(e.message);else{const t=Fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ts.warn(t.message)}}}async function zm(r,e){try{const o=(await Fy()).transaction(Oa,"readwrite");await o.objectStore(Oa).put(e,Ly(r)),await o.done}catch(t){if(t instanceof Mo)ts.warn(t.message);else{const o=Fs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ts.warn(o.message)}}}function Ly(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,f1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g1(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$m();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>f1){const h=y1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){ts.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$m(),{heartbeatsToSend:o,unsentEntries:i}=m1(this._heartbeatsCache.heartbeats),l=Au(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ts.warn(t),""}}}function $m(){return new Date().toISOString().substring(0,10)}function m1(r,e=d1){const t=[];let o=r.slice();for(const i of r){const l=t.find(h=>h.agent===i.agent);if(l){if(l.dates.push(i.date),Wm(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Wm(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iE()?aE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wm(r){return Au(JSON.stringify({version:2,heartbeats:r})).length}function y1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){Va(new ki("platform-logger",e=>new PE(e),"PRIVATE")),Va(new ki("heartbeat",e=>new p1(e),"PRIVATE")),Ls(rd,Um,r),Ls(rd,Um,"esm2017"),Ls("fire-js","")}v1("");var _1="firebase",w1="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(_1,w1,"app");var qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,jy;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function N(){}N.prototype=T.prototype,R.D=T.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(M,x,D){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return T.prototype[x].apply(M,k)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,t),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,T,N){N||(N=0);var M=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)M[x]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(x=0;16>x;++x)M[x]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=R.g[0],N=R.g[1],x=R.g[2];var D=R.g[3],k=T+(D^N&(x^D))+M[0]+3614090360&4294967295;T=N+(k<<7&4294967295|k>>>25),k=D+(x^T&(N^x))+M[1]+3905402710&4294967295,D=T+(k<<12&4294967295|k>>>20),k=x+(N^D&(T^N))+M[2]+606105819&4294967295,x=D+(k<<17&4294967295|k>>>15),k=N+(T^x&(D^T))+M[3]+3250441966&4294967295,N=x+(k<<22&4294967295|k>>>10),k=T+(D^N&(x^D))+M[4]+4118548399&4294967295,T=N+(k<<7&4294967295|k>>>25),k=D+(x^T&(N^x))+M[5]+1200080426&4294967295,D=T+(k<<12&4294967295|k>>>20),k=x+(N^D&(T^N))+M[6]+2821735955&4294967295,x=D+(k<<17&4294967295|k>>>15),k=N+(T^x&(D^T))+M[7]+4249261313&4294967295,N=x+(k<<22&4294967295|k>>>10),k=T+(D^N&(x^D))+M[8]+1770035416&4294967295,T=N+(k<<7&4294967295|k>>>25),k=D+(x^T&(N^x))+M[9]+2336552879&4294967295,D=T+(k<<12&4294967295|k>>>20),k=x+(N^D&(T^N))+M[10]+4294925233&4294967295,x=D+(k<<17&4294967295|k>>>15),k=N+(T^x&(D^T))+M[11]+2304563134&4294967295,N=x+(k<<22&4294967295|k>>>10),k=T+(D^N&(x^D))+M[12]+1804603682&4294967295,T=N+(k<<7&4294967295|k>>>25),k=D+(x^T&(N^x))+M[13]+4254626195&4294967295,D=T+(k<<12&4294967295|k>>>20),k=x+(N^D&(T^N))+M[14]+2792965006&4294967295,x=D+(k<<17&4294967295|k>>>15),k=N+(T^x&(D^T))+M[15]+1236535329&4294967295,N=x+(k<<22&4294967295|k>>>10),k=T+(x^D&(N^x))+M[1]+4129170786&4294967295,T=N+(k<<5&4294967295|k>>>27),k=D+(N^x&(T^N))+M[6]+3225465664&4294967295,D=T+(k<<9&4294967295|k>>>23),k=x+(T^N&(D^T))+M[11]+643717713&4294967295,x=D+(k<<14&4294967295|k>>>18),k=N+(D^T&(x^D))+M[0]+3921069994&4294967295,N=x+(k<<20&4294967295|k>>>12),k=T+(x^D&(N^x))+M[5]+3593408605&4294967295,T=N+(k<<5&4294967295|k>>>27),k=D+(N^x&(T^N))+M[10]+38016083&4294967295,D=T+(k<<9&4294967295|k>>>23),k=x+(T^N&(D^T))+M[15]+3634488961&4294967295,x=D+(k<<14&4294967295|k>>>18),k=N+(D^T&(x^D))+M[4]+3889429448&4294967295,N=x+(k<<20&4294967295|k>>>12),k=T+(x^D&(N^x))+M[9]+568446438&4294967295,T=N+(k<<5&4294967295|k>>>27),k=D+(N^x&(T^N))+M[14]+3275163606&4294967295,D=T+(k<<9&4294967295|k>>>23),k=x+(T^N&(D^T))+M[3]+4107603335&4294967295,x=D+(k<<14&4294967295|k>>>18),k=N+(D^T&(x^D))+M[8]+1163531501&4294967295,N=x+(k<<20&4294967295|k>>>12),k=T+(x^D&(N^x))+M[13]+2850285829&4294967295,T=N+(k<<5&4294967295|k>>>27),k=D+(N^x&(T^N))+M[2]+4243563512&4294967295,D=T+(k<<9&4294967295|k>>>23),k=x+(T^N&(D^T))+M[7]+1735328473&4294967295,x=D+(k<<14&4294967295|k>>>18),k=N+(D^T&(x^D))+M[12]+2368359562&4294967295,N=x+(k<<20&4294967295|k>>>12),k=T+(N^x^D)+M[5]+4294588738&4294967295,T=N+(k<<4&4294967295|k>>>28),k=D+(T^N^x)+M[8]+2272392833&4294967295,D=T+(k<<11&4294967295|k>>>21),k=x+(D^T^N)+M[11]+1839030562&4294967295,x=D+(k<<16&4294967295|k>>>16),k=N+(x^D^T)+M[14]+4259657740&4294967295,N=x+(k<<23&4294967295|k>>>9),k=T+(N^x^D)+M[1]+2763975236&4294967295,T=N+(k<<4&4294967295|k>>>28),k=D+(T^N^x)+M[4]+1272893353&4294967295,D=T+(k<<11&4294967295|k>>>21),k=x+(D^T^N)+M[7]+4139469664&4294967295,x=D+(k<<16&4294967295|k>>>16),k=N+(x^D^T)+M[10]+3200236656&4294967295,N=x+(k<<23&4294967295|k>>>9),k=T+(N^x^D)+M[13]+681279174&4294967295,T=N+(k<<4&4294967295|k>>>28),k=D+(T^N^x)+M[0]+3936430074&4294967295,D=T+(k<<11&4294967295|k>>>21),k=x+(D^T^N)+M[3]+3572445317&4294967295,x=D+(k<<16&4294967295|k>>>16),k=N+(x^D^T)+M[6]+76029189&4294967295,N=x+(k<<23&4294967295|k>>>9),k=T+(N^x^D)+M[9]+3654602809&4294967295,T=N+(k<<4&4294967295|k>>>28),k=D+(T^N^x)+M[12]+3873151461&4294967295,D=T+(k<<11&4294967295|k>>>21),k=x+(D^T^N)+M[15]+530742520&4294967295,x=D+(k<<16&4294967295|k>>>16),k=N+(x^D^T)+M[2]+3299628645&4294967295,N=x+(k<<23&4294967295|k>>>9),k=T+(x^(N|~D))+M[0]+4096336452&4294967295,T=N+(k<<6&4294967295|k>>>26),k=D+(N^(T|~x))+M[7]+1126891415&4294967295,D=T+(k<<10&4294967295|k>>>22),k=x+(T^(D|~N))+M[14]+2878612391&4294967295,x=D+(k<<15&4294967295|k>>>17),k=N+(D^(x|~T))+M[5]+4237533241&4294967295,N=x+(k<<21&4294967295|k>>>11),k=T+(x^(N|~D))+M[12]+1700485571&4294967295,T=N+(k<<6&4294967295|k>>>26),k=D+(N^(T|~x))+M[3]+2399980690&4294967295,D=T+(k<<10&4294967295|k>>>22),k=x+(T^(D|~N))+M[10]+4293915773&4294967295,x=D+(k<<15&4294967295|k>>>17),k=N+(D^(x|~T))+M[1]+2240044497&4294967295,N=x+(k<<21&4294967295|k>>>11),k=T+(x^(N|~D))+M[8]+1873313359&4294967295,T=N+(k<<6&4294967295|k>>>26),k=D+(N^(T|~x))+M[15]+4264355552&4294967295,D=T+(k<<10&4294967295|k>>>22),k=x+(T^(D|~N))+M[6]+2734768916&4294967295,x=D+(k<<15&4294967295|k>>>17),k=N+(D^(x|~T))+M[13]+1309151649&4294967295,N=x+(k<<21&4294967295|k>>>11),k=T+(x^(N|~D))+M[4]+4149444226&4294967295,T=N+(k<<6&4294967295|k>>>26),k=D+(N^(T|~x))+M[11]+3174756917&4294967295,D=T+(k<<10&4294967295|k>>>22),k=x+(T^(D|~N))+M[2]+718787259&4294967295,x=D+(k<<15&4294967295|k>>>17),k=N+(D^(x|~T))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(x+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+D&4294967295}o.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var N=T-this.blockSize,M=this.B,x=this.h,D=0;D<T;){if(x==0)for(;D<=N;)i(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<T;)if(M[x++]=R.charCodeAt(D++),x==this.blockSize){i(this,M),x=0;break}}else for(;D<T;)if(M[x++]=R[D++],x==this.blockSize){i(this,M),x=0;break}}this.h=x,this.o+=T},o.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var N=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=N&255,N/=256;for(this.u(R),R=Array(16),T=N=0;4>T;++T)for(var M=0;32>M;M+=8)R[N++]=this.g[T]>>>M&255;return R};function l(R,T){var N=d;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=T(R)}function h(R,T){this.h=T;for(var N=[],M=!0,x=R.length-1;0<=x;x--){var D=R[x]|0;M&&D==T||(N[x]=D,M=!1)}this.g=N}var d={};function f(R){return-128<=R&&128>R?l(R,function(T){return new h([T|0],0>T?-1:0)}):new h([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return b(m(-R));for(var T=[],N=1,M=0;R>=N;M++)T[M]=R/N|0,N*=4294967296;return new h(T,0)}function v(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return b(v(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(T,8)),M=_,x=0;x<R.length;x+=8){var D=Math.min(8,R.length-x),k=parseInt(R.substring(x,x+D),T);8>D?(D=m(Math.pow(T,D)),M=M.j(D).add(m(k))):(M=M.j(N),M=M.add(m(k)))}return M}var _=f(0),I=f(1),C=f(16777216);r=h.prototype,r.m=function(){if(V(this))return-b(this).m();for(var R=0,T=1,N=0;N<this.g.length;N++){var M=this.i(N);R+=(0<=M?M:4294967296+M)*T,T*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(V(this))return"-"+b(this).toString(R);for(var T=m(Math.pow(R,6)),N=this,M="";;){var x=Y(N,T).g;N=B(N,x.j(T));var D=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=x,P(N))return D+M;for(;6>D.length;)D="0"+D;M=D+M}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function V(R){return R.h==-1}r.l=function(R){return R=B(this,R),V(R)?-1:P(R)?0:1};function b(R){for(var T=R.g.length,N=[],M=0;M<T;M++)N[M]=~R.g[M];return new h(N,~R.h).add(I)}r.abs=function(){return V(this)?b(this):this},r.add=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0,x=0;x<=T;x++){var D=M+(this.i(x)&65535)+(R.i(x)&65535),k=(D>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);M=k>>>16,D&=65535,k&=65535,N[x]=k<<16|D}return new h(N,N[N.length-1]&-2147483648?-1:0)};function B(R,T){return R.add(b(T))}r.j=function(R){if(P(this)||P(R))return _;if(V(this))return V(R)?b(this).j(b(R)):b(b(this).j(R));if(V(R))return b(this.j(b(R)));if(0>this.l(C)&&0>R.l(C))return m(this.m()*R.m());for(var T=this.g.length+R.g.length,N=[],M=0;M<2*T;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var x=0;x<R.g.length;x++){var D=this.i(M)>>>16,k=this.i(M)&65535,oe=R.i(x)>>>16,he=R.i(x)&65535;N[2*M+2*x]+=k*he,G(N,2*M+2*x),N[2*M+2*x+1]+=D*he,G(N,2*M+2*x+1),N[2*M+2*x+1]+=k*oe,G(N,2*M+2*x+1),N[2*M+2*x+2]+=D*oe,G(N,2*M+2*x+2)}for(M=0;M<T;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=T;M<2*T;M++)N[M]=0;return new h(N,0)};function G(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function Q(R,T){this.g=R,this.h=T}function Y(R,T){if(P(T))throw Error("division by zero");if(P(R))return new Q(_,_);if(V(R))return T=Y(b(R),T),new Q(b(T.g),b(T.h));if(V(T))return T=Y(R,b(T)),new Q(b(T.g),T.h);if(30<R.g.length){if(V(R)||V(T))throw Error("slowDivide_ only works with positive integers.");for(var N=I,M=T;0>=M.l(R);)N=j(N),M=j(M);var x=W(N,1),D=W(M,1);for(M=W(M,2),N=W(N,2);!P(M);){var k=D.add(M);0>=k.l(R)&&(x=x.add(N),D=k),M=W(M,1),N=W(N,1)}return T=B(R,x.j(T)),new Q(x,T)}for(x=_;0<=R.l(T);){for(N=Math.max(1,Math.floor(R.m()/T.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),D=m(N),k=D.j(T);V(k)||0<k.l(R);)N-=M,D=m(N),k=D.j(T);P(D)&&(D=I),x=x.add(D),R=B(R,k)}return new Q(x,R)}r.A=function(R){return Y(this,R).h},r.and=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)&R.i(M);return new h(N,this.h&R.h)},r.or=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)|R.i(M);return new h(N,this.h|R.h)},r.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),N=[],M=0;M<T;M++)N[M]=this.i(M)^R.i(M);return new h(N,this.h^R.h)};function j(R){for(var T=R.g.length+1,N=[],M=0;M<T;M++)N[M]=R.i(M)<<1|R.i(M-1)>>>31;return new h(N,R.h)}function W(R,T){var N=T>>5;T%=32;for(var M=R.g.length-N,x=[],D=0;D<M;D++)x[D]=0<T?R.i(D+N)>>>T|R.i(D+N+1)<<32-T:R.i(D+N);return new h(x,R.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,jy=o,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=v,js=h}).apply(typeof qm<"u"?qm:typeof self<"u"?self:typeof window<"u"?window:{});var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uy,Aa,By,Tu,id,zy,$y,Wy;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,w){return u==Array.prototype||u==Object.prototype||(u[g]=w.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mu=="object"&&mu];for(var g=0;g<u.length;++g){var w=u[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var o=t(this);function i(u,g){if(g)e:{var w=o;u=u.split(".");for(var A=0;A<u.length-1;A++){var z=u[A];if(!(z in w))break e;w=w[z]}u=u[u.length-1],A=w[u],g=g(A),g!=A&&g!=null&&e(w,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var w=0,A=!1,z={next:function(){if(!A&&w<u.length){var X=w++;return{value:g(X,u[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(u){return u||function(){return l(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function f(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,w){return u.call.apply(u.bind,arguments)}function _(u,g,w){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,A),u.apply(g,z)}}return function(){return u.apply(g,arguments)}}function I(u,g,w){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:_,I.apply(null,arguments)}function C(u,g){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function P(u,g){function w(){}w.prototype=g.prototype,u.aa=g.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(A,z,X){for(var ce=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ce[Ge-2]=arguments[Ge];return g.prototype[z].apply(A,ce)}}function V(u){const g=u.length;if(0<g){const w=Array(g);for(let A=0;A<g;A++)w[A]=u[A];return w}return[]}function b(u,g){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(f(A)){const z=u.length||0,X=A.length||0;u.length=z+X;for(let ce=0;ce<X;ce++)u[z+ce]=A[ce]}else u.push(A)}}class B{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var j=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function W(u,g,w){for(const A in u)g.call(w,u[A],A,u)}function R(u,g){for(const w in u)g.call(void 0,u[w],w,u)}function T(u){const g={};for(const w in u)g[w]=u[w];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,g){let w,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(w in A)u[w]=A[w];for(let X=0;X<N.length;X++)w=N[X],Object.prototype.hasOwnProperty.call(A,w)&&(u[w]=A[w])}}function x(u){var g=1;u=u.split(":");const w=[];for(;0<g&&u.length;)w.push(u.shift()),g--;return u.length&&w.push(u.join(":")),w}function D(u){d.setTimeout(()=>{throw u},0)}function k(){var u=te;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,w){const A=he.get();A.set(g,w),this.h?this.h.next=A:this.g=A,this.h=A}}var he=new B(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Z=!1,te=new oe,J=()=>{const u=d.Promise.resolve(void 0);ie=()=>{u.then(F)}};var F=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(w){D(w)}var g=he;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}Z=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};d.addEventListener("test",w,g),d.removeEventListener("test",w,g)}catch{}return u}();function fe(u,g){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(j){e:{try{Y(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else w=="mouseover"?g=u.fromElement:w=="mouseout"&&(g=u.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fe.aa.h.call(this)}}P(fe,me);var Pe={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),ue=0;function Be(u,g,w,A,z){this.listener=u,this.proxy=null,this.src=g,this.type=w,this.capture=!!A,this.ha=z,this.key=++ue,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xt(u){this.src=u,this.g={},this.h=0}xt.prototype.add=function(u,g,w,A,z){var X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);var ce=en(u,g,A,z);return-1<ce?(g=u[ce],w||(g.fa=!1)):(g=new Be(g,this.src,X,!!A,z),g.fa=w,u.push(g)),g};function Jt(u,g){var w=g.type;if(w in u.g){var A=u.g[w],z=Array.prototype.indexOf.call(A,g,void 0),X;(X=0<=z)&&Array.prototype.splice.call(A,z,1),X&&(Qe(g),u.g[w].length==0&&(delete u.g[w],u.h--))}}function en(u,g,w,A){for(var z=0;z<u.length;++z){var X=u[z];if(!X.da&&X.listener==g&&X.capture==!!w&&X.ha==A)return z}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),wn={};function Qs(u,g,w,A,z){if(Array.isArray(g)){for(var X=0;X<g.length;X++)Qs(u,g[X],w,A,z);return null}return w=as(w),u&&u[Me]?u.K(g,w,m(A)?!!A.capture:!1,z):Ks(u,g,w,!1,A,z)}function Ks(u,g,w,A,z,X){if(!g)throw Error("Invalid event type");var ce=m(z)?!!z.capture:!!z,Ge=En(u);if(Ge||(u[ze]=Ge=new xt(u)),w=Ge.add(g,w,A,ce,X),w.proxy)return w;if(A=Lo(),w.proxy=A,A.src=u,A.listener=w,u.addEventListener)Se||(z=ce),z===void 0&&(z=!1),u.addEventListener(g.toString(),A,z);else if(u.attachEvent)u.attachEvent(Gn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Lo(){function u(w){return g.call(u.src,u.listener,w)}const g=os;return u}function br(u,g,w,A,z){if(Array.isArray(g))for(var X=0;X<g.length;X++)br(u,g[X],w,A,z);else A=m(A)?!!A.capture:!!A,w=as(w),u&&u[Me]?(u=u.i,g=String(g).toString(),g in u.g&&(X=u.g[g],w=en(X,w,A,z),-1<w&&(Qe(X[w]),Array.prototype.splice.call(X,w,1),X.length==0&&(delete u.g[g],u.h--)))):u&&(u=En(u))&&(g=u.g[g.toString()],u=-1,g&&(u=en(g,w,A,z)),(w=-1<u?g[u]:null)&&Hn(w))}function Hn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Me])Jt(g.i,u);else{var w=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(w,A,u.capture):g.detachEvent?g.detachEvent(Gn(w),A):g.addListener&&g.removeListener&&g.removeListener(A),(w=En(g))?(Jt(w,u),w.h==0&&(w.src=null,g[ze]=null)):Qe(u)}}}function Gn(u){return u in wn?wn[u]:wn[u]="on"+u}function os(u,g){if(u.da)u=!0;else{g=new fe(g,this);var w=u.listener,A=u.ha||u.src;u.fa&&Hn(u),u=w.call(A,g)}return u}function En(u){return u=u[ze],u instanceof xt?u:null}var is="__closure_events_fn_"+(1e9*Math.random()>>>0);function as(u){return typeof u=="function"?u:(u[is]||(u[is]=function(g){return u.handleEvent(g)}),u[is])}function ct(){K.call(this),this.i=new xt(this),this.M=this,this.F=null}P(ct,K),ct.prototype[Me]=!0,ct.prototype.removeEventListener=function(u,g,w,A){br(this,u,g,w,A)};function mt(u,g){var w,A=u.F;if(A)for(w=[];A;A=A.F)w.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new me(g,u);else if(g instanceof me)g.target=g.target||u;else{var z=g;g=new me(A,u),M(g,z)}if(z=!0,w)for(var X=w.length-1;0<=X;X--){var ce=g.g=w[X];z=Qn(ce,A,!0,g)&&z}if(ce=g.g=u,z=Qn(ce,A,!0,g)&&z,z=Qn(ce,A,!1,g)&&z,w)for(X=0;X<w.length;X++)ce=g.g=w[X],z=Qn(ce,A,!1,g)&&z}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var w=u.g[g],A=0;A<w.length;A++)Qe(w[A]);delete u.g[g],u.h--}}this.F=null},ct.prototype.K=function(u,g,w,A){return this.i.add(String(u),g,!1,w,A)},ct.prototype.L=function(u,g,w,A){return this.i.add(String(u),g,!0,w,A)};function Qn(u,g,w,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,X=0;X<g.length;++X){var ce=g[X];if(ce&&!ce.da&&ce.capture==w){var Ge=ce.listener,Nt=ce.ha||ce.src;ce.fa&&Jt(u.i,ce),z=Ge.call(Nt,A)!==!1&&z}}return z&&!A.defaultPrevented}function Xs(u,g,w){if(typeof u=="function")w&&(u=I(u,w));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(u,g||0)}function Kn(u){u.g=Xs(()=>{u.g=null,u.i&&(u.i=!1,Kn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class gr extends K{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Kn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(u){K.call(this),this.h=u,this.g={}}P(Fr,K);var Ys=[];function Zs(u){W(u.g,function(g,w){this.g.hasOwnProperty(w)&&Hn(g)},u),u.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),Zs(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=d.JSON.stringify,Te=d.JSON.parse,ke=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function He(){}He.prototype.h=null;function Ye(u){return u.h||(u.h=u.i())}function Xn(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){me.call(this,"d")}P(Tn,me);function Yn(){me.call(this,"c")}P(Yn,me);var Sn={},eo=null;function Lr(){return eo=eo||new ct}Sn.La="serverreachability";function to(u){me.call(this,Sn.La,u)}P(to,me);function In(u){const g=Lr();mt(g,new to(g))}Sn.STAT_EVENT="statevent";function no(u,g){me.call(this,Sn.STAT_EVENT,u),this.stat=g}P(no,me);function nt(u){const g=Lr();mt(g,new no(g,u))}Sn.Ma="timingevent";function gt(u,g){me.call(this,Sn.Ma,u),this.size=g}P(gt,me);function yt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},g)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function Zn(u,g,w,A,z,X){u.info(function(){if(u.g)if(X)for(var ce="",Ge=X.split("&"),Nt=0;Nt<Ge.length;Nt++){var be=Ge[Nt].split("=");if(1<be.length){var Dt=be[0];be=be[1];var Tt=Dt.split("_");ce=2<=Tt.length&&Tt[1]=="type"?ce+(Dt+"="+be+"&"):ce+(Dt+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+g+`
`+w+`
`+ce})}function yr(u,g,w,A,z,X,ce){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+g+`
`+w+`
`+X+" "+ce})}function Jn(u,g,w,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+hc(u,w)+(A?" "+A:"")})}function qi(u,g){u.info(function(){return"TIMEOUT: "+g})}Vn.prototype.info=function(){};function hc(u,g){if(!u.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var A=w[u];if(!(2>A.length)){var z=A[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Js(w)}catch{return g}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},el={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},er;function ro(){}P(ro,He),ro.prototype.g=function(){return new XMLHttpRequest},ro.prototype.i=function(){return{}},er=new ro;function tr(u,g,w,A){this.j=u,this.i=g,this.l=w,this.R=A||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tl}function tl(){this.i=null,this.g="",this.h=!1}var Hi={},Uo={};function Bo(u,g,w){u.L=1,u.v=ds(Nn(g)),u.m=w,u.P=!0,Gi(u,null)}function Gi(u,g){u.F=Date.now(),Ze(u),u.A=Nn(u.v);var w=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),ps(w.i,"t",A),u.C=0,w=u.j.J,u.h=new tl,u.g=_l(u.j,w?g:null,!u.m),0<u.O&&(u.M=new gr(I(u.Y,u,u.g),u.O)),g=u.U,w=u.g,A=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ys[0]=z.toString()),z=Ys);for(var X=0;X<z.length;X++){var ce=Qs(w,z[X],A||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),In(),Zn(u.i,u.u,u.A,u.l,u.R,u.m)}tr.prototype.ca=function(u){u=u.target;const g=this.M;g&&un(u)==3?g.j():this.Y(u)},tr.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=un(this.g);var g=this.g.Ba();const Fn=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||Ji(this.g)))){this.J||Tt!=4||g==7||(g==8||0>=Fn?In(3):In(2)),so(this);var w=this.g.Z();this.X=w;t:if(nl(this)){var A=Ji(this.g);u="";var z=A.length,X=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),ls(this);var ce="";break t}this.h.i=new d.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,u+=this.h.i.decode(A[g],{stream:!(X&&g==z-1)});A.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=w==200,yr(this.i,this.u,this.A,this.l,this.R,Tt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Nt=this.g;if((Ge=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ge)){var be=Ge;break t}}be=null}if(w=be)Jn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,w);else{this.o=!1,this.s=3,nt(12),On(this),ls(this);break e}}if(this.P){w=!0;let kn;for(;!this.J&&this.C<ce.length;)if(kn=dc(this,ce),kn==Uo){Tt==4&&(this.s=4,nt(14),w=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==Hi){this.s=4,nt(15),Jn(this.i,this.l,ce,"[Invalid Chunk]"),w=!1;break}else Jn(this.i,this.l,kn,null),Qi(this,kn);if(nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||ce.length!=0||this.h.h||(this.s=1,nt(16),w=!1),this.o=this.o&&w,!w)Jn(this.i,this.l,ce,"[Invalid Chunked Response]"),On(this),ls(this);else if(0<ce.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),ta(Dt),Dt.M=!0,nt(11))}}else Jn(this.i,this.l,ce,null),Qi(this,ce);Tt==4&&On(this),this.o&&!this.J&&(Tt==4?Zo(this.j,this):(this.o=!1,Ze(this)))}else Go(this.g),w==400&&0<ce.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),On(this),ls(this)}}}catch{}finally{}};function nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dc(u,g){var w=u.C,A=g.indexOf(`
`,w);return A==-1?Uo:(w=Number(g.substring(w,A)),isNaN(w)?Hi:(A+=1,A+w>g.length?Uo:(g=g.slice(A,A+w),u.C=A+w,g)))}tr.prototype.cancel=function(){this.J=!0,On(this)};function Ze(u){u.S=Date.now()+u.I,rl(u,u.I)}function rl(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=yt(I(u.ba,u),g)}function so(u){u.B&&(d.clearTimeout(u.B),u.B=null)}tr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qi(this.i,this.A),this.L!=2&&(In(),nt(17)),On(this),this.s=2,ls(this)):rl(this,this.S-u)};function ls(u){u.j.G==0||u.J||Zo(u.j,u)}function On(u){so(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Zs(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Qi(u,g){try{var w=u.j;if(w.G!=0&&(w.g==u||tn(w.h,u))){if(!u.K&&tn(w.h,u)&&w.G==3){try{var A=w.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)Yo(w),ir(w);else break e;Xo(w),nt(18)}}else w.za=z[1],0<w.za-w.T&&37500>z[2]&&w.F&&w.v==0&&!w.C&&(w.C=yt(I(w.Za,w),6e3));if(1>=ol(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else $r(w,11)}else if((u.K||w.g==u)&&Yo(w),!G(g))for(z=w.Da.g.parse(g),g=0;g<z.length;g++){let be=z[g];if(w.T=be[0],be=be[1],w.G==2)if(be[0]=="c"){w.K=be[1],w.ia=be[2];const Dt=be[3];Dt!=null&&(w.la=Dt,w.j.info("VER="+w.la));const Tt=be[4];Tt!=null&&(w.Aa=Tt,w.j.info("SVER="+w.Aa));const Fn=be[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(A=1.5*Fn,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const kn=u.g;if(kn){const ho=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var X=A.h;X.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ki(X,X.h),X.h=null))}if(A.D){const ei=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;ei&&(A.ya=ei,Ke(A.I,A.D,ei))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var ce=u;if(A.qa=vl(A,A.J?A.ia:null,A.W),ce.K){il(A.h,ce);var Ge=ce,Nt=A.L;Nt&&(Ge.I=Nt),Ge.B&&(so(Ge),Ze(Ge)),A.g=ce}else co(A);0<w.i.length&&Er(w)}else be[0]!="stop"&&be[0]!="close"||$r(w,7);else w.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?$r(w,7):jt(w):be[0]!="noop"&&w.l&&w.l.ta(be),w.v=0)}}In(4)}catch{}}var sl=class{constructor(u,g){this.g=u,this.map=g}};function oo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ol(u){return u.h?1:u.g?u.g.size:0}function tn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ki(u,g){u.g?u.g.add(g):u.h=g}function il(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}oo.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function al(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const w of u.g.values())g=g.concat(w.D);return g}return V(u.i)}function zo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var g=[],w=u.length,A=0;A<w;A++)g.push(u[A]);return g}g=[],w=0;for(A in u)g[w++]=u[A];return g}function $o(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var g=[];u=u.length;for(var w=0;w<u;w++)g.push(w);return g}g=[],w=0;for(const A in u)g[w++]=A;return g}}}function us(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var w=$o(u),A=zo(u),z=A.length,X=0;X<z;X++)g.call(void 0,A[X],w&&w[X],u)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fc(u,g){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var A=u[w].indexOf("="),z=null;if(0<=A){var X=u[w].substring(0,A);z=u[w].substring(A+1)}else X=u[w];g(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function jr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof jr){this.h=u.h,ao(this,u.j),this.o=u.o,this.g=u.g,cs(this,u.s),this.l=u.l;var g=u.i,w=new vr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),hs(this,w),this.m=u.m}else u&&(g=String(u).match(io))?(this.h=!1,ao(this,g[1]||"",!0),this.o=Oe(g[2]||""),this.g=Oe(g[3]||"",!0),cs(this,g[4]),this.l=Oe(g[5]||"",!0),hs(this,g[6]||"",!0),this.m=Oe(g[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}jr.prototype.toString=function(){var u=[],g=this.j;g&&u.push(fs(g,Wo,!0),":");var w=this.g;return(w||g=="file")&&(u.push("//"),(g=this.o)&&u.push(fs(g,Wo,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(fs(w,w.charAt(0)=="/"?cl:ul,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",fs(w,Xi)),u.join("")};function Nn(u){return new jr(u)}function ao(u,g,w){u.j=w?Oe(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function cs(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function hs(u,g,w){g instanceof vr?(u.i=g,_r(u.i,u.h)):(w||(g=fs(g,hl)),u.i=new vr(g,u.h))}function Ke(u,g,w){u.i.set(g,w)}function ds(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fs(u,g,w){return typeof u=="string"?(u=encodeURI(u).replace(g,ll),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wo=/[#\/\?@]/g,ul=/[#\?:]/g,cl=/[#\?]/g,hl=/[#\?@]/g,Xi=/#/g;function vr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Lt(u){u.g||(u.g=new Map,u.h=0,u.i&&fc(u.i,function(g,w){u.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}r=vr.prototype,r.add=function(u,g){Lt(this),this.i=null,u=bn(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(g),this.h+=1,this};function nr(u,g){Lt(u),g=bn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function rr(u,g){return Lt(u),g=bn(u,g),u.g.has(g)}r.forEach=function(u,g){Lt(this),this.g.forEach(function(w,A){w.forEach(function(z){u.call(g,z,A,this)},this)},this)},r.na=function(){Lt(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let A=0;A<g.length;A++){const z=u[A];for(let X=0;X<z.length;X++)w.push(g[A])}return w},r.V=function(u){Lt(this);let g=[];if(typeof u=="string")rr(this,u)&&(g=g.concat(this.g.get(bn(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)g=g.concat(u[w])}return g},r.set=function(u,g){return Lt(this),this.i=null,u=bn(this,u),rr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function ps(u,g,w){nr(u,g),0<w.length&&(u.i=null,u.g.set(bn(u,g),V(w)),u.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var A=g[w];const X=encodeURIComponent(String(A)),ce=this.V(A);for(A=0;A<ce.length;A++){var z=X;ce[A]!==""&&(z+="="+encodeURIComponent(String(ce[A]))),u.push(z)}}return this.i=u.join("&")};function bn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function _r(u,g){g&&!u.j&&(Lt(u),u.i=null,u.g.forEach(function(w,A){var z=A.toLowerCase();A!=z&&(nr(this,A),ps(this,z,w))},u)),u.j=g}function pc(u,g){const w=new Vn;if(d.Image){const A=new Image;A.onload=C(ln,w,"TestLoadImage: loaded",!0,g,A),A.onerror=C(ln,w,"TestLoadImage: error",!1,g,A),A.onabort=C(ln,w,"TestLoadImage: abort",!1,g,A),A.ontimeout=C(ln,w,"TestLoadImage: timeout",!1,g,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function dl(u,g){const w=new Vn,A=new AbortController,z=setTimeout(()=>{A.abort(),ln(w,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(X=>{clearTimeout(z),X.ok?ln(w,"TestPingServer: ok",!0,g):ln(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),ln(w,"TestPingServer: error",!1,g)})}function ln(u,g,w,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(w)}catch{}}function mc(){this.g=new ke}function fl(u,g,w){const A=w||"";try{us(u,function(z,X){let ce=z;m(z)&&(ce=Js(z)),g.push(A+X+"="+encodeURIComponent(ce))})}catch(z){throw g.push(A+"type="+encodeURIComponent("_badmap")),z}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}P(Ur,He),Ur.prototype.g=function(){return new lo(this.l,this.j)},Ur.prototype.i=function(u){return function(){return u}}({});function lo(u,g){ct.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(lo,ct),r=lo.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,or(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?sr(this):or(this),this.readyState==3&&pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,sr(this))},r.Qa=function(u){this.g&&(this.response=u,sr(this))},r.ga=function(){this.g&&sr(this)};function sr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,or(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=g.next();return u.join(`\r
`)};function or(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Br(u){let g="";return W(u,function(w,A){g+=A,g+=":",g+=w,g+=`\r
`}),g}function ms(u,g,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Br(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Ke(u,g,w))}function rt(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(rt,ct);var gc=/^https?$/i,Yi=["POST","PUT"];r=rt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():er.g(),this.v=this.o?Ye(this.o):Ye(er),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(X){uo(this,X);return}if(u=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)w.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())w.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),z=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Yi,g,void 0))||A||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of w)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ho(this),this.u=!0,this.g.send(u),this.u=!1}catch(X){uo(this,X)}};function uo(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,qo(u),An(u)}function qo(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),An(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),An(this,!0)),rt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Zi(this):this.bb())},r.bb=function(){Zi(this)};function Zi(u){if(u.h&&typeof h<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)Xs(u.Ea,0,u);else if(mt(u,"readystatechange"),un(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var A;if(A=ce===0){var z=String(u.D).match(io)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),A=!gc.test(z?z.toLowerCase():"")}w=A}if(w)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var X=2<un(u)?u.g.statusText:""}catch{X=""}u.l=X+" ["+u.Z()+"]",qo(u)}}finally{An(u)}}}}function An(u,g){if(u.g){Ho(u);const w=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||mt(u,"ready");try{w.onreadystatechange=A}catch{}}}function Ho(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Te(g)}};function Ji(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Go(u){const g={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(G(u[A]))continue;var w=x(u[A]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=g[z]||[];g[z]=X,X.push(w)}R(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||g}function ea(u){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,u),this.cb=wr("retryDelaySeedMs",1e4,u),this.Wa=wr("forwardChannelMaxRetries",2,u),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new oo(u&&u.concurrentRequestLimit),this.Da=new mc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ea.prototype,r.la=8,r.G=1,r.connect=function(u,g,w,A){nt(0),this.W=u,this.H=g||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=vl(this,null,this.W),Er(this)};function jt(u){if(Qo(u),u.G==3){var g=u.U++,w=Nn(u.I);if(Ke(w,"SID",u.K),Ke(w,"RID",g),Ke(w,"TYPE","terminate"),zr(u,w),g=new tr(u,u.j,g),g.L=2,g.v=ds(Nn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=g.v,w=!0),w||(g.g=_l(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ze(g)}yl(u)}function ir(u){u.g&&(ta(u),u.g.cancel(),u.g=null)}function Qo(u){ir(u),u.u&&(d.clearTimeout(u.u),u.u=null),Yo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Er(u){if(!Cn(u.h)&&!u.s){u.s=!0;var g=u.Ga;ie||J(),Z||(ie(),Z=!0),te.add(g,u),u.B=0}}function yc(u,g){return ol(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=yt(I(u.Ga,u,g),gl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new tr(this,this.j,u);let X=this.o;if(this.S&&(X?(X=T(X),M(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=gs(this,z,g),w=Nn(this.I),Ke(w,"RID",u),Ke(w,"CVER",22),this.D&&Ke(w,"X-HTTP-Session-Id",this.D),zr(this,w),X&&(this.O?g="headers="+encodeURIComponent(String(Br(X)))+"&"+g:this.m&&ms(w,this.m,X)),Ki(this.h,z),this.Ua&&Ke(w,"TYPE","init"),this.P?(Ke(w,"$req",g),Ke(w,"SID","null"),z.T=!0,Bo(z,w,null)):Bo(z,w,g),this.G=2}}else this.G==3&&(u?Ko(this,u):this.i.length==0||Cn(this.h)||Ko(this))};function Ko(u,g){var w;g?w=g.l:w=u.U++;const A=Nn(u.I);Ke(A,"SID",u.K),Ke(A,"RID",w),Ke(A,"AID",u.T),zr(u,A),u.m&&u.o&&ms(A,u.m,u.o),w=new tr(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),g&&(u.i=g.D.concat(u.i)),g=gs(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ki(u.h,w),Bo(w,A,g)}function zr(u,g){u.H&&W(u.H,function(w,A){Ke(g,A,w)}),u.l&&us({},function(w,A){Ke(g,A,w)})}function gs(u,g,w){w=Math.min(u.i.length,w);var A=u.l?I(u.l.Na,u.l,u):null;e:{var z=u.i;let X=-1;for(;;){const ce=["count="+w];X==-1?0<w?(X=z[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let Ge=!0;for(let Nt=0;Nt<w;Nt++){let be=z[Nt].g;const Dt=z[Nt].map;if(be-=X,0>be)X=Math.max(0,z[Nt].g-100),Ge=!1;else try{fl(Dt,ce,"req"+be+"_")}catch{A&&A(Dt)}}if(Ge){A=ce.join("&");break e}}}return u=u.i.splice(0,w),g.D=u,A}function co(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ie||J(),Z||(ie(),Z=!0),te.add(g,u),u.v=0}}function Xo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=yt(I(u.Fa,u),gl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,ml(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=yt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ir(this),ml(this))};function ta(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function ml(u){u.g=new tr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Nn(u.qa);Ke(g,"RID","rpc"),Ke(g,"SID",u.K),Ke(g,"AID",u.T),Ke(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(g,"TO",u.ja),Ke(g,"TYPE","xmlhttp"),zr(u,g),u.m&&u.o&&ms(g,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=ds(Nn(g)),w.m=null,w.P=!0,Gi(w,u)}r.Za=function(){this.C!=null&&(this.C=null,ir(this),Xo(this),nt(19))};function Yo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Zo(u,g){var w=null;if(u.g==g){Yo(u),ta(u),u.g=null;var A=2}else if(tn(u.h,g))w=g.D,il(u.h,g),A=1;else return;if(u.G!=0){if(g.o)if(A==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var z=u.B;A=Lr(),mt(A,new gt(A,w)),Er(u)}else co(u);else if(z=g.s,z==3||z==0&&0<g.X||!(A==1&&yc(u,g)||A==2&&Xo(u)))switch(w&&0<w.length&&(g=u.h,g.i=g.i.concat(w)),z){case 1:$r(u,5);break;case 4:$r(u,10);break;case 3:$r(u,6);break;default:$r(u,2)}}}function gl(u,g){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*g}function $r(u,g){if(u.j.info("Error code "+g),g==2){var w=I(u.fb,u),A=u.Xa;const z=!A;A=new jr(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ao(A,"https"),ds(A),z?pc(A.toString(),w):dl(A.toString(),w)}else nt(2);u.G=0,u.l&&u.l.sa(g),yl(u),Qo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function yl(u){if(u.G=0,u.ka=[],u.l){const g=al(u.h);(g.length!=0||u.i.length!=0)&&(b(u.ka,g),b(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function vl(u,g,w){var A=w instanceof jr?Nn(w):new jr(w);if(A.g!="")g&&(A.g=g+"."+A.g),cs(A,A.s);else{var z=d.location;A=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var X=new jr(null);A&&ao(X,A),g&&(X.g=g),z&&cs(X,z),w&&(X.l=w),A=X}return w=u.D,g=u.ya,w&&g&&Ke(A,w,g),Ke(A,"VER",u.la),zr(u,A),A}function _l(u,g,w){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new rt(new Ur({eb:w})):new rt(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function na(){}r=na.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Jo(){}Jo.prototype.g=function(u,g){return new nn(u,g)};function nn(u,g){ct.call(this),this.g=new ea(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!G(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!G(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Tr(this)}P(nn,ct),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){jt(this.g)},nn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=Js(u),u=w);g.i.push(new sl(g.Ya++,u)),g.G==3&&Er(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,jt(this.g),delete this.g,nn.aa.N.call(this)};function wl(u){Tn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const w in g){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}P(wl,Tn);function El(){Yn.call(this),this.status=1}P(El,Yn);function Tr(u){this.g=u}P(Tr,na),Tr.prototype.ua=function(){mt(this.g,"a")},Tr.prototype.ta=function(u){mt(this.g,new wl(u))},Tr.prototype.sa=function(u){mt(this.g,new El)},Tr.prototype.ra=function(){mt(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,Wy=function(){return new Jo},$y=function(){return Lr()},zy=Sn,id={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Tu=jo,el.COMPLETE="complete",By=el,Xn.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Aa=Xn,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Uy=rt}).apply(typeof mu<"u"?mu:typeof self<"u"?self:typeof window<"u"?window:{});const Hm="@firebase/firestore",Gm="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Ry("@firebase/firestore");function Ei(){return xo.logLevel}function ye(r,...e){if(xo.logLevel<=Le.DEBUG){const t=e.map(Od);xo.debug(`Firestore (${Li}): ${r}`,...t)}}function ns(r,...e){if(xo.logLevel<=Le.ERROR){const t=e.map(Od);xo.error(`Firestore (${Li}): ${r}`,...t)}}function Ri(r,...e){if(xo.logLevel<=Le.WARN){const t=e.map(Od);xo.warn(`Firestore (${Li}): ${r}`,...t)}}function Od(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r="Unexpected state"){const e=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: `+r;throw ns(e),new Error(e)}function lt(r,e){r||De()}function Ue(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Mo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}}class T1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class S1{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let o=this.i;const i=f=>this.i!==o?(o=this.i,t(f)):Promise.resolve();let l=new ko;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ko,e.enqueueRetryable(()=>i(this.currentUser))};const h=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},d=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ko)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(lt(typeof o.accessToken=="string"),new qy(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new Kt(e)}}class I1{constructor(e,t,o){this.l=e,this.h=t,this.P=o,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class C1{constructor(e,t,o){this.l=e,this.h=t,this.P=o}getToken(){return Promise.resolve(new I1(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N1{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,My(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0);const o=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const i=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Qm(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new Qm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const i=A1(40);for(let l=0;l<i.length;++l)o.length<20&&i[l]<t&&(o+=e.charAt(i[l]%62))}return o}}function je(r,e){return r<e?-1:r>e?1:0}function Pi(r,e,t){return r.length===e.length&&r.every((o,i)=>t(o,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=-62135596800,Xm=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*Xm);return new vn(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Km)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xm}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Km;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new vn(0,0))}static max(){return new xe(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="__name__";class Ar{constructor(e,t,o){t===void 0?t=0:t>e.length&&De(),o===void 0?o=e.length-t:o>e.length-t&&De(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let i=0;i<o;i++){const l=Ar.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const o=Ar.isNumericId(e),i=Ar.isNumericId(t);return o&&!i?-1:!o&&i?1:o&&i?Ar.extractNumericId(e).compare(Ar.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}}class dt extends Ar{construct(e,t,o){return new dt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(i=>i.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const k1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Ar{construct(e,t,o){return new on(e,t,o)}static isValidIdentifier(e){return k1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ym}static keyField(){return new on([Ym])}static fromServerFormat(e){const t=[];let o="",i=0;const l=()=>{if(o.length===0)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let h=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=f,i+=2}else d==="`"?(h=!h,i++):d!=="."||h?(o+=d,i++):(l(),i++)}if(l(),h)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=-1;function R1(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(o===1e9?new vn(t+1,0):new vn(t,o));return new Us(i,Ae.empty(),e)}function P1(r){return new Us(r.readTime,r.key,ba)}class Us{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Us(xe.min(),Ae.empty(),ba)}static max(){return new Us(xe.max(),Ae.empty(),ba)}}function x1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==D1)throw r;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((o,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,o)=>{t(e)})}static reject(e){return new ee((t,o)=>{o(e)})}static waitFor(e){return new ee((t,o)=>{let i=0,l=0,h=!1;e.forEach(d=>{++i,d.next(()=>{++l,h&&l===i&&t()},f=>o(f))}),h=!0,l===i&&t()})}static or(e){let t=ee.resolve(!1);for(const o of e)t=t.next(i=>i?ee.resolve(i):o());return t}static forEach(e,t){const o=[];return e.forEach((i,l)=>{o.push(t.call(this,i,l))}),this.waitFor(o)}static mapArray(e,t){return new ee((o,i)=>{const l=e.length,h=new Array(l);let d=0;for(let f=0;f<l;f++){const m=f;t(e[m]).next(v=>{h[m]=v,++d,d===l&&o(h)},v=>i(v))}})}static doWhile(e,t){return new ee((o,i)=>{const l=()=>{e()===!0?t().next(()=>{l()},i):o()};l()})}}function V1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ji(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.oe(o),this._e=o=>t.writeSequenceNumber(o))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Gu.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=-1;function Qu(r){return r==null}function ad(r){return r===0&&1/r==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="";function b1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Zm(e)),e=F1(r.get(t),e);return Zm(e)}function F1(r,e){let t=e;const o=r.length;for(let i=0;i<o;i++){const l=r.charAt(i);switch(l){case"\0":t+="";break;case Gy:t+="";break;default:t+=l}}return t}function Zm(r){return r+Gy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function $a(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function L1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const i=this.comparator(e,o.key);if(i===0)return t+o.left.size;i<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gu(this.root,e,this.comparator,!0)}}class gu{constructor(e,t,o,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,o,i,l){this.key=e,this.value=t,this.color=o??zt.RED,this.left=i??zt.EMPTY,this.right=l??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,i,l){return new zt(e??this.key,t??this.value,o??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let i=this;const l=o(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,o),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,o)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;o=i.right.min(),i=i.copy(o.key,o.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,o,i,l){return this}insert(e,t,o){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const i=o.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eg(this.data.getIterator())}getIteratorFrom(e){return new eg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=o.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class eg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Vs([])}unionWith(e){let t=new Pt(on.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(t,o)=>t.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Qy("Invalid base64 string: "+l):l}}(e);return new $t(t)}static fromUint8Array(e){const t=function(i){let l="";for(let h=0;h<i.length;++h)l+=String.fromCharCode(i[h]);return l}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const j1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(r){if(lt(!!r),typeof r=="string"){let e=0;const t=j1.exec(r);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function zs(r){return typeof r=="string"?$t.fromBase64String(r):$t.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="server_timestamp",Xy="__type__",Yy="__previous_value__",Zy="__local_write_time__";function bd(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xy])===null||t===void 0?void 0:t.stringValue)===Ky}function Ku(r){const e=r.mapValue.fields[Yy];return bd(e)?Ku(e):e}function Fa(r){const e=Bs(r.mapValue.fields[Zy].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t,o,i,l,h,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=i,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}const Pu="(default)";class La{constructor(e,t){this.projectId=e,this.database=t||Pu}static empty(){return new La("","")}get isDefaultDatabase(){return this.database===Pu}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__type__",z1="__max__",yu={mapValue:{}},$1="__vector__",ld="value";function $s(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bd(r)?4:q1(r)?9007199254740991:W1(r)?10:11:De()}function Pr(r,e){if(r===e)return!0;const t=$s(r);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fa(r).isEqual(Fa(e));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const h=Bs(i.timestampValue),d=Bs(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,l){return zs(i.bytesValue).isEqual(zs(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,l){return _t(i.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(l.geoPointValue.longitude)}(r,e);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return _t(i.integerValue)===_t(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const h=_t(i.doubleValue),d=_t(l.doubleValue);return h===d?ad(h)===ad(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return Pi(r.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(i,l){const h=i.mapValue.fields||{},d=l.mapValue.fields||{};if(Jm(h)!==Jm(d))return!1;for(const f in h)if(h.hasOwnProperty(f)&&(d[f]===void 0||!Pr(h[f],d[f])))return!1;return!0}(r,e);default:return De()}}function ja(r,e){return(r.values||[]).find(t=>Pr(t,e))!==void 0}function xi(r,e){if(r===e)return 0;const t=$s(r),o=$s(e);if(t!==o)return je(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=_t(l.integerValue||l.doubleValue),f=_t(h.integerValue||h.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(r,e);case 3:return tg(r.timestampValue,e.timestampValue);case 4:return tg(Fa(r),Fa(e));case 5:return je(r.stringValue,e.stringValue);case 6:return function(l,h){const d=zs(l),f=zs(h);return d.compareTo(f)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),f=h.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=je(d[m],f[m]);if(v!==0)return v}return je(d.length,f.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=je(_t(l.latitude),_t(h.latitude));return d!==0?d:je(_t(l.longitude),_t(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ng(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,f,m,v;const _=l.fields||{},I=h.fields||{},C=(d=_[ld])===null||d===void 0?void 0:d.arrayValue,P=(f=I[ld])===null||f===void 0?void 0:f.arrayValue,V=je(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((v=P==null?void 0:P.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:ng(C,P)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===yu.mapValue&&h===yu.mapValue)return 0;if(l===yu.mapValue)return 1;if(h===yu.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),m=h.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let _=0;_<f.length&&_<v.length;++_){const I=je(f[_],v[_]);if(I!==0)return I;const C=xi(d[f[_]],m[v[_]]);if(C!==0)return C}return je(f.length,v.length)}(r.mapValue,e.mapValue);default:throw De()}}function tg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=Bs(r),o=Bs(e),i=je(t.seconds,o.seconds);return i!==0?i:je(t.nanos,o.nanos)}function ng(r,e){const t=r.values||[],o=e.values||[];for(let i=0;i<t.length&&i<o.length;++i){const l=xi(t[i],o[i]);if(l)return l}return je(t.length,o.length)}function Di(r){return ud(r)}function ud(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const o=Bs(t);return`time(${o.seconds},${o.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return zs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ae.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let o="[",i=!0;for(const l of t.values||[])i?i=!1:o+=",",o+=ud(l);return o+"]"}(r.arrayValue):"mapValue"in r?function(t){const o=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const h of o)l?l=!1:i+=",",i+=`${h}:${ud(t.fields[h])}`;return i+"}"}(r.mapValue):De()}function Su(r){switch($s(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ku(r);return e?16+Su(e):16;case 5:return 2*r.stringValue.length;case 6:return zs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(o){return(o.values||[]).reduce((i,l)=>i+Su(l),0)}(r.arrayValue);case 10:case 11:return function(o){let i=0;return $a(o.fields,(l,h)=>{i+=l.length+Su(h)}),i}(r.mapValue);default:throw De()}}function cd(r){return!!r&&"integerValue"in r}function Fd(r){return!!r&&"arrayValue"in r}function rg(r){return!!r&&"nullValue"in r}function sg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hh(r){return!!r&&"mapValue"in r}function W1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[B1])===null||t===void 0?void 0:t.stringValue)===$1}function Pa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return $a(r.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Pa(o)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function q1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===z1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(t)}setAll(e){let t=on.emptyPath(),o={},i=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,o,i),o={},i=[],t=d.popLast()}h?o[d.lastSegment()]=Pa(h):i.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,o,i)}delete(e){const t=this.field(e.popLast());Hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let i=t.mapValue.fields[e.get(o)];Hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,o){$a(t,(i,l)=>e[i]=l);for(const i of o)delete e[i]}clone(){return new kr(Pa(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,o,i,l,h,d){this.key=e,this.documentType=t,this.version=o,this.readTime=i,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Xt(e,0,xe.min(),xe.min(),xe.min(),kr.empty(),0)}static newFoundDocument(e,t,o,i){return new Xt(e,1,t,xe.min(),o,i,0)}static newNoDocument(e,t){return new Xt(e,2,t,xe.min(),xe.min(),kr.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,xe.min(),xe.min(),kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.position=e,this.inclusive=t}}function og(r,e,t){let o=0;for(let i=0;i<r.position.length;i++){const l=e[i],h=r.position[i];if(l.field.isKeyField()?o=Ae.comparator(Ae.fromName(h.referenceValue),t.key):o=xi(h,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function ig(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Pr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t="asc"){this.field=e,this.dir=t}}function H1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{}class Rt extends Jy{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new Q1(e,t,o):t==="array-contains"?new Y1(e,o):t==="in"?new Z1(e,o):t==="not-in"?new J1(e,o):t==="array-contains-any"?new eT(e,o):new Rt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new K1(e,o):new X1(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xi(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.matchesComparison(xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Jy{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new xr(e,t)}matches(e){return ev(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ev(r){return r.op==="and"}function tv(r){return G1(r)&&ev(r)}function G1(r){for(const e of r.filters)if(e instanceof xr)return!1;return!0}function hd(r){if(r instanceof Rt)return r.field.canonicalString()+r.op.toString()+Di(r.value);if(tv(r))return r.filters.map(e=>hd(e)).join(",");{const e=r.filters.map(t=>hd(t)).join(",");return`${r.op}(${e})`}}function nv(r,e){return r instanceof Rt?function(o,i){return i instanceof Rt&&o.op===i.op&&o.field.isEqual(i.field)&&Pr(o.value,i.value)}(r,e):r instanceof xr?function(o,i){return i instanceof xr&&o.op===i.op&&o.filters.length===i.filters.length?o.filters.reduce((l,h,d)=>l&&nv(h,i.filters[d]),!0):!1}(r,e):void De()}function rv(r){return r instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${Di(t.value)}`}(r):r instanceof xr?function(t){return t.op.toString()+" {"+t.getFilters().map(rv).join(" ,")+"}"}(r):"Filter"}class Q1 extends Rt{constructor(e,t,o){super(e,t,o),this.key=Ae.fromName(o.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class K1 extends Rt{constructor(e,t){super(e,"in",t),this.keys=sv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class X1 extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=sv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(o=>Ae.fromName(o.referenceValue))}class Y1 extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fd(t)&&ja(t.arrayValue,this.value)}}class Z1 extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ja(this.value.arrayValue,t)}}class J1 extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ja(this.value.arrayValue,t)}}class eT extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>ja(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t=null,o=[],i=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=i,this.limit=l,this.startAt=h,this.endAt=d,this.le=null}}function ag(r,e=null,t=[],o=[],i=null,l=null,h=null){return new tT(r,e,t,o,i,l,h)}function Ld(r){const e=Ue(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>hd(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>function(l){return l.field.canonicalString()+l.dir}(o)).join(","),Qu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Di(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Di(o)).join(",")),e.le=t}return e.le}function jd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!H1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!nv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ig(r.startAt,e.startAt)&&ig(r.endAt,e.endAt)}function dd(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t=null,o=[],i=[],l=null,h="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=i,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function nT(r,e,t,o,i,l,h,d){return new Xu(r,e,t,o,i,l,h,d)}function Ud(r){return new Xu(r)}function lg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rT(r){return r.collectionGroup!==null}function xa(r){const e=Ue(r);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Pt(on.comparator);return h.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Du(l,o))}),t.has(on.keyField().canonicalString())||e.he.push(new Du(on.keyField(),o))}return e.he}function Rr(r){const e=Ue(r);return e.Pe||(e.Pe=sT(e,xa(r))),e.Pe}function sT(r,e){if(r.limitType==="F")return ag(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new Du(i.field,l)});const t=r.endAt?new xu(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new xu(r.startAt.position,r.startAt.inclusive):null;return ag(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function fd(r,e,t){return new Xu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yu(r,e){return jd(Rr(r),Rr(e))&&r.limitType===e.limitType}function ov(r){return`${Ld(Rr(r))}|lt:${r.limitType}`}function Ti(r){return`Query(target=${function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map(i=>rv(i)).join(", ")}]`),Qu(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map(i=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(i)).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map(i=>Di(i)).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map(i=>Di(i)).join(",")),`Target(${o})`}(Rr(r))}; limitType=${r.limitType})`}function Zu(r,e){return e.isFoundDocument()&&function(o,i){const l=i.key.path;return o.collectionGroup!==null?i.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Ae.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)}(r,e)&&function(o,i){for(const l of xa(o))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(r,e)&&function(o,i){for(const l of o.filters)if(!l.matches(i))return!1;return!0}(r,e)&&function(o,i){return!(o.startAt&&!function(h,d,f){const m=og(h,d,f);return h.inclusive?m<=0:m<0}(o.startAt,xa(o),i)||o.endAt&&!function(h,d,f){const m=og(h,d,f);return h.inclusive?m>=0:m>0}(o.endAt,xa(o),i))}(r,e)}function oT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iv(r){return(e,t)=>{let o=!1;for(const i of xa(r)){const l=iT(i,e,t);if(l!==0)return l;o=o||i.field.isKeyField()}return 0}}function iT(r,e,t){const o=r.field.isKeyField()?Ae.comparator(e.key,t.key):function(l,h,d){const f=h.data.field(l),m=d.data.field(l);return f!==null&&m!==null?xi(f,m):De()}(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[i,l]of o)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),i=this.inner[o];if(i===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],e))return o.length===1?delete this.inner[t]:o.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,(t,o)=>{for(const[i,l]of o)e(i,l)})}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new wt(Ae.comparator);function Ws(){return aT}const av=new wt(Ae.comparator);function ka(...r){let e=av;for(const t of r)e=e.insert(t.key,t);return e}function lT(r){let e=av;return r.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Ao(){return Da()}function lv(){return Da()}function Da(){return new Vo(r=>r.toString(),(r,e)=>r.isEqual(e))}const uT=new Pt(Ae.comparator);function We(...r){let e=uT;for(const t of r)e=e.add(t);return e}const cT=new Pt(je);function hT(){return cT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function fT(r){return{integerValue:""+r}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this._=void 0}}function pT(r,e,t){return r instanceof pd?function(i,l){const h={fields:{[Xy]:{stringValue:Ky},[Zy]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&bd(l)&&(l=Ku(l)),l&&(h.fields[Yy]=l),{mapValue:h}}(t,e):r instanceof Mu?uv(r,e):r instanceof Vu?cv(r,e):function(i,l){const h=gT(i,l),d=ug(h)+ug(i.Ie);return cd(h)&&cd(i.Ie)?fT(d):dT(i.serializer,d)}(r,e)}function mT(r,e,t){return r instanceof Mu?uv(r,e):r instanceof Vu?cv(r,e):t}function gT(r,e){return r instanceof md?function(o){return cd(o)||function(l){return!!l&&"doubleValue"in l}(o)}(e)?e:{integerValue:0}:null}class pd extends Ju{}class Mu extends Ju{constructor(e){super(),this.elements=e}}function uv(r,e){const t=hv(e);for(const o of r.elements)t.some(i=>Pr(i,o))||t.push(o);return{arrayValue:{values:t}}}class Vu extends Ju{constructor(e){super(),this.elements=e}}function cv(r,e){let t=hv(e);for(const o of r.elements)t=t.filter(i=>!Pr(i,o));return{arrayValue:{values:t}}}class md extends Ju{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ug(r){return _t(r.integerValue||r.doubleValue)}function hv(r){return Fd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function yT(r,e){return r.field.isEqual(e.field)&&function(o,i){return o instanceof Mu&&i instanceof Mu||o instanceof Vu&&i instanceof Vu?Pi(o.elements,i.elements,Pr):o instanceof md&&i instanceof md?Pr(o.Ie,i.Ie):o instanceof pd&&i instanceof pd}(r.transform,e.transform)}class Ro{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ro}static exists(e){return new Ro(void 0,e)}static updateTime(e){return new Ro(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bd{}function dv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new _T(r.key,Ro.none()):new zd(r.key,r.data,Ro.none());{const t=r.data,o=kr.empty();let i=new Pt(on.comparator);for(let l of e.fields)if(!i.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?o.delete(l):o.set(l,h),i=i.add(l)}return new ec(r.key,o,new Vs(i.toArray()),Ro.none())}}function vT(r,e,t){r instanceof zd?function(i,l,h){const d=i.value.clone(),f=hg(i.fieldTransforms,l,h.transformResults);d.setAll(f),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof ec?function(i,l,h){if(!Iu(i.precondition,l))return void l.convertToUnknownDocument(h.version);const d=hg(i.fieldTransforms,l,h.transformResults),f=l.data;f.setAll(fv(i)),f.setAll(d),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):function(i,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ma(r,e,t,o){return r instanceof zd?function(l,h,d,f){if(!Iu(l.precondition,h))return d;const m=l.value.clone(),v=dg(l.fieldTransforms,f,h);return m.setAll(v),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null}(r,e,t,o):r instanceof ec?function(l,h,d,f){if(!Iu(l.precondition,h))return d;const m=dg(l.fieldTransforms,f,h),v=h.data;return v.setAll(fv(l)),v.setAll(m),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(r,e,t,o):function(l,h,d){return Iu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function cg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(o,i){return o===void 0&&i===void 0||!(!o||!i)&&Pi(o,i,(l,h)=>yT(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zd extends Bd{constructor(e,t,o,i=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ec extends Bd{constructor(e,t,o,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function fv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}}),e}function hg(r,e,t){const o=new Map;lt(r.length===t.length);for(let i=0;i<t.length;i++){const l=r[i],h=l.transform,d=e.data.field(l.field);o.set(l.field,mT(h,d,t[i]))}return o}function dg(r,e,t){const o=new Map;for(const i of r){const l=i.transform,h=t.data.field(i.field);o.set(i.field,pT(l,h,e))}return o}class _T extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t,o,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=i}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&vT(l,e,o[i])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ma(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ma(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=lv();return this.mutations.forEach(i=>{const l=e.get(i.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(i.key)?null:d;const f=dv(h,d);f!==null&&o.set(i.key,f),h.isValidDocument()||h.convertToNoDocument(xe.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(t,o)=>cg(t,o))&&Pi(this.baseMutations,e.baseMutations,(t,o)=>cg(t,o))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Fe;function pv(r){if(r===void 0)return ns("GRPC error has no .code"),de.UNKNOWN;switch(r){case It.OK:return de.OK;case It.CANCELLED:return de.CANCELLED;case It.UNKNOWN:return de.UNKNOWN;case It.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case It.INTERNAL:return de.INTERNAL;case It.UNAVAILABLE:return de.UNAVAILABLE;case It.UNAUTHENTICATED:return de.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case It.NOT_FOUND:return de.NOT_FOUND;case It.ALREADY_EXISTS:return de.ALREADY_EXISTS;case It.PERMISSION_DENIED:return de.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case It.ABORTED:return de.ABORTED;case It.OUT_OF_RANGE:return de.OUT_OF_RANGE;case It.UNIMPLEMENTED:return de.UNIMPLEMENTED;case It.DATA_LOSS:return de.DATA_LOSS;default:return De()}}(Fe=It||(It={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new js([4294967295,4294967295],0);function fg(r){const e=ST().encode(r),t=new jy;return t.update(e),new Uint8Array(t.digest())}function pg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new js([t,o],0),new js([i,l],0)]}class $d{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Ra(`Invalid padding: ${t}`);if(o<0)throw new Ra(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Ra(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Ra(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=js.fromNumber(this.Ee)}Ae(e,t,o){let i=e.add(t.multiply(js.fromNumber(o)));return i.compare(IT)===1&&(i=new js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=fg(e),[o,i]=pg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(o,i,l);if(!this.Re(h))return!1}return!0}static create(e,t,o){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new $d(l,i,t);return o.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=fg(e),[o,i]=pg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(o,i,l);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t,o,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const i=new Map;return i.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new tc(xe.min(),i,new wt(je),Ws(),We())}}class Wa{constructor(e,t,o,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Wa(o,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t,o,i){this.me=e,this.removedTargetIds=t,this.key=o,this.fe=i}}class mv{constructor(e,t){this.targetId=e,this.ge=t}}class gv{constructor(e,t,o=$t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=i}}class mg{constructor(){this.pe=0,this.ye=gg(),this.we=$t.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=We(),t=We(),o=We();return this.ye.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:o=o.add(i);break;default:De()}}),new Wa(this.we,this.be,e,t,o)}Me(){this.Se=!1,this.ye=gg()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,lt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class CT{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ws(),this.$e=vu(),this.Ke=vu(),this.Ue=new wt(je)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const o=this.He(t);switch(e.state){case 0:this.Je(t)&&o.Ce(e.resumeToken);break;case 1:o.Be(),o.De||o.Me(),o.Ce(e.resumeToken);break;case 2:o.Be(),o.De||this.removeTarget(t);break;case 3:this.Je(t)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),o.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((o,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,o=e.ge.count,i=this.Xe(t);if(i){const l=i.target;if(dd(l))if(o===0){const h=new Ae(l.path);this.ze(t,h,Xt.newNoDocument(h,xe.min()))}else lt(o===1);else{const h=this.et(t);if(h!==o){const d=this.tt(e),f=d?this.nt(d,e,h):1;if(f!==0){this.Ye(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:i=0},hashCount:l=0}=t;let h,d;try{h=zs(o).toUint8Array()}catch(f){if(f instanceof Qy)return Ri("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new $d(h,i,l)}catch(f){return Ri(f instanceof Ra?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ee===0?null:d}nt(e,t,o){return t.ge.count===o-this.st(e,t.targetId)?0:2}st(e,t){const o=this.ke.getRemoteKeysForTarget(t);let i=0;return o.forEach(l=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((l,h)=>{const d=this.Xe(h);if(d){if(l.current&&dd(d.target)){const f=new Ae(d.target.path);this._t(f).has(h)||this.ut(h,f)||this.ze(h,f,Xt.newNoDocument(f,e))}l.ve&&(t.set(h,l.Fe()),l.Me())}});let o=We();this.Ke.forEach((l,h)=>{let d=!0;h.forEachWhile(f=>{const m=this.Xe(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(o=o.add(l))}),this.Qe.forEach((l,h)=>h.setReadTime(e));const i=new tc(e,t,this.Ue,this.Qe,o);return this.Qe=Ws(),this.$e=vu(),this.Ke=vu(),this.Ue=new wt(je),i}Ge(e,t){if(!this.Je(e))return;const o=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,o),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,o){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),o&&(this.Qe=this.Qe.insert(t,o))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new mg,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Pt(je),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Pt(je),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new mg),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function vu(){return new wt(Ae.comparator)}function gg(){return new wt(Ae.comparator)}const NT={asc:"ASCENDING",desc:"DESCENDING"},AT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kT={and:"AND",or:"OR"};class RT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gd(r,e){return r.useProto3Json||Qu(e)?e:{value:e}}function PT(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Ni(r){return lt(!!r),xe.fromTimestamp(function(t){const o=Bs(t);return new vn(o.seconds,o.nanos)}(r))}function DT(r,e){return yd(r,e).canonicalString()}function yd(r,e){const t=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function yv(r){const e=dt.fromString(r);return lt(Tv(e)),e}function Gh(r,e){const t=yv(e);if(t.get(1)!==r.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ae(_v(t))}function vv(r,e){return DT(r.databaseId,e)}function MT(r){const e=yv(r);return e.length===4?dt.emptyPath():_v(e)}function yg(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _v(r){return lt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function VT(r,e){let t;if("targetChange"in e){e.targetChange;const o=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(m,v){return m.useProto3Json?(lt(v===void 0||typeof v=="string"),$t.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),$t.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(m){const v=m.code===void 0?de.UNKNOWN:pv(m.code);return new Ne(v,m.message||"")}(h);t=new gv(o,i,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const i=Gh(r,o.document.name),l=Ni(o.document.updateTime),h=o.document.createTime?Ni(o.document.createTime):xe.min(),d=new kr({mapValue:{fields:o.document.fields}}),f=Xt.newFoundDocument(i,l,h,d),m=o.targetIds||[],v=o.removedTargetIds||[];t=new Cu(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const i=Gh(r,o.document),l=o.readTime?Ni(o.readTime):xe.min(),h=Xt.newNoDocument(i,l),d=o.removedTargetIds||[];t=new Cu([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const i=Gh(r,o.document),l=o.removedTargetIds||[];t=new Cu([],l,i,null)}else{if(!("filter"in e))return De();{e.filter;const o=e.filter;o.targetId;const{count:i=0,unchangedNames:l}=o,h=new TT(i,l),d=o.targetId;t=new mv(d,h)}}return t}function OT(r,e){return{documents:[vv(r,e.path)]}}function bT(r,e){const t={structuredQuery:{}},o=e.path;let i;e.collectionGroup!==null?(i=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=vv(r,i);const l=function(m){if(m.length!==0)return Ev(xr.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(m){if(m.length!==0)return m.map(v=>function(I){return{field:Si(I.field),direction:jT(I.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=gd(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:i}}function FT(r){let e=MT(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let i=null;if(o>0){lt(o===1);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(_){const I=wv(_);return I instanceof xr&&tv(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(_){return _.map(I=>function(P){return new Du(Ii(P.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(_){let I;return I=typeof _=="object"?_.value:_,Qu(I)?null:I}(t.limit));let f=null;t.startAt&&(f=function(_){const I=!!_.before,C=_.values||[];return new xu(C,I)}(t.startAt));let m=null;return t.endAt&&(m=function(_){const I=!_.before,C=_.values||[];return new xu(C,I)}(t.endAt)),nT(e,i,h,l,d,"F",f,m)}function LT(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Ii(t.unaryFilter.field);return Rt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const i=Ii(t.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ii(t.unaryFilter.field);return Rt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ii(t.unaryFilter.field);return Rt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(r):r.fieldFilter!==void 0?function(t){return Rt.create(Ii(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return xr.create(t.compositeFilter.filters.map(o=>wv(o)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(r):De()}function jT(r){return NT[r]}function UT(r){return AT[r]}function BT(r){return kT[r]}function Si(r){return{fieldPath:r.canonicalString()}}function Ii(r){return on.fromServerFormat(r.fieldPath)}function Ev(r){return r instanceof Rt?function(t){if(t.op==="=="){if(sg(t.value))return{unaryFilter:{field:Si(t.field),op:"IS_NAN"}};if(rg(t.value))return{unaryFilter:{field:Si(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sg(t.value))return{unaryFilter:{field:Si(t.field),op:"IS_NOT_NAN"}};if(rg(t.value))return{unaryFilter:{field:Si(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Si(t.field),op:UT(t.op),value:t.value}}}(r):r instanceof xr?function(t){const o=t.getFilters().map(i=>Ev(i));return o.length===1?o[0]:{compositeFilter:{op:BT(t.op),filters:o}}}(r):De()}function Tv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t,o,i,l=xe.min(),h=xe.min(),d=$t.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.Tt=e}}function $T(r){const e=FT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.Tn=new qT}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Us.min())}updateCollectionGroup(e,t,o){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class qT{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),i=this.index[t]||new Pt(dt.comparator),l=!i.has(o);return this.index[t]=i.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),i=this.index[t];return i&&i.has(o)}getEntries(e){return(this.index[e]||new Pt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sv=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(Sv,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Mi(0)}static Un(){return new Mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LruGarbageCollector",HT=1048576;function wg([r,e],[t,o]){const i=je(r,t);return i===0?je(e,o):i}class GT{constructor(e){this.Hn=e,this.buffer=new Pt(wg),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();wg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QT{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ye(_g,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ji(t)?ye(_g,"Ignoring IndexedDB error during garbage collection: ",t):await Hu(t)}await this.er(3e5)})}}class KT{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Gu.ae);const o=new GT(t);return this.tr.forEachTarget(e,i=>o.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>o.Zn(i))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.tr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(vg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vg):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let o,i,l,h,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,h=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(o=_,d=Date.now(),this.removeTargets(e,o,t))).next(_=>(l=_,f=Date.now(),this.removeOrphanedDocuments(e,o))).next(_=>(m=Date.now(),Ei()<=Le.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${i} in `+(d-h)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${_} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:_})))}}function XT(r,e){return new KT(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ee.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,o,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=i}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(o=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(o!==null&&Ma(o.mutation,i,Vs.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,We()).next(()=>o))}getLocalViewOfDocuments(e,t,o=We()){const i=Ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,o).next(l=>{let h=ka();return l.forEach((d,f)=>{h=h.insert(d,f.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const o=Ao();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,We()))}populateOverlays(e,t,o){const i=[];return o.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,o,i){let l=Ws();const h=Da(),d=function(){return Da()}();return t.forEach((f,m)=>{const v=o.get(m.key);i.has(m.key)&&(v===void 0||v.mutation instanceof ec)?l=l.insert(m.key,m):v!==void 0?(h.set(m.key,v.mutation.getFieldMask()),Ma(v.mutation,m,v.mutation.getFieldMask(),vn.now())):h.set(m.key,Vs.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((m,v)=>h.set(m,v)),t.forEach((m,v)=>{var _;return d.set(m,new ZT(v,(_=h.get(m))!==null&&_!==void 0?_:null))}),d))}recalculateAndSaveOverlays(e,t){const o=Da();let i=new wt((h,d)=>h-d),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=o.get(f)||Vs.empty();v=d.applyToLocalView(m,v),o.set(f,v);const _=(i.get(d.batchId)||We()).add(f);i=i.insert(d.batchId,_)})}).next(()=>{const h=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,_=lv();v.forEach(I=>{if(!l.has(I)){const C=dv(t.get(I),o.get(I));C!==null&&_.set(I,C),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ee.waitFor(h)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o,i){return function(h){return Ae.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,i):this.getDocumentsMatchingCollectionQuery(e,t,o,i)}getNextDocuments(e,t,o,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,i).next(l=>{const h=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,i-l.size):ee.resolve(Ao());let d=ba,f=l;return h.next(m=>ee.forEach(m,(v,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),l.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{f=f.insert(v,I)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,f,m,We())).next(v=>({batchId:d,changes:lT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(o=>{let i=ka();return o.isFoundDocument()&&(i=i.insert(o.key,o)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,o,i){const l=t.collectionGroup;let h=ka();return this.indexManager.getCollectionParents(e,l).next(d=>ee.forEach(d,f=>{const m=function(_,I){return new Xu(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,i).next(v=>{v.forEach((_,I)=>{h=h.insert(_,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,o,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,i))).next(h=>{l.forEach((f,m)=>{const v=m.getKey();h.get(v)===null&&(h=h.insert(v,Xt.newInvalidDocument(v)))});let d=ka();return h.forEach((f,m)=>{const v=l.get(f);v!==void 0&&Ma(v.mutation,m,Vs.empty(),vn.now()),Zu(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ni(i.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:$T(i.bundledQuery),readTime:Ni(i.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.overlays=new wt(Ae.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ao();return ee.forEach(t,i=>this.getOverlay(e,i).next(l=>{l!==null&&o.set(i,l)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((i,l)=>{this.Et(e,t,l)}),ee.resolve()}removeOverlaysForBatchId(e,t,o){const i=this.Rr.get(o);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(o)),ee.resolve()}getOverlaysForCollection(e,t,o){const i=Ao(),l=t.length+1,h=new Ae(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>o&&i.set(f.getKey(),f)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,o,i){let l=new wt((m,v)=>m-v);const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ao(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ao(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=i)););return ee.resolve(d)}Et(e,t,o){const i=this.overlays.get(o.key);if(i!==null){const h=this.Rr.get(i.largestBatchId).delete(o.key);this.Rr.set(i.largestBatchId,h)}this.overlays=this.overlays.insert(o.key,new ET(t,o));let l=this.Rr.get(t);l===void 0&&(l=We(),this.Rr.set(t,l)),this.Rr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.Vr=new Pt(bt.mr),this.gr=new Pt(bt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const o=new bt(e,t);this.Vr=this.Vr.add(o),this.gr=this.gr.add(o)}yr(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.wr(new bt(e,t))}br(e,t){e.forEach(o=>this.removeReference(o,t))}Sr(e){const t=new Ae(new dt([])),o=new bt(t,e),i=new bt(t,e+1),l=[];return this.gr.forEachInRange([o,i],h=>{this.wr(h),l.push(h.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ae(new dt([])),o=new bt(t,e),i=new bt(t,e+1);let l=We();return this.gr.forEachInRange([o,i],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new bt(e,0),o=this.Vr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class bt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ae.comparator(e.key,t.key)||je(e.Cr,t.Cr)}static pr(e,t){return je(e.Cr,t.Cr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Pt(bt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,i){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new wT(l,t,o,i);this.mutationQueue.push(h);for(const d of i)this.Mr=this.Mr.add(new bt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,i=this.Nr(o),l=i<0?0:i;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?O1:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new bt(t,0),i=new bt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([o,i],h=>{const d=this.Or(h.Cr);l.push(d)}),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Pt(je);return t.forEach(i=>{const l=new bt(i,0),h=new bt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,h],d=>{o=o.add(d.Cr)})}),ee.resolve(this.Br(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,i=o.length+1;let l=o;Ae.isDocumentKey(l)||(l=l.child(""));const h=new bt(new Ae(l),0);let d=new Pt(je);return this.Mr.forEachWhile(f=>{const m=f.key.path;return!!o.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.Cr)),!0)},h),ee.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(o=>{const i=this.Or(o);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){lt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let o=this.Mr;return ee.forEach(t.mutations,i=>{const l=new bt(i.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=o})}qn(e){}containsKey(e,t){const o=new bt(t,0),i=this.Mr.firstAfterOrEqual(o);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.kr=e,this.docs=function(){return new wt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,i=this.docs.get(o),l=i?i.size:0,h=this.kr(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ee.resolve(o?o.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let o=Ws();return t.forEach(i=>{const l=this.docs.get(i);o=o.insert(i,l?l.document.mutableCopy():Xt.newInvalidDocument(i))}),ee.resolve(o)}getDocumentsMatchingQuery(e,t,o,i){let l=Ws();const h=t.path,d=new Ae(h.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||x1(P1(v),o)<=0||(i.has(v.key)||Zu(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,o,i){De()}qr(e,t){return ee.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new oS(this)}getSize(e){return ee.resolve(this.size)}}class oS extends YT{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((o,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(o)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.persistence=e,this.Qr=new Vo(t=>Ld(t),jd),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Wd,this.targetCount=0,this.Ur=Mi.Kn()}forEachTarget(e,t){return this.Qr.forEach((o,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Mi(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,o){let i=0;const l=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.Qr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ee.waitFor(l).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const o=this.Qr.get(t)||null;return ee.resolve(o)}addMatchingKeys(e,t,o){return this.Kr.yr(t,o),ee.resolve()}removeMatchingKeys(e,t,o){this.Kr.br(t,o);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(h=>{l.push(i.markPotentiallyOrphaned(e,h))}),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Kr.vr(t);return ee.resolve(o)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Gu(0),this.zr=!1,this.zr=!0,this.jr=new nS,this.referenceDelegate=e(this),this.Hr=new iS(this),this.indexManager=new WT,this.remoteDocumentCache=function(i){return new sS(i)}(o=>this.referenceDelegate.Jr(o)),this.serializer=new zT(t),this.Yr=new eS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Wr[e.toKey()];return o||(o=new rS(t,this.referenceDelegate),this.Wr[e.toKey()]=o),o}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,o){ye("MemoryPersistence","Starting transaction:",e);const i=new aS(this.Gr.next());return this.referenceDelegate.Zr(),o(i).next(l=>this.referenceDelegate.Xr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}ei(e,t){return ee.or(Object.values(this.Wr).map(o=>()=>o.containsKey(e,t)))}}class aS extends M1{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.ti=new Wd,this.ni=null}static ri(e){return new qd(e)}get ii(){if(this.ni)return this.ni;throw De()}addReference(e,t,o){return this.ti.addReference(o,t),this.ii.delete(o.toString()),ee.resolve()}removeReference(e,t,o){return this.ti.removeReference(o,t),this.ii.add(o.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.ii.add(l.toString()))}).next(()=>o.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,o=>{const i=Ae.fromPath(o);return this.si(e,i).next(l=>{l||t.removeEntry(i,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(o=>{o?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ou{constructor(e,t){this.persistence=e,this.oi=new Vo(o=>b1(o.path),(o,i)=>o.isEqual(i)),this.garbageCollector=XT(this,t)}static ri(e,t){return new Ou(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(o=>t.next(i=>o+i))}sr(e){let t=0;return this.rr(e,o=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(o,i)=>this.ar(e,o,i).next(l=>l?ee.resolve():t(i)))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.qr(e,h=>this.ar(e,h,t).next(d=>{d||(o++,l.removeEntry(h,xe.min()))})).next(()=>l.apply(e)).next(()=>o)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.oi.set(o,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,o){return this.oi.set(o,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Su(e.data.value)),t}ar(e,t,o){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return ee.resolve(i!==void 0&&i>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,o,i){this.targetId=e,this.fromCache=t,this.Hi=o,this.Ji=i}static Yi(e,t){let o=We(),i=We();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Hd(e,t.fromCache,o,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return oE()?8:V1(rE())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,o,i){const l={result:null};return this.rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ss(e,t,i,o).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new lS;return this._s(e,t,h).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>l.result)}us(e,t,o,i){return o.documentReadCount<this.es?(Ei()<=Le.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ti(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(Ei()<=Le.DEBUG&&ye("QueryEngine","Query:",Ti(t),"scans",o.documentReadCount,"local documents and returns",i,"documents as results."),o.documentReadCount>this.ts*i?(Ei()<=Le.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ti(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(t))):ee.resolve())}rs(e,t){if(lg(t))return ee.resolve(null);let o=Rr(t);return this.indexManager.getIndexType(e,o).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fd(t,null,"F"),o=Rr(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const h=We(...l);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,o).next(f=>{const m=this.cs(t,d);return this.ls(t,m,h,f.readTime)?this.rs(e,fd(t,null,"F")):this.hs(e,m,t,f)}))})))}ss(e,t,o,i){return lg(t)||i.isEqual(xe.min())?ee.resolve(null):this.ns.getDocuments(e,o).next(l=>{const h=this.cs(t,l);return this.ls(t,h,o,i)?ee.resolve(null):(Ei()<=Le.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ti(t)),this.hs(e,h,t,R1(i,ba)).next(d=>d))})}cs(e,t){let o=new Pt(iv(e));return t.forEach((i,l)=>{Zu(e,l)&&(o=o.add(l))}),o}ls(e,t,o,i){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}_s(e,t,o){return Ei()<=Le.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ti(t)),this.ns.getDocumentsMatchingQuery(e,t,Us.min(),o)}hs(e,t,o,i){return this.ns.getDocumentsMatchingQuery(e,o,i).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="LocalStore",cS=3e8;class hS{constructor(e,t,o,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new wt(je),this.Is=new Vo(l=>Ld(l),jd),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(o)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JT(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function dS(r,e,t,o){return new hS(r,e,t,o)}async function Cv(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",o=>{let i;return t.mutationQueue.getAllMutationBatches(o).next(l=>(i=l,t.As(e),t.mutationQueue.getAllMutationBatches(o))).next(l=>{const h=[],d=[];let f=We();for(const m of i){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(o,f).next(m=>({Rs:m,removedBatchIds:h,addedBatchIds:d}))})})}function Nv(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function fS(r,e){const t=Ue(r),o=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const d=[];e.targetChanges.forEach((v,_)=>{const I=i.get(_);if(!I)return;d.push(t.Hr.removeMatchingKeys(l,v.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(l,v.addedDocuments,_)));let C=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken($t.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,o)),i=i.insert(_,C),function(V,b,B){return V.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=cS?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(I,C,v)&&d.push(t.Hr.updateTargetData(l,C))});let f=Ws(),m=We();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),d.push(pS(l,h,e.documentUpdates).next(v=>{f=v.Vs,m=v.fs})),!o.isEqual(xe.min())){const v=t.Hr.getLastRemoteSnapshotVersion(l).next(_=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,o));d.push(v)}return ee.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,f,m)).next(()=>f)}).then(l=>(t.Ts=i,l))}function pS(r,e,t){let o=We(),i=We();return t.forEach(l=>o=o.add(l)),e.getEntries(r,o).next(l=>{let h=Ws();return t.forEach((d,f)=>{const m=l.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(xe.min())?(e.removeEntry(d,f.readTime),h=h.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),h=h.insert(d,f)):ye(Gd,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Vs:h,fs:i}})}function mS(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let i;return t.Hr.getTargetData(o,e).next(l=>l?(i=l,ee.resolve(i)):t.Hr.allocateTargetId(o).next(h=>(i=new Os(e,h,"TargetPurposeListen",o.currentSequenceNumber),t.Hr.addTargetData(o,i).next(()=>i))))}).then(o=>{const i=t.Ts.get(o.targetId);return(i===null||o.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(o.targetId,o),t.Is.set(e,o.targetId)),o})}async function vd(r,e,t){const o=Ue(r),i=o.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,h=>o.persistence.referenceDelegate.removeTarget(h,i))}catch(h){if(!ji(h))throw h;ye(Gd,`Failed to update sequence numbers for target ${e}: ${h}`)}o.Ts=o.Ts.remove(e),o.Is.delete(i.target)}function Eg(r,e,t){const o=Ue(r);let i=xe.min(),l=We();return o.persistence.runTransaction("Execute query","readwrite",h=>function(f,m,v){const _=Ue(f),I=_.Is.get(v);return I!==void 0?ee.resolve(_.Ts.get(I)):_.Hr.getTargetData(m,v)}(o,h,Rr(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,o.Hr.getMatchingKeysForTargetId(h,d.targetId).next(f=>{l=f})}).next(()=>o.Ps.getDocumentsMatchingQuery(h,e,t?i:xe.min(),t?l:We())).next(d=>(gS(o,oT(e),d),{documents:d,gs:l})))}function gS(r,e,t){let o=r.Es.get(e)||xe.min();t.forEach((i,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),r.Es.set(e,o)}class Tg{constructor(){this.activeTargetIds=hT()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yS{constructor(){this.ho=new Tg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,o){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Tg,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="ConnectivityMonitor";class Ig{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ye(Sg,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ye(Sg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function _d(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="RestConnection",_S={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wS{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${o}/databases/${i}`,this.wo=this.databaseId.database===Pu?`project_id=${o}`:`project_id=${o}&database_id=${i}`}bo(e,t,o,i,l){const h=_d(),d=this.So(e,t.toUriEncodedString());ye(Qh,`Sending RPC '${e}' ${h}:`,d,o);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,i,l),this.vo(e,d,f,o).then(m=>(ye(Qh,`Received RPC '${e}' ${h}: `,m),m),m=>{throw Ri(Qh,`RPC '${e}' ${h} failed with error: `,m,"url: ",d,"request:",o),m})}Co(e,t,o,i,l,h){return this.bo(e,t,o,i,l)}Do(e,t,o){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Li}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),o&&o.headers.forEach((i,l)=>e[l]=i)}So(e,t){const o=_S[e];return`${this.po}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class TS extends wS{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,o,i){const l=_d();return new Promise((h,d)=>{const f=new Uy;f.setWithCredentials(!0),f.listenOnce(By.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Tu.NO_ERROR:const v=f.getResponseJson();ye(Qt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Tu.TIMEOUT:ye(Qt,`RPC '${e}' ${l} timed out`),d(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:const _=f.getStatus();if(ye(Qt,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const P=function(b){const B=b.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(B)>=0?B:de.UNKNOWN}(C.status);d(new Ne(P,C.message))}else d(new Ne(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ye(Qt,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);ye(Qt,`RPC '${e}' ${l} sending request:`,i),f.send(t,"POST",m,o,15)})}Wo(e,t,o){const i=_d(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Wy(),d=$y(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,o),f.encodeInitMessageHeaders=!0;const v=l.join("");ye(Qt,`Creating RPC '${e}' stream ${i}: ${v}`,f);const _=h.createWebChannel(v,f);let I=!1,C=!1;const P=new ES({Fo:b=>{C?ye(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(I||(ye(Qt,`Opening RPC '${e}' stream ${i} transport.`),_.open(),I=!0),ye(Qt,`RPC '${e}' stream ${i} sending:`,b),_.send(b))},Mo:()=>_.close()}),V=(b,B,G)=>{b.listen(B,Q=>{try{G(Q)}catch(Y){setTimeout(()=>{throw Y},0)}})};return V(_,Aa.EventType.OPEN,()=>{C||(ye(Qt,`RPC '${e}' stream ${i} transport opened.`),P.Qo())}),V(_,Aa.EventType.CLOSE,()=>{C||(C=!0,ye(Qt,`RPC '${e}' stream ${i} transport closed`),P.Ko())}),V(_,Aa.EventType.ERROR,b=>{C||(C=!0,Ri(Qt,`RPC '${e}' stream ${i} transport errored:`,b),P.Ko(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),V(_,Aa.EventType.MESSAGE,b=>{var B;if(!C){const G=b.data[0];lt(!!G);const Q=G,Y=(Q==null?void 0:Q.error)||((B=Q[0])===null||B===void 0?void 0:B.error);if(Y){ye(Qt,`RPC '${e}' stream ${i} received error:`,Y);const j=Y.status;let W=function(N){const M=It[N];if(M!==void 0)return pv(M)}(j),R=Y.message;W===void 0&&(W=de.INTERNAL,R="Unknown error status: "+j+" with message "+Y.message),C=!0,P.Ko(new Ne(W,R)),_.close()}else ye(Qt,`RPC '${e}' stream ${i} received:`,G),P.Uo(G)}}),V(d,zy.STAT_EVENT,b=>{b.stat===id.PROXY?ye(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===id.NOPROXY&&ye(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.$o()},0),P}}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(r){return new RT(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,o=1e3,i=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=o,this.zo=i,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),o=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-o);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="PersistentStream";class SS{constructor(e,t,o,i,l,h,d,f){this.Ti=e,this.n_=o,this.r_=i,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new kv(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,i])=>{this.i_===t&&this.V_(o,i)},o=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+o.message);return this.m_(i)})})}V_(e,t){const o=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{o(()=>this.listener.xo())}),this.stream.No(()=>{o(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{o(()=>this.m_(i))}),this.stream.onMessage(i=>{o(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ye(Cg,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ye(Cg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IS extends SS{constructor(e,t,o,i,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,i,h),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=VT(this.serializer,e),o=function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?Ni(h.readTime):xe.min()}(e);return this.listener.p_(t,o)}y_(e){const t={};t.database=yg(this.serializer),t.addTarget=function(l,h){let d;const f=h.target;if(d=dd(f)?{documents:OT(l,f)}:{query:bT(l,f).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=xT(l,h.resumeToken);const m=gd(l,h.expectedCount);m!==null&&(d.expectedCount=m)}else if(h.snapshotVersion.compareTo(xe.min())>0){d.readTime=PT(l,h.snapshotVersion.toTimestamp());const m=gd(l,h.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const o=LT(this.serializer,e);o&&(t.labels=o),this.I_(t)}w_(e){const t={};t.database=yg(this.serializer),t.removeTarget=e,this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class NS extends CS{constructor(e,t,o,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,o,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.bo(e,yd(t,o),i,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(de.UNKNOWN,l.toString())})}Co(e,t,o,i,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,yd(t,o),i,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ne(de.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class AS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ns(t),this.N_=!1):ye("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="RemoteStore";class kS{constructor(e,t,o,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(h=>{o.enqueueAndForget(async()=>{Ha(this)&&(ye(Vi,"Restarting streams for network reachability change."),await async function(f){const m=Ue(f);m.W_.add(4),await qa(m),m.j_.set("Unknown"),m.W_.delete(4),await nc(m)}(this))})}),this.j_=new AS(o,i)}}async function nc(r){if(Ha(r))for(const e of r.G_)await e(!0)}async function qa(r){for(const e of r.G_)await e(!1)}function Rv(r,e){const t=Ue(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Yd(t)?Xd(t):Ui(t).c_()&&Kd(t,e))}function Qd(r,e){const t=Ue(r),o=Ui(t);t.U_.delete(e),o.c_()&&Pv(t,e),t.U_.size===0&&(o.c_()?o.P_():Ha(t)&&t.j_.set("Unknown"))}function Kd(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ui(r).y_(e)}function Pv(r,e){r.H_.Ne(e),Ui(r).w_(e)}function Xd(r){r.H_=new CT({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Ui(r).start(),r.j_.B_()}function Yd(r){return Ha(r)&&!Ui(r).u_()&&r.U_.size>0}function Ha(r){return Ue(r).W_.size===0}function xv(r){r.H_=void 0}async function RS(r){r.j_.set("Online")}async function PS(r){r.U_.forEach((e,t)=>{Kd(r,e)})}async function xS(r,e){xv(r),Yd(r)?(r.j_.q_(e),Xd(r)):r.j_.set("Unknown")}async function DS(r,e,t){if(r.j_.set("Online"),e instanceof gv&&e.state===2&&e.cause)try{await async function(i,l){const h=l.cause;for(const d of l.targetIds)i.U_.has(d)&&(await i.remoteSyncer.rejectListen(d,h),i.U_.delete(d),i.H_.removeTarget(d))}(r,e)}catch(o){ye(Vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Ng(r,o)}else if(e instanceof Cu?r.H_.We(e):e instanceof mv?r.H_.Ze(e):r.H_.je(e),!t.isEqual(xe.min()))try{const o=await Nv(r.localStore);t.compareTo(o)>=0&&await function(l,h){const d=l.H_.ot(h);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.U_.get(m);v&&l.U_.set(m,v.withResumeToken(f.resumeToken,h))}}),d.targetMismatches.forEach((f,m)=>{const v=l.U_.get(f);if(!v)return;l.U_.set(f,v.withResumeToken($t.EMPTY_BYTE_STRING,v.snapshotVersion)),Pv(l,f);const _=new Os(v.target,f,m,v.sequenceNumber);Kd(l,_)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(o){ye(Vi,"Failed to raise snapshot:",o),await Ng(r,o)}}async function Ng(r,e,t){if(!ji(e))throw e;r.W_.add(1),await qa(r),r.j_.set("Offline"),t||(t=()=>Nv(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ye(Vi,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await nc(r)})}async function Ag(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ye(Vi,"RemoteStore received new credentials");const o=Ha(t);t.W_.add(3),await qa(t),o&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await nc(t)}async function MS(r,e){const t=Ue(r);e?(t.W_.delete(2),await nc(t)):e||(t.W_.add(2),await qa(t),t.j_.set("Unknown"))}function Ui(r){return r.J_||(r.J_=function(t,o,i){const l=Ue(t);return l.M_(),new IS(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(r.datastore,r.asyncQueue,{xo:RS.bind(null,r),No:PS.bind(null,r),Lo:xS.bind(null,r),p_:DS.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Yd(r)?Xd(r):r.j_.set("Unknown")):(await r.J_.stop(),xv(r))})),r.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,o,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=i,this.removalCallback=l,this.deferred=new ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,i,l){const h=Date.now()+o,d=new Zd(e,t,h,i,l);return d.start(o),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(r,e){if(ns("AsyncQueue",`${e}: ${r}`),ji(r))return new Ne(de.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{static emptySet(e){return new Ai(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ae.comparator(t.key,o.key):(t,o)=>Ae.comparator(t.key,o.key),this.keyedMap=ka(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ai)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=o.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Ai;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(){this.Z_=new wt(Ae.comparator)}track(e){const t=e.doc.key,o=this.Z_.get(t);o?e.type!==0&&o.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&o.type!==1?this.Z_=this.Z_.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.Z_=this.Z_.remove(t):e.type===1&&o.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):De():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,o)=>{e.push(o)}),e}}class Oi{constructor(e,t,o,i,l,h,d,f,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=i,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,i,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Oi(e,t,Ai.emptySet(t),h,o,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==o[i].type||!t[i].doc.isEqual(o[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class OS{constructor(){this.queries=Rg(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,o){const i=Ue(t),l=i.queries;i.queries=Rg(),l.forEach((h,d)=>{for(const f of d.ta)f.onError(o)})})(this,new Ne(de.ABORTED,"Firestore shutting down"))}}function Rg(){return new Vo(r=>ov(r),Yu)}async function bS(r,e){const t=Ue(r);let o=3;const i=e.query;let l=t.queries.get(i);l?!l.na()&&e.ra()&&(o=2):(l=new VS,o=e.ra()?0:1);try{switch(o){case 0:l.ea=await t.onListen(i,!0);break;case 1:l.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(h){const d=Dv(h,`Initialization of query '${Ti(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Jd(t)}async function FS(r,e){const t=Ue(r),o=e.query;let i=3;const l=t.queries.get(o);if(l){const h=l.ta.indexOf(e);h>=0&&(l.ta.splice(h,1),l.ta.length===0?i=e.ra()?0:1:!l.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function LS(r,e){const t=Ue(r);let o=!1;for(const i of e){const l=i.query,h=t.queries.get(l);if(h){for(const d of h.ta)d.oa(i)&&(o=!0);h.ea=i}}o&&Jd(t)}function jS(r,e,t){const o=Ue(r),i=o.queries.get(e);if(i)for(const l of i.ta)l.onError(t);o.queries.delete(e)}function Jd(r){r.ia.forEach(e=>{e.next()})}var wd,Pg;(Pg=wd||(wd={}))._a="default",Pg.Cache="cache";class US{constructor(e,t,o){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=o||{}}oa(e){if(!this.options.includeMetadataChanges){const o=[];for(const i of e.docChanges)i.type!==3&&o.push(i);e=new Oi(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const o=t!=="Offline";return(!this.options.Ta||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.key=e}}class Vv{constructor(e){this.key=e}}class BS{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=We(),this.mutatedKeys=We(),this.ya=iv(e),this.wa=new Ai(this.ya)}get ba(){return this.fa}Sa(e,t){const o=t?t.Da:new kg,i=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,h=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,_)=>{const I=i.get(v),C=Zu(this.query,_)?_:null,P=!!I&&this.mutatedKeys.has(I.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let b=!1;I&&C?I.data.isEqual(C.data)?P!==V&&(o.track({type:3,doc:C}),b=!0):this.va(I,C)||(o.track({type:2,doc:C}),b=!0,(f&&this.ya(C,f)>0||m&&this.ya(C,m)<0)&&(d=!0)):!I&&C?(o.track({type:0,doc:C}),b=!0):I&&!C&&(o.track({type:1,doc:I}),b=!0,(f||m)&&(d=!0)),b&&(C?(h=h.add(C),l=V?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{wa:h,Da:o,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,i){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((v,_)=>function(C,P){const V=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return V(C)-V(P)}(v.type,_.type)||this.ya(v.doc,_.doc)),this.Ca(o),i=i!=null&&i;const d=t&&!i?this.Fa():[],f=this.pa.size===0&&this.current&&!i?1:0,m=f!==this.ga;return this.ga=f,h.length!==0||m?{snapshot:new Oi(this.query,e.wa,l,h,e.mutatedKeys,f===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new kg,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=We(),this.wa.forEach(o=>{this.xa(o.key)&&(this.pa=this.pa.add(o.key))});const t=[];return e.forEach(o=>{this.pa.has(o)||t.push(new Vv(o))}),this.pa.forEach(o=>{e.has(o)||t.push(new Mv(o))}),t}Oa(e){this.fa=e.gs,this.pa=We();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Oi.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ef="SyncEngine";class zS{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class $S{constructor(e){this.key=e,this.Ba=!1}}class WS{constructor(e,t,o,i,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new Vo(d=>ov(d),Yu),this.qa=new Map,this.Qa=new Set,this.$a=new wt(Ae.comparator),this.Ka=new Map,this.Ua=new Wd,this.Wa={},this.Ga=new Map,this.za=Mi.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function qS(r,e,t=!0){const o=jv(r);let i;const l=o.ka.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Na()):i=await Ov(o,e,t,!0),i}async function HS(r,e){const t=jv(r);await Ov(t,e,!0,!1)}async function Ov(r,e,t,o){const i=await mS(r.localStore,Rr(e)),l=i.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await GS(r,e,l,h==="current",i.resumeToken)),r.isPrimaryClient&&t&&Rv(r.remoteStore,i),d}async function GS(r,e,t,o,i){r.Ha=(_,I,C)=>async function(V,b,B,G){let Q=b.view.Sa(B);Q.ls&&(Q=await Eg(V.localStore,b.query,!1).then(({documents:R})=>b.view.Sa(R,Q)));const Y=G&&G.targetChanges.get(b.targetId),j=G&&G.targetMismatches.get(b.targetId)!=null,W=b.view.applyChanges(Q,V.isPrimaryClient,Y,j);return Dg(V,b.targetId,W.Ma),W.snapshot}(r,_,I,C);const l=await Eg(r.localStore,e,!0),h=new BS(e,l.gs),d=h.Sa(l.documents),f=Wa.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",i),m=h.applyChanges(d,r.isPrimaryClient,f);Dg(r,t,m.Ma);const v=new zS(e,t,h);return r.ka.set(e,v),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),m.snapshot}async function QS(r,e,t){const o=Ue(r),i=o.ka.get(e),l=o.qa.get(i.targetId);if(l.length>1)return o.qa.set(i.targetId,l.filter(h=>!Yu(h,e))),void o.ka.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(i.targetId),o.sharedClientState.isActiveQueryTarget(i.targetId)||await vd(o.localStore,i.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(i.targetId),t&&Qd(o.remoteStore,i.targetId),Ed(o,i.targetId)}).catch(Hu)):(Ed(o,i.targetId),await vd(o.localStore,i.targetId,!0))}async function KS(r,e){const t=Ue(r),o=t.ka.get(e),i=t.qa.get(o.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Qd(t.remoteStore,o.targetId))}async function bv(r,e){const t=Ue(r);try{const o=await fS(t.localStore,e);e.targetChanges.forEach((i,l)=>{const h=t.Ka.get(l);h&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?h.Ba=!0:i.modifiedDocuments.size>0?lt(h.Ba):i.removedDocuments.size>0&&(lt(h.Ba),h.Ba=!1))}),await Lv(t,o,e)}catch(o){await Hu(o)}}function xg(r,e,t){const o=Ue(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const i=[];o.ka.forEach((l,h)=>{const d=h.view.sa(e);d.snapshot&&i.push(d.snapshot)}),function(h,d){const f=Ue(h);f.onlineState=d;let m=!1;f.queries.forEach((v,_)=>{for(const I of _.ta)I.sa(d)&&(m=!0)}),m&&Jd(f)}(o.eventManager,e),i.length&&o.La.p_(i),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function XS(r,e,t){const o=Ue(r);o.sharedClientState.updateQueryState(e,"rejected",t);const i=o.Ka.get(e),l=i&&i.key;if(l){let h=new wt(Ae.comparator);h=h.insert(l,Xt.newNoDocument(l,xe.min()));const d=We().add(l),f=new tc(xe.min(),new Map,new wt(je),h,d);await bv(o,f),o.$a=o.$a.remove(l),o.Ka.delete(e),tf(o)}else await vd(o.localStore,e,!1).then(()=>Ed(o,e,t)).catch(Hu)}function Ed(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.qa.get(e))r.ka.delete(o),t&&r.La.Ja(o,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(o=>{r.Ua.containsKey(o)||Fv(r,o)})}function Fv(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Qd(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),tf(r))}function Dg(r,e,t){for(const o of t)o instanceof Mv?(r.Ua.addReference(o.key,e),YS(r,o)):o instanceof Vv?(ye(ef,"Document no longer in limbo: "+o.key),r.Ua.removeReference(o.key,e),r.Ua.containsKey(o.key)||Fv(r,o.key)):De()}function YS(r,e){const t=e.key,o=t.path.canonicalString();r.$a.get(t)||r.Qa.has(o)||(ye(ef,"New document in limbo: "+t),r.Qa.add(o),tf(r))}function tf(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new Ae(dt.fromString(e)),o=r.za.next();r.Ka.set(o,new $S(t)),r.$a=r.$a.insert(t,o),Rv(r.remoteStore,new Os(Rr(Ud(t.path)),o,"TargetPurposeLimboResolution",Gu.ae))}}async function Lv(r,e,t){const o=Ue(r),i=[],l=[],h=[];o.ka.isEmpty()||(o.ka.forEach((d,f)=>{h.push(o.Ha(f,e,t).then(m=>{var v;if((m||t)&&o.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;o.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){i.push(m);const _=Hd.Yi(f.targetId,m);l.push(_)}}))}),await Promise.all(h),o.La.p_(i),await async function(f,m){const v=Ue(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ee.forEach(m,I=>ee.forEach(I.Hi,C=>v.persistence.referenceDelegate.addReference(_,I.targetId,C)).next(()=>ee.forEach(I.Ji,C=>v.persistence.referenceDelegate.removeReference(_,I.targetId,C)))))}catch(_){if(!ji(_))throw _;ye(Gd,"Failed to update sequence numbers: "+_)}for(const _ of m){const I=_.targetId;if(!_.fromCache){const C=v.Ts.get(I),P=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(P);v.Ts=v.Ts.insert(I,V)}}}(o.localStore,l))}async function ZS(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ye(ef,"User change. New user:",e.toKey());const o=await Cv(t.localStore,e);t.currentUser=e,function(l,h){l.Ga.forEach(d=>{d.forEach(f=>{f.reject(new Ne(de.CANCELLED,h))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Lv(t,o.Rs)}}function JS(r,e){const t=Ue(r),o=t.Ka.get(e);if(o&&o.Ba)return We().add(o.key);{let i=We();const l=t.qa.get(e);if(!l)return i;for(const h of l){const d=t.ka.get(h);i=i.unionWith(d.view.ba)}return i}}function jv(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=bv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XS.bind(null,e),e.La.p_=LS.bind(null,e.eventManager),e.La.Ja=jS.bind(null,e.eventManager),e}class bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Av(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return dS(this.persistence,new uS,e.initialUser,this.serializer)}Xa(e){return new Iv(qd.ri,this.serializer)}Za(e){return new yS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bu.provider={build:()=>new bu};class eI extends bu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){lt(this.persistence.referenceDelegate instanceof Ou);const o=this.persistence.referenceDelegate.garbageCollector;return new QT(o,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Iv(o=>Ou.ri(o,t),this.serializer)}}class Td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>xg(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZS.bind(null,this.syncEngine),await MS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OS}()}createDatastore(e){const t=Av(e.databaseInfo.databaseId),o=function(l){return new TS(l)}(e.databaseInfo);return function(l,h,d,f){return new NS(l,h,d,f)}(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return function(o,i,l,h,d){return new kS(o,i,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>xg(this.syncEngine,t,0),function(){return Ig.D()?new Ig:new vS}())}createSyncEngine(e,t){return function(i,l,h,d,f,m,v){const _=new WS(i,l,h,d,f,m);return v&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const l=Ue(i);ye(Vi,"RemoteStore shutting down."),l.W_.add(5),await qa(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Td.provider={build:()=>new Td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="FirestoreClient";class nI{constructor(e,t,o,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=i,this.user=Kt.UNAUTHENTICATED,this.clientId=Hy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,async h=>{ye(qs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(o,h=>(ye(qs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Dv(t,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function Xh(r,e){r.asyncQueue.verifyOperationInProgress(),ye(qs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener(async i=>{o.isEqual(i)||(await Cv(e.localStore,i),o=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Mg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rI(r);ye(qs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(o=>Ag(e.remoteStore,o)),r.setAppCheckTokenChangeListener((o,i)=>Ag(e.remoteStore,i)),r._onlineComponents=e}async function rI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(qs,"Using user provided OfflineComponentProvider");try{await Xh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===de.FAILED_PRECONDITION||i.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ri("Error using user provided cache. Falling back to memory cache: "+t),await Xh(r,new bu)}}else ye(qs,"Using default OfflineComponentProvider"),await Xh(r,new eI(void 0));return r._offlineComponents}async function sI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(qs,"Using user provided OnlineComponentProvider"),await Mg(r,r._uninitializedComponentsProvider._online)):(ye(qs,"Using default OnlineComponentProvider"),await Mg(r,new Td))),r._onlineComponents}async function oI(r){const e=await sI(r),t=e.eventManager;return t.onListen=qS.bind(null,e.syncEngine),t.onUnlisten=QS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KS.bind(null,e.syncEngine),t}function iI(r,e,t={}){const o=new ko;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,f,m){const v=new tI({next:I=>{v.su(),h.enqueueAndForget(()=>FS(l,_));const C=I.docs.has(d);!C&&I.fromCache?m.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&I.fromCache&&f&&f.source==="server"?m.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),_=new US(Ud(d.path),v,{includeMetadataChanges:!0,Ta:!0});return bS(l,_)}(await oI(r),r.asyncQueue,e,t,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(r,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lI(r,e,t,o){if(e===!0&&o===!0)throw new Ne(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Og(r){if(!Ae.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function uI(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De()}function Sd(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uI(r);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firestore.googleapis.com",bg=!0;class Fg{constructor(e){var t,o;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bv,this.ssl=bg}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bg;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HT)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uv((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,i){return o.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,o,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new E1;switch(o.type){case"firstParty":return new C1(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const o=Vg.get(t);o&&(ye("ComponentProvider","Removing Datastore"),Vg.delete(t),o.terminate())}(this),Promise.resolve()}}function cI(r,e,t,o={}){var i;const l=(r=Sd(r,nf))._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:r._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==Bv&&l.host!==d&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:o});if(!ku(f,h)&&(r._setSettings(f),o.mockUserToken)){let m,v;if(typeof o.mockUserToken=="string")m=o.mockUserToken,v=Kt.MOCK_USER;else{m=Ny(o.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const _=o.mockUserToken.sub||o.mockUserToken.user_id;if(!_)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Kt(_)}r._authCredentials=new T1(new qy(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new rf(this.firestore,e,this._query)}}class Jr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jr(this.firestore,e,this._key)}}class Ua extends rf{constructor(e,t,o){super(e,t,Ud(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jr(this.firestore,null,new Ae(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function hI(r,e,...t){if(r=ky(r),arguments.length===1&&(e=Hy.newId()),aI("doc","path",e),r instanceof nf){const o=dt.fromString(e,...t);return Og(o),new Jr(r,null,new Ae(o))}{if(!(r instanceof Jr||r instanceof Ua))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(dt.fromString(e,...t));return Og(o),new Jr(r.firestore,r instanceof Ua?r.converter:null,new Ae(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="AsyncQueue";class jg{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new kv(this,"async_queue_retry"),this.bu=()=>{const o=Kh();o&&ye(Lg,"Visibility state changed to "+o.visibilityState),this.a_.t_()},this.Su=e;const t=Kh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Kh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ko;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ji(e))throw e;ye(Lg,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(o=>{this.gu=o,this.pu=!1;const i=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(o);throw ns("INTERNAL UNHANDLED ERROR: ",i),o}).then(o=>(this.pu=!1,o))));return this.Su=t,t}enqueueAfterDelay(e,t,o){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Zd.createAndSchedule(this,e,t,o,l=>this.Fu(l));return this.fu.push(i),i}Du(){this.gu&&De()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class zv extends nf{constructor(e,t,o,i){super(e,t,o,i),this.type="firestore",this._queue=new jg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function dI(r,e){const t=typeof r=="object"?r:by(),o=typeof r=="string"?r:Pu,i=Dy(t,"firestore").getImmediate({identifier:o});if(!i._initialized){const l=Iy("firestore");l&&cI(i,...l)}return i}function fI(r){if(r._terminated)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pI(r),r._firestoreClient}function pI(r){var e,t,o;const i=r._freezeSettings(),l=function(d,f,m,v){return new U1(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Uv(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((o=i.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new nI(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fu($t.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fu($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(o,i){if(o.length!==i.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==i[l])return!1;return!0}(this._values,e._values)}}const yI=new RegExp("[~\\*/\\[\\]]");function vI(r,e,t){if(e.search(yI)>=0)throw Ug(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new $v(...e.split("."))._internalPath}catch{throw Ug(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function Ug(r,e,t,o,i){let l=`Function ${e}() called with invalid data`;l+=". ";let h="";return new Ne(de.INVALID_ARGUMENT,l+r+h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t,o,i,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _I(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _I extends Wv{data(){return super.data()}}function qv(r,e){return typeof e=="string"?vI(r,e):e instanceof $v?e._internalPath:e._delegate._internalPath}class wI{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return $a(e,(i,l)=>{o[i]=this.convertValue(l,t)}),o}convertVectorValue(e){var t,o,i;const l=(i=(o=(t=e.fields)===null||t===void 0?void 0:t[ld].arrayValue)===null||o===void 0?void 0:o.values)===null||i===void 0?void 0:i.map(h=>_t(h.doubleValue));return new gI(l)}convertGeoPoint(e){return new mI(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ku(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=dt.fromString(e);lt(Tv(o));const i=new La(o.get(1),o.get(3)),l=new Ae(o.popFirst(5));return i.isEqual(t)||ns(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hv extends Wv{constructor(e,t,o,i,l,h){super(e,t,o,i,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(qv("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class TI extends Hv{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){r=Sd(r,Jr);const e=Sd(r.firestore,zv);return iI(fI(e),r._key).then(t=>CI(e,r,t))}class II extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,t)}}function CI(r,e,t){const o=t.docs.get(e._key),i=new II(r);return new Hv(r,i,e._key,o,new EI(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Li=i})(Vy),Va(new ki("firestore",(o,{instanceIdentifier:i,options:l})=>{const h=o.getProvider("app").getImmediate(),d=new zv(new S1(o.getProvider("auth-internal")),new N1(h,o.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(m.options.projectId,v)}(h,i),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Ls(Hm,Gm,e),Ls(Hm,Gm,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="firebasestorage.googleapis.com",NI="storageBucket",AI=2*60*1e3,kI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Mo{constructor(e,t,o=0){super(Yh(e),`Firebase Storage: ${t} (${Yh(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dr||(Dr={}));function Yh(r){return"storage/"+r}function RI(){const r="An unknown error occurred, please check the error payload for server response.";return new Vr(Dr.UNKNOWN,r)}function PI(){return new Vr(Dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xI(){return new Vr(Dr.CANCELED,"User canceled the upload/download.")}function DI(r){return new Vr(Dr.INVALID_URL,"Invalid URL '"+r+"'.")}function MI(r){return new Vr(Dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Bg(r){return new Vr(Dr.INVALID_ARGUMENT,r)}function Qv(){return new Vr(Dr.APP_DELETED,"The Firebase app was deleted.")}function VI(r){return new Vr(Dr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=fr.makeFromUrl(e,t)}catch{return new fr(e,"")}if(o.path==="")return o;throw MI(e)}static makeFromUrl(e,t){let o=null;const i="([A-Za-z0-9.\\-_]+)";function l(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+i+h,"i"),f={bucket:1,path:3};function m(Y){Y.path_=decodeURIComponent(Y.path)}const v="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${v}/b/${i}/o${I}`,"i"),P={bucket:1,path:3},V=t===Gv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",B=new RegExp(`^https?://${V}/${i}/${b}`,"i"),Q=[{regex:d,indices:f,postModify:l},{regex:C,indices:P,postModify:m},{regex:B,indices:{bucket:1,path:2},postModify:m}];for(let Y=0;Y<Q.length;Y++){const j=Q[Y],W=j.regex.exec(e);if(W){const R=W[j.indices.bucket];let T=W[j.indices.path];T||(T=""),o=new fr(R,T),j.postModify(o);break}}if(o==null)throw DI(e);return o}}class OI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(r,e,t){let o=1,i=null,l=null,h=!1,d=0;function f(){return d===2}let m=!1;function v(...b){m||(m=!0,e.apply(null,b))}function _(b){i=setTimeout(()=>{i=null,r(C,f())},b)}function I(){l&&clearTimeout(l)}function C(b,...B){if(m){I();return}if(b){I(),v.call(null,b,...B);return}if(f()||h){I(),v.call(null,b,...B);return}o<64&&(o*=2);let Q;d===1?(d=2,Q=0):Q=(o+Math.random())*1e3,_(Q)}let P=!1;function V(b){P||(P=!0,I(),!m&&(i!==null?(b||(d=2),clearTimeout(i),_(0)):b||(d=1)))}return _(0),l=setTimeout(()=>{h=!0,V(!0)},t),V}function FI(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){return r!==void 0}function zg(r,e,t,o){if(o<e)throw Bg(`Invalid value for '${r}'. Expected ${e} or greater.`);if(o>t)throw Bg(`Invalid value for '${r}'. Expected ${t} or less.`)}function jI(r){const e=encodeURIComponent;let t="?";for(const o in r)if(r.hasOwnProperty(o)){const i=e(o)+"="+e(r[o]);t=t+i+"&"}return t=t.slice(0,-1),t}var Lu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Lu||(Lu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,o,i,l,h,d,f,m,v,_,I=!0){this.url_=e,this.method_=t,this.headers_=o,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=_,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,P)=>{this.resolve_=C,this.reject_=P,this.start_()})}start_(){const e=(o,i)=>{if(i){o(!1,new wu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const d=l.getErrorCode()===Lu.NO_ERROR,f=l.getStatus();if(!d||UI(f,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Lu.ABORT;o(!1,new wu(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;o(!0,new wu(m,l))})},t=(o,i)=>{const l=this.resolve_,h=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());LI(f)?l(f):l()}catch(f){h(f)}else if(d!==null){const f=RI();f.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,f)):h(f)}else if(i.canceled){const f=this.appDelete_?Qv():xI();h(f)}else{const f=PI();h(f)}};this.canceled_?t(!1,new wu(!1,null,!0)):this.backoffId_=bI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wu{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function zI(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function $I(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WI(r,e){e&&(r["X-Firebase-GMPID"]=e)}function qI(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function HI(r,e,t,o,i,l,h=!0){const d=jI(r.urlParams),f=r.url+d,m=Object.assign({},r.headers);return WI(m,e),zI(m,t),$I(m,l),qI(m,o),new BI(f,r.method,m,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function QI(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this._service=e,t instanceof fr?this._location=t:this._location=fr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ju(e,t)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QI(this._location.path)}get storage(){return this._service}get parent(){const e=GI(this._location.path);if(e===null)return null;const t=new fr(this._location.bucket,e);return new ju(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw VI(e)}}function $g(r,e){const t=e==null?void 0:e[NI];return t==null?null:fr.makeFromBucketSpec(t,r)}function KI(r,e,t,o={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=o;i&&(r._overrideAuthToken=typeof i=="string"?i:Ny(i,r.app.options.projectId))}class XI{constructor(e,t,o,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=Gv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AI,this._maxUploadRetryTime=kI,this._requests=new Set,i!=null?this._bucket=fr.makeFromBucketSpec(i,this._host):this._bucket=$g(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=$g(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(My(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ju(this,e)}_makeRequest(e,t,o,i,l=!0){if(this._deleted)return new OI(Qv());{const h=HI(e,this._appId,o,i,t,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[o,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,o,i).getPromise()}}const Wg="@firebase/storage",qg="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="storage";function YI(r=by(),e){r=ky(r);const o=Dy(r,Kv).getImmediate({identifier:e}),i=Iy("storage");return i&&ZI(o,...i),o}function ZI(r,e,t,o={}){KI(r,e,t,o)}function JI(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new XI(t,o,i,e,Vy)}function eC(){Va(new ki(Kv,JI,"PUBLIC").setMultipleInstances(!0)),Ls(Wg,qg,""),Ls(Wg,qg,"esm2017")}eC();const tC={apiKey:"AIzaSyAlv8DyWdhTjJjZYPqkghZUyEupG5g8SFk",authDomain:"groove-slider.firebaseapp.com",projectId:"groove-slider",storageBucket:"groove-slider.appspot.com",messagingSenderId:"87433841566",appId:"1:87433841566:web:da11fb420a121cc700248f",measurementId:"G-X0QJM954YF"},Xv=Oy(tC),Zh=dI(Xv);YI(Xv);function nC(r,e){return new Promise((t,o)=>{try{const i=rC();i.onmessage=l=>{l.data.type==="complete"?(t(l.data.file),i.terminate()):l.data.type==="error"&&(o(new Error(l.data.error)),i.terminate())},i.onerror=l=>{o(l),i.terminate()},i.postMessage({data:r,config:e})}catch(i){o(i)}})}function rC(){const r=`
    self.onmessage = async (event) => {
      const { data, config } = event.data;
      
      try {
        // Basic export processing
        const exportedFile = await processExport(data, config);
        
        self.postMessage({ 
          type: 'complete', 
          file: exportedFile 
        });
      } catch (error) {
        self.postMessage({ 
          type: 'error', 
          error: error.message 
        });
      }
    };
    
    async function processExport(data, config) {
      console.log('Processing export', data, config);
      return data; // Temporary return
    }
  `,e=new Blob([r],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}const sC=({isOpen:r,progress:e,message:t,onClose:o,onExport:i,isExporting:l,storyData:h})=>{const[d,f]=le.useState("1080x1920"),[m,v]=le.useState(!1),[_,I]=le.useState(30),[C,P]=le.useState(null),V=async()=>{const b={resolution:d,isExportLoopEnabled:m,exportLoopDuration:_};try{P(null);const G=await nC({storyData:h,resolution:d,isExportLoopEnabled:m,exportLoopDuration:_},b);i(G)}catch(B){console.error("Export failed",B),P(B.message||"Export failed. Please try again.")}};return r?E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content export-modal",children:[E.jsx("button",{className:"modal-close",onClick:o,children:E.jsx(Po,{size:20})}),l?E.jsxs("div",{className:"loading-container",children:[E.jsx("h3",{children:"Exporting Video"}),E.jsx("p",{children:t}),E.jsxs("div",{className:"progress-container",children:[E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),E.jsxs("span",{className:"progress-text",children:[Math.round(e),"%"]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"modal-title",children:"Export Settings"}),E.jsxs("div",{className:"resolution-selector",children:[E.jsx("label",{children:"Resolution:"}),E.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"resolution-select",children:[E.jsx("option",{value:"720x1280",children:"720p"}),E.jsx("option",{value:"1080x1920",children:"1080p"}),E.jsx("option",{value:"1440x2560",children:"2K"})]})]}),E.jsxs("div",{className:"export-loop-settings",children:[E.jsx("div",{className:"loop-toggle",children:E.jsxs("label",{children:[E.jsx("span",{children:"Export as Loop"}),E.jsx("input",{type:"checkbox",checked:m,onChange:()=>v(!m)})]})}),m&&E.jsxs("div",{className:"input-container",children:[E.jsx("label",{children:"Loop Duration (seconds):"}),E.jsx("input",{type:"number",min:"5",max:"300",value:_,onChange:b=>I(Number(b.target.value)),className:"loop-duration-input"})]})]}),C&&E.jsx("div",{className:"export-error-message",children:C}),E.jsxs("div",{className:"export-actions",children:[E.jsxs("button",{className:"action-button share",onClick:()=>{},children:[E.jsx(bw,{className:"button-icon"}),"Share"]}),E.jsxs("button",{className:"action-button download",onClick:V,children:[E.jsx(vy,{className:"button-icon"}),"Export"]})]})]})]})}):null},oC=({isOpen:r,onClose:e,onSave:t})=>{const[o,i]=le.useState(""),[l,h]=le.useState(!1),[d,f]=le.useState(null);if(!r)return null;const m=async v=>{if(v.preventDefault(),!o.trim()){f("Please enter a session name");return}try{h(!0),f(null),await t(o),i(""),e()}catch(_){console.error("Error saving session:",_),f("Failed to save session: "+_.message)}finally{h(!1)}};return E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content save-session-modal",children:[E.jsx("button",{className:"modal-close",onClick:e,children:E.jsx(Po,{size:20})}),E.jsx("h3",{className:"modal-title",children:"Save Session"}),E.jsxs("form",{onSubmit:m,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"session-name",children:"Session Name:"}),E.jsx("input",{type:"text",id:"session-name",value:o,onChange:v=>i(v.target.value),placeholder:"Enter a name for your session",autoFocus:!0,maxLength:50,className:"session-name-input"})]}),d&&E.jsx("div",{className:"save-error",children:d}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{type:"button",className:"cancel-button",onClick:e,disabled:l,children:"Cancel"}),E.jsx("button",{type:"submit",className:"save-button",disabled:l,children:l?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"spinner small"}),"Saving..."]}):E.jsxs(E.Fragment,{children:[E.jsx(Ey,{size:16}),"Save Session"]})})]})]})]})})},Hg={name:"GrooveGalleryDB",version:1},rc=()=>new Promise((r,e)=>{const t=indexedDB.open(Hg.name,Hg.version);t.onupgradeneeded=o=>{const i=o.target.result;if(!i.objectStoreNames.contains("sessions")){const l=i.createObjectStore("sessions",{keyPath:"id",autoIncrement:!0});l.createIndex("name","name",{unique:!1}),l.createIndex("createdAt","createdAt",{unique:!1})}i.objectStoreNames.contains("images")||i.createObjectStore("images",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1}),i.objectStoreNames.contains("music")||i.createObjectStore("music",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1})},t.onsuccess=o=>{const i=o.target.result;r(i)},t.onerror=o=>{console.error("IndexedDB error:",o.target.error),e(o.target.error)}}),iC=async r=>{try{const e=[];for(const f of r.stories)try{const v=await(await fetch(f.url)).blob();e.push({type:f.type,blob:v})}catch(m){console.error("Error processing image:",m)}let t=null;if(r.musicUrl)try{t=await(await fetch(r.musicUrl)).blob()}catch(f){console.error("Error processing music:",f)}const i=(await rc()).transaction(["sessions","images","music"],"readwrite"),l=i.objectStore("sessions"),h={name:r.name,createdAt:new Date,bpm:r.bpm,musicStartPoint:r.musicStartPoint,imageFitMode:r.imageFitMode,duration:r.duration,isLoopingEnabled:r.isLoopingEnabled,currentIndex:r.currentIndex},d=l.add(h);return new Promise((f,m)=>{d.onsuccess=async v=>{const _=v.target.result,I=i.objectStore("images");for(const C of e)I.add({sessionId:_,type:C.type,blob:C.blob});t&&i.objectStore("music").add({sessionId:_,blob:t}),i.oncomplete=()=>{console.log(`Session saved with ID: ${_}`),f(_)},i.onerror=C=>{console.error("Transaction error:",C.target.error),m(C.target.error)}},d.onerror=v=>{console.error("Error adding session:",v.target.error),m(v.target.error)}})}catch(e){throw console.error("saveSession error:",e),e}},aC=async r=>{try{const e=await rc(),t=await new Promise((d,f)=>{const _=e.transaction("sessions","readonly").objectStore("sessions").get(r);_.onsuccess=I=>{d(I.target.result)},_.onerror=I=>{f(I.target.error)}});if(!t)throw new Error(`Session with ID ${r} not found`);const i=(await new Promise((d,f)=>{const I=e.transaction("images","readonly").objectStore("images").index("sessionId").getAll(r);I.onsuccess=C=>{d(C.target.result)},I.onerror=C=>{f(C.target.error)}})).map(d=>({type:d.type,url:URL.createObjectURL(d.blob)})),l=await new Promise((d,f)=>{const I=e.transaction("music","readonly").objectStore("music").index("sessionId").get(r);I.onsuccess=C=>{d(C.target.result)},I.onerror=C=>{f(C.target.error)}});let h=null;return l&&l.blob&&(h=URL.createObjectURL(l.blob)),{...t,stories:i,musicUrl:h}}catch(e){throw console.error("loadSession error:",e),e}},lC=async()=>{try{const r=await rc();return new Promise((e,t)=>{const l=r.transaction("sessions","readonly").objectStore("sessions").getAll();l.onsuccess=h=>{e(h.target.result)},l.onerror=h=>{t(h.target.error)}})}catch(r){throw console.error("getAllSessions error:",r),r}},uC=async r=>{try{const t=(await rc()).transaction(["sessions","images","music"],"readwrite");t.objectStore("sessions").delete(r);const h=t.objectStore("images").index("sessionId").openCursor(IDBKeyRange.only(r));h.onsuccess=v=>{const _=v.target.result;_&&(_.delete(),_.continue())};const m=t.objectStore("music").index("sessionId").openCursor(IDBKeyRange.only(r));return m.onsuccess=v=>{const _=v.target.result;_&&(_.delete(),_.continue())},new Promise((v,_)=>{t.oncomplete=()=>{console.log(`Session ${r} deleted successfully`),v()},t.onerror=I=>{console.error("Error deleting session:",I.target.error),_(I.target.error)}})}catch(e){throw console.error("deleteSession error:",e),e}},cC=({onLoadSession:r,visible:e})=>{const[t,o]=le.useState([]),[i,l]=le.useState(!0),[h,d]=le.useState(null);le.useEffect(()=>{e&&f()},[e]);const f=async()=>{try{l(!0);const _=await lC();_.sort((I,C)=>new Date(C.createdAt)-new Date(I.createdAt)),o(_),d(null)}catch(_){console.error("Error loading sessions:",_),d("Failed to load saved sessions")}finally{l(!1)}},m=async(_,I)=>{if(_.stopPropagation(),window.confirm("Are you sure you want to delete this session?"))try{await uC(I),o(t.filter(C=>C.id!==I))}catch(C){console.error("Error deleting session:",C),alert("Failed to delete session")}},v=_=>new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?E.jsxs("div",{className:"sessions-list",children:[E.jsx("h3",{className:"sessions-title",children:"Saved Sessions"}),i&&E.jsx("div",{className:"sessions-loading",children:"Loading saved sessions..."}),h&&E.jsx("div",{className:"sessions-error",children:h}),!i&&t.length===0&&E.jsxs("div",{className:"sessions-empty",children:[E.jsx("p",{children:"No saved sessions yet"}),E.jsx("p",{className:"sessions-hint",children:"Create a slideshow and click Save to add one"})]}),!i&&t.length>0&&E.jsx("ul",{className:"sessions-items",children:t.map(_=>E.jsxs("li",{className:"session-item",onClick:()=>r(_.id),children:[E.jsxs("div",{className:"session-info",children:[E.jsx("div",{className:"session-name",children:_.name}),E.jsxs("div",{className:"session-date",children:[E.jsx(yy,{size:12}),E.jsx("span",{children:v(_.createdAt)})]}),E.jsxs("div",{className:"session-details",children:[E.jsxs("span",{children:[_.bpm," BPM"]}),E.jsxs("span",{children:[_.duration.toFixed(1),"s/slide"]})]})]}),E.jsxs("div",{className:"session-actions",children:[E.jsx("button",{className:"session-delete-btn",onClick:I=>m(I,_.id),title:"Delete session",children:E.jsx(zw,{size:16})}),E.jsx(Ds,{size:16,className:"session-arrow"})]})]},_.id))})]}):null},hC=({audioUrl:r,onStartPointChange:e,audioRef:t,musicStartPoint:o=0})=>{const i=le.useRef(null),l=le.useRef(null),[h,d]=le.useState(null),[f,m]=le.useState(!1),[v,_]=le.useState(0),[I,C]=le.useState(!0),[P,V]=le.useState(0),[b,B]=le.useState(800),[G,Q]=le.useState(o),[Y,j]=le.useState(()=>{var D;const x=((D=i.current)==null?void 0:D.width)||800;return-(o/P)*x});le.useEffect(()=>{if(!r)return;C(!0);const x=new(window.AudioContext||window.webkitAudioContext);fetch(r).then(D=>D.arrayBuffer()).then(D=>x.decodeAudioData(D)).then(D=>{var he;d(D),V(D.duration);const k=((he=i.current)==null?void 0:he.width)||800;B(k);const oe=o/D.duration*k;j(-oe),C(!1)}).catch(D=>{console.error("Error decoding audio data",D),C(!1)})},[r]),le.useEffect(()=>{const x=t==null?void 0:t.current;if(!x)return;const D=()=>{Q(x.currentTime)};return x.addEventListener("timeupdate",D),()=>{x.removeEventListener("timeupdate",D)}},[t]),le.useEffect(()=>{i.current&&B(i.current.width)},[i.current]),le.useEffect(()=>{if(!h||!i.current)return;const x=i.current,D=x.getContext("2d"),k=b,oe=x.height;D.clearRect(0,0,k,oe),D.fillStyle="#222",D.fillRect(0,0,k,oe);const he=h.getChannelData(0),pe=Math.floor(he.length*.01),ie=Math.floor(he.length*.4),Z=5,te=3,J=Math.floor(k/(Z+te)),F=Math.floor(pe/J);D.fillStyle="#FFFFFF";const K=G/P*k;for(let me=0;me<J;me++){const Se=ie+me/J*pe,fe=Math.floor(Se);let Pe=0;for(let en=0;en<F;en++){const ze=fe+en;if(ze<he.length){const wn=Math.abs(he[ze]);wn>Pe&&(Pe=wn)}}const Me=Math.min(2,Pe*.9)*(oe/2),Qe=me*(Z+te)-K,xt=oe/2-Me,Jt=Me*2;D.fillRect(Qe,xt,Z,Jt)}D.fillStyle="#FFD700",D.fillRect(0,0,20,oe)},[h,G,b,P]);const W=x=>{h&&(x.preventDefault(),m(!0),_(x.clientX),x.currentTarget.style.cursor="grabbing")},R=x=>{if(!f||!h)return;const D=x.clientX-v,k=0,oe=-(h.duration/h.duration)*b;j(he=>{const pe=he+D;return Math.max(oe,Math.min(k,pe))}),_(x.clientX)},T=x=>{m(!1),x.currentTarget.style.cursor="grab"},N=x=>{const D=Math.floor(x/60),k=Math.floor(x%60);return`${D.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},M=()=>{var D,k;const x=(t==null?void 0:t.current)||((k=(D=l.current)==null?void 0:D.closest(".music-panel"))==null?void 0:k.querySelector("audio"))||document.querySelector("audio");if(x){const oe=x.currentTime;e(oe)}else console.error("No audio element found to set start time")};return E.jsx("div",{className:"waveform-container",ref:l,children:I?E.jsx("div",{className:"waveform-loading",children:"Loading waveform..."}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"waveform-canvas-container",onMouseDown:W,onMouseMove:R,onMouseUp:T,onMouseLeave:T,style:{cursor:"default",pointerEvents:"none"},children:E.jsx("canvas",{ref:i,width:800,height:80,className:"waveform-canvas"})}),E.jsxs("div",{className:"waveform-timestamps",children:[E.jsx("span",{className:"start-time",children:N(0)}),E.jsxs("span",{className:"play-from",children:["Play from: ",N(G)]}),E.jsx("span",{className:"end-time",children:N(P)})]}),E.jsx("div",{className:"waveform-controls",children:E.jsx("button",{className:"choose-segment",onClick:M,children:"Set Start Point"})})]})})},dC=r=>(e,t)=>(r.set(e,t),t),Gg=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Yv=536870912,Qg=Yv*2,fC=(r,e)=>t=>{const o=e.get(t);let i=o===void 0?t.size:o<Qg?o+1:0;if(!t.has(i))return r(t,i);if(t.size<Yv){for(;t.has(i);)i=Math.floor(Math.random()*Qg);return r(t,i)}if(t.size>Gg)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*Gg);return r(t,i)},Zv=new WeakMap,pC=dC(Zv),mC=fC(pC,Zv),gC=r=>typeof r.start=="function",Kg=new WeakMap,yC=r=>({...r,connect:({call:e})=>async()=>{const{port1:t,port2:o}=new MessageChannel,i=await e("connect",{port:t},[t]);return Kg.set(o,i),o},disconnect:({call:e})=>async t=>{const o=Kg.get(t);if(o===void 0)throw new Error("The given port is not connected.");await e("disconnect",{portId:o})},isSupported:({call:e})=>()=>e("isSupported")}),Jh=new WeakMap,vC=r=>{if(Jh.has(r))return Jh.get(r);const e=new Map;return Jh.set(r,e),e},_C=r=>{const e=yC(r);return t=>{const o=vC(t);t.addEventListener("message",({data:d})=>{const{id:f}=d;if(f!==null&&o.has(f)){const{reject:m,resolve:v}=o.get(f);o.delete(f),d.error===void 0?v(d.result):m(new Error(d.error.message))}}),gC(t)&&t.start();const i=(d,f=null,m=[])=>new Promise((v,_)=>{const I=mC(o);o.set(I,{reject:_,resolve:v}),f===null?t.postMessage({id:I,method:d},m):t.postMessage({id:I,method:d,params:f},m)}),l=(d,f,m=[])=>{t.postMessage({id:null,method:d,params:f},m)};let h={};for(const[d,f]of Object.entries(e))h={...h,[d]:f({call:i,notify:l})};return{...h}}},Xg=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),Yg=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),Id=(r,e)=>({startTime:e,type:"setValue",value:r}),Jv=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),e_=(r,e,{startTime:t,target:o,timeConstant:i})=>o+(e-o)*Math.exp((t-r)/i),Ci=r=>r.type==="exponentialRampToValue",Uu=r=>r.type==="linearRampToValue",Ms=r=>Ci(r)||Uu(r),sf=r=>r.type==="setValue",Zr=r=>r.type==="setValueCurve",Bu=(r,e,t,o)=>{const i=r[e];return i===void 0?o:Ms(i)||sf(i)?i.value:Zr(i)?i.values[i.values.length-1]:e_(t,Bu(r,e-1,i.startTime,o),i)},Zg=(r,e,t,o,i)=>t===void 0?[o.insertTime,i]:Ms(t)?[t.endTime,t.value]:sf(t)?[t.startTime,t.value]:Zr(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Bu(r,e-1,t.startTime,i)],Cd=r=>r.type==="cancelAndHold",Nd=r=>r.type==="cancelScheduledValues",xs=r=>Cd(r)||Nd(r)?r.cancelTime:Ci(r)||Uu(r)?r.endTime:r.startTime,Jg=(r,e,t,{endTime:o,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((r-e)/(o-e)):0,ey=(r,e,t,{endTime:o,value:i})=>t+(r-e)/(o-e)*(i-t),wC=(r,e)=>{const t=Math.floor(e),o=Math.ceil(e);return t===o?r[t]:(1-(e-t))*r[t]+(1-(o-e))*r[o]},EC=(r,{duration:e,startTime:t,values:o})=>{const i=(r-t)/e*(o.length-1);return wC(o,i)},Eu=r=>r.type==="setTarget";class TC{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=xs(e);if(Cd(e)||Nd(e)){const o=this._automationEvents.findIndex(l=>Nd(e)&&Zr(l)?l.startTime+l.duration>=t:xs(l)>=t),i=this._automationEvents[o];if(o!==-1&&(this._automationEvents=this._automationEvents.slice(0,o)),Cd(e)){const l=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Ms(i)){if(l!==void 0&&Eu(l))throw new Error("The internal list is malformed.");const h=l===void 0?i.insertTime:Zr(l)?l.startTime+l.duration:xs(l),d=l===void 0?this._defaultValue:Zr(l)?l.values[l.values.length-1]:l.value,f=Ci(i)?Jg(t,h,d,i):ey(t,h,d,i),m=Ci(i)?Xg(f,t,this._currenTime):Yg(f,t,this._currenTime);this._automationEvents.push(m)}if(l!==void 0&&Eu(l)&&this._automationEvents.push(Id(this.getValue(t),t)),l!==void 0&&Zr(l)&&l.startTime+l.duration>t){const h=t-l.startTime,d=(l.values.length-1)/l.duration,f=Math.max(2,1+Math.ceil(h*d)),m=h/(f-1)*d,v=l.values.slice(0,f);if(m<1)for(let _=1;_<f;_+=1){const I=m*_%1;v[_]=l.values[_-1]*(1-I)+l.values[_]*I}this._automationEvents[this._automationEvents.length-1]=Jv(v,l.startTime,h)}}}else{const o=this._automationEvents.findIndex(h=>xs(h)>t),i=o===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[o-1];if(i!==void 0&&Zr(i)&&xs(i)+i.duration>t)return!1;const l=Ci(e)?Xg(e.value,e.endTime,this._currenTime):Uu(e)?Yg(e.value,t,this._currenTime):e;if(o===-1)this._automationEvents.push(l);else{if(Zr(e)&&t+e.duration>xs(this._automationEvents[o]))return!1;this._automationEvents.splice(o,0,l)}}return!0}flush(e){const t=this._automationEvents.findIndex(o=>xs(o)>e);if(t>1){const o=this._automationEvents.slice(t-1),i=o[0];Eu(i)&&o.unshift(Id(Bu(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=o}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(h=>xs(h)>e),o=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,l=this._automationEvents[i];if(l!==void 0&&Eu(l)&&(o===void 0||!Ms(o)||o.insertTime>e))return e_(e,Bu(this._automationEvents,i-1,l.startTime,this._defaultValue),l);if(l!==void 0&&sf(l)&&(o===void 0||!Ms(o)))return l.value;if(l!==void 0&&Zr(l)&&(o===void 0||!Ms(o)||l.startTime+l.duration>e))return e<l.startTime+l.duration?EC(e,l):l.values[l.values.length-1];if(l!==void 0&&Ms(l)&&(o===void 0||!Ms(o)))return l.value;if(o!==void 0&&Ci(o)){const[h,d]=Zg(this._automationEvents,i,l,o,this._defaultValue);return Jg(e,h,d,o)}if(o!==void 0&&Uu(o)){const[h,d]=Zg(this._automationEvents,i,l,o,this._defaultValue);return ey(e,h,d,o)}return this._defaultValue}}const SC=r=>({cancelTime:r,type:"cancelAndHold"}),IC=r=>({cancelTime:r,type:"cancelScheduledValues"}),CC=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),NC=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),AC=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),kC=()=>new DOMException("","AbortError"),RC=r=>(e,t,[o,i,l],h)=>{r(e[i],[t,o,l],d=>d[0]===t&&d[1]===o,h)},PC=r=>(e,t,o)=>{const i=[];for(let l=0;l<o.numberOfInputs;l+=1)i.push(new Set);r.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},xC=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},bi=new WeakSet,t_=new WeakMap,n_=new WeakMap,r_=new WeakMap,s_=new WeakMap,o_=new WeakMap,i_=new WeakMap,Ad=new WeakMap,ty=new WeakMap,a_={construct(){return a_}},DC=r=>{try{const e=new Proxy(r,a_);new e}catch{return!1}return!0},ny=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,ry=(r,e)=>{const t=[];let o=r.replace(/^[\s]+/,""),i=o.match(ny);for(;i!==null;){const l=i[1].slice(1,-1),h=i[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,e).toString());t.push(h),o=o.slice(i[0].length).replace(/^[\s]+/,""),i=o.match(ny)}return[t.join(";"),o]},sy=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},oy=r=>{if(!DC(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},MC=(r,e,t,o,i,l,h,d,f,m,v,_,I)=>{let C=0;return(P,V,b={credentials:"omit"})=>{const B=v.get(P);if(B!==void 0&&B.has(V))return Promise.resolve();const G=m.get(P);if(G!==void 0){const j=G.get(V);if(j!==void 0)return j}const Q=l(P),Y=Q.audioWorklet===void 0?i(V).then(([j,W])=>{const[R,T]=ry(j,W),N=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return t(N)}).then(()=>{const j=I._AWGS.pop();if(j===void 0)throw new SyntaxError;o(Q.currentTime,Q.sampleRate,()=>j(class{},void 0,(W,R)=>{if(W.trim()==="")throw e();const T=ty.get(Q);if(T!==void 0){if(T.has(W))throw e();oy(R),sy(R.parameterDescriptors),T.set(W,R)}else oy(R),sy(R.parameterDescriptors),ty.set(Q,new Map([[W,R]]))},Q.sampleRate,void 0,void 0))}):Promise.all([i(V),Promise.resolve(r(_,_))]).then(([[j,W],R])=>{const T=C+1;C=T;const[N,M]=ry(j,W),oe=`${N};((AudioWorkletProcessor,registerProcessor)=>{${M}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,he=new Blob([oe],{type:"application/javascript; charset=utf-8"}),pe=URL.createObjectURL(he);return Q.audioWorklet.addModule(pe,b).then(()=>{if(d(Q))return Q;const ie=h(Q);return ie.audioWorklet.addModule(pe,b).then(()=>ie)}).then(ie=>{if(f===null)throw new SyntaxError;try{new f(ie,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(pe))});return G===void 0?m.set(P,new Map([[V,Y]])):G.set(V,Y),Y.then(()=>{const j=v.get(P);j===void 0?v.set(P,new Set([V])):j.add(V)}).finally(()=>{const j=m.get(P);j!==void 0&&j.delete(V)}),Y}},Hs=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},sc=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[o]=t;return r.delete(o),o},l_=(r,e,t,o)=>{const i=Hs(r,e),l=sc(i,h=>h[0]===t&&h[1]===o);return i.size===0&&r.delete(e),l},Ga=r=>Hs(i_,r),Fi=r=>{if(bi.has(r))throw new Error("The AudioNode is already stored.");bi.add(r),Ga(r).forEach(e=>e(!0))},u_=r=>"port"in r,Qa=r=>{if(!bi.has(r))throw new Error("The AudioNode is not stored.");bi.delete(r),Ga(r).forEach(e=>e(!1))},kd=(r,e)=>{!u_(r)&&e.every(t=>t.size===0)&&Qa(r)},VC=(r,e,t,o,i,l,h,d,f,m,v,_,I)=>{const C=new WeakMap;return(P,V,b,B,G)=>{const{activeInputs:Q,passiveInputs:Y}=l(V),{outputs:j}=l(P),W=d(P),R=T=>{const N=f(V),M=f(P);if(T){const x=l_(Y,P,b,B);r(Q,P,x,!1),!G&&!_(P)&&t(M,N,b,B),I(V)&&Fi(V)}else{const x=o(Q,P,b,B);e(Y,B,x,!1),!G&&!_(P)&&i(M,N,b,B);const D=h(V);if(D===0)v(V)&&kd(V,Q);else{const k=C.get(V);k!==void 0&&clearTimeout(k),C.set(V,setTimeout(()=>{v(V)&&kd(V,Q)},D*1e3))}}};return m(j,[V,b,B],T=>T[0]===V&&T[1]===b&&T[2]===B,!0)?(W.add(R),v(P)?r(Q,P,[b,B,R],!0):e(Y,B,[P,b,R],!0),!0):!1}},OC=r=>(e,t,[o,i,l],h)=>{const d=e.get(o);d===void 0?e.set(o,new Set([[i,t,l]])):r(d,[i,t,l],f=>f[0]===i&&f[1]===t,h)},bC=r=>(e,t)=>{const o=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(o).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(o),o.disconnect()};t.addEventListener("ended",i)},FC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},LC=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=i(d),v={...FC,...f},_=o(m,v),I=l(m)?e():null;super(d,!1,_,I),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},an=(r,e)=>r.context===e,jC=(r,e,t)=>()=>{const o=new WeakMap,i=async(l,h)=>{let d=e(l);if(!an(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=r(h,m)}return o.set(h,d),await t(l,h,d),d};return{render(l,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):i(l,h)}}},zu=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Oo=()=>new DOMException("","IndexSizeError"),of=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(o){throw o.code===12?Oo():o}})(r.getChannelData)},UC={numberOfChannels:1},BC=(r,e,t,o,i,l,h,d)=>{let f=null;return class c_{constructor(v){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:I,sampleRate:C}={...UC,...v};f===null&&(f=new i(1,1,44100));const P=o!==null&&e(l,l)?new o({length:_,numberOfChannels:I,sampleRate:C}):f.createBuffer(I,_,C);if(P.numberOfChannels===0)throw t();return typeof P.copyFromChannel!="function"?(h(P),of(P)):e(zu,()=>zu(P))||d(P),r.add(P),P}static[Symbol.hasInstance](v){return v!==null&&typeof v=="object"&&Object.getPrototypeOf(v)===c_.prototype||r.has(v)}}},Wn=-34028234663852886e22,yn=34028234663852886e22,es=r=>bi.has(r),zC={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},$C=(r,e,t,o,i,l,h,d)=>class extends r{constructor(m,v){const _=l(m),I={...zC,...v},C=i(_,I),P=h(_),V=P?e():null;super(m,!1,C,V),this._audioBufferSourceNodeRenderer=V,this._isBufferNullified=!1,this._isBufferSet=I.buffer!==null,this._nativeAudioBufferSourceNode=C,this._onended=null,this._playbackRate=t(this,P,C.playbackRate,yn,Wn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw o();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const v=typeof m=="function"?d(this,m):null;this._nativeAudioBufferSourceNode.onended=v;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===v?m:_}get playbackRate(){return this._playbackRate}start(m=0,v=0,_){if(this._nativeAudioBufferSourceNode.start(m,v,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[m,v]:[m,v,_]),this.context.state!=="closed"){Fi(this);const I=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",I),es(this)&&Qa(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",I)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},WC=(r,e,t,o,i)=>()=>{const l=new WeakMap;let h=null,d=null;const f=async(m,v)=>{let _=t(m);const I=an(_,v);if(!I){const C={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=e(v,C),h!==null&&_.start(...h),d!==null&&_.stop(d)}return l.set(v,_),I?await r(v,m.playbackRate,_.playbackRate):await o(v,m.playbackRate,_.playbackRate),await i(m,v,_),_};return{set start(m){h=m},set stop(m){d=m},render(m,v){const _=l.get(v);return _!==void 0?Promise.resolve(_):f(m,v)}}},qC=r=>"playbackRate"in r,HC=r=>"frequency"in r&&"gain"in r,GC=r=>"offset"in r,QC=r=>!("frequency"in r)&&"gain"in r,KC=r=>"detune"in r&&"frequency"in r&&!("gain"in r),XC=r=>"pan"in r,Mn=r=>Hs(t_,r),Ka=r=>Hs(r_,r),Rd=(r,e)=>{const{activeInputs:t}=Mn(r);t.forEach(i=>i.forEach(([l])=>{e.includes(r)||Rd(l,[...e,r])}));const o=qC(r)?[r.playbackRate]:u_(r)?Array.from(r.parameters.values()):HC(r)?[r.Q,r.detune,r.frequency,r.gain]:GC(r)?[r.offset]:QC(r)?[r.gain]:KC(r)?[r.detune,r.frequency]:XC(r)?[r.pan]:[];for(const i of o){const l=Ka(i);l!==void 0&&l.activeInputs.forEach(([h])=>Rd(h,e))}es(r)&&Qa(r)},YC=r=>{Rd(r.destination,[])},ZC=(r,e,t,o,i,l,h,d)=>class extends r{constructor(m,v){const _=l(m),I=h(_),C=i(_,v,I),P=I?e(d):null;super(m,!1,C,P),this._isNodeOfNativeOfflineAudioContext=I,this._nativeAudioDestinationNode=C}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},JC=r=>{const e=new WeakMap,t=async(o,i)=>{const l=i.destination;return e.set(i,l),await r(o,i,l),l};return{render(o,i){const l=e.get(i);return l!==void 0?Promise.resolve(l):t(o,i)}}},eN=(r,e,t,o,i,l,h,d)=>(f,m)=>{const v=m.listener,_=()=>{const j=new Float32Array(1),W=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=h(m);let T=!1,N=[0,0,-1,0,1,0],M=[0,0,0];const x=()=>{if(T)return;T=!0;const he=o(m,256,9,0);he.onaudioprocess=({inputBuffer:pe})=>{const ie=[l(pe,j,0),l(pe,j,1),l(pe,j,2),l(pe,j,3),l(pe,j,4),l(pe,j,5)];ie.some((te,J)=>te!==N[J])&&(v.setOrientation(...ie),N=ie);const Z=[l(pe,j,6),l(pe,j,7),l(pe,j,8)];Z.some((te,J)=>te!==M[J])&&(v.setPosition(...Z),M=Z)},W.connect(he)},D=he=>pe=>{pe!==N[he]&&(N[he]=pe,v.setOrientation(...N))},k=he=>pe=>{pe!==M[he]&&(M[he]=pe,v.setPosition(...M))},oe=(he,pe,ie)=>{const Z=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:pe});Z.connect(W,0,he),Z.start(),Object.defineProperty(Z.offset,"defaultValue",{get(){return pe}});const te=r({context:f},R,Z.offset,yn,Wn);return d(te,"value",J=>()=>J.call(te),J=>F=>{try{J.call(te,F)}catch(K){if(K.code!==9)throw K}x(),R&&ie(F)}),te.cancelAndHoldAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.cancelAndHoldAtTime),te.cancelScheduledValues=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.cancelScheduledValues),te.exponentialRampToValueAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.exponentialRampToValueAtTime),te.linearRampToValueAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.linearRampToValueAtTime),te.setTargetAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.setTargetAtTime),te.setValueAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.setValueAtTime),te.setValueCurveAtTime=(J=>R?()=>{throw i()}:(...F)=>{const K=J.apply(te,F);return x(),K})(te.setValueCurveAtTime),te};return{forwardX:oe(0,0,D(0)),forwardY:oe(1,0,D(1)),forwardZ:oe(2,-1,D(2)),positionX:oe(6,0,k(0)),positionY:oe(7,0,k(1)),positionZ:oe(8,0,k(2)),upX:oe(3,0,D(3)),upY:oe(4,1,D(4)),upZ:oe(5,0,D(5))}},{forwardX:I,forwardY:C,forwardZ:P,positionX:V,positionY:b,positionZ:B,upX:G,upY:Q,upZ:Y}=v.forwardX===void 0?_():v;return{get forwardX(){return I},get forwardY(){return C},get forwardZ(){return P},get positionX(){return V},get positionY(){return b},get positionZ(){return B},get upX(){return G},get upY(){return Q},get upZ(){return Y}}},$u=r=>"context"in r,Xa=r=>$u(r[0]),bo=(r,e,t,o)=>{for(const i of r)if(t(i)){if(o)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},iy=(r,e,[t,o],i)=>{bo(r,[e,t,o],l=>l[0]===e&&l[1]===t,i)},ay=(r,[e,t,o],i)=>{const l=r.get(e);l===void 0?r.set(e,new Set([[t,o]])):bo(l,[t,o],h=>h[0]===t,i)},Bi=r=>"inputs"in r,Wu=(r,e,t,o)=>{if(Bi(e)){const i=e.inputs[o];return r.connect(i,t,0),[i,t,0]}return r.connect(e,t,o),[e,t,o]},h_=(r,e,t)=>{for(const o of r)if(o[0]===e&&o[1]===t)return r.delete(o),o;return null},tN=(r,e,t)=>sc(r,o=>o[0]===e&&o[1]===t),d_=(r,e)=>{if(!Ga(r).delete(e))throw new Error("Missing the expected event listener.")},f_=(r,e,t)=>{const o=Hs(r,e),i=sc(o,l=>l[0]===t);return o.size===0&&r.delete(e),i},qu=(r,e,t,o)=>{Bi(e)?r.disconnect(e.inputs[o],t,0):r.disconnect(e,t,o)},ut=r=>Hs(n_,r),Ba=r=>Hs(s_,r),Do=r=>Ad.has(r),Nu=r=>!bi.has(r),ly=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const o=r.createScriptProcessor(256,1,1),i=r.createGain(),l=r.createBuffer(1,2,44100),h=l.getChannelData(0);h[0]=1,h[1]=1;const d=r.createBufferSource();d.buffer=l,d.loop=!0,d.connect(o).connect(r.destination),d.connect(i),d.disconnect(i),o.onaudioprocess=f=>{const m=f.inputBuffer.getChannelData(0);Array.prototype.some.call(m,v=>v===1)?t(!0):t(!1),d.stop(),o.onaudioprocess=null,d.disconnect(o),o.disconnect(r.destination)},d.start()}}),ed=(r,e)=>{const t=new Map;for(const o of r)for(const i of o){const l=t.get(i);t.set(i,l===void 0?1:l+1)}t.forEach((o,i)=>e(i,o))},uy=r=>"context"in r,nN=r=>{const e=new Map;r.connect=(t=>(o,i=0,l=0)=>{const h=uy(o)?t(o,i,l):t(o,i),d=e.get(o);return d===void 0?e.set(o,[{input:l,output:i}]):d.every(f=>f.input!==l||f.output!==i)&&d.push({input:l,output:i}),h})(r.connect.bind(r)),r.disconnect=(t=>(o,i,l)=>{if(t.apply(r),o===void 0)e.clear();else if(typeof o=="number")for(const[h,d]of e){const f=d.filter(m=>m.output!==o);f.length===0?e.delete(h):e.set(h,f)}else if(e.has(o))if(i===void 0)e.delete(o);else{const h=e.get(o);if(h!==void 0){const d=h.filter(f=>f.output!==i&&(f.input!==l||l===void 0));d.length===0?e.delete(o):e.set(o,d)}}for(const[h,d]of e)d.forEach(f=>{uy(h)?r.connect(h,f.output,f.input):r.connect(h,f.output)})})(r.disconnect)},rN=(r,e,t,o)=>{const{activeInputs:i,passiveInputs:l}=Ka(e),{outputs:h}=Mn(r),d=Ga(r),f=m=>{const v=ut(r),_=Ba(e);if(m){const I=f_(l,r,t);iy(i,r,I,!1),!o&&!Do(r)&&v.connect(_,t)}else{const I=tN(i,r,t);ay(l,I,!1),!o&&!Do(r)&&v.disconnect(_,t)}};return bo(h,[e,t],m=>m[0]===e&&m[1]===t,!0)?(d.add(f),es(r)?iy(i,r,[t,f],!0):ay(l,[r,t,f],!0),!0):!1},sN=(r,e,t,o)=>{const{activeInputs:i,passiveInputs:l}=Mn(e),h=h_(i[o],r,t);return h===null?[l_(l,r,t,o)[2],!1]:[h[2],!0]},oN=(r,e,t)=>{const{activeInputs:o,passiveInputs:i}=Ka(e),l=h_(o,r,t);return l===null?[f_(i,r,t)[1],!1]:[l[2],!0]},af=(r,e,t,o,i)=>{const[l,h]=sN(r,t,o,i);if(l!==null&&(d_(r,l),h&&!e&&!Do(r)&&qu(ut(r),ut(t),o,i)),es(t)){const{activeInputs:d}=Mn(t);kd(t,d)}},lf=(r,e,t,o)=>{const[i,l]=oN(r,t,o);i!==null&&(d_(r,i),l&&!e&&!Do(r)&&ut(r).disconnect(Ba(t),o))},iN=(r,e)=>{const t=Mn(r),o=[];for(const i of t.outputs)Xa(i)?af(r,e,...i):lf(r,e,...i),o.push(i[0]);return t.outputs.clear(),o},aN=(r,e,t)=>{const o=Mn(r),i=[];for(const l of o.outputs)l[1]===t&&(Xa(l)?af(r,e,...l):lf(r,e,...l),i.push(l[0]),o.outputs.delete(l));return i},lN=(r,e,t,o,i)=>{const l=Mn(r);return Array.from(l.outputs).filter(h=>h[0]===t&&(o===void 0||h[1]===o)&&(i===void 0||h[2]===i)).map(h=>(Xa(h)?af(r,e,...h):lf(r,e,...h),l.outputs.delete(h),h[0]))},uN=(r,e,t,o,i,l,h,d,f,m,v,_,I,C,P,V)=>class extends m{constructor(B,G,Q,Y){super(Q),this._context=B,this._nativeAudioNode=Q;const j=v(B);_(j)&&t(ly,()=>ly(j,V))!==!0&&nN(Q),n_.set(this,Q),i_.set(this,new Set),B.state!=="closed"&&G&&Fi(this),r(this,Y,Q)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(B){this._nativeAudioNode.channelCount=B}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(B){this._nativeAudioNode.channelCountMode=B}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(B){this._nativeAudioNode.channelInterpretation=B}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(B,G=0,Q=0){if(G<0||G>=this._nativeAudioNode.numberOfOutputs)throw i();const Y=v(this._context),j=P(Y);if(I(B)||C(B))throw l();if($u(B)){const T=ut(B);try{const M=Wu(this._nativeAudioNode,T,G,Q),x=Nu(this);(j||x)&&this._nativeAudioNode.disconnect(...M),this.context.state!=="closed"&&!x&&Nu(B)&&Fi(B)}catch(M){throw M.code===12?l():M}if(e(this,B,G,Q,j)){const M=f([this],B);ed(M,o(j))}return B}const W=Ba(B);if(W.name==="playbackRate"&&W.maxValue===1024)throw h();try{this._nativeAudioNode.connect(W,G),(j||Nu(this))&&this._nativeAudioNode.disconnect(W,G)}catch(T){throw T.code===12?l():T}if(rN(this,B,G,j)){const T=f([this],B);ed(T,o(j))}}disconnect(B,G,Q){let Y;const j=v(this._context),W=P(j);if(B===void 0)Y=iN(this,W);else if(typeof B=="number"){if(B<0||B>=this.numberOfOutputs)throw i();Y=aN(this,W,B)}else{if(G!==void 0&&(G<0||G>=this.numberOfOutputs)||$u(B)&&Q!==void 0&&(Q<0||Q>=B.numberOfInputs))throw i();if(Y=lN(this,W,B,G,Q),Y.length===0)throw l()}for(const R of Y){const T=f([this],R);ed(T,d)}}},cN=(r,e,t,o,i,l,h,d,f,m,v,_,I)=>(C,P,V,b=null,B=null)=>{const G=V.value,Q=new TC(G),Y=P?o(Q):null,j={get defaultValue(){return G},get maxValue(){return b===null?V.maxValue:b},get minValue(){return B===null?V.minValue:B},get value(){return V.value},set value(W){V.value=W,j.setValueAtTime(W,C.context.currentTime)},cancelAndHoldAtTime(W){if(typeof V.cancelAndHoldAtTime=="function")Y===null&&Q.flush(C.context.currentTime),Q.add(i(W)),V.cancelAndHoldAtTime(W);else{const R=Array.from(Q).pop();Y===null&&Q.flush(C.context.currentTime),Q.add(i(W));const T=Array.from(Q).pop();V.cancelScheduledValues(W),R!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?V.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?V.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?V.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&V.setValueCurveAtTime(T.values,T.startTime,T.duration))}return j},cancelScheduledValues(W){return Y===null&&Q.flush(C.context.currentTime),Q.add(l(W)),V.cancelScheduledValues(W),j},exponentialRampToValueAtTime(W,R){if(W===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const T=C.context.currentTime;return Y===null&&Q.flush(T),Array.from(Q).length===0&&(Q.add(m(G,T)),V.setValueAtTime(G,T)),Q.add(h(W,R)),V.exponentialRampToValueAtTime(W,R),j},linearRampToValueAtTime(W,R){const T=C.context.currentTime;return Y===null&&Q.flush(T),Array.from(Q).length===0&&(Q.add(m(G,T)),V.setValueAtTime(G,T)),Q.add(d(W,R)),V.linearRampToValueAtTime(W,R),j},setTargetAtTime(W,R,T){return Y===null&&Q.flush(C.context.currentTime),Q.add(f(W,R,T)),V.setTargetAtTime(W,R,T),j},setValueAtTime(W,R){return Y===null&&Q.flush(C.context.currentTime),Q.add(m(W,R)),V.setValueAtTime(W,R),j},setValueCurveAtTime(W,R,T){const N=W instanceof Float32Array?W:new Float32Array(W);if(_!==null&&_.name==="webkitAudioContext"){const M=R+T,x=C.context.sampleRate,D=Math.ceil(R*x),k=Math.floor(M*x),oe=k-D,he=new Float32Array(oe);for(let ie=0;ie<oe;ie+=1){const Z=(N.length-1)/T*((D+ie)/x-R),te=Math.floor(Z),J=Math.ceil(Z);he[ie]=te===J?N[te]:(1-(Z-te))*N[te]+(1-(J-Z))*N[J]}Y===null&&Q.flush(C.context.currentTime),Q.add(v(he,R,T)),V.setValueCurveAtTime(he,R,T);const pe=k/x;pe<M&&I(j,he[he.length-1],pe),I(j,N[N.length-1],M)}else Y===null&&Q.flush(C.context.currentTime),Q.add(v(N,R,T)),V.setValueCurveAtTime(N,R,T);return j}};return t.set(j,V),e.set(j,C),r(j,Y),j},hN=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:o,value:i}=t;e.exponentialRampToValueAtTime(i,o)}else if(t.type==="linearRampToValue"){const{endTime:o,value:i}=t;e.linearRampToValueAtTime(i,o)}else if(t.type==="setTarget"){const{startTime:o,target:i,timeConstant:l}=t;e.setTargetAtTime(i,o,l)}else if(t.type==="setValue"){const{startTime:o,value:i}=t;e.setValueAtTime(i,o)}else if(t.type==="setValueCurve"){const{duration:o,startTime:i,values:l}=t;e.setValueCurveAtTime(l,i,o)}else throw new Error("Can't apply an unknown automation.")}}),dN=(r,e,t,o,i,l,h,d,f,m,v,_,I,C,P,V,b,B,G,Q)=>class extends P{constructor(j,W){super(j,W),this._nativeContext=j,this._audioWorklet=r===void 0?void 0:{addModule:(R,T)=>r(this,R,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(j,W,R){return new t({length:W,numberOfChannels:j,sampleRate:R})}createBufferSource(){return new o(this)}createChannelMerger(j=6){return new l(this,{numberOfInputs:j})}createChannelSplitter(j=6){return new h(this,{numberOfOutputs:j})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(j=1){return new v(this,{maxDelayTime:j})}createDynamicsCompressor(){return new _(this)}createGain(){return new I(this)}createIIRFilter(j,W){return new C(this,{feedback:W,feedforward:j})}createOscillator(){return new V(this)}createPanner(){return new b(this)}createPeriodicWave(j,W,R={disableNormalization:!1}){return new B(this,{...R,imag:W,real:j})}createStereoPanner(){return new G(this)}createWaveShaper(){return new Q(this)}decodeAudioData(j,W,R){return m(this._nativeContext,j).then(T=>(typeof W=="function"&&W(T),T),T=>{throw typeof R=="function"&&R(T),T})}},fN={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},pN=(r,e,t,o,i,l,h,d)=>class extends r{constructor(m,v){const _=l(m),I={...fN,...v},C=i(_,I),P=h(_),V=P?t():null;super(m,!1,C,V),this._Q=e(this,P,C.Q,yn,Wn),this._detune=e(this,P,C.detune,1200*Math.log2(yn),-1200*Math.log2(yn)),this._frequency=e(this,P,C.frequency,m.sampleRate/2,0),this._gain=e(this,P,C.gain,40*Math.log10(yn),Wn),this._nativeBiquadFilterNode=C,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,v,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,v,_)}catch(I){throw I.code===11?o():I}if(m.length!==v.length||v.length!==_.length)throw o()}},mN=(r,e,t,o,i)=>()=>{const l=new WeakMap,h=async(d,f)=>{let m=t(d);const v=an(m,f);if(!v){const _={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=e(f,_)}return l.set(f,m),v?(await r(f,d.Q,m.Q),await r(f,d.detune,m.detune),await r(f,d.frequency,m.frequency),await r(f,d.gain,m.gain)):(await o(f,d.Q,m.Q),await o(f,d.detune,m.detune),await o(f,d.frequency,m.frequency),await o(f,d.gain,m.gain)),await i(d,f,m),m};return{render(d,f){const m=l.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},gN=(r,e)=>(t,o)=>{const i=e.get(t);if(i!==void 0)return i;const l=r.get(t);if(l!==void 0)return l;try{const h=o();return h instanceof Promise?(r.set(t,h),h.catch(()=>!1).then(d=>(r.delete(t),e.set(t,d),d))):(e.set(t,h),h)}catch{return e.set(t,!1),!1}},yN={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},vN=(r,e,t,o,i)=>class extends r{constructor(h,d){const f=o(h),m={...yN,...d},v=t(f,m),_=i(f)?e():null;super(h,!1,v,_)}},_N=(r,e,t)=>()=>{const o=new WeakMap,i=async(l,h)=>{let d=e(l);if(!an(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=r(h,m)}return o.set(h,d),await t(l,h,d),d};return{render(l,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):i(l,h)}}},wN={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},EN=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=o(d),v=l({...wN,...f}),_=t(m,v),I=i(m)?e():null;super(d,!1,_,I)}},TN=(r,e,t)=>()=>{const o=new WeakMap,i=async(l,h)=>{let d=e(l);if(!an(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=r(h,m)}return o.set(h,d),await t(l,h,d),d};return{render(l,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):i(l,h)}}},SN=r=>(e,t,o)=>r(t,e,o),IN=r=>(e,t)=>{const o=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return o.buffer=i,o.loop=!0,o.connect(t),o.start(),()=>{o.stop(),o.disconnect(t)}},CN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},NN=(r,e,t,o,i,l,h)=>class extends r{constructor(f,m){const v=i(f),_={...CN,...m},I=o(v,_),C=l(v),P=C?t():null;super(f,!1,I,P),this._constantSourceNodeRenderer=P,this._nativeConstantSourceNode=I,this._offset=e(this,C,I.offset,yn,Wn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeConstantSourceNode.onended=m;const v=this._nativeConstantSourceNode.onended;this._onended=v!==null&&v===m?f:v}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){Fi(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),es(this)&&Qa(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},AN=(r,e,t,o,i)=>()=>{const l=new WeakMap;let h=null,d=null;const f=async(m,v)=>{let _=t(m);const I=an(_,v);if(!I){const C={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=e(v,C),h!==null&&_.start(h),d!==null&&_.stop(d)}return l.set(v,_),I?await r(v,m.offset,_.offset):await o(v,m.offset,_.offset),await i(m,v,_),_};return{set start(m){h=m},set stop(m){d=m},render(m,v){const _=l.get(v);return _!==void 0?Promise.resolve(_):f(m,v)}}},kN=r=>e=>(r[0]=e,r[0]),RN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},PN=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=o(d),v={...RN,...f},_=t(m,v),C=i(m)?e():null;super(d,!1,_,C),this._isBufferNullified=!1,this._nativeConvolverNode=_,v.buffer!==null&&l(this,v.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},xN=(r,e,t)=>()=>{const o=new WeakMap,i=async(l,h)=>{let d=e(l);if(!an(d,h)){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=r(h,m)}return o.set(h,d),Bi(d)?await t(l,h,d.inputs[0]):await t(l,h,d),d};return{render(l,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):i(l,h)}}},DN=(r,e)=>(t,o,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,o,i)}catch(l){throw l.name==="SyntaxError"?r():l}},MN=()=>new DOMException("","DataCloneError"),cy=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(o=>{const i=()=>{t.onmessage=null,e.close(),t.close(),o()};t.onmessage=()=>i();try{e.postMessage(r,[r])}catch{}finally{i()}})},VN=(r,e,t,o,i,l,h,d,f,m,v)=>(_,I)=>{const C=h(_)?_:l(_);if(i.has(I)){const P=t();return Promise.reject(P)}try{i.add(I)}catch{}return e(f,()=>f(C))?C.decodeAudioData(I).then(P=>(cy(I).catch(()=>{}),e(d,()=>d(P))||v(P),r.add(P),P)):new Promise((P,V)=>{const b=async()=>{try{await cy(I)}catch{}},B=G=>{V(G),b()};try{C.decodeAudioData(I,G=>{typeof G.copyFromChannel!="function"&&(m(G),of(G)),r.add(G),b().then(()=>P(G))},G=>{B(G===null?o():G)})}catch(G){B(G)}})},ON=(r,e,t,o,i,l,h,d)=>(f,m)=>{const v=e.get(f);if(v===void 0)throw new Error("Missing the expected cycle count.");const _=l(f.context),I=d(_);if(v===m){if(e.delete(f),!I&&h(f)){const C=o(f),{outputs:P}=t(f);for(const V of P)if(Xa(V)){const b=o(V[0]);r(C,b,V[1],V[2])}else{const b=i(V[0]);C.connect(b,V[1])}}}else e.set(f,v-m)},bN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},FN=(r,e,t,o,i,l,h)=>class extends r{constructor(f,m){const v=i(f),_={...bN,...m},I=o(v,_),C=l(v),P=C?t(_.maxDelayTime):null;super(f,!1,I,P),this._delayTime=e(this,C,I.delayTime),h(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},LN=(r,e,t,o,i)=>l=>{const h=new WeakMap,d=async(f,m)=>{let v=t(f);const _=an(v,m);if(!_){const I={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,delayTime:v.delayTime.value,maxDelayTime:l};v=e(m,I)}return h.set(m,v),_?await r(m,f.delayTime,v.delayTime):await o(m,f.delayTime,v.delayTime),await i(f,m,v),v};return{render(f,m){const v=h.get(m);return v!==void 0?Promise.resolve(v):d(f,m)}}},jN=r=>(e,t,o,i)=>r(e[i],l=>l[0]===t&&l[1]===o),UN=r=>"delayTime"in r,BN=(r,e,t)=>function o(i,l){const h=$u(l)?l:t(r,l);if(UN(h))return[];if(i[0]===h)return[i];if(i.includes(h))return[];const{outputs:d}=e(h);return Array.from(d).map(f=>o([...i,h],f[0])).reduce((f,m)=>f.concat(m),[])},zN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},$N=(r,e,t,o,i,l,h,d)=>class extends r{constructor(m,v){const _=l(m),I={...zN,...v},C=o(_,I),P=h(_),V=P?t():null;super(m,!1,C,V),this._attack=e(this,P,C.attack),this._knee=e(this,P,C.knee),this._nativeDynamicsCompressorNode=C,this._ratio=e(this,P,C.ratio),this._release=e(this,P,C.release),this._threshold=e(this,P,C.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const v=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=v,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const v=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=v,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},WN=(r,e,t,o,i)=>()=>{const l=new WeakMap,h=async(d,f)=>{let m=t(d);const v=an(m,f);if(!v){const _={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=e(f,_)}return l.set(f,m),v?(await r(f,d.attack,m.attack),await r(f,d.knee,m.knee),await r(f,d.ratio,m.ratio),await r(f,d.release,m.release),await r(f,d.threshold,m.threshold)):(await o(f,d.attack,m.attack),await o(f,d.knee,m.knee),await o(f,d.ratio,m.ratio),await o(f,d.release,m.release),await o(f,d.threshold,m.threshold)),await i(d,f,m),m};return{render(d,f){const m=l.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},qN=()=>new DOMException("","EncodingError"),HN=r=>e=>new Promise((t,o)=>{if(r===null){o(new SyntaxError);return}const i=r.document.head;if(i===null)o(new SyntaxError);else{const l=r.document.createElement("script"),h=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(h),f=r.onerror,m=()=>{r.onerror=f,URL.revokeObjectURL(d)};r.onerror=(v,_,I,C,P)=>{if(_===d||_===r.location.href&&I===1&&C===1)return m(),o(P),!1;if(f!==null)return f(v,_,I,C,P)},l.onerror=()=>{m(),o(new SyntaxError)},l.onload=()=>{m(),t()},l.src=d,l.type="module",i.appendChild(l)}}),GN=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,o,i){if(o!==null){let l=this._listeners.get(o);l===void 0&&(l=r(this,o),typeof o=="function"&&this._listeners.set(o,l)),this._nativeEventTarget.addEventListener(t,l,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,o,i){const l=o===null?void 0:this._listeners.get(o);this._nativeEventTarget.removeEventListener(t,l===void 0?null:l,i)}},QN=r=>(e,t,o)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return o()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},KN=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},XN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},YN=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=i(d),v={...XN,...f},_=o(m,v),I=l(m),C=I?t():null;super(d,!1,_,C),this._gain=e(this,I,_.gain,yn,Wn)}get gain(){return this._gain}},ZN=(r,e,t,o,i)=>()=>{const l=new WeakMap,h=async(d,f)=>{let m=t(d);const v=an(m,f);if(!v){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=e(f,_)}return l.set(f,m),v?await r(f,d.gain,m.gain):await o(f,d.gain,m.gain),await i(d,f,m),m};return{render(d,f){const m=l.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},JN=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},eA=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},tA=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},_n=()=>new DOMException("","InvalidStateError"),nA=r=>e=>{const t=r.get(e);if(t===void 0)throw _n();return t},rA=(r,e)=>t=>{let o=r.get(t);if(o!==void 0)return o;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return o=new e(1,1,44100),r.set(t,o),o},sA=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},oc=()=>new DOMException("","InvalidAccessError"),oA=r=>{r.getFrequencyResponse=(e=>(t,o,i)=>{if(t.length!==o.length||o.length!==i.length)throw oc();return e.call(r,t,o,i)})(r.getFrequencyResponse)},iA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},aA=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=o(d),v=i(m),_={...iA,...f},I=e(m,v?null:d.baseLatency,_),C=v?t(_.feedback,_.feedforward):null;super(d,!1,I,C),oA(I),this._nativeIIRFilterNode=I,l(this,1)}getFrequencyResponse(d,f,m){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,m)}},p_=(r,e,t,o,i,l,h,d,f,m,v)=>{const _=m.length;let I=d;for(let C=0;C<_;C+=1){let P=t[0]*m[C];for(let V=1;V<i;V+=1){const b=I-V&f-1;P+=t[V]*l[b],P-=r[V]*h[b]}for(let V=i;V<o;V+=1)P+=t[V]*l[I-V&f-1];for(let V=i;V<e;V+=1)P-=r[V]*h[I-V&f-1];l[I]=m[C],h[I]=P,I=I+1&f-1,v[C]=P}return I},lA=(r,e,t,o)=>{const i=t instanceof Float64Array?t:new Float64Array(t),l=o instanceof Float64Array?o:new Float64Array(o),h=i.length,d=l.length,f=Math.min(h,d);if(i[0]!==1){for(let P=0;P<h;P+=1)l[P]/=i[0];for(let P=1;P<d;P+=1)i[P]/=i[0]}const m=32,v=new Float32Array(m),_=new Float32Array(m),I=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),C=r.numberOfChannels;for(let P=0;P<C;P+=1){const V=r.getChannelData(P),b=I.getChannelData(P);v.fill(0),_.fill(0),p_(i,h,l,d,f,v,_,0,m,V,b)}return I},uA=(r,e,t,o,i)=>(l,h)=>{const d=new WeakMap;let f=null;const m=async(v,_)=>{let I=null,C=e(v);const P=an(C,_);if(_.createIIRFilter===void 0?I=r(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):P||(C=_.createIIRFilter(h,l)),d.set(_,I===null?C:I),I!==null){if(f===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new t(v.context.destination.channelCount,v.context.length,_.sampleRate);f=(async()=>{await o(v,b,b.destination);const B=await i(b);return lA(B,_,l,h)})()}const V=await f;return I.buffer=V,I.start(0),I}return await o(v,_,C),C};return{render(v,_){const I=d.get(_);return I!==void 0?Promise.resolve(I):m(v,_)}}},cA=(r,e,t,o,i,l)=>h=>(d,f)=>{const m=r.get(d);if(m===void 0){if(!h&&l(d)){const v=o(d),{outputs:_}=t(d);for(const I of _)if(Xa(I)){const C=o(I[0]);e(v,C,I[1],I[2])}else{const C=i(I[0]);v.disconnect(C,I[1])}}r.set(d,f)}else r.set(d,m+f)},hA=r=>e=>r!==null&&e instanceof r,dA=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,fA=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,pA=(r,e)=>t=>r(t)||e(t),mA=r=>e=>r!==null&&e instanceof r,gA=r=>r!==null&&r.isSecureContext,yA=(r,e,t,o,i,l)=>class extends t{constructor(d,f){super(d),this._nativeContext=d,o_.set(this,d),o(d)&&i.set(d,new Set),this._destination=new r(this,f),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f=typeof d=="function"?l(this,d):null;this._nativeContext.onstatechange=f;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===f?d:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},za=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},vA=(r,e)=>(t,o,i)=>{const l=new Set;return t.connect=(h=>(d,f=0,m=0)=>{const v=l.size===0;if(e(d))return h.call(t,d,f,m),r(l,[d,f,m],_=>_[0]===d&&_[1]===f&&_[2]===m,!0),v&&o(),d;h.call(t,d,f),r(l,[d,f],_=>_[0]===d&&_[1]===f,!0),v&&o()})(t.connect),t.disconnect=(h=>(d,f,m)=>{const v=l.size>0;if(d===void 0)h.apply(t),l.clear();else if(typeof d=="number"){h.call(t,d);for(const I of l)I[1]===d&&l.delete(I)}else{e(d)?h.call(t,d,f,m):h.call(t,d,f);for(const I of l)I[0]===d&&(f===void 0||I[1]===f)&&(m===void 0||I[2]===m)&&l.delete(I)}const _=l.size===0;v&&_&&i()})(t.disconnect),t},ot=(r,e,t)=>{const o=e[t];o!==void 0&&o!==r[t]&&(r[t]=o)},Ft=(r,e)=>{ot(r,e,"channelCount"),ot(r,e,"channelCountMode"),ot(r,e,"channelInterpretation")},hy=r=>typeof r.getFloatTimeDomainData=="function",_A=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const o=Math.max(t.length,r.fftSize);for(let i=0;i<o;i+=1)e[i]=(t[i]-128)*.0078125;return e}},wA=(r,e)=>(t,o)=>{const i=t.createAnalyser();if(Ft(i,o),!(o.maxDecibels>o.minDecibels))throw e();return ot(i,o,"fftSize"),ot(i,o,"maxDecibels"),ot(i,o,"minDecibels"),ot(i,o,"smoothingTimeConstant"),r(hy,()=>hy(i))||_A(i),i},EA=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,ft=(r,e,t)=>{const o=e[t];o!==void 0&&o!==r[t].value&&(r[t].value=o)},TA=r=>{r.start=(e=>{let t=!1;return(o=0,i=0,l)=>{if(t)throw _n();e.call(r,o,i,l),t=!0}})(r.start)},uf=r=>{r.start=(e=>(t=0,o=0,i)=>{if(typeof i=="number"&&i<0||o<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,o,i)})(r.start)},cf=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},SA=(r,e,t,o,i,l,h,d,f,m,v)=>(_,I)=>{const C=_.createBufferSource();return Ft(C,I),ft(C,I,"playbackRate"),ot(C,I,"buffer"),ot(C,I,"loop"),ot(C,I,"loopEnd"),ot(C,I,"loopStart"),e(t,()=>t(_))||TA(C),e(o,()=>o(_))||f(C),e(i,()=>i(_))||m(C,_),e(l,()=>l(_))||uf(C),e(h,()=>h(_))||v(C,_),e(d,()=>d(_))||cf(C),r(_,C),C},IA=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,CA=(r,e)=>(t,o,i)=>{const l=t.destination;if(l.channelCount!==o)try{l.channelCount=o}catch{}i&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:o});const h=r(t,{channelCount:o,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return e(h,"channelCount",d=>()=>d.call(h),d=>f=>{d.call(h,f);try{l.channelCount=f}catch(m){if(f>l.maxChannelCount)throw m}}),e(h,"channelCountMode",d=>()=>d.call(h),d=>f=>{d.call(h,f),l.channelCountMode=f}),e(h,"channelInterpretation",d=>()=>d.call(h),d=>f=>{d.call(h,f),l.channelInterpretation=f}),Object.defineProperty(h,"maxChannelCount",{get:()=>l.maxChannelCount}),h.connect(l),h},NA=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,AA=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),m_=(r,e)=>{const t=r.createBiquadFilter();return Ft(t,e),ft(t,e,"Q"),ft(t,e,"detune"),ft(t,e,"frequency"),ft(t,e,"gain"),ot(t,e,"type"),t},kA=(r,e)=>(t,o)=>{const i=t.createChannelMerger(o.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,i),Ft(i,o),i},RA=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw _n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw _n()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw _n()}})},hf=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return Ft(t,e),RA(t),t},PA=(r,e,t,o,i)=>(l,h)=>{if(l.createConstantSource===void 0)return t(l,h);const d=l.createConstantSource();return Ft(d,h),ft(d,h,"offset"),e(o,()=>o(l))||uf(d),e(i,()=>i(l))||cf(d),r(l,d),d},zi=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),xA=(r,e,t,o)=>(i,{offset:l,...h})=>{const d=i.createBuffer(1,2,44100),f=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=t(i,{...h,gain:l}),v=d.getChannelData(0);v[0]=1,v[1]=1,f.buffer=d,f.loop=!0;const _={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(P){m.channelCount=P},get channelCountMode(){return m.channelCountMode},set channelCountMode(P){m.channelCountMode=P},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(P){m.channelInterpretation=P},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return f.onended},set onended(P){f.onended=P},addEventListener(...P){return f.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return f.dispatchEvent(P[0])},removeEventListener(...P){return f.removeEventListener(P[0],P[1],P[2])},start(P=0){f.start.call(f,P)},stop(P=0){f.stop.call(f,P)}},I=()=>f.connect(m),C=()=>f.disconnect(m);return r(i,f),o(zi(_,m),I,C)},DA=(r,e)=>(t,o)=>{const i=t.createConvolver();if(Ft(i,o),o.disableNormalization===i.normalize&&(i.normalize=!o.disableNormalization),ot(i,o,"buffer"),o.channelCount>2||(e(i,"channelCount",l=>()=>l.call(i),l=>h=>{if(h>2)throw r();return l.call(i,h)}),o.channelCountMode==="max"))throw r();return e(i,"channelCountMode",l=>()=>l.call(i),l=>h=>{if(h==="max")throw r();return l.call(i,h)}),i},g_=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return Ft(t,e),ft(t,e,"delayTime"),t},MA=r=>(e,t)=>{const o=e.createDynamicsCompressor();if(Ft(o,t),t.channelCount>2||t.channelCountMode==="max")throw r();return ft(o,t,"attack"),ft(o,t,"knee"),ft(o,t,"ratio"),ft(o,t,"release"),ft(o,t,"threshold"),o},pr=(r,e)=>{const t=r.createGain();return Ft(t,e),ft(t,e,"gain"),t},VA=r=>(e,t,o)=>{if(e.createIIRFilter===void 0)return r(e,t,o);const i=e.createIIRFilter(o.feedforward,o.feedback);return Ft(i,o),i};function OA(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function bA(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function dy(r,e){let t=[0,0];for(let o=r.length-1;o>=0;o-=1)t=bA(t,e),t[0]+=r[o];return t}const FA=(r,e,t,o)=>(i,l,{channelCount:h,channelCountMode:d,channelInterpretation:f,feedback:m,feedforward:v})=>{const _=AA(l,i.sampleRate),I=m instanceof Float64Array?m:new Float64Array(m),C=v instanceof Float64Array?v:new Float64Array(v),P=I.length,V=C.length,b=Math.min(P,V);if(P===0||P>20)throw o();if(I[0]===0)throw e();if(V===0||V>20)throw o();if(C[0]===0)throw e();if(I[0]!==1){for(let T=0;T<V;T+=1)C[T]/=I[0];for(let T=1;T<P;T+=1)I[T]/=I[0]}const B=t(i,_,h,h);B.channelCount=h,B.channelCountMode=d,B.channelInterpretation=f;const G=32,Q=[],Y=[],j=[];for(let T=0;T<h;T+=1){Q.push(0);const N=new Float32Array(G),M=new Float32Array(G);N.fill(0),M.fill(0),Y.push(N),j.push(M)}B.onaudioprocess=T=>{const N=T.inputBuffer,M=T.outputBuffer,x=N.numberOfChannels;for(let D=0;D<x;D+=1){const k=N.getChannelData(D),oe=M.getChannelData(D);Q[D]=p_(I,P,C,V,b,Y[D],j[D],Q[D],G,k,oe)}};const W=i.sampleRate/2;return zi({get bufferSize(){return _},get channelCount(){return B.channelCount},set channelCount(T){B.channelCount=T},get channelCountMode(){return B.channelCountMode},set channelCountMode(T){B.channelCountMode=T},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(T){B.channelInterpretation=T},get context(){return B.context},get inputs(){return[B]},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},addEventListener(...T){return B.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return B.dispatchEvent(T[0])},getFrequencyResponse(T,N,M){if(T.length!==N.length||N.length!==M.length)throw r();const x=T.length;for(let D=0;D<x;D+=1){const k=-Math.PI*(T[D]/W),oe=[Math.cos(k),Math.sin(k)],he=dy(C,oe),pe=dy(I,oe),ie=OA(he,pe);N[D]=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),M[D]=Math.atan2(ie[1],ie[0])}},removeEventListener(...T){return B.removeEventListener(T[0],T[1],T[2])}},B)},LA=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,jA=(r,e,t,o,i,l)=>(h,d)=>{const f=h.createOscillator();return Ft(f,d),ft(f,d,"detune"),ft(f,d,"frequency"),d.periodicWave!==void 0?f.setPeriodicWave(d.periodicWave):ot(f,d,"type"),e(t,()=>t(h))||uf(f),e(o,()=>o(h))||l(f,h),e(i,()=>i(h))||cf(f),r(h,f),f},UA=r=>(e,t)=>{const o=e.createPanner();return o.orientationX===void 0?r(e,t):(Ft(o,t),ft(o,t,"orientationX"),ft(o,t,"orientationY"),ft(o,t,"orientationZ"),ft(o,t,"positionX"),ft(o,t,"positionY"),ft(o,t,"positionZ"),ot(o,t,"coneInnerAngle"),ot(o,t,"coneOuterAngle"),ot(o,t,"coneOuterGain"),ot(o,t,"distanceModel"),ot(o,t,"maxDistance"),ot(o,t,"panningModel"),ot(o,t,"refDistance"),ot(o,t,"rolloffFactor"),o)},BA=(r,e,t,o,i,l,h,d,f,m)=>(v,{coneInnerAngle:_,coneOuterAngle:I,coneOuterGain:C,distanceModel:P,maxDistance:V,orientationX:b,orientationY:B,orientationZ:G,panningModel:Q,positionX:Y,positionY:j,positionZ:W,refDistance:R,rolloffFactor:T,...N})=>{const M=v.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw h();Ft(M,N);const x={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=t(v,{...x,channelInterpretation:"speakers",numberOfInputs:6}),k=o(v,{...N,gain:1}),oe=o(v,{...x,gain:1}),he=o(v,{...x,gain:0}),pe=o(v,{...x,gain:0}),ie=o(v,{...x,gain:0}),Z=o(v,{...x,gain:0}),te=o(v,{...x,gain:0}),J=i(v,256,6,1),F=l(v,{...x,curve:new Float32Array([1,1]),oversample:"none"});let K=[b,B,G],me=[Y,j,W];const Se=new Float32Array(1);J.onaudioprocess=({inputBuffer:ue})=>{const Be=[f(ue,Se,0),f(ue,Se,1),f(ue,Se,2)];Be.some((xt,Jt)=>xt!==K[Jt])&&(M.setOrientation(...Be),K=Be);const Qe=[f(ue,Se,3),f(ue,Se,4),f(ue,Se,5)];Qe.some((xt,Jt)=>xt!==me[Jt])&&(M.setPosition(...Qe),me=Qe)},Object.defineProperty(he.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0});const fe={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount(ue){if(ue>2)throw h();k.channelCount=ue,M.channelCount=ue},get channelCountMode(){return M.channelCountMode},set channelCountMode(ue){if(ue==="max")throw h();k.channelCountMode=ue,M.channelCountMode=ue},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation(ue){k.channelInterpretation=ue,M.channelInterpretation=ue},get coneInnerAngle(){return M.coneInnerAngle},set coneInnerAngle(ue){M.coneInnerAngle=ue},get coneOuterAngle(){return M.coneOuterAngle},set coneOuterAngle(ue){M.coneOuterAngle=ue},get coneOuterGain(){return M.coneOuterGain},set coneOuterGain(ue){if(ue<0||ue>1)throw e();M.coneOuterGain=ue},get context(){return M.context},get distanceModel(){return M.distanceModel},set distanceModel(ue){M.distanceModel=ue},get inputs(){return[k]},get maxDistance(){return M.maxDistance},set maxDistance(ue){if(ue<0)throw new RangeError;M.maxDistance=ue},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get orientationX(){return oe.gain},get orientationY(){return he.gain},get orientationZ(){return pe.gain},get panningModel(){return M.panningModel},set panningModel(ue){M.panningModel=ue},get positionX(){return ie.gain},get positionY(){return Z.gain},get positionZ(){return te.gain},get refDistance(){return M.refDistance},set refDistance(ue){if(ue<0)throw new RangeError;M.refDistance=ue},get rolloffFactor(){return M.rolloffFactor},set rolloffFactor(ue){if(ue<0)throw new RangeError;M.rolloffFactor=ue},addEventListener(...ue){return k.addEventListener(ue[0],ue[1],ue[2])},dispatchEvent(...ue){return k.dispatchEvent(ue[0])},removeEventListener(...ue){return k.removeEventListener(ue[0],ue[1],ue[2])}};_!==fe.coneInnerAngle&&(fe.coneInnerAngle=_),I!==fe.coneOuterAngle&&(fe.coneOuterAngle=I),C!==fe.coneOuterGain&&(fe.coneOuterGain=C),P!==fe.distanceModel&&(fe.distanceModel=P),V!==fe.maxDistance&&(fe.maxDistance=V),b!==fe.orientationX.value&&(fe.orientationX.value=b),B!==fe.orientationY.value&&(fe.orientationY.value=B),G!==fe.orientationZ.value&&(fe.orientationZ.value=G),Q!==fe.panningModel&&(fe.panningModel=Q),Y!==fe.positionX.value&&(fe.positionX.value=Y),j!==fe.positionY.value&&(fe.positionY.value=j),W!==fe.positionZ.value&&(fe.positionZ.value=W),R!==fe.refDistance&&(fe.refDistance=R),T!==fe.rolloffFactor&&(fe.rolloffFactor=T),(K[0]!==1||K[1]!==0||K[2]!==0)&&M.setOrientation(...K),(me[0]!==0||me[1]!==0||me[2]!==0)&&M.setPosition(...me);const Pe=()=>{k.connect(M),r(k,F,0,0),F.connect(oe).connect(D,0,0),F.connect(he).connect(D,0,1),F.connect(pe).connect(D,0,2),F.connect(ie).connect(D,0,3),F.connect(Z).connect(D,0,4),F.connect(te).connect(D,0,5),D.connect(J).connect(v.destination)},Me=()=>{k.disconnect(M),d(k,F,0,0),F.disconnect(oe),oe.disconnect(D),F.disconnect(he),he.disconnect(D),F.disconnect(pe),pe.disconnect(D),F.disconnect(ie),ie.disconnect(D),F.disconnect(Z),Z.disconnect(D),F.disconnect(te),te.disconnect(D),D.disconnect(J),J.disconnect(v.destination)};return m(zi(fe,M),Pe,Me)},zA=r=>(e,{disableNormalization:t,imag:o,real:i})=>{const l=o instanceof Float32Array?o:new Float32Array(o),h=i instanceof Float32Array?i:new Float32Array(i),d=e.createPeriodicWave(h,l,{disableNormalization:t});if(Array.from(o).length<2)throw r();return d},ic=(r,e,t,o)=>r.createScriptProcessor(e,t,o),$A=(r,e)=>(t,o)=>{const i=o.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,o);const l=t.createStereoPanner();return Ft(l,o),ft(l,o,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>i,set:h=>{if(h!==i)throw e()}}),l},WA=(r,e,t,o,i,l)=>{const d=new Float32Array([1,1]),f=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},v={...m,oversample:"none"},_=(P,V,b,B)=>{const G=new Float32Array(16385),Q=new Float32Array(16385);for(let N=0;N<16385;N+=1){const M=N/16384*f;G[N]=Math.cos(M),Q[N]=Math.sin(M)}const Y=t(P,{...m,gain:0}),j=o(P,{...v,curve:G}),W=o(P,{...v,curve:d}),R=t(P,{...m,gain:0}),T=o(P,{...v,curve:Q});return{connectGraph(){V.connect(Y),V.connect(W.inputs===void 0?W:W.inputs[0]),V.connect(R),W.connect(b),b.connect(j.inputs===void 0?j:j.inputs[0]),b.connect(T.inputs===void 0?T:T.inputs[0]),j.connect(Y.gain),T.connect(R.gain),Y.connect(B,0,0),R.connect(B,0,1)},disconnectGraph(){V.disconnect(Y),V.disconnect(W.inputs===void 0?W:W.inputs[0]),V.disconnect(R),W.disconnect(b),b.disconnect(j.inputs===void 0?j:j.inputs[0]),b.disconnect(T.inputs===void 0?T:T.inputs[0]),j.disconnect(Y.gain),T.disconnect(R.gain),Y.disconnect(B,0,0),R.disconnect(B,0,1)}}},I=(P,V,b,B)=>{const G=new Float32Array(16385),Q=new Float32Array(16385),Y=new Float32Array(16385),j=new Float32Array(16385),W=Math.floor(16385/2);for(let ie=0;ie<16385;ie+=1)if(ie>W){const Z=(ie-W)/(16384-W)*f;G[ie]=Math.cos(Z),Q[ie]=Math.sin(Z),Y[ie]=0,j[ie]=1}else{const Z=ie/(16384-W)*f;G[ie]=1,Q[ie]=0,Y[ie]=Math.cos(Z),j[ie]=Math.sin(Z)}const R=e(P,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=t(P,{...m,gain:0}),N=o(P,{...v,curve:G}),M=t(P,{...m,gain:0}),x=o(P,{...v,curve:Q}),D=o(P,{...v,curve:d}),k=t(P,{...m,gain:0}),oe=o(P,{...v,curve:Y}),he=t(P,{...m,gain:0}),pe=o(P,{...v,curve:j});return{connectGraph(){V.connect(R),V.connect(D.inputs===void 0?D:D.inputs[0]),R.connect(T,0),R.connect(M,0),R.connect(k,1),R.connect(he,1),D.connect(b),b.connect(N.inputs===void 0?N:N.inputs[0]),b.connect(x.inputs===void 0?x:x.inputs[0]),b.connect(oe.inputs===void 0?oe:oe.inputs[0]),b.connect(pe.inputs===void 0?pe:pe.inputs[0]),N.connect(T.gain),x.connect(M.gain),oe.connect(k.gain),pe.connect(he.gain),T.connect(B,0,0),k.connect(B,0,0),M.connect(B,0,1),he.connect(B,0,1)},disconnectGraph(){V.disconnect(R),V.disconnect(D.inputs===void 0?D:D.inputs[0]),R.disconnect(T,0),R.disconnect(M,0),R.disconnect(k,1),R.disconnect(he,1),D.disconnect(b),b.disconnect(N.inputs===void 0?N:N.inputs[0]),b.disconnect(x.inputs===void 0?x:x.inputs[0]),b.disconnect(oe.inputs===void 0?oe:oe.inputs[0]),b.disconnect(pe.inputs===void 0?pe:pe.inputs[0]),N.disconnect(T.gain),x.disconnect(M.gain),oe.disconnect(k.gain),pe.disconnect(he.gain),T.disconnect(B,0,0),k.disconnect(B,0,0),M.disconnect(B,0,1),he.disconnect(B,0,1)}}},C=(P,V,b,B,G)=>{if(V===1)return _(P,b,B,G);if(V===2)return I(P,b,B,G);throw i()};return(P,{channelCount:V,channelCountMode:b,pan:B,...G})=>{if(b==="max")throw i();const Q=r(P,{...G,channelCount:1,channelCountMode:b,numberOfInputs:2}),Y=t(P,{...G,channelCount:V,channelCountMode:b,gain:1}),j=t(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:B});let{connectGraph:W,disconnectGraph:R}=C(P,V,Y,j,Q);Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"maxValue",{get:()=>1}),Object.defineProperty(j.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return Y.channelCount},set channelCount(D){Y.channelCount!==D&&(N&&R(),{connectGraph:W,disconnectGraph:R}=C(P,D,Y,j,Q),N&&W()),Y.channelCount=D},get channelCountMode(){return Y.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw i();Y.channelCountMode=D},get channelInterpretation(){return Y.channelInterpretation},set channelInterpretation(D){Y.channelInterpretation=D},get context(){return Y.context},get inputs(){return[Y]},get numberOfInputs(){return Y.numberOfInputs},get numberOfOutputs(){return Y.numberOfOutputs},get pan(){return j.gain},addEventListener(...D){return Y.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return Y.dispatchEvent(D[0])},removeEventListener(...D){return Y.removeEventListener(D[0],D[1],D[2])}};let N=!1;const M=()=>{W(),N=!0},x=()=>{R(),N=!1};return l(zi(T,Q),M,x)}},qA=(r,e,t,o,i,l,h)=>(d,f)=>{const m=d.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return t(d,f);Ft(m,f);const v=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(v!==null&&v.length<2)throw e();ot(m,{curve:v},"curve"),ot(m,f,"oversample");let _=null,I=!1;return h(m,"curve",V=>()=>V.call(m),V=>b=>(V.call(m,b),I&&(o(b)&&_===null?_=r(d,m):!o(b)&&_!==null&&(_(),_=null)),b)),i(m,()=>{I=!0,o(m.curve)&&(_=r(d,m))},()=>{I=!1,_!==null&&(_(),_=null)})},HA=(r,e,t,o,i)=>(l,{curve:h,oversample:d,...f})=>{const m=l.createWaveShaper(),v=l.createWaveShaper();Ft(m,f),Ft(v,f);const _=t(l,{...f,gain:1}),I=t(l,{...f,gain:-1}),C=t(l,{...f,gain:1}),P=t(l,{...f,gain:-1});let V=null,b=!1,B=null;const G={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(j){_.channelCount=j,I.channelCount=j,m.channelCount=j,C.channelCount=j,v.channelCount=j,P.channelCount=j},get channelCountMode(){return m.channelCountMode},set channelCountMode(j){_.channelCountMode=j,I.channelCountMode=j,m.channelCountMode=j,C.channelCountMode=j,v.channelCountMode=j,P.channelCountMode=j},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(j){_.channelInterpretation=j,I.channelInterpretation=j,m.channelInterpretation=j,C.channelInterpretation=j,v.channelInterpretation=j,P.channelInterpretation=j},get context(){return m.context},get curve(){return B},set curve(j){if(j!==null&&j.length<2)throw e();if(j===null)m.curve=j,v.curve=j;else{const W=j.length,R=new Float32Array(W+2-W%2),T=new Float32Array(W+2-W%2);R[0]=j[0],T[0]=-j[W-1];const N=Math.ceil((W+1)/2),M=(W+1)/2-1;for(let x=1;x<N;x+=1){const D=x/N*M,k=Math.floor(D),oe=Math.ceil(D);R[x]=k===oe?j[k]:(1-(D-k))*j[k]+(1-(oe-D))*j[oe],T[x]=k===oe?-j[W-1-k]:-((1-(D-k))*j[W-1-k])-(1-(oe-D))*j[W-1-oe]}R[N]=W%2===1?j[N-1]:(j[N-2]+j[N-1])/2,m.curve=R,v.curve=T}B=j,b&&(o(B)&&V===null?V=r(l,_):V!==null&&(V(),V=null))},get inputs(){return[_]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(j){m.oversample=j,v.oversample=j},addEventListener(...j){return _.addEventListener(j[0],j[1],j[2])},dispatchEvent(...j){return _.dispatchEvent(j[0])},removeEventListener(...j){return _.removeEventListener(j[0],j[1],j[2])}};h!==null&&(G.curve=h instanceof Float32Array?h:new Float32Array(h)),d!==G.oversample&&(G.oversample=d);const Q=()=>{_.connect(m).connect(C),_.connect(I).connect(v).connect(P).connect(C),b=!0,o(B)&&(V=r(l,_))},Y=()=>{_.disconnect(m),m.disconnect(C),_.disconnect(I),I.disconnect(v),v.disconnect(P),P.disconnect(C),b=!1,V!==null&&(V(),V=null)};return i(zi(G,C),Q,Y)},qn=()=>new DOMException("","NotSupportedError"),GA={numberOfChannels:1},QA=(r,e,t,o,i)=>class extends r{constructor(h,d,f){let m;if(typeof h=="number"&&d!==void 0&&f!==void 0)m={length:d,numberOfChannels:h,sampleRate:f};else if(typeof h=="object")m=h;else throw new Error("The given parameters are not valid.");const{length:v,numberOfChannels:_,sampleRate:I}={...GA,...m},C=o(_,v,I);e(za,()=>za(C))||C.addEventListener("statechange",(()=>{let P=0;const V=b=>{this._state==="running"&&(P>0?(C.removeEventListener("statechange",V),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):P+=1)};return V})()),super(C,_),this._length=v,this._nativeOfflineAudioContext=C,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,YC(this)}))}_waitForThePromiseToSettle(h){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(h):setTimeout(()=>this._waitForThePromiseToSettle(h))}},KA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},XA=(r,e,t,o,i,l,h)=>class extends r{constructor(f,m){const v=i(f),_={...KA,...m},I=t(v,_),C=l(v),P=C?o():null,V=f.sampleRate/2;super(f,!1,I,P),this._detune=e(this,C,I.detune,153600,-153600),this._frequency=e(this,C,I.frequency,V,-V),this._nativeOscillatorNode=I,this._onended=null,this._oscillatorNodeRenderer=P,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeOscillatorNode.onended=m;const v=this._nativeOscillatorNode.onended;this._onended=v!==null&&v===m?f:v}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){Fi(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),es(this)&&Qa(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},YA=(r,e,t,o,i)=>()=>{const l=new WeakMap;let h=null,d=null,f=null;const m=async(v,_)=>{let I=t(v);const C=an(I,_);if(!C){const P={channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,detune:I.detune.value,frequency:I.frequency.value,periodicWave:h===null?void 0:h,type:I.type};I=e(_,P),d!==null&&I.start(d),f!==null&&I.stop(f)}return l.set(_,I),C?(await r(_,v.detune,I.detune),await r(_,v.frequency,I.frequency)):(await o(_,v.detune,I.detune),await o(_,v.frequency,I.frequency)),await i(v,_,I),I};return{set periodicWave(v){h=v},set start(v){d=v},set stop(v){f=v},render(v,_){const I=l.get(_);return I!==void 0?Promise.resolve(I):m(v,_)}}},ZA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},JA=(r,e,t,o,i,l,h)=>class extends r{constructor(f,m){const v=i(f),_={...ZA,...m},I=t(v,_),C=l(v),P=C?o():null;super(f,!1,I,P),this._nativePannerNode=I,this._orientationX=e(this,C,I.orientationX,yn,Wn),this._orientationY=e(this,C,I.orientationY,yn,Wn),this._orientationZ=e(this,C,I.orientationZ,yn,Wn),this._positionX=e(this,C,I.positionX,yn,Wn),this._positionY=e(this,C,I.positionY,yn,Wn),this._positionZ=e(this,C,I.positionZ,yn,Wn),h(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},e2=(r,e,t,o,i,l,h,d,f,m)=>()=>{const v=new WeakMap;let _=null;const I=async(C,P)=>{let V=null,b=l(C);const B={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},G={...B,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},Q=an(b,P);if("bufferSize"in b)V=o(P,{...B,gain:1});else if(!Q){const Y={...G,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=i(P,Y)}if(v.set(P,V===null?b:V),V!==null){if(_===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new h(6,C.context.length,P.sampleRate),D=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(x.destination),_=(async()=>{const k=await Promise.all([C.orientationX,C.orientationY,C.orientationZ,C.positionX,C.positionY,C.positionZ].map(async(oe,he)=>{const pe=t(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he===0?1:0});return await d(x,oe,pe.offset),pe}));for(let oe=0;oe<6;oe+=1)k[oe].connect(D,0,oe),k[oe].start(0);return m(x)})()}const Y=await _,j=o(P,{...B,gain:1});await f(C,P,j);const W=[];for(let x=0;x<Y.numberOfChannels;x+=1)W.push(Y.getChannelData(x));let R=[W[0][0],W[1][0],W[2][0]],T=[W[3][0],W[4][0],W[5][0]],N=o(P,{...B,gain:1}),M=i(P,{...G,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:T[0],positionY:T[1],positionZ:T[2]});j.connect(N).connect(M.inputs[0]),M.connect(V);for(let x=128;x<Y.length;x+=128){const D=[W[0][x],W[1][x],W[2][x]],k=[W[3][x],W[4][x],W[5][x]];if(D.some((oe,he)=>oe!==R[he])||k.some((oe,he)=>oe!==T[he])){R=D,T=k;const oe=x/P.sampleRate;N.gain.setValueAtTime(0,oe),N=o(P,{...B,gain:0}),M=i(P,{...G,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),N.gain.setValueAtTime(1,oe),j.connect(N).connect(M.inputs[0]),M.connect(V)}}return V}return Q?(await r(P,C.orientationX,b.orientationX),await r(P,C.orientationY,b.orientationY),await r(P,C.orientationZ,b.orientationZ),await r(P,C.positionX,b.positionX),await r(P,C.positionY,b.positionY),await r(P,C.positionZ,b.positionZ)):(await d(P,C.orientationX,b.orientationX),await d(P,C.orientationY,b.orientationY),await d(P,C.orientationZ,b.orientationZ),await d(P,C.positionX,b.positionX),await d(P,C.positionY,b.positionY),await d(P,C.positionZ,b.positionZ)),Bi(b)?await f(C,P,b.inputs[0]):await f(C,P,b),b};return{render(C,P){const V=v.get(P);return V!==void 0?Promise.resolve(V):I(C,P)}}},t2={disableNormalization:!1},n2=(r,e,t,o)=>class y_{constructor(l,h){const d=e(l),f=o({...t2,...h}),m=r(d,f);return t.add(m),m}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===y_.prototype||t.has(l)}},r2=(r,e)=>(t,o,i)=>(r(o).replay(i),e(o,t,i)),s2=(r,e,t)=>async(o,i,l)=>{const h=r(o);await Promise.all(h.activeInputs.map((d,f)=>Array.from(d).map(async([m,v])=>{const I=await e(m).render(m,i),C=o.context.destination;!t(m)&&(o!==C||!t(o))&&I.connect(l,v,f)})).reduce((d,f)=>[...d,...f],[]))},o2=(r,e,t)=>async(o,i,l)=>{const h=e(o);await Promise.all(Array.from(h.activeInputs).map(async([d,f])=>{const v=await r(d).render(d,i);t(d)||v.connect(l,f)}))},i2=(r,e,t,o)=>i=>r(za,()=>za(i))?Promise.resolve(r(o,o)).then(l=>{if(!l){const h=t(i,512,0,1);i.oncomplete=()=>{h.onaudioprocess=null,h.disconnect()},h.onaudioprocess=()=>i.currentTime,h.connect(i.destination)}return i.startRendering()}):new Promise(l=>{const h=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=d=>{h.disconnect(),l(d.renderedBuffer)},h.connect(i.destination),i.startRendering()}),a2=r=>(e,t)=>r.set(e,t),l2=(r,e,t,o,i,l,h,d)=>(f,m)=>t(f).render(f,m).then(()=>Promise.all(Array.from(o(m)).map(v=>t(v).render(v,m)))).then(()=>i(m)).then(v=>(typeof v.copyFromChannel!="function"?(h(v),of(v)):e(l,()=>l(v))||d(v),r.add(v),v)),u2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},c2=(r,e,t,o,i,l)=>class extends r{constructor(d,f){const m=i(d),v={...u2,...f},_=t(m,v),I=l(m),C=I?o():null;super(d,!1,_,C),this._pan=e(this,I,_.pan)}get pan(){return this._pan}},h2=(r,e,t,o,i)=>()=>{const l=new WeakMap,h=async(d,f)=>{let m=t(d);const v=an(m,f);if(!v){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=e(f,_)}return l.set(f,m),v?await r(f,d.pan,m.pan):await o(f,d.pan,m.pan),Bi(m)?await i(d,f,m.inputs[0]):await i(d,f,m),m};return{render(d,f){const m=l.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},d2=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},f2=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new e(1,128,44100),i=URL.createObjectURL(t);let l=!1,h=!1;try{await o.audioWorklet.addModule(i);const d=new r(o,"a",{numberOfOutputs:0}),f=o.createOscillator();d.port.onmessage=()=>l=!0,d.onprocessorerror=()=>h=!0,f.connect(d),f.start(0),await o.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(i)}return l&&!h},p2=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),o=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{o.disconnect(),i(t.currentTime!==0)},t.startRendering()})},m2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},g2=(r,e,t,o,i,l,h)=>class extends r{constructor(f,m){const v=i(f),_={...m2,...m},I=t(v,_),P=l(v)?o():null;super(f,!0,I,P),this._isCurveNullified=!1,this._nativeWaveShaperNode=I,h(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},y2=(r,e,t)=>()=>{const o=new WeakMap,i=async(l,h)=>{let d=e(l);if(!an(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=r(h,m)}return o.set(h,d),Bi(d)?await t(l,h,d.inputs[0]):await t(l,h,d),d};return{render(l,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):i(l,h)}}},v2=()=>typeof window>"u"?null:window,_2=(r,e)=>t=>{t.copyFromChannel=(o,i,l=0)=>{const h=r(l),d=r(i);if(d>=t.numberOfChannels)throw e();const f=t.length,m=t.getChannelData(d),v=o.length;for(let _=h<0?-h:0;_+h<f&&_<v;_+=1)o[_]=m[_+h]},t.copyToChannel=(o,i,l=0)=>{const h=r(l),d=r(i);if(d>=t.numberOfChannels)throw e();const f=t.length,m=t.getChannelData(d),v=o.length;for(let _=h<0?-h:0;_+h<f&&_<v;_+=1)m[_+h]=o[_]}},w2=r=>e=>{e.copyFromChannel=(t=>(o,i,l=0)=>{const h=r(l),d=r(i);if(h<e.length)return t.call(e,o,d,h)})(e.copyFromChannel),e.copyToChannel=(t=>(o,i,l=0)=>{const h=r(l),d=r(i);if(h<e.length)return t.call(e,o,d,h)})(e.copyToChannel)},E2=r=>(e,t)=>{const o=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=o),r(e,"buffer",i=>()=>{const l=i.call(e);return l===o?null:l},i=>l=>i.call(e,l===null?o:l))},T2=(r,e)=>(t,o)=>{o.channelCount=1,o.channelCountMode="explicit",Object.defineProperty(o,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const i=t.createBufferSource();e(o,()=>{const d=o.numberOfInputs;for(let f=0;f<d;f+=1)i.connect(o,0,f)},()=>i.disconnect(o))},v_=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),__=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},Ya=(r,e,t,o)=>{let i=r;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:l,set:h}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(r,e,{get:t(l),set:o(h)})},S2=r=>({...r,channelCount:r.numberOfOutputs}),I2=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},w_=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(o){if(o.code!==9)throw o;w_(r,e,t+1e-7)}},C2=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},N2=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},A2=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},df=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},E_=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},ff=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},k2=r=>{r.start=(e=>(t=0,o=0,i)=>{const l=r.buffer,h=l===null?o:Math.min(l.duration,o);l!==null&&h>l.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,h,i)})(r.start)},T_=(r,e)=>{const t=e.createGain();r.connect(t);const o=(i=>()=>{i.call(r,t),r.removeEventListener("ended",o)})(r.disconnect);r.addEventListener("ended",o),zi(r,t),r.stop=(i=>{let l=!1;return(h=0)=>{if(l)try{i.call(r,h)}catch{t.gain.setValueAtTime(0,h)}else i.call(r,h),l=!0}})(r.stop)},Za=(r,e)=>t=>{const o={value:r};return Object.defineProperties(t,{currentTarget:o,target:o}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},R2=RC(bo),P2=OC(bo),x2=jN(sc),S_=new WeakMap,D2=eA(S_),mr=gN(new Map,new WeakMap),Mr=v2(),I_=wA(mr,Oo),pf=JN(Mn),Yt=s2(Mn,pf,Do),M2=jC(I_,ut,Yt),Et=nA(o_),Gs=LA(Mr),pt=mA(Gs),C_=new WeakMap,N_=GN(Za),ac=IA(Mr),A_=hA(ac),k_=dA(Mr),V2=fA(Mr),Pd=NA(Mr),Zt=uN(PC(t_),VC(R2,P2,Wu,x2,qu,Mn,D2,Ga,ut,bo,es,Do,Nu),mr,cA(Ad,qu,Mn,ut,Ba,es),Oo,oc,qn,ON(Wu,Ad,Mn,ut,Ba,Et,es,pt),BN(C_,Mn,Hs),N_,Et,A_,k_,V2,pt,Pd),O2=LC(Zt,M2,Oo,I_,Et,pt),mf=new WeakSet,fy=EA(Mr),R_=kN(new Uint32Array(1)),gf=_2(R_,Oo),yf=w2(R_),b2=BC(mf,mr,qn,fy,Gs,d2(fy),gf,yf),lc=bC(pr),P_=o2(pf,Ka,Do),rs=SN(P_),Ja=SA(lc,mr,C2,N2,A2,df,E_,ff,k2,E2(Ya),T_),ss=r2(tA(Ka),P_),F2=WC(rs,Ja,ut,ss,Yt),Or=cN(xC(r_),C_,s_,hN,SC,IC,CC,NC,AC,Id,Jv,ac,w_),L2=$C(Zt,F2,Or,_n,Ja,Et,pt,Za),j2=ZC(Zt,JC,Oo,_n,CA(pr,Ya),Et,pt,Yt),U2=mN(rs,m_,ut,ss,Yt),Fo=a2(S_),B2=pN(Zt,Or,U2,oc,m_,Et,pt,Fo),$i=vA(bo,k_),z2=T2(_n,$i),Wi=kA(ac,z2),$2=_N(Wi,ut,Yt),W2=vN(Zt,$2,Wi,Et,pt),q2=TN(hf,ut,Yt),H2=EN(Zt,q2,hf,Et,pt,S2),G2=xA(lc,Ja,pr,$i),uc=PA(lc,mr,G2,df,ff),Q2=AN(rs,uc,ut,ss,Yt),K2=NN(Zt,Or,Q2,uc,Et,pt,Za),x_=DA(qn,Ya),X2=xN(x_,ut,Yt),Y2=PN(Zt,X2,x_,Et,pt,Fo),Z2=LN(rs,g_,ut,ss,Yt),J2=FN(Zt,Or,Z2,g_,Et,pt,Fo),D_=MA(qn),ek=WN(rs,D_,ut,ss,Yt),tk=$N(Zt,Or,ek,D_,qn,Et,pt,Fo),nk=ZN(rs,pr,ut,ss,Yt),rk=YN(Zt,Or,nk,pr,Et,pt),sk=FA(oc,_n,ic,qn),vf=i2(mr,pr,ic,p2(pr,Gs)),ok=uA(Ja,ut,Gs,Yt,vf),ik=VA(sk),ak=aA(Zt,ik,ok,Et,pt,Fo),lk=eN(Or,Wi,uc,ic,qn,v_,pt,Ya),M_=new WeakMap,uk=yA(j2,lk,N_,pt,M_,Za),V_=jA(lc,mr,df,E_,ff,T_),ck=YA(rs,V_,ut,ss,Yt),hk=XA(Zt,Or,V_,ck,Et,pt,Za),O_=IN(Ja),dk=HA(O_,_n,pr,__,$i),cc=qA(O_,_n,dk,__,$i,ac,Ya),fk=BA(Wu,_n,Wi,pr,ic,cc,qn,qu,v_,$i),b_=UA(fk),pk=e2(rs,Wi,uc,pr,b_,ut,Gs,ss,Yt,vf),mk=JA(Zt,Or,b_,pk,Et,pt,Fo),gk=zA(Oo),yk=n2(gk,Et,new WeakSet,I2),vk=WA(Wi,hf,pr,cc,qn,$i),F_=$A(vk,qn),_k=h2(rs,F_,ut,ss,Yt),wk=c2(Zt,Or,F_,_k,Et,pt),Ek=y2(cc,ut,Yt),Tk=g2(Zt,_n,cc,Ek,Et,pt,Fo),Sk=gA(Mr),Ik=QN(Mr),Ck=new WeakMap,Nk=rA(Ck,Gs),Ak=Sk?MC(mr,qn,HN(Mr),Ik,KN(kC),Et,Nk,pt,Pd,new WeakMap,new WeakMap,f2(Pd,Gs),Mr):void 0,kk=pA(A_,pt),Rk=VN(mf,mr,MN,qN,new WeakSet,Et,kk,zu,za,gf,yf),Pk=dN(Ak,O2,b2,L2,B2,W2,H2,K2,Y2,Rk,J2,tk,rk,ak,uk,hk,mk,yk,wk,Tk),xk=sA(M_),Dk=DN(qn,Gs),Mk=l2(mf,mr,pf,xk,vf,zu,gf,yf),Vk=QA(Pk,mr,_n,Dk,Mk),py=(r,e,t)=>{const o=new Vk(r.numberOfChannels,Math.round(t*r.sampleRate),r.sampleRate),i=o.createBiquadFilter(),l=o.createBufferSource();return i.frequency.value=240,i.type="lowpass",l.buffer=r,l.connect(i).connect(o.destination),l.start(0,e,t),o.startRendering().then(h=>{const d=h.getChannelData(0),f=h.sampleRate;return{channelData:d,sampleRate:f}})},Ok=_C({analyze:({call:r})=>async(...e)=>{var t;const[o,i,l]=e,h=typeof i=="number"?i:0,d=typeof l=="number"?l:o.duration-h,{channelData:f,sampleRate:m}=await py(o,h,d),v=typeof i=="object"?i:typeof l=="object"?l:(t=e[3])!==null&&t!==void 0?t:null;return r("analyze",{channelData:f,sampleRate:m,...v===null?v:{tempoSettings:v}},[f.buffer])},guess:({call:r})=>async(...e)=>{var t;const[o,i,l]=e,h=typeof i=="number"?i:0,d=typeof l=="number"?l:o.duration-h,{channelData:f,sampleRate:m}=await py(o,h,d),v=typeof i=="object"?i:typeof l=="object"?l:(t=e[3])!==null&&t!==void 0?t:null;return r("guess",{channelData:f,sampleRate:m,...v===null?v:{tempoSettings:v}},[f.buffer])}}),bk=r=>{const e=new Worker(r);return Ok(e)},Fk=(r,e)=>{let t=null;return()=>{if(t!==null)return t;const o=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(o);return t=r(i),setTimeout(()=>URL.revokeObjectURL(i)),t}},Lk=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:c}})=>{const u=r[i];try{if(void 0===u)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const c=new Map,u=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(c);return c.set(o,(()=>{n(),t.close(),c.delete(o)})),{result:o}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=u(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},h=(e,t,r)=>{const n=e.length,o=[];let s=!1;for(let a=0;a<n;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=r/4-1);return s&&o.push(n-1),o},d=(e,t,r)=>{const n=(e=>{let t=0;const r=e.length;for(let n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t})(e),o=.3*n;let s=[],a=n-.05*n;if(n>.25)for(;s.length<30&&a>=o;)s=h(e,a,t),a-=.05*n;const i=(e=>{const t=[];return e.forEach(((r,n)=>{const o=Math.min(e.length-n,10);for(let s=1;s<o;s+=1){const o=e[n+s]-r;t.some((e=>e.interval===o&&(e.peaks.push(r),!0)))||t.push({interval:o,peaks:[r]})}})),t})(s),c=((e,t,r={})=>{var n,o;const s=Math.max(0,null!==(n=r.maxTempo)&&void 0!==n?n:180),a=Math.max(0,null!==(o=r.minTempo)&&void 0!==o?o:90),i=[];return e.forEach((e=>{let r=60/(e.interval/t);for(;r<a;)r*=2;for(;r>s;)r/=2;if(r<a)return;let n=!1,o=e.peaks.length;i.forEach((t=>{if(t.tempo===r&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],n=!0),t.tempo>r-.5&&t.tempo<r+.5){const n=2*Math.abs(t.tempo-r);o+=(1-n)*t.peaks.length,t.score+=(1-n)*e.peaks.length}})),n||i.push({peaks:e.peaks,score:o,tempo:r})})),i})(i,t,r);return c.sort(((e,t)=>t.score-e.score)),c},p=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo},f=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:o,tempo:s}=n[0],a=Math.round(s),i=60/a;o.sort(((e,t)=>e-t));let c=o[0]/t;for(;c>i;)c-=i;return{bpm:a,offset:c,tempo:s}};l(self,{analyze:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:p(e,t,r)}),guess:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:f(e,t,r)})})})()})();`,jk=Fk(bk,Lk),Uk=(...r)=>jk().analyze(...r),Dn=new z0({log:!0,corePath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.js",wasmPath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.wasm"}),my=async()=>{try{console.log("Starting FFmpeg load..."),await Dn.load({corePath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.js",wasmPath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.wasm"}),console.log("FFmpeg loaded successfully")}catch(r){throw console.error("FFmpeg load error:",r),r instanceof Error&&console.error({message:r.message,name:r.name,stack:r.stack,cause:r.cause}),alert("Failed to load FFmpeg. Please check your internet connection."),r}},Bk=({onCreateSlideshow:r,onLoadSession:e,onClose:t})=>{const[o,i]=le.useState(!0),[l,h]=le.useState(!1);return E.jsx("div",{className:"landing-wrapper",children:E.jsxs("div",{className:"landing-container",children:[E.jsxs("div",{className:"landing-header",children:[E.jsx("button",{className:"info-button",onClick:()=>h(!0),children:E.jsx("span",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid white",fontSize:"16px"},children:"i"})}),E.jsx("h1",{className:"app-title",children:"Groove Slider"}),E.jsx("button",{className:"close-landing-button",onClick:t,children:E.jsx(Po,{size:24})})]}),E.jsxs("div",{className:"retro-background",children:[E.jsx("div",{className:"wave-pattern top"}),E.jsx("div",{className:"wave-pattern bottom"}),E.jsxs("div",{className:"project-management",children:[E.jsx("button",{className:"create-button",onClick:r,children:"Create Slideshow"}),E.jsx("button",{className:"sessions-toggle-button",onClick:()=>i(!o),children:o?"Hide Saved Projects":"Show Saved Projects"}),o&&E.jsx("div",{className:"landing-sessions-container",children:E.jsx(cC,{visible:!0,onLoadSession:e})})]})]}),E.jsx("div",{className:"featured-section",children:E.jsxs("button",{className:"use-style-button",children:[E.jsx(Dd,{size:18}),E.jsx("span",{children:"Follow Us "})]})}),l&&E.jsx(Qk,{isOpen:l,onClose:()=>h(!1)})]})})},zk=({onBPMChange:r,isAnalyzing:e})=>{const[t,o]=le.useState([]),[i,l]=le.useState(0),h=()=>{if(o(newTaps),newTaps.length>1){const d=[];for(let v=1;v<newTaps.length;v++)d.push(newTaps[v]-newTaps[v-1]);const f=d.reduce((v,_)=>v+_)/d.length,m=Math.round(6e4/f);m>=60&&m<=180&&(l(m),r(m))}};return le.useEffect(()=>{const d=setTimeout(()=>{t.length>0&&Date.now()-t[t.length-1]>2e3&&o([])},2e3);return()=>clearTimeout(d)},[t]),E.jsxs("div",{className:"tap-tempo",children:[E.jsxs("button",{onClick:h,className:"tap-button",children:["Tap Tempo",E.jsx("span",{className:"bpm-text",children:i>0?`${i} BPM`:""})]}),e&&E.jsxs("div",{className:"bpm-analyzer",children:[E.jsx("div",{className:"spinner"}),E.jsx("span",{children:"Analyzing beat..."})]})]})},$k=({onUpload:r,onBPMChange:e,currentBPM:t,onStartPointChange:o,audioRef:i,musicUrl:l,musicStartPoint:h})=>{const[d,f]=le.useState(0),[m,v]=le.useState(!1),[_,I]=le.useState(1),[C,P]=le.useState(0),V=le.useRef(null),[b,B]=le.useState(""),[G,Q]=le.useState(!1),Y=async T=>{try{const N=new(window.AudioContext||window.webkitAudioContext),x=await(await fetch(T)).arrayBuffer(),D=await N.decodeAudioData(x),k=await Uk(D);return k>140?Math.round(k/2):Math.round(k)}catch(N){return console.error("BPM detection failed:",N),120}},j=()=>{V.current&&f(V.current.currentTime)};le.useEffect(()=>(V.current&&i.current&&(V.current.addEventListener("timeupdate",j),V.current.addEventListener("timeupdate",T=>{i.current.currentTime=T.target.currentTime}),V.current.addEventListener("loadedmetadata",()=>{P(V.current.duration)})),()=>{V.current&&i.current&&(V.current.removeEventListener("timeupdate",j),V.current.removeEventListener("timeupdate",T=>{i.current.currentTime=T.target.currentTime}))}),[i,V]);const W=()=>{V.current&&(m?V.current.pause():V.current.play(),v(!m))},R=T=>{const N=Math.floor(T/60),M=Math.floor(T%60);return`${N}:${M.toString().padStart(2,"0")}`};return E.jsx("div",{className:"music-panel",children:E.jsxs("div",{className:"music-controls",children:[E.jsx("div",{className:"music-upload",children:E.jsxs("label",{className:"upload-button",children:[E.jsx(Dd,{className:"icon"}),E.jsx("span",{children:"Upload Music"}),E.jsx("input",{type:"file",accept:"audio/*",onChange:T=>{const N=T.target.files[0];if(N){const M=URL.createObjectURL(N);B(N.name),Q(!0),Y(M).then(x=>{console.log(`Detected BPM: ${x}`),e(x),Q(!1)}).catch(x=>{console.error("BPM detection failed:",x),Q(!1)}),r(M)}},className:"hidden-input"})]})}),E.jsxs("div",{className:"bpm-control",children:[E.jsx(zk,{onBPMChange:e}),G&&E.jsxs("div",{className:"bpm-analyzer",children:[E.jsx(Tw,{className:"spinner",size:18}),E.jsx("span",{children:"Analyzing beat..."})]}),E.jsxs("div",{className:"manual-bpm",children:[E.jsxs("label",{children:[E.jsx("span",{children:"AUTO-BPM"}),E.jsx("span",{children:"DETECTION:"})]}),E.jsx("input",{type:"number",min:"60",max:"180",value:t,onChange:T=>e(parseInt(T.target.value)),className:"bpm-input"})]})]}),E.jsxs("div",{className:"music-player",children:[E.jsx("audio",{ref:V,src:l,onTimeUpdate:j}),l&&E.jsx("div",{className:"music-info",children:E.jsx("span",{children:b||"Track Title"})}),E.jsx("button",{className:"audio-control-button",onClick:W,children:m?E.jsx(_y,{size:32}):E.jsx(wy,{size:32})}),l&&E.jsx(hC,{audioUrl:l,audioRef:i,onStartPointChange:T=>{o(T),V.current&&(V.current.currentTime=T)},musicStartPoint:h}),E.jsxs("div",{className:"audio-progress",children:[E.jsxs("div",{className:"time-display",children:[E.jsx("span",{children:R(d)}),E.jsx("span",{children:R(C)})]}),E.jsx("input",{type:"range",min:"0",max:C||100,value:d,onChange:T=>{const N=parseFloat(T.target.value);V.current&&(V.current.currentTime=N)},className:"progress-slider"})]}),E.jsxs("div",{className:"volume-control",children:[E.jsx(Ww,{size:20}),E.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:_,onChange:T=>{const N=parseFloat(T.target.value);V.current&&(V.current.volume=N),I(N)},className:"volume-slider"})]})]})]})})},Wk=({currentIndex:r,totalSlides:e,onProgressClick:t})=>E.jsx("div",{className:"progress-container",children:[...Array(e)].map((o,i)=>E.jsx("div",{className:`progress-bar ${i===r?"active":""}`,onClick:()=>t(i)},i))}),qk=({onPrevious:r,onNext:e,isFirstSlide:t,isLastSlide:o})=>E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:r,className:"nav-button prev",disabled:t,children:E.jsx(Co,{})}),E.jsx("button",{onClick:e,className:"nav-button next",disabled:o,children:E.jsx(Ds,{})})]}),Hk=({onFileUpload:r})=>E.jsx("div",{className:"empty-state",children:E.jsxs("label",{htmlFor:"file-upload",className:"file-upload-label",children:[E.jsx(iw,{size:48}),E.jsx("span",{children:"Add Images"}),E.jsx("input",{type:"file",id:"file-upload",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]})}),Gk=({isOpen:r,progress:e,message:t})=>r?E.jsx("div",{className:"modal-overlay",children:E.jsx("div",{className:"modal-content export-progress",children:E.jsxs("div",{className:"loading-container",children:[E.jsx("h3",{className:"progress-title",children:t}),E.jsx("div",{className:"progress-bar-container",children:E.jsx("div",{className:"progress-bar-fill",style:{width:`${e||0}%`,transition:"width 0.3s ease-in-out"}})}),E.jsxs("div",{className:"progress-percentage",children:[Math.round(e||0),"%"]})]})})}):null,Qk=({isOpen:r,onClose:e})=>{const[t,o]=le.useState(null),[i,l]=le.useState(""),[h,d]=le.useState(!0);le.useEffect(()=>{r&&(async()=>{try{if(console.group("🔍 License Fetch Debugging"),console.log("Firestore DB:",Zh),console.log("Modal Open:",r),!Zh){console.error("❌ Firestore DB not initialized");return}const I=hI(Zh,"content","license");console.log("📄 Document Reference:",I);try{const C=await SI(I);if(console.log("📋 Document Exists:",C.exists()),C.exists()){const P=C.data();console.log("📝 License Data:",P),P&&P.text?(console.log("✅ License Text Found"),l(P.text)):(console.warn("❗ No text field in license document"),l("No license text found."))}else console.warn("❌ No such document in Firestore"),l("License document does not exist.")}catch(C){console.error("❌ Snapshot Error:",C),l(`Snapshot Error: ${C.message}`)}}catch(I){console.error("❌ Detailed Firebase Error:",I),l(`Error loading license: ${I.message}`)}finally{console.groupEnd(),d(!1)}})()},[r]);const f=_=>{o(_)},m=()=>{o(null)},v=()=>{switch(t){case"credits":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"Credits"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"credits-content",children:[E.jsxs("div",{className:"developer-profile",children:[E.jsx("div",{className:"developer-avatar",children:E.jsx(nw,{size:64})}),E.jsx("h3",{children:"Ben Hayes"}),E.jsx("p",{className:"developer-title",children:"Creator & Developer"})]}),E.jsxs("div",{className:"company-info",children:[E.jsx("h4",{children:"Hayzer Apps"}),E.jsx("p",{children:"Groove Slider was designed, developed, and maintained by Ben Hayes as the sole developer."})]}),E.jsxs("div",{className:"developer-note",children:[E.jsx("p",{children:"From concept to implementation, every aspect of this app was crafted to provide an elegant way to create musical slideshows of your favorite moments."}),E.jsx("p",{children:"I hope you enjoy using Groove Slider as much as I enjoyed creating it."})]}),E.jsxs("div",{className:"contact-section",children:[E.jsx("h4",{children:"Connect"}),E.jsx("p",{children:"Have feedback or suggestions? I'd love to hear from you!"}),E.jsx("p",{children:"Email: contact@hayzerapps.com"})]})]})})]});case"feedback":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"Feedback"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"feedback-form",children:[E.jsx("p",{children:"We'd love to hear your thoughts on Groove Slider!"}),E.jsx("textarea",{placeholder:"Share your feedback here...",className:"feedback-textarea",rows:6}),E.jsx("button",{className:"submit-button",children:"Submit Feedback"})]})})]});case"restore":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"Restore Purchase"})]}),E.jsxs("div",{className:"section-body",children:[E.jsx("p",{children:"Tap the button below to restore your previous purchases."}),E.jsx("button",{className:"restore-button",children:"Restore Purchases"})]})]});case"unsubscribe":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"How to Unsubscribe"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"unsubscribe-info",children:[E.jsx("p",{children:"For information on how to manage or cancel your subscription, please visit Google's official support page:"}),E.jsx("button",{className:"external-link-button",onClick:()=>window.open("https://support.google.com/googleplay/answer/7018481?hl=en&co=GENIE.Platform%3DAndroid","_blank"),children:"Google Play Subscription Help"})]})})]});case"privacy":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"Privacy Policy"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"privacy-content",children:[E.jsx("h3",{children:"Privacy Policy for Groove Slider"}),E.jsx("p",{children:"Last Updated: March 2, 2025"}),E.jsx("h4",{children:"Introduction"}),E.jsx("p",{children:"Welcome to Groove Slider. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we handle your data when you use our application and tell you about your privacy rights."}),E.jsx("h4",{children:"What Data We Collect"}),E.jsx("p",{children:"Groove Slider requires access to the following on your device:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Image files (photos, pictures) that you select to include in your slideshows"}),E.jsx("li",{children:"Audio files (music, sounds) that you select to add to your slideshows"})]}),E.jsx("h4",{children:"How We Use Your Data"}),E.jsx("p",{children:"We use your data for the following purposes:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"To create slideshows with your selected images"}),E.jsx("li",{children:"To add your selected music to your slideshows"}),E.jsx("li",{children:"To export these slideshows as MP4 video files to your device"})]}),E.jsx("h4",{children:"Data Processing"}),E.jsx("p",{children:"All data processing happens locally on your device. Your images and music:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Are not uploaded to our servers"}),E.jsx("li",{children:"Are not shared with third parties"}),E.jsx("li",{children:"Are only accessed when you explicitly grant permission"}),E.jsx("li",{children:"Are only used for the purpose of creating and exporting your slideshows"})]}),E.jsx("h4",{children:"Storage"}),E.jsx("p",{children:"The app stores:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Temporary copies of your selected images and music while processing"}),E.jsx("li",{children:"Your slideshow settings and preferences"}),E.jsx("li",{children:"Completed MP4 video files that are saved to your device storage"})]}),E.jsx("h4",{children:"Third-Party Services"}),E.jsx("p",{children:"Our app does not integrate with third-party analytics or advertising services."}),E.jsx("h4",{children:"Your Rights"}),E.jsx("p",{children:"You have the right to:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Delete your saved slideshows and preferences by uninstalling the app"}),E.jsx("li",{children:"Control what files you share with the app through your device permissions"})]}),E.jsx("h4",{children:"Children's Privacy"}),E.jsx("p",{children:"Our service is not directed to anyone under the age of 13. We do not knowingly collect personal information from children."}),E.jsx("h4",{children:"Changes to This Privacy Policy"}),E.jsx("p",{children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'}),E.jsx("h4",{children:"Contact Us"}),E.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us at: contact@grooveslider.app"})]})})]});case"license":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:m,children:E.jsx(Co,{size:24})}),E.jsx("h2",{children:"License Agreement"})]}),E.jsx("div",{className:"section-body",children:E.jsx("div",{className:"license-content",children:h?E.jsx("p",{children:"Loading license..."}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{children:"End User License Agreement"}),E.jsx("p",{children:"Last Updated: March 2, 2025"}),E.jsx("div",{className:"license-text",children:i||"No license text available."})]})})})]});default:return null}};return E.jsx("div",{className:"modal-overlay",children:E.jsx("div",{className:"info-modal",children:t?v():E.jsxs(E.Fragment,{children:[E.jsxs("header",{className:"info-header",children:[E.jsx("h2",{children:"Settings"}),E.jsx("button",{className:"close-button",onClick:e,children:E.jsx(Po,{size:24})})]}),E.jsxs("div",{className:"info-content",children:[E.jsxs("div",{className:"pro-banner",children:[E.jsxs("div",{className:"pro-text",children:[E.jsxs("h3",{children:["Groove Slider ",E.jsx("span",{className:"pro-badge",children:"Pro"})]}),E.jsx("p",{children:"Unlock All Features"})]}),E.jsx("div",{className:"pro-image",children:E.jsx("div",{style:{width:80,height:80,background:"rgba(255,255,255,0.2)",borderRadius:"8px"}})})]}),E.jsxs("div",{className:"info-item-group",children:[E.jsxs("div",{className:"info-item",onClick:()=>f("credits"),children:[E.jsx(vw,{className:"info-icon"}),E.jsxs("div",{className:"info-text",children:[E.jsx("h4",{children:"Credits"}),E.jsx("p",{children:"About"})]}),E.jsx(Ds,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>f("feedback"),children:[E.jsx(Nw,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Feedback"})}),E.jsx(Ds,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>f("restore"),children:[E.jsx(Lw,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Restore Purchase"})}),E.jsx(Ds,{})]})]}),E.jsxs("div",{className:"info-item-group",children:[E.jsxs("div",{className:"info-item",onClick:()=>f("unsubscribe"),children:[E.jsx(lw,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"How to unsubscribe"})}),E.jsx(Ds,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>f("privacy"),children:[E.jsx(Iw,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Privacy Policy"})}),E.jsx(Ds,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>f("license"),children:[E.jsx(pw,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"License"})}),E.jsx(Ds,{})]}),E.jsxs("div",{className:"info-item",children:[E.jsx(gw,{className:"info-icon"}),E.jsxs("div",{className:"info-text",children:[E.jsx("h4",{children:"Version"}),E.jsx("p",{children:"Version 0.9.0 (Beta)"})]})]})]})]})]})})})},Kk=({isVisible:r,onClose:e})=>r?E.jsx("div",{className:"share-notification",children:E.jsxs("div",{className:"share-content",children:[E.jsx("h3",{children:"Export Complete! 🎉"}),E.jsx("p",{children:"Share your creation:"}),E.jsxs("div",{className:"share-buttons",children:[E.jsx("button",{onClick:()=>window.open("https://instagram.com","_blank"),className:"share-button instagram",children:"Share to Instagram"}),E.jsx("button",{onClick:()=>window.open("https://tiktok.com","_blank"),className:"share-button tiktok",children:"Share to TikTok"})]}),E.jsx("button",{onClick:e,className:"close-notification",children:E.jsx(Po,{size:20})})]})}):null,L_=({stories:r,onClose:e,onReorder:t,onDelete:o})=>{const[i,l]=le.useState(r.map((b,B)=>B+1)),[h,d]=le.useState(null),[f,m]=le.useState(null),[v,_]=le.useState(!1),I=b=>{d(h===b?null:b)},C=(b,B)=>{h===B&&(_(!0),b.currentTarget.style.cursor="grabbing")},P=(b,B)=>{b.preventDefault(),v&&h!==null&&h!==B&&m(B)},V=b=>{if(h!==null&&h!==b){const B=[...r],[G]=B.splice(h,1);B.splice(b,0,G);const Q=B.map((Y,j)=>j+1);l(Q),t(B),d(null),m(null),_(!1)}};return E.jsxs("div",{className:"edit-panel",children:[E.jsxs("div",{className:"edit-panel-header",children:[E.jsx("h3",{children:"Re-order (tap, drap, drop)"}),E.jsx("button",{className:"edit-panel-close",onClick:e,children:E.jsx(Po,{size:20})})]}),E.jsx("div",{className:"thumbnails-container",children:r.map((b,B)=>E.jsx("div",{className:`thumbnail ${h===B?"selected":""}
${f===B?"drag-over":""}`,onClick:()=>I(B),onMouseDown:G=>C(G,B),onTouchStart:G=>C(G,B),onDragOver:G=>P(G,B),onMouseOver:G=>v&&P(G,B),onTouchMove:G=>{const Q=G.touches[0],j=document.elementFromPoint(Q.clientX,Q.clientY).closest(".thumbnail");if(j){const W=Array.from(j.parentNode.children).indexOf(j);P(G,W)}},onMouseUp:()=>V(B),onTouchEnd:()=>f!==null&&V(f),draggable:h===B,children:E.jsxs("div",{className:"thumbnail-content",children:[E.jsx("button",{className:"delete-button",onClick:G=>{G.stopPropagation(),o(B)},children:E.jsx(Po,{size:16})}),E.jsxs("div",{className:"image-thumbnail",children:[E.jsx("img",{src:b.url,alt:`Slide ${B+1}`}),h===B&&E.jsx("div",{className:"selection-dot"})]})]})},B))})]})},Xk=({onFileUpload:r,onSaveSession:e,onExportSession:t,onPlayPause:o,isPlaying:i,duration:l,onDurationChange:h,onEdit:d,onMusicUpload:f,onBPMChange:m,musicUrl:v,bpm:_,onStartPointChange:I,musicStartPoint:C,audioRef:P,isLoopingEnabled:V,setIsLoopingEnabled:b,showEditPanel:B,setShowEditPanel:G,stories:Q,setStories:Y,handleDelete:j,handleReorder:W})=>{const[R,T]=le.useState(!1),[N,M]=le.useState(!1),[x,D]=le.useState(1);le.useEffect(()=>{const Z=[.125,.25,.5,1,2,4,8,16].find(te=>Math.abs(l*_/(4*60)-te)<.01);Z&&D(Z)},[l,_]);const k=(ie,Z)=>ie*4*60/Z,oe=()=>{T(!R),N&&M(!1),B&&G(!1)},he=()=>{M(!N),R&&T(!1),B&&G(!1)},pe=()=>{G(!B),R&&T(!1),N&&M(!1)};return E.jsxs("div",{className:"bottom-menu w-full flex flex-col items-stretch",children:[R&&E.jsx("div",{className:"duration-panel",children:E.jsxs("div",{className:"duration-controls",children:[E.jsx("h3",{children:"Bar-Based Slide Transitions"}),E.jsx("div",{className:"bar-options",children:[{value:.125,label:"⅛ Bar"},{value:.25,label:"¼ Bar"},{value:.5,label:"½ Bar"},{value:1,label:"1 Bar"},{value:2,label:"2 Bars"},{value:4,label:"4 Bars"},{value:8,label:"8 Bars"},{value:16,label:"16 Bars"}].map(ie=>E.jsx("button",{className:`bar-option ${x===ie.value?"selected":""}`,onClick:()=>{const Z=k(ie.value,_);D(ie.value),h(Z)},children:ie.label},ie.value))}),E.jsxs("div",{className:"duration-info",children:[E.jsx("span",{children:"Slide Change Speed:"}),E.jsxs("span",{className:"time-info",children:[l.toFixed(2),"s /",_," BPM"]})]})]})}),N&&E.jsx($k,{audioRef:P,onUpload:f,onBPMChange:m,currentBPM:_,onStartPointChange:I,musicStartPoint:C,musicUrl:v}),B&&E.jsx(L_,{stories:Q,onClose:()=>G(!1),onReorder:ie=>{Y(ie),W(ie)},onDelete:j}),E.jsxs("div",{className:"bottom-menu-buttons",children:[E.jsxs("button",{className:`bottom-menu-button ${V?"active":""}`,onClick:()=>b(!V),"data-loop":"true",children:[E.jsx(Mw,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Loop"})]}),E.jsxs("button",{className:`bottom-menu-button ${R?"active":""}`,onClick:oe,children:[E.jsx(yy,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Speed"})]}),E.jsxs("button",{className:`bottom-menu-button ${N?"active":""}`,onClick:he,children:[E.jsx(Dd,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Music"})]}),E.jsxs("button",{className:`bottom-menu-button ${i?"active":""}`,onClick:o,children:[i?E.jsx(_y,{className:"bottom-menu-icon"}):E.jsx(wy,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:i?"Pause":"Play"})]}),E.jsxs("div",{className:"bottom-menu-right-group",children:[E.jsxs("button",{className:`bottom-menu-button ${B?"active":""}`,onClick:pe,children:[E.jsx(Uw,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Edit"})]}),E.jsxs("label",{className:"bottom-menu-button",children:[E.jsx(ww,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Add"}),E.jsx("input",{type:"file",id:"file-upload-bottom",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]}),E.jsxs("button",{className:"bottom-menu-button",onClick:e,children:[E.jsx(Ey,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Save"})]}),E.jsxs("button",{className:"bottom-menu-button",onClick:t,children:[E.jsx(vy,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Export"})]})]})]})]})},Yk=()=>{const[r,e]=le.useState(!0),[t,o]=le.useState(0),[i,l]=le.useState([]),[h,d]=le.useState(!1),[f,m]=le.useState(2),[v,_]=le.useState(!1),[I,C]=le.useState(!1),[P,V]=le.useState(!1),[b,B]=le.useState(null),[G,Q]=le.useState(!1),[Y,j]=le.useState(!1),[W,R]=le.useState(!1),[T,N]=le.useState("cover"),[M,x]=le.useState(!1),[D,k]=le.useState(!1),[oe,he]=le.useState(null),[pe,ie]=le.useState(""),[Z,te]=le.useState(!1),[J,F]=le.useState(null),[K,me]=le.useState(120),[Se,fe]=le.useState(0),[Pe,Me]=le.useState(!0),[ue,Be]=le.useState({}),[Qe,xt]=le.useState(null),[Jt,en]=le.useState(null),ze=le.useRef(null),wn=le.useRef(null),Qs=()=>{i.length>0?window.confirm("Start a new project? Any unsaved changes will be lost.")&&(Ks(),e(!1)):e(!1)},Ks=()=>{l([]),o(0),F(null),ze.current&&(ze.current.pause(),ze.current.src=""),d(!1),me(120),fe(0),m(2),Me(!1)},Lo=Te=>new Promise((ke,He)=>{const Ye=new Image;Ye.onload=()=>ke(Te),Ye.onerror=He,Ye.src=Te});le.useEffect(()=>{const Te=async()=>{const ke=[t-1,t,t+1].filter(He=>He>=0&&He<i.length);for(const He of ke)if(!ue[i[He].url])try{await Lo(i[He].url),Be(Ye=>({...Ye,[i[He].url]:!0}))}catch(Ye){console.error("Failed to preload image:",Ye)}};i.length>0&&Te()},[t,i]),le.useEffect(()=>{my().catch(console.error)},[]);const br=Te=>{const ke=Array.from(Te.target.files).filter(Ye=>Ye.type.startsWith("image/"));if(ke.length===0){alert("Please select image files only.");return}const He=ke.map(Ye=>({type:"image",url:URL.createObjectURL(Ye)}));l(Ye=>[...Ye,...He]),Te.target.value=""},Hn=Te=>{F(Te),fe(0),ze.current&&(ze.current.src=Te,ze.current.currentTime=0)},Gn=Te=>{me(Te);const Ye=([.125,.25,.5,1,2,4,8,16].find(Xn=>Math.abs(f*Te/(4*60)-Xn)<.01)||1)*4*60/Te;m(Ye)},os=()=>{wn.current=setInterval(()=>{o(Te=>!Pe&&Te>=i.length-1?(En(),d(!1),ze.current&&ze.current.pause(),Te):(Te+1)%i.length)},f*1e3)},En=()=>{wn.current&&clearInterval(wn.current)},is=()=>{h?(En(),ze.current&&ze.current.pause()):(t===i.length-1&&o(0),os(),ze.current&&J&&(ze.current.currentTime=Se,ze.current.play().catch(Te=>console.log("Play error:",Te)))),d(Te=>!Te)};le.useEffect(()=>()=>En(),[]),le.useEffect(()=>{h&&(En(),os())},[f]);const as=()=>{t<i.length-1&&o(t+1)},ct=()=>{t>0&&o(t-1)},mt=Te=>xt(Te.touches[0].clientX),Qn=Te=>en(Te.touches[0].clientX),Xs=()=>{if(!Qe||!Jt)return;const Te=Qe-Jt,ke=Te>50,He=Te<-50;ke&&t<i.length-1&&as(),He&&t>0&&ct(),xt(null),en(null)},Kn=Te=>{h&&(En(),d(!1),ze.current&&ze.current.pause()),o(0),l(Te)},gr=Te=>{const ke=i.filter((He,Ye)=>Ye!==Te);l(ke),t>=Te&&o(Math.max(0,t-1))},Fr=(Te,ke,He)=>He!=="cover"?`scale=${Te}:${ke}:force_original_aspect_ratio=1,pad=${Te}:${ke}:(ow-iw)/2:(oh-ih)/2:black`:`scale=iw*max(${Te}/iw\\,${ke}/ih):ih*max(${Te}/iw\\,${ke}/ih),crop=${Te}:${ke}`,Ys=async Te=>{try{h&&(En(),ze.current&&ze.current.pause(),d(!1));const ke=await aC(Te);l(ke.stories),me(ke.bpm),m(ke.duration),Me(ke.isLoopingEnabled),o(ke.currentIndex),N(ke.imageFitMode||"cover"),ke.musicUrl&&(F(ke.musicUrl),fe(ke.musicStartPoint),ze.current&&(ze.current.src=ke.musicUrl,ze.current.currentTime=ke.musicStartPoint)),r&&e(!1),alert("Session loaded successfully!")}catch(ke){console.error("Error loading session:",ke),alert("Failed to load session: "+ke.message)}},Zs=async Te=>{const ke={...Te},{resolution:He="1080x1920",isExportLoopEnabled:Ye=!1,exportLoopDuration:Xn=0}=ke;try{let Ct,Tn="untitled.mp4";if("showSaveFilePicker"in window)Ct=await window.showSaveFilePicker({suggestedName:Tn,types:[{description:"MP4 Video",accept:{"video/mp4":[".mp4"]}}]});else{const gt=document.createElement("a");gt.download=Tn,Ct={createWritable:async()=>({write:async yt=>{const Vn=URL.createObjectURL(new Blob([yt],{type:"video/mp4"}));gt.href=Vn,gt.click(),URL.revokeObjectURL(Vn)},close:async()=>{}})}}k(!0),te(!0),ie("Preparing to export video..."),he(0),Dn.loaded||await my();let Yn=[];const Sn=[],[eo,Lr]=He.split("x").map(Number),to=i.length*f,In=Ye&&Xn>0?Math.ceil(Xn/to):1;for(let gt=0;gt<In;gt++)for(let yt=0;yt<i.length;yt++){const Vn=i[yt];ie(`Processing image ${yt+1}/${i.length} (Loop ${gt+1}/${In})`);const Zn=`input_${gt}_${yt}.png`,yr=`processed_${gt}_${yt}.mp4`;await Dn.writeFile(Zn,await Cm(Vn.url)),Yn.push(Zn),await Dn.exec(["-loop","1","-i",Zn,"-c:v","libx264","-t",`${f}`,"-pix_fmt","yuv420p","-vf",Fr(eo,Lr,T),"-r","30","-preset","ultrafast",yr]),Yn.push(yr),Sn.push({name:yr}),he((gt*i.length+yt+1)/(In*i.length)*75)}if(await Dn.writeFile("list.txt",Sn.map(gt=>`file '${gt.name}'`).join(`
`)),Yn.push("list.txt"),ie("Creating final video..."),he(85),await Dn.exec(["-f","concat","-safe","0","-i","list.txt","-c:v","copy","temp_output.mp4"]),Yn.push("temp_output.mp4"),J){ie("Adding background music...");try{await Dn.writeFile("background.mp3",await Cm(J)),await Dn.exec(["-i","temp_output.mp4","-ss",String(Se),"-i","background.mp3","-shortest","-map","0:v","-map","1:a","-c:v","copy","-c:a","aac","-b:a","192k","final_output.mp4"]),await Dn.deleteFile("background.mp3"),await Dn.deleteFile("temp_output.mp4")}catch(gt){console.error("Music error:",gt),await Dn.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"])}}else await Dn.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"]);ie("Preparing download..."),he(95);const no=await Dn.readFile("final_output.mp4");he(100);const nt=await Ct.createWritable();await nt.write(new Blob([no.buffer],{type:"video/mp4"})),await nt.close(),te(!1),k(!1),x(!0)}catch(Ct){console.error("Export error:",Ct),te(!1),k(!1),alert(`Export failed: ${Ct.message}`)}},Js=async Te=>{try{te(!0),ie("Saving session..."),he(10);const ke={name:Te,stories:i,musicUrl:J,bpm:K,musicStartPoint:Se,imageFitMode:T,duration:f,isLoopingEnabled:Pe,currentIndex:t};he(40),await iC(ke),he(100),ie("Session saved successfully!"),setTimeout(()=>{te(!1),alert("Session saved successfully!")},1e3)}catch(ke){console.error("Error saving session to database:",ke),te(!1),alert(`Failed to save session: ${ke.message}`)}};return E.jsx(E.Fragment,{children:r?E.jsx(Bk,{onCreateSlideshow:Qs,onLoadSession:Ys,onClose:()=>e(!1)}):E.jsx("div",{className:"app-container",children:E.jsx("div",{className:"app-content",children:E.jsxs("div",{className:"slider-container",children:[E.jsxs("div",{className:"title-bar",children:[E.jsx("h1",{className:"slider-title",children:"Groove Slider"}),E.jsx("button",{onClick:()=>e(!0),className:"projects-button",children:"back"})]}),E.jsx("audio",{ref:ze,src:J,loop:!0}),i.length===0?E.jsx(Hk,{onFileUpload:br}):E.jsxs("div",{className:"story-container",onTouchStart:mt,onTouchMove:Qn,onTouchEnd:Xs,children:[E.jsx("div",{className:"story-slide",children:E.jsx("div",{className:"media-wrapper",children:E.jsxs("div",{className:"image-container",style:{position:"relative",width:"100%",height:"100%"},children:[E.jsx("button",{className:"image-fit-toggle",onClick:Te=>{Te.preventDefault(),console.log("Image fit button clicked"),N(ke=>{const He=ke==="cover"?"contain":"cover";return console.log("New image fit mode:",He),He})},children:T==="cover"?E.jsx(kw,{}):E.jsx(dw,{})}),i[t]&&i[t].url?E.jsx("img",{src:i[t].url,alt:`Slide ${t+1}`,className:"media-content",style:{objectFit:T,width:"100%",height:"100%",display:"block"},loading:"eager"}):E.jsx("div",{className:"empty-image-placeholder",style:{backgroundColor:"#f5f5f5",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#333"},children:"Select an image to display"})]})})}),E.jsx(qk,{onPrevious:ct,onNext:as,isFirstSlide:t===0,isLastSlide:t===i.length-1}),E.jsx(Wk,{currentIndex:t,totalSlides:i.length,onProgressClick:o})]}),E.jsx(Xk,{audioRef:ze,onFileUpload:br,onSaveSession:()=>Q(!0),onExportSession:()=>V(!0),onPlayPause:is,isPlaying:h,duration:f,onDurationChange:m,onEdit:()=>C(!I),onMusicUpload:Hn,onBPMChange:Gn,musicUrl:J,bpm:K,onStartPointChange:fe,musicStartPoint:Se,onMusicPanelToggle:()=>setShowMusicPanel(!showMusicPanel),isLoopingEnabled:Pe,setIsLoopingEnabled:Me,showEditPanel:I,setShowEditPanel:C,stories:i,setStories:l,handleDelete:gr,handleReorder:Kn}),I&&E.jsx(L_,{stories:i,onClose:()=>C(!I),onReorder:Kn,onDelete:gr}),E.jsx(sC,{isOpen:P,progress:oe,message:pe,onClose:()=>V(!1),onExport:Zs,isExporting:D}),E.jsx(oC,{isOpen:G,onClose:()=>Q(!1),onSave:Js}),E.jsx(Gk,{isOpen:Z,progress:oe,message:pe}),E.jsx(Kk,{isVisible:M,onClose:()=>x(!1)})]})})})})};function Zk({installPrompt:r,onInstallClick:e}){return E.jsxs("div",{className:"app-container",children:[r&&E.jsx("button",{onClick:e,style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Install App"}),E.jsx(Yk,{})]})}function Jk(){const[r,e]=le.useState(null);le.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{console.log("Attempting to register service worker"),console.log("Current origin:",window.location.origin),console.log("Current pathname:",window.location.pathname);const l=await navigator.serviceWorker.register("/groove-slider-img/sw.js",{scope:"/groove-slider-img/",type:"classic"});console.log("Service Worker registered successfully:",l),console.log("Registration scope:",l.scope)}catch(l){console.error("Service Worker registration failed:",l),console.error("Full error:",JSON.stringify(l,Object.getOwnPropertyNames(l)))}});const o=l=>{l.preventDefault(),e(l)},i=l=>{console.log("App was successfully installed")};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",i)}},[]);const t=async()=>{if(r){r.prompt();const{outcome:o}=await r.userChoice;console.log(o==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null)}};return E.jsx(le.StrictMode,{children:E.jsx(Zk,{installPrompt:r,onInstallClick:t})})}Y0.createRoot(document.getElementById("root")).render(E.jsx(Jk,{}));
