import{F as DI,f as qy}from"./ffmpeg.C6phY-E3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Mf={exports:{}},Sl={},Of={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function bI(){if(Wy)return ze;Wy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function b(L,Y,Ee){this.props=L,this.context=Y,this.refs=P,this.updater=Ee||C}b.prototype.isReactComponent={},b.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function B(){}B.prototype=b.prototype;function q(L,Y,Ee){this.props=L,this.context=Y,this.refs=P,this.updater=Ee||C}var $=q.prototype=new B;$.constructor=q,A($,b.prototype),$.isPureReactComponent=!0;var Q=Array.isArray,F=Object.prototype.hasOwnProperty,U={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(L,Y,Ee){var De,ye={},se=null,J=null;if(Y!=null)for(De in Y.ref!==void 0&&(J=Y.ref),Y.key!==void 0&&(se=""+Y.key),Y)F.call(Y,De)&&!R.hasOwnProperty(De)&&(ye[De]=Y[De]);var ee=arguments.length-2;if(ee===1)ye.children=Ee;else if(1<ee){for(var ve=Array(ee),Ae=0;Ae<ee;Ae++)ve[Ae]=arguments[Ae+2];ye.children=ve}if(L&&L.defaultProps)for(De in ee=L.defaultProps,ee)ye[De]===void 0&&(ye[De]=ee[De]);return{$$typeof:r,type:L,key:se,ref:J,props:ye,_owner:U.current}}function x(L,Y){return{$$typeof:r,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function V(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ee){return Y[Ee]})}var M=/\/+/g;function k(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):Y.toString(36)}function me(L,Y,Ee,De,ye){var se=typeof L;(se==="undefined"||se==="boolean")&&(L=null);var J=!1;if(L===null)J=!0;else switch(se){case"string":case"number":J=!0;break;case"object":switch(L.$$typeof){case r:case e:J=!0}}if(J)return J=L,ye=ye(J),L=De===""?"."+k(J,0):De,Q(ye)?(Ee="",L!=null&&(Ee=L.replace(M,"$&/")+"/"),me(ye,Y,Ee,"",function(Ae){return Ae})):ye!=null&&(D(ye)&&(ye=x(ye,Ee+(!ye.key||J&&J.key===ye.key?"":(""+ye.key).replace(M,"$&/")+"/")+L)),Y.push(ye)),1;if(J=0,De=De===""?".":De+":",Q(L))for(var ee=0;ee<L.length;ee++){se=L[ee];var ve=De+k(se,ee);J+=me(se,Y,Ee,ve,ye)}else if(ve=E(L),typeof ve=="function")for(L=ve.call(L),ee=0;!(se=L.next()).done;)se=se.value,ve=De+k(se,ee++),J+=me(se,Y,Ee,ve,ye);else if(se==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return J}function ue(L,Y,Ee){if(L==null)return L;var De=[],ye=0;return me(L,De,"","",function(se){return Y.call(Ee,se,ye++)}),De}function fe(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(Ee){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ee)},function(Ee){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ee)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var ce={current:null},te={transition:null},re={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:te,ReactCurrentOwner:U};function ne(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:ue,forEach:function(L,Y,Ee){ue(L,function(){Y.apply(this,arguments)},Ee)},count:function(L){var Y=0;return ue(L,function(){Y++}),Y},toArray:function(L){return ue(L,function(Y){return Y})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ze.Component=b,ze.Fragment=t,ze.Profiler=i,ze.PureComponent=q,ze.StrictMode=n,ze.Suspense=d,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,ze.act=ne,ze.cloneElement=function(L,Y,Ee){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var De=A({},L.props),ye=L.key,se=L.ref,J=L._owner;if(Y!=null){if(Y.ref!==void 0&&(se=Y.ref,J=U.current),Y.key!==void 0&&(ye=""+Y.key),L.type&&L.type.defaultProps)var ee=L.type.defaultProps;for(ve in Y)F.call(Y,ve)&&!R.hasOwnProperty(ve)&&(De[ve]=Y[ve]===void 0&&ee!==void 0?ee[ve]:Y[ve])}var ve=arguments.length-2;if(ve===1)De.children=Ee;else if(1<ve){ee=Array(ve);for(var Ae=0;Ae<ve;Ae++)ee[Ae]=arguments[Ae+2];De.children=ee}return{$$typeof:r,type:L.type,key:ye,ref:se,props:De,_owner:J}},ze.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},ze.createElement=I,ze.createFactory=function(L){var Y=I.bind(null,L);return Y.type=L,Y},ze.createRef=function(){return{current:null}},ze.forwardRef=function(L){return{$$typeof:c,render:L}},ze.isValidElement=D,ze.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:fe}},ze.memo=function(L,Y){return{$$typeof:p,type:L,compare:Y===void 0?null:Y}},ze.startTransition=function(L){var Y=te.transition;te.transition={};try{L()}finally{te.transition=Y}},ze.unstable_act=ne,ze.useCallback=function(L,Y){return ce.current.useCallback(L,Y)},ze.useContext=function(L){return ce.current.useContext(L)},ze.useDebugValue=function(){},ze.useDeferredValue=function(L){return ce.current.useDeferredValue(L)},ze.useEffect=function(L,Y){return ce.current.useEffect(L,Y)},ze.useId=function(){return ce.current.useId()},ze.useImperativeHandle=function(L,Y,Ee){return ce.current.useImperativeHandle(L,Y,Ee)},ze.useInsertionEffect=function(L,Y){return ce.current.useInsertionEffect(L,Y)},ze.useLayoutEffect=function(L,Y){return ce.current.useLayoutEffect(L,Y)},ze.useMemo=function(L,Y){return ce.current.useMemo(L,Y)},ze.useReducer=function(L,Y,Ee){return ce.current.useReducer(L,Y,Ee)},ze.useRef=function(L){return ce.current.useRef(L)},ze.useState=function(L){return ce.current.useState(L)},ze.useSyncExternalStore=function(L,Y,Ee){return ce.current.useSyncExternalStore(L,Y,Ee)},ze.useTransition=function(){return ce.current.useTransition()},ze.version="18.3.1",ze}var Gy;function Bp(){return Gy||(Gy=1,Of.exports=bI()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function VI(){if(Ky)return Sl;Ky=1;var r=Bp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var g,_={},E=null,C=null;p!==void 0&&(E=""+p),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(C=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(_[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)_[g]===void 0&&(_[g]=d[g]);return{$$typeof:e,type:c,key:E,ref:C,props:_,_owner:i.current}}return Sl.Fragment=t,Sl.jsx=u,Sl.jsxs=u,Sl}var Hy;function MI(){return Hy||(Hy=1,Mf.exports=VI()),Mf.exports}var T=MI(),he=Bp(),Oc={},Ff={exports:{}},xn={},Lf={exports:{}},jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function OI(){return Qy||(Qy=1,function(r){function e(te,re){var ne=te.length;te.push(re);e:for(;0<ne;){var L=ne-1>>>1,Y=te[L];if(0<i(Y,re))te[L]=re,te[ne]=Y,ne=L;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var re=te[0],ne=te.pop();if(ne!==re){te[0]=ne;e:for(var L=0,Y=te.length,Ee=Y>>>1;L<Ee;){var De=2*(L+1)-1,ye=te[De],se=De+1,J=te[se];if(0>i(ye,ne))se<Y&&0>i(J,ye)?(te[L]=J,te[se]=ne,L=se):(te[L]=ye,te[De]=ne,L=De);else if(se<Y&&0>i(J,ne))te[L]=J,te[se]=ne,L=se;else break e}}return re}function i(te,re){var ne=te.sortIndex-re.sortIndex;return ne!==0?ne:te.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],g=1,_=null,E=3,C=!1,A=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var re=t(p);re!==null;){if(re.callback===null)n(p);else if(re.startTime<=te)n(p),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(p)}}function Q(te){if(P=!1,$(te),!A)if(t(d)!==null)A=!0,fe(F);else{var re=t(p);re!==null&&ce(Q,re.startTime-te)}}function F(te,re){A=!1,P&&(P=!1,B(I),I=-1),C=!0;var ne=E;try{for($(re),_=t(d);_!==null&&(!(_.expirationTime>re)||te&&!V());){var L=_.callback;if(typeof L=="function"){_.callback=null,E=_.priorityLevel;var Y=L(_.expirationTime<=re);re=r.unstable_now(),typeof Y=="function"?_.callback=Y:_===t(d)&&n(d),$(re)}else n(d);_=t(d)}if(_!==null)var Ee=!0;else{var De=t(p);De!==null&&ce(Q,De.startTime-re),Ee=!1}return Ee}finally{_=null,E=ne,C=!1}}var U=!1,R=null,I=-1,x=5,D=-1;function V(){return!(r.unstable_now()-D<x)}function M(){if(R!==null){var te=r.unstable_now();D=te;var re=!0;try{re=R(!0,te)}finally{re?k():(U=!1,R=null)}}else U=!1}var k;if(typeof q=="function")k=function(){q(M)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ue=me.port2;me.port1.onmessage=M,k=function(){ue.postMessage(null)}}else k=function(){b(M,0)};function fe(te){R=te,U||(U=!0,k())}function ce(te,re){I=b(function(){te(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){A||C||(A=!0,fe(F))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(te){switch(E){case 1:case 2:case 3:var re=3;break;default:re=E}var ne=E;E=re;try{return te()}finally{E=ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,re){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=E;E=te;try{return re()}finally{E=ne}},r.unstable_scheduleCallback=function(te,re,ne){var L=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?L+ne:L):ne=L,te){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ne+Y,te={id:g++,callback:re,priorityLevel:te,startTime:ne,expirationTime:Y,sortIndex:-1},ne>L?(te.sortIndex=ne,e(p,te),t(d)===null&&te===t(p)&&(P?(B(I),I=-1):P=!0,ce(Q,ne-L))):(te.sortIndex=Y,e(d,te),A||C||(A=!0,fe(F))),te},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(te){var re=E;return function(){var ne=E;E=re;try{return te.apply(this,arguments)}finally{E=ne}}}}(jf)),jf}var Xy;function FI(){return Xy||(Xy=1,Lf.exports=OI()),Lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function LI(){if(Yy)return xn;Yy=1;var r=Bp(),e=FI();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){u(s,o),u(s+"Capture",o)}function u(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function E(s){return d.call(_,s)?!0:d.call(g,s)?!1:p.test(s)?_[s]=!0:(g[s]=!0,!1)}function C(s,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function A(s,o,l,f){if(o===null||typeof o>"u"||C(s,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function P(s,o,l,f,m,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new P(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];b[o]=new P(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new P(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new P(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new P(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new P(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new P(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new P(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new P(s,5,!1,s.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function q(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(B,q);b[o]=new P(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(B,q);b[o]=new P(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(B,q);b[o]=new P(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new P(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new P(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,o,l,f){var m=b.hasOwnProperty(o)?b[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(A(o,l,m,f)&&(l=null),f||m===null?E(o)&&(l===null?s.removeAttribute(o):s.setAttribute(o,""+l)):m.mustUseProperty?s[m.propertyName]=l===null?m.type===3?!1:"":l:(o=m.attributeName,f=m.attributeNamespace,l===null?s.removeAttribute(o):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?s.setAttributeNS(f,o,l):s.setAttribute(o,l))))}var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),U=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),te=Symbol.iterator;function re(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Object.assign,L;function Y(s){if(L===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);L=o&&o[1]||""}return`
`+L+s}var Ee=!1;function De(s,o){if(!s||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(s,[],o)}else{try{o.call()}catch(X){f=X}s.call(o.prototype)}else{try{throw Error()}catch(X){f=X}s()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var m=X.stack.split(`
`),v=f.stack.split(`
`),S=m.length-1,O=v.length-1;1<=S&&0<=O&&m[S]!==v[O];)O--;for(;1<=S&&0<=O;S--,O--)if(m[S]!==v[O]){if(S!==1||O!==1)do if(S--,O--,0>O||m[S]!==v[O]){var j=`
`+m[S].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=S&&0<=O);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Y(s):""}function ye(s){switch(s.tag){case 5:return Y(s.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return s=De(s.type,!1),s;case 11:return s=De(s.type.render,!1),s;case 1:return s=De(s.type,!0),s;default:return""}}function se(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case U:return"Portal";case x:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case me:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case D:return(s._context.displayName||"Context")+".Provider";case M:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ue:return o=s.displayName||null,o!==null?o:se(s.type)||"Memo";case fe:o=s._payload,s=s._init;try{return se(s(o))}catch{}}return null}function J(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ee(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ve(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ae(s){var o=ve(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Be(s){s._valueTracker||(s._valueTracker=Ae(s))}function $e(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return s&&(f=ve(s)?s.checked?"true":"false":s.value),s=f,s!==l?(o.setValue(s),!0):!1}function Ze(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function je(s,o){var l=o.checked;return ne({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function kn(s,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=ee(o.value!=null?o.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ps(s,o){o=o.checked,o!=null&&$(s,"checked",o,!1)}function Mr(s,o){Ps(s,o);var l=ee(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Yn(s,o.type,l):o.hasOwnProperty("defaultValue")&&Yn(s,o.type,ee(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Or(s,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,l||o===s.value||(s.value=o),s.defaultValue=o}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function Yn(s,o,l){(o!=="number"||Ze(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var dn=Array.isArray;function Dn(s,o,l,f){if(s=s.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=o.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&f&&(s[l].defaultSelected=!0)}else{for(l=""+ee(l),o=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function Tt(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function en(s,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(dn(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}s._wrapperState={initialValue:ee(l)}}function Xe(s,o){var l=ee(o.value),f=ee(o.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),o.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function bn(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function ut(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?ut(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var _n,ss=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,l,f,m)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(_n=_n||document.createElement("div"),_n.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=_n.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Vn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mn=["Webkit","ms","Moz","O"];Object.keys(Zn).forEach(function(s){Mn.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Zn[o]=Zn[s]})});function Fr(s,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Zn.hasOwnProperty(s)&&Zn[s]?(""+o).trim():o+"px"}function Lr(s,o){s=s.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=Fr(l,o[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,m):s[l]=m}}var Ti=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(s,o){if(o){if(Ti[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Oe(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Je=null;function ot(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fr=null,Ft=null,On=null;function pr(s){if(s=ul(s)){if(typeof fr!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Yu(o),fr(s.stateNode,s.type,o))}}function Fn(s){Ft?On?On.push(s):On=[s]:Ft=s}function Ii(){if(Ft){var s=Ft,o=On;if(On=Ft=null,pr(s),o)for(s=0;s<o.length;s++)pr(o[s])}}function is(s,o){return s(o)}function Si(){}var Ln=!1;function Ci(s,o,l){if(Ln)return s(o,l);Ln=!0;try{return is(s,o,l)}finally{Ln=!1,(Ft!==null||On!==null)&&(Si(),Ii())}}function pt(s,o){var l=s.stateNode;if(l===null)return null;var f=Yu(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var xt=!1;if(c)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){xt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{xt=!1}function Jn(s,o,l,f,m,v,S,O,j){var X=Array.prototype.slice.call(arguments,3);try{o.apply(l,X)}catch(le){this.onError(le)}}var mr=!1,jr=null,gr=!1,$a=null,ld={onError:function(s){mr=!0,jr=s}};function To(s,o,l,f,m,v,S,O,j){mr=!1,jr=null,Jn.apply(ld,arguments)}function Tu(s,o,l,f,m,v,S,O,j){if(To.apply(this,arguments),mr){if(mr){var X=jr;mr=!1,jr=null}else throw Error(t(198));gr||(gr=!0,$a=X)}}function yr(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function Ai(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function vr(s){if(yr(s)!==s)throw Error(t(188))}function Iu(s){var o=s.alternate;if(!o){if(o=yr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var l=s,f=o;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return vr(m),s;if(v===f)return vr(m),o;v=v.sibling}throw Error(t(188))}if(l.return!==f.return)l=m,f=v;else{for(var S=!1,O=m.child;O;){if(O===l){S=!0,l=m,f=v;break}if(O===f){S=!0,f=m,l=v;break}O=O.sibling}if(!S){for(O=v.child;O;){if(O===l){S=!0,l=v,f=m;break}if(O===f){S=!0,f=v,l=m;break}O=O.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:o}function qa(s){return s=Iu(s),s!==null?Io(s):null}function Io(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Io(s);if(o!==null)return o;s=s.sibling}return null}var So=e.unstable_scheduleCallback,Wa=e.unstable_cancelCallback,Su=e.unstable_shouldYield,ud=e.unstable_requestPaint,at=e.unstable_now,Cu=e.unstable_getCurrentPriorityLevel,xi=e.unstable_ImmediatePriority,ks=e.unstable_UserBlockingPriority,er=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Au=e.unstable_IdlePriority,Ni=null,jn=null;function xu(s){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Ni,s,void 0,(s.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Ru,Ka=Math.log,Nu=Math.LN2;function Ru(s){return s>>>=0,s===0?32:31-(Ka(s)/Nu|0)|0}var Co=64,Ao=4194304;function Ds(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ri(s,o){var l=s.pendingLanes;if(l===0)return 0;var f=0,m=s.suspendedLanes,v=s.pingedLanes,S=l&268435455;if(S!==0){var O=S&~m;O!==0?f=Ds(O):(v&=S,v!==0&&(f=Ds(v)))}else S=l&~m,S!==0?f=Ds(S):v!==0&&(f=Ds(v));if(f===0)return 0;if(o!==0&&o!==f&&!(o&m)&&(m=f&-f,v=o&-o,m>=v||m===16&&(v&4194240)!==0))return o;if(f&4&&(f|=l&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)l=31-fn(o),m=1<<l,f|=s[l],o&=~m;return f}function cd(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(s,o){for(var l=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-fn(v),O=1<<S,j=m[S];j===-1?(!(O&l)||O&f)&&(m[S]=cd(O,o)):j<=o&&(s.expiredLanes|=O),v&=~O}}function Bn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Pi(){var s=Co;return Co<<=1,!(Co&4194240)&&(Co=64),s}function bs(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function Vs(s,o,l){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-fn(o),s[o]=l}function st(s,o){var l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var m=31-fn(l),v=1<<m;o[m]=0,f[m]=-1,s[m]=-1,l&=~v}}function Ms(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var f=31-fn(l),m=1<<f;m&o|s[f]&o&&(s[f]|=o),l&=~m}}var qe=0;function Os(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Pu,xo,ku,Du,bu,Ha=!1,Br=[],Qt=null,_r=null,wr=null,Fs=new Map,tr=new Map,zr=[],hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(s,o){switch(s){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Fs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(o.pointerId)}}function wn(s,o,l,f,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},o!==null&&(o=ul(o),o!==null&&xo(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function dd(s,o,l,f,m){switch(o){case"focusin":return Qt=wn(Qt,s,o,l,f,m),!0;case"dragenter":return _r=wn(_r,s,o,l,f,m),!0;case"mouseover":return wr=wn(wr,s,o,l,f,m),!0;case"pointerover":var v=m.pointerId;return Fs.set(v,wn(Fs.get(v)||null,s,o,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,tr.set(v,wn(tr.get(v)||null,s,o,l,f,m)),!0}return!1}function Mu(s){var o=Mi(s.target);if(o!==null){var l=yr(o);if(l!==null){if(o=l.tag,o===13){if(o=Ai(l),o!==null){s.blockedOn=o,bu(s.priority,function(){ku(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function as(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=No(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);Je=f,l.target.dispatchEvent(f),Je=null}else return o=ul(l),o!==null&&xo(o),s.blockedOn=l,!1;o.shift()}return!0}function ki(s,o,l){as(s)&&l.delete(o)}function Ou(){Ha=!1,Qt!==null&&as(Qt)&&(Qt=null),_r!==null&&as(_r)&&(_r=null),wr!==null&&as(wr)&&(wr=null),Fs.forEach(ki),tr.forEach(ki)}function Er(s,o){s.blockedOn===o&&(s.blockedOn=null,Ha||(Ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ou)))}function Tr(s){function o(m){return Er(m,s)}if(0<Br.length){Er(Br[0],s);for(var l=1;l<Br.length;l++){var f=Br[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Qt!==null&&Er(Qt,s),_r!==null&&Er(_r,s),wr!==null&&Er(wr,s),Fs.forEach(o),tr.forEach(o),l=0;l<zr.length;l++)f=zr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<zr.length&&(l=zr[0],l.blockedOn===null);)Mu(l),l.blockedOn===null&&zr.shift()}var ls=Q.ReactCurrentBatchConfig,Ls=!0;function mt(s,o,l,f){var m=qe,v=ls.transition;ls.transition=null;try{qe=1,Qa(s,o,l,f)}finally{qe=m,ls.transition=v}}function fd(s,o,l,f){var m=qe,v=ls.transition;ls.transition=null;try{qe=4,Qa(s,o,l,f)}finally{qe=m,ls.transition=v}}function Qa(s,o,l,f){if(Ls){var m=No(s,o,l,f);if(m===null)Sd(s,o,f,Di,l),Vu(s,f);else if(dd(m,s,o,l,f))f.stopPropagation();else if(Vu(s,f),o&4&&-1<hd.indexOf(s)){for(;m!==null;){var v=ul(m);if(v!==null&&Pu(v),v=No(s,o,l,f),v===null&&Sd(s,o,f,Di,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else Sd(s,o,f,null,l)}}var Di=null;function No(s,o,l,f){if(Di=null,s=ot(f),s=Mi(s),s!==null)if(o=yr(s),o===null)s=null;else if(l=o.tag,l===13){if(s=Ai(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Di=s,null}function Xa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cu()){case xi:return 1;case ks:return 4;case er:case Ga:return 16;case Au:return 536870912;default:return 16}default:return 16}}var zn=null,Ro=null,En=null;function Ya(){if(En)return En;var s,o=Ro,l=o.length,f,m="value"in zn?zn.value:zn.textContent,v=m.length;for(s=0;s<l&&o[s]===m[s];s++);var S=l-s;for(f=1;f<=S&&o[l-f]===m[v-f];f++);return En=m.slice(s,1<f?1-f:void 0)}function Po(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ur(){return!0}function Za(){return!1}function Xt(s){function o(l,f,m,v,S){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(l=s[O],this[O]=l?l(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ur:Za,this.isPropagationStopped=Za,this}return ne(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),o}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Xt(Ir),$r=ne({},Ir,{view:0,detail:0}),pd=Xt($r),Do,us,js,bi=ne({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==js&&(js&&s.type==="mousemove"?(Do=s.screenX-js.screenX,us=s.screenY-js.screenY):us=Do=0,js=s),Do)},movementY:function(s){return"movementY"in s?s.movementY:us}}),bo=Xt(bi),Ja=ne({},bi,{dataTransfer:0}),Fu=Xt(Ja),Vo=ne({},$r,{relatedTarget:0}),Mo=Xt(Vo),Lu=ne({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=Xt(Lu),ju=ne({},Ir,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bu=Xt(ju),zu=ne({},Ir,{data:0}),el=Xt(zu),Oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Uu[s])?!!o[s]:!1}function qr(){return $u}var h=ne({},$r,{key:function(s){if(s.key){var o=Oo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Po(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?pn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(s){return s.type==="keypress"?Po(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Po(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Xt(h),w=ne({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Xt(w),G=ne({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),Z=Xt(G),ge=ne({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Xt(ge),Lt=ne({},bi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=Xt(Lt),Ut=[9,13,27,32],Vt=c&&"CompositionEvent"in window,nr=null;c&&"documentMode"in document&&(nr=document.documentMode);var Un=c&&"TextEvent"in window&&!nr,Vi=c&&(!Vt||nr&&8<nr&&11>=nr),Fo=" ",Lm=!1;function jm(s,o){switch(s){case"keyup":return Ut.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function RT(s,o){switch(s){case"compositionend":return Bm(o);case"keypress":return o.which!==32?null:(Lm=!0,Fo);case"textInput":return s=o.data,s===Fo&&Lm?null:s;default:return null}}function PT(s,o){if(Lo)return s==="compositionend"||!Vt&&jm(s,o)?(s=Ya(),En=Ro=zn=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vi&&o.locale!=="ko"?null:o.data;default:return null}}var kT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!kT[s.type]:o==="textarea"}function Um(s,o,l,f){Fn(f),o=Hu(o,"onChange"),0<o.length&&(l=new ko("onChange","change",null,l,f),s.push({event:l,listeners:o}))}var tl=null,nl=null;function DT(s){og(s,0)}function qu(s){var o=$o(s);if($e(o))return s}function bT(s,o){if(s==="change")return o}var $m=!1;if(c){var md;if(c){var gd="oninput"in document;if(!gd){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),gd=typeof qm.oninput=="function"}md=gd}else md=!1;$m=md&&(!document.documentMode||9<document.documentMode)}function Wm(){tl&&(tl.detachEvent("onpropertychange",Gm),nl=tl=null)}function Gm(s){if(s.propertyName==="value"&&qu(nl)){var o=[];Um(o,nl,s,ot(s)),Ci(DT,o)}}function VT(s,o,l){s==="focusin"?(Wm(),tl=o,nl=l,tl.attachEvent("onpropertychange",Gm)):s==="focusout"&&Wm()}function MT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(nl)}function OT(s,o){if(s==="click")return qu(o)}function FT(s,o){if(s==="input"||s==="change")return qu(o)}function LT(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Sr=typeof Object.is=="function"?Object.is:LT;function rl(s,o){if(Sr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!d.call(o,m)||!Sr(s[m],o[m]))return!1}return!0}function Km(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hm(s,o){var l=Km(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=o&&f>=o)return{node:l,offset:o-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Km(l)}}function Qm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Qm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Xm(){for(var s=window,o=Ze();o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Ze(s.document)}return o}function yd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function jT(s){var o=Xm(),l=s.focusedElem,f=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&Qm(l.ownerDocument.documentElement,l)){if(f!==null&&yd(l)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(s,l.value.length);else if(s=(o=l.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=l.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!s.extend&&v>f&&(m=f,f=v,v=m),m=Hm(l,v);var S=Hm(l,f);m&&S&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),v>f?(s.addRange(o),s.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),s.addRange(o)))}}for(o=[],s=l;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)s=o[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var BT=c&&"documentMode"in document&&11>=document.documentMode,jo=null,vd=null,sl=null,_d=!1;function Ym(s,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_d||jo==null||jo!==Ze(f)||(f=jo,"selectionStart"in f&&yd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sl&&rl(sl,f)||(sl=f,f=Hu(vd,"onSelect"),0<f.length&&(o=new ko("onSelect","select",null,o,l),s.push({event:o,listeners:f}),o.target=jo)))}function Wu(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Bo={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},wd={},Zm={};c&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Gu(s){if(wd[s])return wd[s];if(!Bo[s])return s;var o=Bo[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in Zm)return wd[s]=o[l];return s}var Jm=Gu("animationend"),eg=Gu("animationiteration"),tg=Gu("animationstart"),ng=Gu("transitionend"),rg=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(s,o){rg.set(s,o),a(o,[s])}for(var Ed=0;Ed<sg.length;Ed++){var Td=sg[Ed],zT=Td.toLowerCase(),UT=Td[0].toUpperCase()+Td.slice(1);Bs(zT,"on"+UT)}Bs(Jm,"onAnimationEnd"),Bs(eg,"onAnimationIteration"),Bs(tg,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(ng,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function ig(s,o,l){var f=s.type||"unknown-event";s.currentTarget=l,Tu(f,o,void 0,s),s.currentTarget=null}function og(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],m=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var S=f.length-1;0<=S;S--){var O=f[S],j=O.instance,X=O.currentTarget;if(O=O.listener,j!==v&&m.isPropagationStopped())break e;ig(m,O,X),v=j}else for(S=0;S<f.length;S++){if(O=f[S],j=O.instance,X=O.currentTarget,O=O.listener,j!==v&&m.isPropagationStopped())break e;ig(m,O,X),v=j}}}if(gr)throw s=$a,gr=!1,$a=null,s}function ht(s,o){var l=o[Pd];l===void 0&&(l=o[Pd]=new Set);var f=s+"__bubble";l.has(f)||(ag(o,s,2,!1),l.add(f))}function Id(s,o,l){var f=0;o&&(f|=4),ag(l,s,f,o)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function ol(s){if(!s[Ku]){s[Ku]=!0,n.forEach(function(l){l!=="selectionchange"&&($T.has(l)||Id(l,!1,s),Id(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ku]||(o[Ku]=!0,Id("selectionchange",!1,o))}}function ag(s,o,l,f){switch(Xa(o)){case 1:var m=mt;break;case 4:m=fd;break;default:m=Qa}l=m.bind(null,o,l,s),m=void 0,!xt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,l,{capture:!0,passive:m}):s.addEventListener(o,l,!0):m!==void 0?s.addEventListener(o,l,{passive:m}):s.addEventListener(o,l,!1)}function Sd(s,o,l,f,m){var v=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var O=f.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;S=S.return}for(;O!==null;){if(S=Mi(O),S===null)return;if(j=S.tag,j===5||j===6){f=v=S;continue e}O=O.parentNode}}f=f.return}Ci(function(){var X=v,le=ot(l),de=[];e:{var oe=rg.get(s);if(oe!==void 0){var we=ko,Ie=s;switch(s){case"keypress":if(Po(l)===0)break e;case"keydown":case"keyup":we=y;break;case"focusin":Ie="focus",we=Mo;break;case"focusout":Ie="blur",we=Mo;break;case"beforeblur":case"afterblur":we=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Z;break;case Jm:case eg:case tg:we=cs;break;case ng:we=et;break;case"scroll":we=pd;break;case"wheel":we=Ge;break;case"copy":case"cut":case"paste":we=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=N}var xe=(o&4)!==0,Rt=!xe&&s==="scroll",K=xe?oe!==null?oe+"Capture":null:oe;xe=[];for(var z=X,H;z!==null;){H=z;var pe=H.stateNode;if(H.tag===5&&pe!==null&&(H=pe,K!==null&&(pe=pt(z,K),pe!=null&&xe.push(al(z,pe,H)))),Rt)break;z=z.return}0<xe.length&&(oe=new we(oe,Ie,null,l,le),de.push({event:oe,listeners:xe}))}}if(!(o&7)){e:{if(oe=s==="mouseover"||s==="pointerover",we=s==="mouseout"||s==="pointerout",oe&&l!==Je&&(Ie=l.relatedTarget||l.fromElement)&&(Mi(Ie)||Ie[hs]))break e;if((we||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,we?(Ie=l.relatedTarget||l.toElement,we=X,Ie=Ie?Mi(Ie):null,Ie!==null&&(Rt=yr(Ie),Ie!==Rt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(we=null,Ie=X),we!==Ie)){if(xe=bo,pe="onMouseLeave",K="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(xe=N,pe="onPointerLeave",K="onPointerEnter",z="pointer"),Rt=we==null?oe:$o(we),H=Ie==null?oe:$o(Ie),oe=new xe(pe,z+"leave",we,l,le),oe.target=Rt,oe.relatedTarget=H,pe=null,Mi(le)===X&&(xe=new xe(K,z+"enter",Ie,l,le),xe.target=H,xe.relatedTarget=Rt,pe=xe),Rt=pe,we&&Ie)t:{for(xe=we,K=Ie,z=0,H=xe;H;H=zo(H))z++;for(H=0,pe=K;pe;pe=zo(pe))H++;for(;0<z-H;)xe=zo(xe),z--;for(;0<H-z;)K=zo(K),H--;for(;z--;){if(xe===K||K!==null&&xe===K.alternate)break t;xe=zo(xe),K=zo(K)}xe=null}else xe=null;we!==null&&lg(de,oe,we,xe,!1),Ie!==null&&Rt!==null&&lg(de,Rt,Ie,xe,!0)}}e:{if(oe=X?$o(X):window,we=oe.nodeName&&oe.nodeName.toLowerCase(),we==="select"||we==="input"&&oe.type==="file")var Re=bT;else if(zm(oe))if($m)Re=FT;else{Re=MT;var Ve=VT}else(we=oe.nodeName)&&we.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Re=OT);if(Re&&(Re=Re(s,X))){Um(de,Re,l,le);break e}Ve&&Ve(s,oe,X),s==="focusout"&&(Ve=oe._wrapperState)&&Ve.controlled&&oe.type==="number"&&Yn(oe,"number",oe.value)}switch(Ve=X?$o(X):window,s){case"focusin":(zm(Ve)||Ve.contentEditable==="true")&&(jo=Ve,vd=X,sl=null);break;case"focusout":sl=vd=jo=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Ym(de,l,le);break;case"selectionchange":if(BT)break;case"keydown":case"keyup":Ym(de,l,le)}var Me;if(Vt)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Lo?jm(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Vi&&l.locale!=="ko"&&(Lo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Lo&&(Me=Ya()):(zn=le,Ro="value"in zn?zn.value:zn.textContent,Lo=!0)),Ve=Hu(X,Fe),0<Ve.length&&(Fe=new el(Fe,s,null,l,le),de.push({event:Fe,listeners:Ve}),Me?Fe.data=Me:(Me=Bm(l),Me!==null&&(Fe.data=Me)))),(Me=Un?RT(s,l):PT(s,l))&&(X=Hu(X,"onBeforeInput"),0<X.length&&(le=new el("onBeforeInput","beforeinput",null,l,le),de.push({event:le,listeners:X}),le.data=Me))}og(de,o)})}function al(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Hu(s,o){for(var l=o+"Capture",f=[];s!==null;){var m=s,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=pt(s,l),v!=null&&f.unshift(al(s,v,m)),v=pt(s,o),v!=null&&f.push(al(s,v,m))),s=s.return}return f}function zo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function lg(s,o,l,f,m){for(var v=o._reactName,S=[];l!==null&&l!==f;){var O=l,j=O.alternate,X=O.stateNode;if(j!==null&&j===f)break;O.tag===5&&X!==null&&(O=X,m?(j=pt(l,v),j!=null&&S.unshift(al(l,j,O))):m||(j=pt(l,v),j!=null&&S.push(al(l,j,O)))),l=l.return}S.length!==0&&s.push({event:o,listeners:S})}var qT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function ug(s){return(typeof s=="string"?s:""+s).replace(qT,`
`).replace(WT,"")}function Qu(s,o,l){if(o=ug(o),ug(s)!==o&&l)throw Error(t(425))}function Xu(){}var Cd=null,Ad=null;function xd(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,GT=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,KT=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(s){return cg.resolve(null).then(s).catch(HT)}:Nd;function HT(s){setTimeout(function(){throw s})}function Rd(s,o){var l=o,f=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){s.removeChild(m),Tr(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);Tr(o)}function zs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function hg(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Uo,ll="__reactProps$"+Uo,hs="__reactContainer$"+Uo,Pd="__reactEvents$"+Uo,QT="__reactListeners$"+Uo,XT="__reactHandles$"+Uo;function Mi(s){var o=s[Wr];if(o)return o;for(var l=s.parentNode;l;){if(o=l[hs]||l[Wr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=hg(s);s!==null;){if(l=s[Wr])return l;s=hg(s)}return o}s=l,l=s.parentNode}return null}function ul(s){return s=s[Wr]||s[hs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $o(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Yu(s){return s[ll]||null}var kd=[],qo=-1;function Us(s){return{current:s}}function dt(s){0>qo||(s.current=kd[qo],kd[qo]=null,qo--)}function lt(s,o){qo++,kd[qo]=s.current,s.current=o}var $s={},tn=Us($s),Tn=Us(!1),Oi=$s;function Wo(s,o){var l=s.type.contextTypes;if(!l)return $s;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=o[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function In(s){return s=s.childContextTypes,s!=null}function Zu(){dt(Tn),dt(tn)}function dg(s,o,l){if(tn.current!==$s)throw Error(t(168));lt(tn,o),lt(Tn,l)}function fg(s,o,l){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(t(108,J(s)||"Unknown",m));return ne({},l,f)}function Ju(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||$s,Oi=tn.current,lt(tn,s),lt(Tn,Tn.current),!0}function pg(s,o,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=fg(s,o,Oi),f.__reactInternalMemoizedMergedChildContext=s,dt(Tn),dt(tn),lt(tn,s)):dt(Tn),lt(Tn,l)}var ds=null,ec=!1,Dd=!1;function mg(s){ds===null?ds=[s]:ds.push(s)}function YT(s){ec=!0,mg(s)}function qs(){if(!Dd&&ds!==null){Dd=!0;var s=0,o=qe;try{var l=ds;for(qe=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}ds=null,ec=!1}catch(m){throw ds!==null&&(ds=ds.slice(s+1)),So(xi,qs),m}finally{qe=o,Dd=!1}}return null}var Go=[],Ko=0,tc=null,nc=0,rr=[],sr=0,Fi=null,fs=1,ps="";function Li(s,o){Go[Ko++]=nc,Go[Ko++]=tc,tc=s,nc=o}function gg(s,o,l){rr[sr++]=fs,rr[sr++]=ps,rr[sr++]=Fi,Fi=s;var f=fs;s=ps;var m=32-fn(f)-1;f&=~(1<<m),l+=1;var v=32-fn(o)+m;if(30<v){var S=m-m%5;v=(f&(1<<S)-1).toString(32),f>>=S,m-=S,fs=1<<32-fn(o)+m|l<<m|f,ps=v+s}else fs=1<<v|l<<m|f,ps=s}function bd(s){s.return!==null&&(Li(s,1),gg(s,1,0))}function Vd(s){for(;s===tc;)tc=Go[--Ko],Go[Ko]=null,nc=Go[--Ko],Go[Ko]=null;for(;s===Fi;)Fi=rr[--sr],rr[sr]=null,ps=rr[--sr],rr[sr]=null,fs=rr[--sr],rr[sr]=null}var $n=null,qn=null,gt=!1,Cr=null;function yg(s,o){var l=lr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=s,o=s.deletions,o===null?(s.deletions=[l],s.flags|=16):o.push(l)}function vg(s,o){switch(s.tag){case 5:var l=s.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,$n=s,qn=zs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,$n=s,qn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Fi!==null?{id:fs,overflow:ps}:null,s.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=lr(18,null,null,0),l.stateNode=o,l.return=s,s.child=l,$n=s,qn=null,!0):!1;default:return!1}}function Md(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(gt){var o=qn;if(o){var l=o;if(!vg(s,o)){if(Md(s))throw Error(t(418));o=zs(l.nextSibling);var f=$n;o&&vg(s,o)?yg(f,l):(s.flags=s.flags&-4097|2,gt=!1,$n=s)}}else{if(Md(s))throw Error(t(418));s.flags=s.flags&-4097|2,gt=!1,$n=s}}}function _g(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;$n=s}function rc(s){if(s!==$n)return!1;if(!gt)return _g(s),gt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!xd(s.type,s.memoizedProps)),o&&(o=qn)){if(Md(s))throw wg(),Error(t(418));for(;o;)yg(s,o),o=zs(o.nextSibling)}if(_g(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(o===0){qn=zs(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}s=s.nextSibling}qn=null}}else qn=$n?zs(s.stateNode.nextSibling):null;return!0}function wg(){for(var s=qn;s;)s=zs(s.nextSibling)}function Ho(){qn=$n=null,gt=!1}function Fd(s){Cr===null?Cr=[s]:Cr.push(s)}var ZT=Q.ReactCurrentBatchConfig;function cl(s,o,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var m=f,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var O=m.refs;S===null?delete O[v]:O[v]=S},o._stringRef=v,o)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function sc(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Eg(s){var o=s._init;return o(s._payload)}function Tg(s){function o(K,z){if(s){var H=K.deletions;H===null?(K.deletions=[z],K.flags|=16):H.push(z)}}function l(K,z){if(!s)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function f(K,z){for(K=new Map;z!==null;)z.key!==null?K.set(z.key,z):K.set(z.index,z),z=z.sibling;return K}function m(K,z){return K=Zs(K,z),K.index=0,K.sibling=null,K}function v(K,z,H){return K.index=H,s?(H=K.alternate,H!==null?(H=H.index,H<z?(K.flags|=2,z):H):(K.flags|=2,z)):(K.flags|=1048576,z)}function S(K){return s&&K.alternate===null&&(K.flags|=2),K}function O(K,z,H,pe){return z===null||z.tag!==6?(z=Rf(H,K.mode,pe),z.return=K,z):(z=m(z,H),z.return=K,z)}function j(K,z,H,pe){var Re=H.type;return Re===R?le(K,z,H.props.children,pe,H.key):z!==null&&(z.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&Eg(Re)===z.type)?(pe=m(z,H.props),pe.ref=cl(K,z,H),pe.return=K,pe):(pe=Nc(H.type,H.key,H.props,null,K.mode,pe),pe.ref=cl(K,z,H),pe.return=K,pe)}function X(K,z,H,pe){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Pf(H,K.mode,pe),z.return=K,z):(z=m(z,H.children||[]),z.return=K,z)}function le(K,z,H,pe,Re){return z===null||z.tag!==7?(z=Gi(H,K.mode,pe,Re),z.return=K,z):(z=m(z,H),z.return=K,z)}function de(K,z,H){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Rf(""+z,K.mode,H),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case F:return H=Nc(z.type,z.key,z.props,null,K.mode,H),H.ref=cl(K,null,z),H.return=K,H;case U:return z=Pf(z,K.mode,H),z.return=K,z;case fe:var pe=z._init;return de(K,pe(z._payload),H)}if(dn(z)||re(z))return z=Gi(z,K.mode,H,null),z.return=K,z;sc(K,z)}return null}function oe(K,z,H,pe){var Re=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Re!==null?null:O(K,z,""+H,pe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case F:return H.key===Re?j(K,z,H,pe):null;case U:return H.key===Re?X(K,z,H,pe):null;case fe:return Re=H._init,oe(K,z,Re(H._payload),pe)}if(dn(H)||re(H))return Re!==null?null:le(K,z,H,pe,null);sc(K,H)}return null}function we(K,z,H,pe,Re){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return K=K.get(H)||null,O(z,K,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case F:return K=K.get(pe.key===null?H:pe.key)||null,j(z,K,pe,Re);case U:return K=K.get(pe.key===null?H:pe.key)||null,X(z,K,pe,Re);case fe:var Ve=pe._init;return we(K,z,H,Ve(pe._payload),Re)}if(dn(pe)||re(pe))return K=K.get(H)||null,le(z,K,pe,Re,null);sc(z,pe)}return null}function Ie(K,z,H,pe){for(var Re=null,Ve=null,Me=z,Fe=z=0,Wt=null;Me!==null&&Fe<H.length;Fe++){Me.index>Fe?(Wt=Me,Me=null):Wt=Me.sibling;var Ye=oe(K,Me,H[Fe],pe);if(Ye===null){Me===null&&(Me=Wt);break}s&&Me&&Ye.alternate===null&&o(K,Me),z=v(Ye,z,Fe),Ve===null?Re=Ye:Ve.sibling=Ye,Ve=Ye,Me=Wt}if(Fe===H.length)return l(K,Me),gt&&Li(K,Fe),Re;if(Me===null){for(;Fe<H.length;Fe++)Me=de(K,H[Fe],pe),Me!==null&&(z=v(Me,z,Fe),Ve===null?Re=Me:Ve.sibling=Me,Ve=Me);return gt&&Li(K,Fe),Re}for(Me=f(K,Me);Fe<H.length;Fe++)Wt=we(Me,K,Fe,H[Fe],pe),Wt!==null&&(s&&Wt.alternate!==null&&Me.delete(Wt.key===null?Fe:Wt.key),z=v(Wt,z,Fe),Ve===null?Re=Wt:Ve.sibling=Wt,Ve=Wt);return s&&Me.forEach(function(Js){return o(K,Js)}),gt&&Li(K,Fe),Re}function xe(K,z,H,pe){var Re=re(H);if(typeof Re!="function")throw Error(t(150));if(H=Re.call(H),H==null)throw Error(t(151));for(var Ve=Re=null,Me=z,Fe=z=0,Wt=null,Ye=H.next();Me!==null&&!Ye.done;Fe++,Ye=H.next()){Me.index>Fe?(Wt=Me,Me=null):Wt=Me.sibling;var Js=oe(K,Me,Ye.value,pe);if(Js===null){Me===null&&(Me=Wt);break}s&&Me&&Js.alternate===null&&o(K,Me),z=v(Js,z,Fe),Ve===null?Re=Js:Ve.sibling=Js,Ve=Js,Me=Wt}if(Ye.done)return l(K,Me),gt&&Li(K,Fe),Re;if(Me===null){for(;!Ye.done;Fe++,Ye=H.next())Ye=de(K,Ye.value,pe),Ye!==null&&(z=v(Ye,z,Fe),Ve===null?Re=Ye:Ve.sibling=Ye,Ve=Ye);return gt&&Li(K,Fe),Re}for(Me=f(K,Me);!Ye.done;Fe++,Ye=H.next())Ye=we(Me,K,Fe,Ye.value,pe),Ye!==null&&(s&&Ye.alternate!==null&&Me.delete(Ye.key===null?Fe:Ye.key),z=v(Ye,z,Fe),Ve===null?Re=Ye:Ve.sibling=Ye,Ve=Ye);return s&&Me.forEach(function(kI){return o(K,kI)}),gt&&Li(K,Fe),Re}function Rt(K,z,H,pe){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case F:e:{for(var Re=H.key,Ve=z;Ve!==null;){if(Ve.key===Re){if(Re=H.type,Re===R){if(Ve.tag===7){l(K,Ve.sibling),z=m(Ve,H.props.children),z.return=K,K=z;break e}}else if(Ve.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&Eg(Re)===Ve.type){l(K,Ve.sibling),z=m(Ve,H.props),z.ref=cl(K,Ve,H),z.return=K,K=z;break e}l(K,Ve);break}else o(K,Ve);Ve=Ve.sibling}H.type===R?(z=Gi(H.props.children,K.mode,pe,H.key),z.return=K,K=z):(pe=Nc(H.type,H.key,H.props,null,K.mode,pe),pe.ref=cl(K,z,H),pe.return=K,K=pe)}return S(K);case U:e:{for(Ve=H.key;z!==null;){if(z.key===Ve)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){l(K,z.sibling),z=m(z,H.children||[]),z.return=K,K=z;break e}else{l(K,z);break}else o(K,z);z=z.sibling}z=Pf(H,K.mode,pe),z.return=K,K=z}return S(K);case fe:return Ve=H._init,Rt(K,z,Ve(H._payload),pe)}if(dn(H))return Ie(K,z,H,pe);if(re(H))return xe(K,z,H,pe);sc(K,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,z!==null&&z.tag===6?(l(K,z.sibling),z=m(z,H),z.return=K,K=z):(l(K,z),z=Rf(H,K.mode,pe),z.return=K,K=z),S(K)):l(K,z)}return Rt}var Qo=Tg(!0),Ig=Tg(!1),ic=Us(null),oc=null,Xo=null,Ld=null;function jd(){Ld=Xo=oc=null}function Bd(s){var o=ic.current;dt(ic),s._currentValue=o}function zd(s,o,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===l)break;s=s.return}}function Yo(s,o){oc=s,Ld=Xo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(Sn=!0),s.firstContext=null)}function ir(s){var o=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:o,next:null},Xo===null){if(oc===null)throw Error(t(308));Xo=s,oc.dependencies={lanes:0,firstContext:s}}else Xo=Xo.next=s;return o}var ji=null;function Ud(s){ji===null?ji=[s]:ji.push(s)}function Sg(s,o,l,f){var m=o.interleaved;return m===null?(l.next=l,Ud(o)):(l.next=m.next,m.next=l),o.interleaved=l,ms(s,f)}function ms(s,o){s.lanes|=o;var l=s.alternate;for(l!==null&&(l.lanes|=o),l=s,s=s.return;s!==null;)s.childLanes|=o,l=s.alternate,l!==null&&(l.childLanes|=o),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Ws=!1;function $d(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function gs(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Gs(s,o,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,Qe&2){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,ms(s,l)}return m=f.interleaved,m===null?(o.next=o,Ud(f)):(o.next=m.next,m.next=o),f.interleaved=o,ms(s,l)}function ac(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,Ms(s,l)}}function Ag(s,o){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?m=v=o:v=v.next=o}else m=v=o;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}function lc(s,o,l,f){var m=s.updateQueue;Ws=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var j=O,X=j.next;j.next=null,S===null?v=X:S.next=X,S=j;var le=s.alternate;le!==null&&(le=le.updateQueue,O=le.lastBaseUpdate,O!==S&&(O===null?le.firstBaseUpdate=X:O.next=X,le.lastBaseUpdate=j))}if(v!==null){var de=m.baseState;S=0,le=X=j=null,O=v;do{var oe=O.lane,we=O.eventTime;if((f&oe)===oe){le!==null&&(le=le.next={eventTime:we,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ie=s,xe=O;switch(oe=o,we=l,xe.tag){case 1:if(Ie=xe.payload,typeof Ie=="function"){de=Ie.call(we,de,oe);break e}de=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=xe.payload,oe=typeof Ie=="function"?Ie.call(we,de,oe):Ie,oe==null)break e;de=ne({},de,oe);break e;case 2:Ws=!0}}O.callback!==null&&O.lane!==0&&(s.flags|=64,oe=m.effects,oe===null?m.effects=[O]:oe.push(O))}else we={eventTime:we,lane:oe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},le===null?(X=le=we,j=de):le=le.next=we,S|=oe;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);if(le===null&&(j=de),m.baseState=j,m.firstBaseUpdate=X,m.lastBaseUpdate=le,o=m.shared.interleaved,o!==null){m=o;do S|=m.lane,m=m.next;while(m!==o)}else v===null&&(m.shared.lanes=0);Ui|=S,s.lanes=S,s.memoizedState=de}}function xg(s,o,l){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var hl={},Gr=Us(hl),dl=Us(hl),fl=Us(hl);function Bi(s){if(s===hl)throw Error(t(174));return s}function qd(s,o){switch(lt(fl,o),lt(dl,s),lt(Gr,hl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ct(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ct(o,s)}dt(Gr),lt(Gr,o)}function Zo(){dt(Gr),dt(dl),dt(fl)}function Ng(s){Bi(fl.current);var o=Bi(Gr.current),l=ct(o,s.type);o!==l&&(lt(dl,s),lt(Gr,l))}function Wd(s){dl.current===s&&(dt(Gr),dt(dl))}var _t=Us(0);function uc(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Gd=[];function Kd(){for(var s=0;s<Gd.length;s++)Gd[s]._workInProgressVersionPrimary=null;Gd.length=0}var cc=Q.ReactCurrentDispatcher,Hd=Q.ReactCurrentBatchConfig,zi=0,wt=null,jt=null,$t=null,hc=!1,pl=!1,ml=0,JT=0;function nn(){throw Error(t(321))}function Qd(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Sr(s[l],o[l]))return!1;return!0}function Xd(s,o,l,f,m,v){if(zi=v,wt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,cc.current=s===null||s.memoizedState===null?rI:sI,s=l(f,m),pl){v=0;do{if(pl=!1,ml=0,25<=v)throw Error(t(301));v+=1,$t=jt=null,o.updateQueue=null,cc.current=iI,s=l(f,m)}while(pl)}if(cc.current=pc,o=jt!==null&&jt.next!==null,zi=0,$t=jt=wt=null,hc=!1,o)throw Error(t(300));return s}function Yd(){var s=ml!==0;return ml=0,s}function Kr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?wt.memoizedState=$t=s:$t=$t.next=s,$t}function or(){if(jt===null){var s=wt.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var o=$t===null?wt.memoizedState:$t.next;if(o!==null)$t=o,jt=s;else{if(s===null)throw Error(t(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},$t===null?wt.memoizedState=$t=s:$t=$t.next=s}return $t}function gl(s,o){return typeof o=="function"?o(s):o}function Zd(s){var o=or(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=jt,m=f.baseQueue,v=l.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}f.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,f=f.baseState;var O=S=null,j=null,X=v;do{var le=X.lane;if((zi&le)===le)j!==null&&(j=j.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:s(f,X.action);else{var de={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};j===null?(O=j=de,S=f):j=j.next=de,wt.lanes|=le,Ui|=le}X=X.next}while(X!==null&&X!==v);j===null?S=f:j.next=O,Sr(f,o.memoizedState)||(Sn=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=j,l.lastRenderedState=f}if(s=l.interleaved,s!==null){m=s;do v=m.lane,wt.lanes|=v,Ui|=v,m=m.next;while(m!==s)}else m===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Jd(s){var o=or(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,m=l.pending,v=o.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do v=s(v,S.action),S=S.next;while(S!==m);Sr(v,o.memoizedState)||(Sn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,f]}function Rg(){}function Pg(s,o){var l=wt,f=or(),m=o(),v=!Sr(f.memoizedState,m);if(v&&(f.memoizedState=m,Sn=!0),f=f.queue,ef(bg.bind(null,l,f,s),[s]),f.getSnapshot!==o||v||$t!==null&&$t.memoizedState.tag&1){if(l.flags|=2048,yl(9,Dg.bind(null,l,f,m,o),void 0,null),qt===null)throw Error(t(349));zi&30||kg(l,o,m)}return m}function kg(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=wt.updateQueue,o===null?(o={lastEffect:null,stores:null},wt.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Dg(s,o,l,f){o.value=l,o.getSnapshot=f,Vg(o)&&Mg(s)}function bg(s,o,l){return l(function(){Vg(o)&&Mg(s)})}function Vg(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Sr(s,l)}catch{return!0}}function Mg(s){var o=ms(s,1);o!==null&&Rr(o,s,1,-1)}function Og(s){var o=Kr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:s},o.queue=s,s=s.dispatch=nI.bind(null,wt,s),[o.memoizedState,s]}function yl(s,o,l,f){return s={tag:s,create:o,destroy:l,deps:f,next:null},o=wt.updateQueue,o===null?(o={lastEffect:null,stores:null},wt.updateQueue=o,o.lastEffect=s.next=s):(l=o.lastEffect,l===null?o.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,o.lastEffect=s)),s}function Fg(){return or().memoizedState}function dc(s,o,l,f){var m=Kr();wt.flags|=s,m.memoizedState=yl(1|o,l,void 0,f===void 0?null:f)}function fc(s,o,l,f){var m=or();f=f===void 0?null:f;var v=void 0;if(jt!==null){var S=jt.memoizedState;if(v=S.destroy,f!==null&&Qd(f,S.deps)){m.memoizedState=yl(o,l,v,f);return}}wt.flags|=s,m.memoizedState=yl(1|o,l,v,f)}function Lg(s,o){return dc(8390656,8,s,o)}function ef(s,o){return fc(2048,8,s,o)}function jg(s,o){return fc(4,2,s,o)}function Bg(s,o){return fc(4,4,s,o)}function zg(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ug(s,o,l){return l=l!=null?l.concat([s]):null,fc(4,4,zg.bind(null,o,s),l)}function tf(){}function $g(s,o){var l=or();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(l.memoizedState=[s,o],s)}function qg(s,o){var l=or();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(s=s(),l.memoizedState=[s,o],s)}function Wg(s,o,l){return zi&21?(Sr(l,o)||(l=Pi(),wt.lanes|=l,Ui|=l,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,Sn=!0),s.memoizedState=l)}function eI(s,o){var l=qe;qe=l!==0&&4>l?l:4,s(!0);var f=Hd.transition;Hd.transition={};try{s(!1),o()}finally{qe=l,Hd.transition=f}}function Gg(){return or().memoizedState}function tI(s,o,l){var f=Xs(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},Kg(s))Hg(o,l);else if(l=Sg(s,o,l,f),l!==null){var m=gn();Rr(l,s,f,m),Qg(l,o,f)}}function nI(s,o,l){var f=Xs(s),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kg(s))Hg(o,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,O=v(S,l);if(m.hasEagerState=!0,m.eagerState=O,Sr(O,S)){var j=o.interleaved;j===null?(m.next=m,Ud(o)):(m.next=j.next,j.next=m),o.interleaved=m;return}}catch{}finally{}l=Sg(s,o,m,f),l!==null&&(m=gn(),Rr(l,s,f,m),Qg(l,o,f))}}function Kg(s){var o=s.alternate;return s===wt||o!==null&&o===wt}function Hg(s,o){pl=hc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function Qg(s,o,l){if(l&4194240){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,Ms(s,l)}}var pc={readContext:ir,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},rI={readContext:ir,useCallback:function(s,o){return Kr().memoizedState=[s,o===void 0?null:o],s},useContext:ir,useEffect:Lg,useImperativeHandle:function(s,o,l){return l=l!=null?l.concat([s]):null,dc(4194308,4,zg.bind(null,o,s),l)},useLayoutEffect:function(s,o){return dc(4194308,4,s,o)},useInsertionEffect:function(s,o){return dc(4,2,s,o)},useMemo:function(s,o){var l=Kr();return o=o===void 0?null:o,s=s(),l.memoizedState=[s,o],s},useReducer:function(s,o,l){var f=Kr();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=tI.bind(null,wt,s),[f.memoizedState,s]},useRef:function(s){var o=Kr();return s={current:s},o.memoizedState=s},useState:Og,useDebugValue:tf,useDeferredValue:function(s){return Kr().memoizedState=s},useTransition:function(){var s=Og(!1),o=s[0];return s=eI.bind(null,s[1]),Kr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,l){var f=wt,m=Kr();if(gt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),qt===null)throw Error(t(349));zi&30||kg(f,o,l)}m.memoizedState=l;var v={value:l,getSnapshot:o};return m.queue=v,Lg(bg.bind(null,f,v,s),[s]),f.flags|=2048,yl(9,Dg.bind(null,f,v,l,o),void 0,null),l},useId:function(){var s=Kr(),o=qt.identifierPrefix;if(gt){var l=ps,f=fs;l=(f&~(1<<32-fn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=ml++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=JT++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},sI={readContext:ir,useCallback:$g,useContext:ir,useEffect:ef,useImperativeHandle:Ug,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Zd,useRef:Fg,useState:function(){return Zd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=or();return Wg(o,jt.memoizedState,s)},useTransition:function(){var s=Zd(gl)[0],o=or().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:Pg,useId:Gg,unstable_isNewReconciler:!1},iI={readContext:ir,useCallback:$g,useContext:ir,useEffect:ef,useImperativeHandle:Ug,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Jd,useRef:Fg,useState:function(){return Jd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=or();return jt===null?o.memoizedState=s:Wg(o,jt.memoizedState,s)},useTransition:function(){var s=Jd(gl)[0],o=or().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:Pg,useId:Gg,unstable_isNewReconciler:!1};function Ar(s,o){if(s&&s.defaultProps){o=ne({},o),s=s.defaultProps;for(var l in s)o[l]===void 0&&(o[l]=s[l]);return o}return o}function nf(s,o,l,f){o=s.memoizedState,l=l(f,o),l=l==null?o:ne({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var mc={isMounted:function(s){return(s=s._reactInternals)?yr(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var f=gn(),m=Xs(s),v=gs(f,m);v.payload=o,l!=null&&(v.callback=l),o=Gs(s,v,m),o!==null&&(Rr(o,s,m,f),ac(o,s,m))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var f=gn(),m=Xs(s),v=gs(f,m);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Gs(s,v,m),o!==null&&(Rr(o,s,m,f),ac(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=gn(),f=Xs(s),m=gs(l,f);m.tag=2,o!=null&&(m.callback=o),o=Gs(s,m,f),o!==null&&(Rr(o,s,f,l),ac(o,s,f))}};function Xg(s,o,l,f,m,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,S):o.prototype&&o.prototype.isPureReactComponent?!rl(l,f)||!rl(m,v):!0}function Yg(s,o,l){var f=!1,m=$s,v=o.contextType;return typeof v=="object"&&v!==null?v=ir(v):(m=In(o)?Oi:tn.current,f=o.contextTypes,v=(f=f!=null)?Wo(s,m):$s),o=new o(l,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=v),o}function Zg(s,o,l,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==s&&mc.enqueueReplaceState(o,o.state,null)}function rf(s,o,l,f){var m=s.stateNode;m.props=l,m.state=s.memoizedState,m.refs={},$d(s);var v=o.contextType;typeof v=="object"&&v!==null?m.context=ir(v):(v=In(o)?Oi:tn.current,m.context=Wo(s,v)),m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(nf(s,o,v,l),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&mc.enqueueReplaceState(m,m.state,null),lc(s,l,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Jo(s,o){try{var l="",f=o;do l+=ye(f),f=f.return;while(f);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:m,digest:null}}function sf(s,o,l){return{value:s,source:null,stack:l??null,digest:o??null}}function of(s,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var oI=typeof WeakMap=="function"?WeakMap:Map;function Jg(s,o,l){l=gs(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){Tc||(Tc=!0,Ef=f),of(s,o)},l}function ey(s,o,l){l=gs(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;l.payload=function(){return f(m)},l.callback=function(){of(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){of(s,o),typeof f!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function ty(s,o,l){var f=s.pingCache;if(f===null){f=s.pingCache=new oI;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(l)||(m.add(l),s=wI.bind(null,s,o,l),o.then(s,s))}function ny(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function ry(s,o,l,f,m){return s.mode&1?(s.flags|=65536,s.lanes=m,s):(s===o?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=gs(-1,1),o.tag=2,Gs(l,o,1))),l.lanes|=1),s)}var aI=Q.ReactCurrentOwner,Sn=!1;function mn(s,o,l,f){o.child=s===null?Ig(o,null,l,f):Qo(o,s.child,l,f)}function sy(s,o,l,f,m){l=l.render;var v=o.ref;return Yo(o,m),f=Xd(s,o,l,f,v,m),l=Yd(),s!==null&&!Sn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ys(s,o,m)):(gt&&l&&bd(o),o.flags|=1,mn(s,o,f,m),o.child)}function iy(s,o,l,f,m){if(s===null){var v=l.type;return typeof v=="function"&&!Nf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,oy(s,o,v,f,m)):(s=Nc(l.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!(s.lanes&m)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(S,f)&&s.ref===o.ref)return ys(s,o,m)}return o.flags|=1,s=Zs(v,f),s.ref=o.ref,s.return=o,o.child=s}function oy(s,o,l,f,m){if(s!==null){var v=s.memoizedProps;if(rl(v,f)&&s.ref===o.ref)if(Sn=!1,o.pendingProps=f=v,(s.lanes&m)!==0)s.flags&131072&&(Sn=!0);else return o.lanes=s.lanes,ys(s,o,m)}return af(s,o,l,f,m)}function ay(s,o,l){var f=o.pendingProps,m=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ta,Wn),Wn|=l;else{if(!(l&1073741824))return s=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,lt(ta,Wn),Wn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,lt(ta,Wn),Wn|=f}else v!==null?(f=v.baseLanes|l,o.memoizedState=null):f=l,lt(ta,Wn),Wn|=f;return mn(s,o,m,l),o.child}function ly(s,o){var l=o.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function af(s,o,l,f,m){var v=In(l)?Oi:tn.current;return v=Wo(o,v),Yo(o,m),l=Xd(s,o,l,f,v,m),f=Yd(),s!==null&&!Sn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ys(s,o,m)):(gt&&f&&bd(o),o.flags|=1,mn(s,o,l,m),o.child)}function uy(s,o,l,f,m){if(In(l)){var v=!0;Ju(o)}else v=!1;if(Yo(o,m),o.stateNode===null)yc(s,o),Yg(o,l,f),rf(o,l,f,m),f=!0;else if(s===null){var S=o.stateNode,O=o.memoizedProps;S.props=O;var j=S.context,X=l.contextType;typeof X=="object"&&X!==null?X=ir(X):(X=In(l)?Oi:tn.current,X=Wo(o,X));var le=l.getDerivedStateFromProps,de=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==f||j!==X)&&Zg(o,S,f,X),Ws=!1;var oe=o.memoizedState;S.state=oe,lc(o,f,S,m),j=o.memoizedState,O!==f||oe!==j||Tn.current||Ws?(typeof le=="function"&&(nf(o,l,le,f),j=o.memoizedState),(O=Ws||Xg(o,l,O,f,oe,j,X))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=j),S.props=f,S.state=j,S.context=X,f=O):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,Cg(s,o),O=o.memoizedProps,X=o.type===o.elementType?O:Ar(o.type,O),S.props=X,de=o.pendingProps,oe=S.context,j=l.contextType,typeof j=="object"&&j!==null?j=ir(j):(j=In(l)?Oi:tn.current,j=Wo(o,j));var we=l.getDerivedStateFromProps;(le=typeof we=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==de||oe!==j)&&Zg(o,S,f,j),Ws=!1,oe=o.memoizedState,S.state=oe,lc(o,f,S,m);var Ie=o.memoizedState;O!==de||oe!==Ie||Tn.current||Ws?(typeof we=="function"&&(nf(o,l,we,f),Ie=o.memoizedState),(X=Ws||Xg(o,l,X,f,oe,Ie,j)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ie,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ie,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Ie),S.props=f,S.state=Ie,S.context=j,f=X):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),f=!1)}return lf(s,o,l,f,v,m)}function lf(s,o,l,f,m,v){ly(s,o);var S=(o.flags&128)!==0;if(!f&&!S)return m&&pg(o,l,!1),ys(s,o,v);f=o.stateNode,aI.current=o;var O=S&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&S?(o.child=Qo(o,s.child,null,v),o.child=Qo(o,null,O,v)):mn(s,o,O,v),o.memoizedState=f.state,m&&pg(o,l,!0),o.child}function cy(s){var o=s.stateNode;o.pendingContext?dg(s,o.pendingContext,o.pendingContext!==o.context):o.context&&dg(s,o.context,!1),qd(s,o.containerInfo)}function hy(s,o,l,f,m){return Ho(),Fd(m),o.flags|=256,mn(s,o,l,f),o.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(s){return{baseLanes:s,cachePool:null,transitions:null}}function dy(s,o,l){var f=o.pendingProps,m=_t.current,v=!1,S=(o.flags&128)!==0,O;if((O=S)||(O=s!==null&&s.memoizedState===null?!1:(m&2)!==0),O?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),lt(_t,m&1),s===null)return Od(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(S=f.children,s=f.fallback,v?(f=o.mode,v=o.child,S={mode:"hidden",children:S},!(f&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Rc(S,f,0,null),s=Gi(s,f,l,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=cf(l),o.memoizedState=uf,s):hf(o,S));if(m=s.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return lI(s,o,S,f,O,m,l);if(v){v=f.fallback,S=o.mode,m=s.child,O=m.sibling;var j={mode:"hidden",children:f.children};return!(S&1)&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=j,o.deletions=null):(f=Zs(m,j),f.subtreeFlags=m.subtreeFlags&14680064),O!==null?v=Zs(O,v):(v=Gi(v,S,l,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,S=s.child.memoizedState,S=S===null?cf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~l,o.memoizedState=uf,f}return v=s.child,s=v.sibling,f=Zs(v,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,s!==null&&(l=o.deletions,l===null?(o.deletions=[s],o.flags|=16):l.push(s)),o.child=f,o.memoizedState=null,f}function hf(s,o){return o=Rc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function gc(s,o,l,f){return f!==null&&Fd(f),Qo(o,s.child,null,l),s=hf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function lI(s,o,l,f,m,v,S){if(l)return o.flags&256?(o.flags&=-257,f=sf(Error(t(422))),gc(s,o,S,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=f.fallback,m=o.mode,f=Rc({mode:"visible",children:f.children},m,0,null),v=Gi(v,m,S,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,o.mode&1&&Qo(o,s.child,null,S),o.child.memoizedState=cf(S),o.memoizedState=uf,v);if(!(o.mode&1))return gc(s,o,S,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var O=f.dgst;return f=O,v=Error(t(419)),f=sf(v,f,void 0),gc(s,o,S,f)}if(O=(S&s.childLanes)!==0,Sn||O){if(f=qt,f!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|S)?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,ms(s,m),Rr(f,s,m,-1))}return xf(),f=sf(Error(t(421))),gc(s,o,S,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=EI.bind(null,s),m._reactRetry=o,null):(s=v.treeContext,qn=zs(m.nextSibling),$n=o,gt=!0,Cr=null,s!==null&&(rr[sr++]=fs,rr[sr++]=ps,rr[sr++]=Fi,fs=s.id,ps=s.overflow,Fi=o),o=hf(o,f.children),o.flags|=4096,o)}function fy(s,o,l){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),zd(s.return,o,l)}function df(s,o,l,f,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function py(s,o,l){var f=o.pendingProps,m=f.revealOrder,v=f.tail;if(mn(s,o,f.children,l),f=_t.current,f&2)f=f&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fy(s,l,o);else if(s.tag===19)fy(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(lt(_t,f),!(o.mode&1))o.memoizedState=null;else switch(m){case"forwards":for(l=o.child,m=null;l!==null;)s=l.alternate,s!==null&&uc(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),df(o,!1,m,l,v);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&uc(s)===null){o.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}df(o,!0,l,null,v);break;case"together":df(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yc(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ys(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Ui|=o.lanes,!(l&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,l=Zs(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Zs(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function uI(s,o,l){switch(o.tag){case 3:cy(o),Ho();break;case 5:Ng(o);break;case 1:In(o.type)&&Ju(o);break;case 4:qd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;lt(ic,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(lt(_t,_t.current&1),o.flags|=128,null):l&o.child.childLanes?dy(s,o,l):(lt(_t,_t.current&1),s=ys(s,o,l),s!==null?s.sibling:null);lt(_t,_t.current&1);break;case 19:if(f=(l&o.childLanes)!==0,s.flags&128){if(f)return py(s,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(_t,_t.current),f)break;return null;case 22:case 23:return o.lanes=0,ay(s,o,l)}return ys(s,o,l)}var my,ff,gy,yy;my=function(s,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ff=function(){},gy=function(s,o,l,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,Bi(Gr.current);var v=null;switch(l){case"input":m=je(s,m),f=je(s,f),v=[];break;case"select":m=ne({},m,{value:void 0}),f=ne({},f,{value:void 0}),v=[];break;case"textarea":m=Tt(s,m),f=Tt(s,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Xu)}ke(l,f);var S;l=null;for(X in m)if(!f.hasOwnProperty(X)&&m.hasOwnProperty(X)&&m[X]!=null)if(X==="style"){var O=m[X];for(S in O)O.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?v||(v=[]):(v=v||[]).push(X,null));for(X in f){var j=f[X];if(O=m!=null?m[X]:void 0,f.hasOwnProperty(X)&&j!==O&&(j!=null||O!=null))if(X==="style")if(O){for(S in O)!O.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in j)j.hasOwnProperty(S)&&O[S]!==j[S]&&(l||(l={}),l[S]=j[S])}else l||(v||(v=[]),v.push(X,l)),l=j;else X==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,O=O?O.__html:void 0,j!=null&&O!==j&&(v=v||[]).push(X,j)):X==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(X,""+j):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(j!=null&&X==="onScroll"&&ht("scroll",s),v||O===j||(v=[])):(v=v||[]).push(X,j))}l&&(v=v||[]).push("style",l);var X=v;(o.updateQueue=X)&&(o.flags|=4)}},yy=function(s,o,l,f){l!==f&&(o.flags|=4)};function vl(s,o){if(!gt)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function rn(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(o)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=l,o}function cI(s,o,l){var f=o.pendingProps;switch(Vd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(o),null;case 1:return In(o.type)&&Zu(),rn(o),null;case 3:return f=o.stateNode,Zo(),dt(Tn),dt(tn),Kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(rc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Cr!==null&&(Sf(Cr),Cr=null))),ff(s,o),rn(o),null;case 5:Wd(o);var m=Bi(fl.current);if(l=o.type,s!==null&&o.stateNode!=null)gy(s,o,l,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return rn(o),null}if(s=Bi(Gr.current),rc(o)){f=o.stateNode,l=o.type;var v=o.memoizedProps;switch(f[Wr]=o,f[ll]=v,s=(o.mode&1)!==0,l){case"dialog":ht("cancel",f),ht("close",f);break;case"iframe":case"object":case"embed":ht("load",f);break;case"video":case"audio":for(m=0;m<il.length;m++)ht(il[m],f);break;case"source":ht("error",f);break;case"img":case"image":case"link":ht("error",f),ht("load",f);break;case"details":ht("toggle",f);break;case"input":kn(f,v),ht("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},ht("invalid",f);break;case"textarea":en(f,v),ht("invalid",f)}ke(l,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var O=v[S];S==="children"?typeof O=="string"?f.textContent!==O&&(v.suppressHydrationWarning!==!0&&Qu(f.textContent,O,s),m=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(v.suppressHydrationWarning!==!0&&Qu(f.textContent,O,s),m=["children",""+O]):i.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&ht("scroll",f)}switch(l){case"input":Be(f),Or(f,v,!0);break;case"textarea":Be(f),bn(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Xu)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ut(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=S.createElement(l,{is:f.is}):(s=S.createElement(l),l==="select"&&(S=s,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):s=S.createElementNS(s,l),s[Wr]=o,s[ll]=f,my(s,o,!1,!1),o.stateNode=s;e:{switch(S=Oe(l,f),l){case"dialog":ht("cancel",s),ht("close",s),m=f;break;case"iframe":case"object":case"embed":ht("load",s),m=f;break;case"video":case"audio":for(m=0;m<il.length;m++)ht(il[m],s);m=f;break;case"source":ht("error",s),m=f;break;case"img":case"image":case"link":ht("error",s),ht("load",s),m=f;break;case"details":ht("toggle",s),m=f;break;case"input":kn(s,f),m=je(s,f),ht("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ne({},f,{value:void 0}),ht("invalid",s);break;case"textarea":en(s,f),m=Tt(s,f),ht("invalid",s);break;default:m=f}ke(l,m),O=m;for(v in O)if(O.hasOwnProperty(v)){var j=O[v];v==="style"?Lr(s,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&ss(s,j)):v==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&Vn(s,j):typeof j=="number"&&Vn(s,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?j!=null&&v==="onScroll"&&ht("scroll",s):j!=null&&$(s,v,j,S))}switch(l){case"input":Be(s),Or(s,f,!1);break;case"textarea":Be(s),bn(s);break;case"option":f.value!=null&&s.setAttribute("value",""+ee(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?Dn(s,!!f.multiple,v,!1):f.defaultValue!=null&&Dn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Xu)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return rn(o),null;case 6:if(s&&o.stateNode!=null)yy(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(l=Bi(fl.current),Bi(Gr.current),rc(o)){if(f=o.stateNode,l=o.memoizedProps,f[Wr]=o,(v=f.nodeValue!==l)&&(s=$n,s!==null))switch(s.tag){case 3:Qu(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qu(f.nodeValue,l,(s.mode&1)!==0)}v&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Wr]=o,o.stateNode=f}return rn(o),null;case 13:if(dt(_t),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(gt&&qn!==null&&o.mode&1&&!(o.flags&128))wg(),Ho(),o.flags|=98560,v=!1;else if(v=rc(o),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Wr]=o}else Ho(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;rn(o),v=!1}else Cr!==null&&(Sf(Cr),Cr=null),v=!0;if(!v)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(s===null||_t.current&1?Bt===0&&(Bt=3):xf())),o.updateQueue!==null&&(o.flags|=4),rn(o),null);case 4:return Zo(),ff(s,o),s===null&&ol(o.stateNode.containerInfo),rn(o),null;case 10:return Bd(o.type._context),rn(o),null;case 17:return In(o.type)&&Zu(),rn(o),null;case 19:if(dt(_t),v=o.memoizedState,v===null)return rn(o),null;if(f=(o.flags&128)!==0,S=v.rendering,S===null)if(f)vl(v,!1);else{if(Bt!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(S=uc(s),S!==null){for(o.flags|=128,vl(v,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)v=l,s=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return lt(_t,_t.current&1|2),o.child}s=s.sibling}v.tail!==null&&at()>na&&(o.flags|=128,f=!0,vl(v,!1),o.lanes=4194304)}else{if(!f)if(s=uc(S),s!==null){if(o.flags|=128,f=!0,l=s.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),vl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!gt)return rn(o),null}else 2*at()-v.renderingStartTime>na&&l!==1073741824&&(o.flags|=128,f=!0,vl(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=at(),o.sibling=null,l=_t.current,lt(_t,f?l&1|2:l&1),o):(rn(o),null);case 22:case 23:return Af(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?Wn&1073741824&&(rn(o),o.subtreeFlags&6&&(o.flags|=8192)):rn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function hI(s,o){switch(Vd(o),o.tag){case 1:return In(o.type)&&Zu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Zo(),dt(Tn),dt(tn),Kd(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Wd(o),null;case 13:if(dt(_t),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ho()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return dt(_t),null;case 4:return Zo(),null;case 10:return Bd(o.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var vc=!1,sn=!1,dI=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ea(s,o){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){It(s,o,f)}else l.current=null}function pf(s,o,l){try{l()}catch(f){It(s,o,f)}}var vy=!1;function fI(s,o){if(Cd=Ls,s=Xm(),yd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,O=-1,j=-1,X=0,le=0,de=s,oe=null;t:for(;;){for(var we;de!==l||m!==0&&de.nodeType!==3||(O=S+m),de!==v||f!==0&&de.nodeType!==3||(j=S+f),de.nodeType===3&&(S+=de.nodeValue.length),(we=de.firstChild)!==null;)oe=de,de=we;for(;;){if(de===s)break t;if(oe===l&&++X===m&&(O=S),oe===v&&++le===f&&(j=S),(we=de.nextSibling)!==null)break;de=oe,oe=de.parentNode}de=we}l=O===-1||j===-1?null:{start:O,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ad={focusedElem:s,selectionRange:l},Ls=!1,Te=o;Te!==null;)if(o=Te,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Te=s;else for(;Te!==null;){o=Te;try{var Ie=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var xe=Ie.memoizedProps,Rt=Ie.memoizedState,K=o.stateNode,z=K.getSnapshotBeforeUpdate(o.elementType===o.type?xe:Ar(o.type,xe),Rt);K.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){It(o,o.return,pe)}if(s=o.sibling,s!==null){s.return=o.return,Te=s;break}Te=o.return}return Ie=vy,vy=!1,Ie}function _l(s,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var v=m.destroy;m.destroy=void 0,v!==void 0&&pf(o,l,v)}m=m.next}while(m!==f)}}function _c(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function mf(s){var o=s.ref;if(o!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof o=="function"?o(s):o.current=s}}function _y(s){var o=s.alternate;o!==null&&(s.alternate=null,_y(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Wr],delete o[ll],delete o[Pd],delete o[QT],delete o[XT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function wy(s){return s.tag===5||s.tag===3||s.tag===4}function Ey(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Xu));else if(f!==4&&(s=s.child,s!==null))for(gf(s,o,l),s=s.sibling;s!==null;)gf(s,o,l),s=s.sibling}function yf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(yf(s,o,l),s=s.sibling;s!==null;)yf(s,o,l),s=s.sibling}var Yt=null,xr=!1;function Ks(s,o,l){for(l=l.child;l!==null;)Ty(s,o,l),l=l.sibling}function Ty(s,o,l){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Ni,l)}catch{}switch(l.tag){case 5:sn||ea(l,o);case 6:var f=Yt,m=xr;Yt=null,Ks(s,o,l),Yt=f,xr=m,Yt!==null&&(xr?(s=Yt,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Yt.removeChild(l.stateNode));break;case 18:Yt!==null&&(xr?(s=Yt,l=l.stateNode,s.nodeType===8?Rd(s.parentNode,l):s.nodeType===1&&Rd(s,l),Tr(s)):Rd(Yt,l.stateNode));break;case 4:f=Yt,m=xr,Yt=l.stateNode.containerInfo,xr=!0,Ks(s,o,l),Yt=f,xr=m;break;case 0:case 11:case 14:case 15:if(!sn&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&pf(l,o,S),m=m.next}while(m!==f)}Ks(s,o,l);break;case 1:if(!sn&&(ea(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(O){It(l,o,O)}Ks(s,o,l);break;case 21:Ks(s,o,l);break;case 22:l.mode&1?(sn=(f=sn)||l.memoizedState!==null,Ks(s,o,l),sn=f):Ks(s,o,l);break;default:Ks(s,o,l)}}function Iy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new dI),o.forEach(function(f){var m=TI.bind(null,s,f);l.has(f)||(l.add(f),f.then(m,m))})}}function Nr(s,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var v=s,S=o,O=S;e:for(;O!==null;){switch(O.tag){case 5:Yt=O.stateNode,xr=!1;break e;case 3:Yt=O.stateNode.containerInfo,xr=!0;break e;case 4:Yt=O.stateNode.containerInfo,xr=!0;break e}O=O.return}if(Yt===null)throw Error(t(160));Ty(v,S,m),Yt=null,xr=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(X){It(m,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sy(o,s),o=o.sibling}function Sy(s,o){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Nr(o,s),Hr(s),f&4){try{_l(3,s,s.return),_c(3,s)}catch(xe){It(s,s.return,xe)}try{_l(5,s,s.return)}catch(xe){It(s,s.return,xe)}}break;case 1:Nr(o,s),Hr(s),f&512&&l!==null&&ea(l,l.return);break;case 5:if(Nr(o,s),Hr(s),f&512&&l!==null&&ea(l,l.return),s.flags&32){var m=s.stateNode;try{Vn(m,"")}catch(xe){It(s,s.return,xe)}}if(f&4&&(m=s.stateNode,m!=null)){var v=s.memoizedProps,S=l!==null?l.memoizedProps:v,O=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{O==="input"&&v.type==="radio"&&v.name!=null&&Ps(m,v),Oe(O,S);var X=Oe(O,v);for(S=0;S<j.length;S+=2){var le=j[S],de=j[S+1];le==="style"?Lr(m,de):le==="dangerouslySetInnerHTML"?ss(m,de):le==="children"?Vn(m,de):$(m,le,de,X)}switch(O){case"input":Mr(m,v);break;case"textarea":Xe(m,v);break;case"select":var oe=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var we=v.value;we!=null?Dn(m,!!v.multiple,we,!1):oe!==!!v.multiple&&(v.defaultValue!=null?Dn(m,!!v.multiple,v.defaultValue,!0):Dn(m,!!v.multiple,v.multiple?[]:"",!1))}m[ll]=v}catch(xe){It(s,s.return,xe)}}break;case 6:if(Nr(o,s),Hr(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,v=s.memoizedProps;try{m.nodeValue=v}catch(xe){It(s,s.return,xe)}}break;case 3:if(Nr(o,s),Hr(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Tr(o.containerInfo)}catch(xe){It(s,s.return,xe)}break;case 4:Nr(o,s),Hr(s);break;case 13:Nr(o,s),Hr(s),m=s.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(wf=at())),f&4&&Iy(s);break;case 22:if(le=l!==null&&l.memoizedState!==null,s.mode&1?(sn=(X=sn)||le,Nr(o,s),sn=X):Nr(o,s),Hr(s),f&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!le&&s.mode&1)for(Te=s,le=s.child;le!==null;){for(de=Te=le;Te!==null;){switch(oe=Te,we=oe.child,oe.tag){case 0:case 11:case 14:case 15:_l(4,oe,oe.return);break;case 1:ea(oe,oe.return);var Ie=oe.stateNode;if(typeof Ie.componentWillUnmount=="function"){f=oe,l=oe.return;try{o=f,Ie.props=o.memoizedProps,Ie.state=o.memoizedState,Ie.componentWillUnmount()}catch(xe){It(f,l,xe)}}break;case 5:ea(oe,oe.return);break;case 22:if(oe.memoizedState!==null){xy(de);continue}}we!==null?(we.return=oe,Te=we):xy(de)}le=le.sibling}e:for(le=null,de=s;;){if(de.tag===5){if(le===null){le=de;try{m=de.stateNode,X?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(O=de.stateNode,j=de.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,O.style.display=Fr("display",S))}catch(xe){It(s,s.return,xe)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(xe){It(s,s.return,xe)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===s)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===s)break e;for(;de.sibling===null;){if(de.return===null||de.return===s)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Nr(o,s),Hr(s),f&4&&Iy(s);break;case 21:break;default:Nr(o,s),Hr(s)}}function Hr(s){var o=s.flags;if(o&2){try{e:{for(var l=s.return;l!==null;){if(wy(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Vn(m,""),f.flags&=-33);var v=Ey(s);yf(s,v,m);break;case 3:case 4:var S=f.stateNode.containerInfo,O=Ey(s);gf(s,O,S);break;default:throw Error(t(161))}}catch(j){It(s,s.return,j)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function pI(s,o,l){Te=s,Cy(s)}function Cy(s,o,l){for(var f=(s.mode&1)!==0;Te!==null;){var m=Te,v=m.child;if(m.tag===22&&f){var S=m.memoizedState!==null||vc;if(!S){var O=m.alternate,j=O!==null&&O.memoizedState!==null||sn;O=vc;var X=sn;if(vc=S,(sn=j)&&!X)for(Te=m;Te!==null;)S=Te,j=S.child,S.tag===22&&S.memoizedState!==null?Ny(m):j!==null?(j.return=S,Te=j):Ny(m);for(;v!==null;)Te=v,Cy(v),v=v.sibling;Te=m,vc=O,sn=X}Ay(s)}else m.subtreeFlags&8772&&v!==null?(v.return=m,Te=v):Ay(s)}}function Ay(s){for(;Te!==null;){var o=Te;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:sn||_c(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!sn)if(l===null)f.componentDidMount();else{var m=o.elementType===o.type?l.memoizedProps:Ar(o.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&xg(o,v,f);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}xg(o,S,l)}break;case 5:var O=o.stateNode;if(l===null&&o.flags&4){l=O;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&l.focus();break;case"img":j.src&&(l.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&Tr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||o.flags&512&&mf(o)}catch(oe){It(o,o.return,oe)}}if(o===s){Te=null;break}if(l=o.sibling,l!==null){l.return=o.return,Te=l;break}Te=o.return}}function xy(s){for(;Te!==null;){var o=Te;if(o===s){Te=null;break}var l=o.sibling;if(l!==null){l.return=o.return,Te=l;break}Te=o.return}}function Ny(s){for(;Te!==null;){var o=Te;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{_c(4,o)}catch(j){It(o,l,j)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(j){It(o,m,j)}}var v=o.return;try{mf(o)}catch(j){It(o,v,j)}break;case 5:var S=o.return;try{mf(o)}catch(j){It(o,S,j)}}}catch(j){It(o,o.return,j)}if(o===s){Te=null;break}var O=o.sibling;if(O!==null){O.return=o.return,Te=O;break}Te=o.return}}var mI=Math.ceil,wc=Q.ReactCurrentDispatcher,vf=Q.ReactCurrentOwner,ar=Q.ReactCurrentBatchConfig,Qe=0,qt=null,Mt=null,Zt=0,Wn=0,ta=Us(0),Bt=0,wl=null,Ui=0,Ec=0,_f=0,El=null,Cn=null,wf=0,na=1/0,vs=null,Tc=!1,Ef=null,Hs=null,Ic=!1,Qs=null,Sc=0,Tl=0,Tf=null,Cc=-1,Ac=0;function gn(){return Qe&6?at():Cc!==-1?Cc:Cc=at()}function Xs(s){return s.mode&1?Qe&2&&Zt!==0?Zt&-Zt:ZT.transition!==null?(Ac===0&&(Ac=Pi()),Ac):(s=qe,s!==0||(s=window.event,s=s===void 0?16:Xa(s.type)),s):1}function Rr(s,o,l,f){if(50<Tl)throw Tl=0,Tf=null,Error(t(185));Vs(s,l,f),(!(Qe&2)||s!==qt)&&(s===qt&&(!(Qe&2)&&(Ec|=l),Bt===4&&Ys(s,Zt)),An(s,f),l===1&&Qe===0&&!(o.mode&1)&&(na=at()+500,ec&&qs()))}function An(s,o){var l=s.callbackNode;os(s,o);var f=Ri(s,s===qt?Zt:0);if(f===0)l!==null&&Wa(l),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(l!=null&&Wa(l),o===1)s.tag===0?YT(Py.bind(null,s)):mg(Py.bind(null,s)),KT(function(){!(Qe&6)&&qs()}),l=null;else{switch(Os(f)){case 1:l=xi;break;case 4:l=ks;break;case 16:l=er;break;case 536870912:l=Au;break;default:l=er}l=Ly(l,Ry.bind(null,s))}s.callbackPriority=o,s.callbackNode=l}}function Ry(s,o){if(Cc=-1,Ac=0,Qe&6)throw Error(t(327));var l=s.callbackNode;if(ra()&&s.callbackNode!==l)return null;var f=Ri(s,s===qt?Zt:0);if(f===0)return null;if(f&30||f&s.expiredLanes||o)o=xc(s,f);else{o=f;var m=Qe;Qe|=2;var v=Dy();(qt!==s||Zt!==o)&&(vs=null,na=at()+500,qi(s,o));do try{vI();break}catch(O){ky(s,O)}while(!0);jd(),wc.current=v,Qe=m,Mt!==null?o=0:(qt=null,Zt=0,o=Bt)}if(o!==0){if(o===2&&(m=Bn(s),m!==0&&(f=m,o=If(s,m))),o===1)throw l=wl,qi(s,0),Ys(s,f),An(s,at()),l;if(o===6)Ys(s,f);else{if(m=s.current.alternate,!(f&30)&&!gI(m)&&(o=xc(s,f),o===2&&(v=Bn(s),v!==0&&(f=v,o=If(s,v))),o===1))throw l=wl,qi(s,0),Ys(s,f),An(s,at()),l;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Wi(s,Cn,vs);break;case 3:if(Ys(s,f),(f&130023424)===f&&(o=wf+500-at(),10<o)){if(Ri(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){gn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=Nd(Wi.bind(null,s,Cn,vs),o);break}Wi(s,Cn,vs);break;case 4:if(Ys(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var S=31-fn(f);v=1<<S,S=o[S],S>m&&(m=S),f&=~v}if(f=m,f=at()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*mI(f/1960))-f,10<f){s.timeoutHandle=Nd(Wi.bind(null,s,Cn,vs),f);break}Wi(s,Cn,vs);break;case 5:Wi(s,Cn,vs);break;default:throw Error(t(329))}}}return An(s,at()),s.callbackNode===l?Ry.bind(null,s):null}function If(s,o){var l=El;return s.current.memoizedState.isDehydrated&&(qi(s,o).flags|=256),s=xc(s,o),s!==2&&(o=Cn,Cn=l,o!==null&&Sf(o)),s}function Sf(s){Cn===null?Cn=s:Cn.push.apply(Cn,s)}function gI(s){for(var o=s;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!Sr(v(),m))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ys(s,o){for(o&=~_f,o&=~Ec,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var l=31-fn(o),f=1<<l;s[l]=-1,o&=~f}}function Py(s){if(Qe&6)throw Error(t(327));ra();var o=Ri(s,0);if(!(o&1))return An(s,at()),null;var l=xc(s,o);if(s.tag!==0&&l===2){var f=Bn(s);f!==0&&(o=f,l=If(s,f))}if(l===1)throw l=wl,qi(s,0),Ys(s,o),An(s,at()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Wi(s,Cn,vs),An(s,at()),null}function Cf(s,o){var l=Qe;Qe|=1;try{return s(o)}finally{Qe=l,Qe===0&&(na=at()+500,ec&&qs())}}function $i(s){Qs!==null&&Qs.tag===0&&!(Qe&6)&&ra();var o=Qe;Qe|=1;var l=ar.transition,f=qe;try{if(ar.transition=null,qe=1,s)return s()}finally{qe=f,ar.transition=l,Qe=o,!(Qe&6)&&qs()}}function Af(){Wn=ta.current,dt(ta)}function qi(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,GT(l)),Mt!==null)for(l=Mt.return;l!==null;){var f=l;switch(Vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Zu();break;case 3:Zo(),dt(Tn),dt(tn),Kd();break;case 5:Wd(f);break;case 4:Zo();break;case 13:dt(_t);break;case 19:dt(_t);break;case 10:Bd(f.type._context);break;case 22:case 23:Af()}l=l.return}if(qt=s,Mt=s=Zs(s.current,null),Zt=Wn=o,Bt=0,wl=null,_f=Ec=Ui=0,Cn=El=null,ji!==null){for(o=0;o<ji.length;o++)if(l=ji[o],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,v=l.pending;if(v!==null){var S=v.next;v.next=m,f.next=S}l.pending=f}ji=null}return s}function ky(s,o){do{var l=Mt;try{if(jd(),cc.current=pc,hc){for(var f=wt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}hc=!1}if(zi=0,$t=jt=wt=null,pl=!1,ml=0,vf.current=null,l===null||l.return===null){Bt=1,wl=o,Mt=null;break}e:{var v=s,S=l.return,O=l,j=o;if(o=Zt,O.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var X=j,le=O,de=le.tag;if(!(le.mode&1)&&(de===0||de===11||de===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var we=ny(S);if(we!==null){we.flags&=-257,ry(we,S,O,v,o),we.mode&1&&ty(v,X,o),o=we,j=X;var Ie=o.updateQueue;if(Ie===null){var xe=new Set;xe.add(j),o.updateQueue=xe}else Ie.add(j);break e}else{if(!(o&1)){ty(v,X,o),xf();break e}j=Error(t(426))}}else if(gt&&O.mode&1){var Rt=ny(S);if(Rt!==null){!(Rt.flags&65536)&&(Rt.flags|=256),ry(Rt,S,O,v,o),Fd(Jo(j,O));break e}}v=j=Jo(j,O),Bt!==4&&(Bt=2),El===null?El=[v]:El.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var K=Jg(v,j,o);Ag(v,K);break e;case 1:O=j;var z=v.type,H=v.stateNode;if(!(v.flags&128)&&(typeof z.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Hs===null||!Hs.has(H)))){v.flags|=65536,o&=-o,v.lanes|=o;var pe=ey(v,O,o);Ag(v,pe);break e}}v=v.return}while(v!==null)}Vy(l)}catch(Re){o=Re,Mt===l&&l!==null&&(Mt=l=l.return);continue}break}while(!0)}function Dy(){var s=wc.current;return wc.current=pc,s===null?pc:s}function xf(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),qt===null||!(Ui&268435455)&&!(Ec&268435455)||Ys(qt,Zt)}function xc(s,o){var l=Qe;Qe|=2;var f=Dy();(qt!==s||Zt!==o)&&(vs=null,qi(s,o));do try{yI();break}catch(m){ky(s,m)}while(!0);if(jd(),Qe=l,wc.current=f,Mt!==null)throw Error(t(261));return qt=null,Zt=0,Bt}function yI(){for(;Mt!==null;)by(Mt)}function vI(){for(;Mt!==null&&!Su();)by(Mt)}function by(s){var o=Fy(s.alternate,s,Wn);s.memoizedProps=s.pendingProps,o===null?Vy(s):Mt=o,vf.current=null}function Vy(s){var o=s;do{var l=o.alternate;if(s=o.return,o.flags&32768){if(l=hI(l,o),l!==null){l.flags&=32767,Mt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Bt=6,Mt=null;return}}else if(l=cI(l,o,Wn),l!==null){Mt=l;return}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=s}while(o!==null);Bt===0&&(Bt=5)}function Wi(s,o,l){var f=qe,m=ar.transition;try{ar.transition=null,qe=1,_I(s,o,l,f)}finally{ar.transition=m,qe=f}return null}function _I(s,o,l,f){do ra();while(Qs!==null);if(Qe&6)throw Error(t(327));l=s.finishedWork;var m=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=l.lanes|l.childLanes;if(st(s,v),s===qt&&(Mt=qt=null,Zt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Ic||(Ic=!0,Ly(er,function(){return ra(),null})),v=(l.flags&15990)!==0,l.subtreeFlags&15990||v){v=ar.transition,ar.transition=null;var S=qe;qe=1;var O=Qe;Qe|=4,vf.current=null,fI(s,l),Sy(l,s),jT(Ad),Ls=!!Cd,Ad=Cd=null,s.current=l,pI(l),ud(),Qe=O,qe=S,ar.transition=v}else s.current=l;if(Ic&&(Ic=!1,Qs=s,Sc=m),v=s.pendingLanes,v===0&&(Hs=null),xu(l.stateNode),An(s,at()),o!==null)for(f=s.onRecoverableError,l=0;l<o.length;l++)m=o[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(Tc)throw Tc=!1,s=Ef,Ef=null,s;return Sc&1&&s.tag!==0&&ra(),v=s.pendingLanes,v&1?s===Tf?Tl++:(Tl=0,Tf=s):Tl=0,qs(),null}function ra(){if(Qs!==null){var s=Os(Sc),o=ar.transition,l=qe;try{if(ar.transition=null,qe=16>s?16:s,Qs===null)var f=!1;else{if(s=Qs,Qs=null,Sc=0,Qe&6)throw Error(t(331));var m=Qe;for(Qe|=4,Te=s.current;Te!==null;){var v=Te,S=v.child;if(Te.flags&16){var O=v.deletions;if(O!==null){for(var j=0;j<O.length;j++){var X=O[j];for(Te=X;Te!==null;){var le=Te;switch(le.tag){case 0:case 11:case 15:_l(8,le,v)}var de=le.child;if(de!==null)de.return=le,Te=de;else for(;Te!==null;){le=Te;var oe=le.sibling,we=le.return;if(_y(le),le===X){Te=null;break}if(oe!==null){oe.return=we,Te=oe;break}Te=we}}}var Ie=v.alternate;if(Ie!==null){var xe=Ie.child;if(xe!==null){Ie.child=null;do{var Rt=xe.sibling;xe.sibling=null,xe=Rt}while(xe!==null)}}Te=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,Te=S;else e:for(;Te!==null;){if(v=Te,v.flags&2048)switch(v.tag){case 0:case 11:case 15:_l(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Te=K;break e}Te=v.return}}var z=s.current;for(Te=z;Te!==null;){S=Te;var H=S.child;if(S.subtreeFlags&2064&&H!==null)H.return=S,Te=H;else e:for(S=z;Te!==null;){if(O=Te,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:_c(9,O)}}catch(Re){It(O,O.return,Re)}if(O===S){Te=null;break e}var pe=O.sibling;if(pe!==null){pe.return=O.return,Te=pe;break e}Te=O.return}}if(Qe=m,qs(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Ni,s)}catch{}f=!0}return f}finally{qe=l,ar.transition=o}}return!1}function My(s,o,l){o=Jo(l,o),o=Jg(s,o,1),s=Gs(s,o,1),o=gn(),s!==null&&(Vs(s,1,o),An(s,o))}function It(s,o,l){if(s.tag===3)My(s,s,l);else for(;o!==null;){if(o.tag===3){My(o,s,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Hs===null||!Hs.has(f))){s=Jo(l,s),s=ey(o,s,1),o=Gs(o,s,1),s=gn(),o!==null&&(Vs(o,1,s),An(o,s));break}}o=o.return}}function wI(s,o,l){var f=s.pingCache;f!==null&&f.delete(o),o=gn(),s.pingedLanes|=s.suspendedLanes&l,qt===s&&(Zt&l)===l&&(Bt===4||Bt===3&&(Zt&130023424)===Zt&&500>at()-wf?qi(s,0):_f|=l),An(s,o)}function Oy(s,o){o===0&&(s.mode&1?(o=Ao,Ao<<=1,!(Ao&130023424)&&(Ao=4194304)):o=1);var l=gn();s=ms(s,o),s!==null&&(Vs(s,o,l),An(s,l))}function EI(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),Oy(s,l)}function TI(s,o){var l=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Oy(s,l)}var Fy;Fy=function(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps||Tn.current)Sn=!0;else{if(!(s.lanes&l)&&!(o.flags&128))return Sn=!1,uI(s,o,l);Sn=!!(s.flags&131072)}else Sn=!1,gt&&o.flags&1048576&&gg(o,nc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;yc(s,o),s=o.pendingProps;var m=Wo(o,tn.current);Yo(o,l),m=Xd(null,o,f,s,m,l);var v=Yd();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,In(f)?(v=!0,Ju(o)):v=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,$d(o),m.updater=mc,o.stateNode=m,m._reactInternals=o,rf(o,f,s,l),o=lf(null,o,f,!0,v,l)):(o.tag=0,gt&&v&&bd(o),mn(null,o,m,l),o=o.child),o;case 16:f=o.elementType;e:{switch(yc(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=SI(f),s=Ar(f,s),m){case 0:o=af(null,o,f,s,l);break e;case 1:o=uy(null,o,f,s,l);break e;case 11:o=sy(null,o,f,s,l);break e;case 14:o=iy(null,o,f,Ar(f.type,s),l);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Ar(f,m),af(s,o,f,m,l);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Ar(f,m),uy(s,o,f,m,l);case 3:e:{if(cy(o),s===null)throw Error(t(387));f=o.pendingProps,v=o.memoizedState,m=v.element,Cg(s,o),lc(o,f,null,l);var S=o.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){m=Jo(Error(t(423)),o),o=hy(s,o,f,l,m);break e}else if(f!==m){m=Jo(Error(t(424)),o),o=hy(s,o,f,l,m);break e}else for(qn=zs(o.stateNode.containerInfo.firstChild),$n=o,gt=!0,Cr=null,l=Ig(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ho(),f===m){o=ys(s,o,l);break e}mn(s,o,f,l)}o=o.child}return o;case 5:return Ng(o),s===null&&Od(o),f=o.type,m=o.pendingProps,v=s!==null?s.memoizedProps:null,S=m.children,xd(f,m)?S=null:v!==null&&xd(f,v)&&(o.flags|=32),ly(s,o),mn(s,o,S,l),o.child;case 6:return s===null&&Od(o),null;case 13:return dy(s,o,l);case 4:return qd(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Qo(o,null,f,l):mn(s,o,f,l),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Ar(f,m),sy(s,o,f,m,l);case 7:return mn(s,o,o.pendingProps,l),o.child;case 8:return mn(s,o,o.pendingProps.children,l),o.child;case 12:return mn(s,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,v=o.memoizedProps,S=m.value,lt(ic,f._currentValue),f._currentValue=S,v!==null)if(Sr(v.value,S)){if(v.children===m.children&&!Tn.current){o=ys(s,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var O=v.dependencies;if(O!==null){S=v.child;for(var j=O.firstContext;j!==null;){if(j.context===f){if(v.tag===1){j=gs(-1,l&-l),j.tag=2;var X=v.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?j.next=j:(j.next=le.next,le.next=j),X.pending=j}}v.lanes|=l,j=v.alternate,j!==null&&(j.lanes|=l),zd(v.return,l,o),O.lanes|=l;break}j=j.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,O=S.alternate,O!==null&&(O.lanes|=l),zd(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}mn(s,o,m.children,l),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Yo(o,l),m=ir(m),f=f(m),o.flags|=1,mn(s,o,f,l),o.child;case 14:return f=o.type,m=Ar(f,o.pendingProps),m=Ar(f.type,m),iy(s,o,f,m,l);case 15:return oy(s,o,o.type,o.pendingProps,l);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Ar(f,m),yc(s,o),o.tag=1,In(f)?(s=!0,Ju(o)):s=!1,Yo(o,l),Yg(o,f,m),rf(o,f,m,l),lf(null,o,f,!0,s,l);case 19:return py(s,o,l);case 22:return ay(s,o,l)}throw Error(t(156,o.tag))};function Ly(s,o){return So(s,o)}function II(s,o,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(s,o,l,f){return new II(s,o,l,f)}function Nf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function SI(s){if(typeof s=="function")return Nf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===M)return 11;if(s===ue)return 14}return 2}function Zs(s,o){var l=s.alternate;return l===null?(l=lr(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function Nc(s,o,l,f,m,v){var S=2;if(f=s,typeof s=="function")Nf(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case R:return Gi(l.children,m,v,o);case I:S=8,m|=8;break;case x:return s=lr(12,l,o,m|2),s.elementType=x,s.lanes=v,s;case k:return s=lr(13,l,o,m),s.elementType=k,s.lanes=v,s;case me:return s=lr(19,l,o,m),s.elementType=me,s.lanes=v,s;case ce:return Rc(l,m,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:S=10;break e;case V:S=9;break e;case M:S=11;break e;case ue:S=14;break e;case fe:S=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=lr(S,l,o,m),o.elementType=s,o.type=f,o.lanes=v,o}function Gi(s,o,l,f){return s=lr(7,s,f,o),s.lanes=l,s}function Rc(s,o,l,f){return s=lr(22,s,f,o),s.elementType=ce,s.lanes=l,s.stateNode={isHidden:!1},s}function Rf(s,o,l){return s=lr(6,s,null,o),s.lanes=l,s}function Pf(s,o,l){return o=lr(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function CI(s,o,l,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function kf(s,o,l,f,m,v,S,O,j){return s=new CI(s,o,l,O,j),o===1?(o=1,v===!0&&(o|=8)):o=0,v=lr(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},$d(v),s}function AI(s,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:f==null?null:""+f,children:s,containerInfo:o,implementation:l}}function jy(s){if(!s)return $s;s=s._reactInternals;e:{if(yr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(In(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(In(l))return fg(s,l,o)}return o}function By(s,o,l,f,m,v,S,O,j){return s=kf(l,f,!0,s,m,v,S,O,j),s.context=jy(null),l=s.current,f=gn(),m=Xs(l),v=gs(f,m),v.callback=o??null,Gs(l,v,m),s.current.lanes=m,Vs(s,m,f),An(s,f),s}function Pc(s,o,l,f){var m=o.current,v=gn(),S=Xs(m);return l=jy(l),o.context===null?o.context=l:o.pendingContext=l,o=gs(v,S),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Gs(m,o,S),s!==null&&(Rr(s,m,S,v),ac(s,m,S)),S}function kc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function zy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Df(s,o){zy(s,o),(s=s.alternate)&&zy(s,o)}function xI(){return null}var Uy=typeof reportError=="function"?reportError:function(s){console.error(s)};function bf(s){this._internalRoot=s}Dc.prototype.render=bf.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Pc(s,o,null,null)},Dc.prototype.unmount=bf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;$i(function(){Pc(null,s,null,null)}),o[hs]=null}};function Dc(s){this._internalRoot=s}Dc.prototype.unstable_scheduleHydration=function(s){if(s){var o=Du();s={blockedOn:null,target:s,priority:o};for(var l=0;l<zr.length&&o!==0&&o<zr[l].priority;l++);zr.splice(l,0,s),l===0&&Mu(s)}};function Vf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function $y(){}function NI(s,o,l,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var X=kc(S);v.call(X)}}var S=By(o,f,s,0,null,!1,!1,"",$y);return s._reactRootContainer=S,s[hs]=S.current,ol(s.nodeType===8?s.parentNode:s),$i(),S}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var O=f;f=function(){var X=kc(j);O.call(X)}}var j=kf(s,0,!1,null,null,!1,!1,"",$y);return s._reactRootContainer=j,s[hs]=j.current,ol(s.nodeType===8?s.parentNode:s),$i(function(){Pc(o,j,l,f)}),j}function Vc(s,o,l,f,m){var v=l._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var O=m;m=function(){var j=kc(S);O.call(j)}}Pc(o,S,s,m)}else S=NI(l,o,s,m,f);return kc(S)}Pu=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var l=Ds(o.pendingLanes);l!==0&&(Ms(o,l|1),An(o,at()),!(Qe&6)&&(na=at()+500,qs()))}break;case 13:$i(function(){var f=ms(s,1);if(f!==null){var m=gn();Rr(f,s,1,m)}}),Df(s,1)}},xo=function(s){if(s.tag===13){var o=ms(s,134217728);if(o!==null){var l=gn();Rr(o,s,134217728,l)}Df(s,134217728)}},ku=function(s){if(s.tag===13){var o=Xs(s),l=ms(s,o);if(l!==null){var f=gn();Rr(l,s,o,f)}Df(s,o)}},Du=function(){return qe},bu=function(s,o){var l=qe;try{return qe=s,o()}finally{qe=l}},fr=function(s,o,l){switch(o){case"input":if(Mr(s,l),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==s&&f.form===s.form){var m=Yu(f);if(!m)throw Error(t(90));$e(f),Mr(f,m)}}}break;case"textarea":Xe(s,l);break;case"select":o=l.value,o!=null&&Dn(s,!!l.multiple,o,!1)}},is=Cf,Si=$i;var RI={usingClientEntryPoint:!1,Events:[ul,$o,Yu,Fn,Ii,Cf]},Il={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PI={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qa(s),s===null?null:s.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Ni=Mc.inject(PI),jn=Mc}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RI,xn.createPortal=function(s,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(o))throw Error(t(200));return AI(s,o,null,l)},xn.createRoot=function(s,o){if(!Vf(s))throw Error(t(299));var l=!1,f="",m=Uy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=kf(s,1,!1,null,null,l,!1,f,m),s[hs]=o.current,ol(s.nodeType===8?s.parentNode:s),new bf(o)},xn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qa(o),s=s===null?null:s.stateNode,s},xn.flushSync=function(s){return $i(s)},xn.hydrate=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!0,l)},xn.hydrateRoot=function(s,o,l){if(!Vf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,m=!1,v="",S=Uy;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=By(o,null,s,1,l??null,m,!1,v,S),s[hs]=o.current,ol(s),f)for(s=0;s<f.length;s++)l=f[s],m=l._getVersion,m=m(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,m]:o.mutableSourceEagerHydrationData.push(l,m);return new Dc(o)},xn.render=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!1,l)},xn.unmountComponentAtNode=function(s){if(!bc(s))throw Error(t(40));return s._reactRootContainer?($i(function(){Vc(null,null,s,!1,function(){s._reactRootContainer=null,s[hs]=null})}),!0):!1},xn.unstable_batchedUpdates=Cf,xn.unstable_renderSubtreeIntoContainer=function(s,o,l,f){if(!bc(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vc(s,o,l,!1,f)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var Zy;function jI(){if(Zy)return Ff.exports;Zy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ff.exports=LI(),Ff.exports}var Jy;function BI(){if(Jy)return Oc;Jy=1;var r=jI();return Oc.createRoot=r.createRoot,Oc.hydrateRoot=r.hydrateRoot,Oc}var zI=BI();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i0=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $I={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=he.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:u,...c},d)=>he.createElement("svg",{ref:d,...$I,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:i0("lucide",i),...c},[...u.map(([p,g])=>he.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(r,e)=>{const t=he.forwardRef(({className:n,...i},a)=>he.createElement(qI,{ref:a,iconNode:e,className:i0(`lucide-${UI(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],GI=rt("Award",WI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],HI=rt("ChevronDown",KI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Hi=rt("ChevronLeft",QI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],si=rt("ChevronRight",XI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZI=rt("ChevronUp",YI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],eS=rt("CirclePlus",JI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],nS=rt("CircleSlash",tS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],o0=rt("Clock",rS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],a0=rt("Download",sS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16.2V21h-4.8",key:"1hrera"}],["path",{d:"M21 7.8V3h-4.8",key:"ul1q53"}],["path",{d:"M3 16.2V21h4.8",key:"1x04uo"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 7.8V3h4.8",key:"1ijppm"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],oS=rt("Expand",iS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],lS=rt("FileText",aS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],cS=rt("GitCommitHorizontal",uS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],dS=rt("Globe",hS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],pS=rt("ImagePlus",fS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],gS=rt("Loader",mS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vS=rt("Lock",yS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],wS=rt("MessageSquare",_S);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],TS=rt("Minimize",ES);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],zp=rt("Music",IS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],l0=rt("Pause",SS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],u0=rt("Play",CS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],xS=rt("RotateCw",AS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],c0=rt("Save",NS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],PS=rt("Share",RS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],DS=rt("ShoppingBag",kS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],VS=rt("SquarePen",bS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],OS=rt("Trash2",MS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oo=rt("X",FS),LS=()=>{};var ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},jS=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],u=r[t++],c=r[t++],d=((i&7)<<18|(a&63)<<12|(u&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=r[t++],u=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},d0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],u=i+1<r.length,c=u?r[i+1]:0,d=i+2<r.length,p=d?r[i+2]:0,g=a>>2,_=(a&3)<<4|c>>4;let E=(c&15)<<2|p>>6,C=p&63;d||(C=64,u||(E=64)),n.push(t[g],t[_],t[E],t[C])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(h0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const p=i<r.length?t[r.charAt(i)]:64;++i;const _=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||p==null||_==null)throw new BS;const E=a<<2|c>>4;if(n.push(E),p!==64){const C=c<<4&240|p>>2;if(n.push(C),_!==64){const A=p<<6&192|_;n.push(A)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(r){const e=h0(r);return d0.encodeByteArray(e,!0)},nh=function(r){return zS(r).replace(/\./g,"")},US=function(r){try{return d0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=()=>$S().__FIREBASE_DEFAULTS__,WS=()=>{if(typeof process>"u"||typeof ev>"u")return;const r=ev.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},GS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&US(r[1]);return e&&JSON.parse(e)},Up=()=>{try{return LS()||qS()||WS()||GS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},KS=r=>{var e,t;return(t=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},HS=r=>{const e=KS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},f0=()=>{var r;return(r=Up())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[nh(JSON.stringify(t)),nh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){var r;const e=(r=Up())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p0(){return!YS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m0(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="FirebaseError";class go extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=JS,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,g0.prototype.create)}}class g0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?e1(a,n):"Error",c=`${this.serviceName}: ${u} (${i}).`;return new go(i,c,n)}}function e1(r,e){return r.replace(t1,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const t1=/\{\$([^}]+)}/g;function sh(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],u=e[i];if(tv(a)&&tv(u)){if(!sh(a,u))return!1}else if(a!==u)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function tv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){return r&&r._delegate?r._delegate:r}class ya{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new QS;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&u.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:r1(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r1(r){return r===Qi?void 0:r}function s1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(He||(He={}));const o1={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},a1=He.INFO,l1={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},u1=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=l1[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v0{constructor(e){this.name=e,this._logLevel=a1,this._logHandler=u1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const c1=(r,e)=>e.some(t=>r instanceof t);let nv,rv;function h1(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d1(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _0=new WeakMap,rp=new WeakMap,w0=new WeakMap,Bf=new WeakMap,$p=new WeakMap;function f1(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(li(r.result)),i()},u=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&_0.set(t,r)}).catch(()=>{}),$p.set(e,r),e}function p1(r){if(rp.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});rp.set(r,e)}let sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return rp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||w0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function m1(r){sp=r(sp)}function g1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(zf(this),e,...t);return w0.set(n,e.sort?e.sort():[e]),li(n)}:d1().includes(r)?function(...e){return r.apply(zf(this),e),li(_0.get(this))}:function(...e){return li(r.apply(zf(this),e))}}function y1(r){return typeof r=="function"?g1(r):(r instanceof IDBTransaction&&p1(r),c1(r,h1())?new Proxy(r,sp):r)}function li(r){if(r instanceof IDBRequest)return f1(r);if(Bf.has(r))return Bf.get(r);const e=y1(r);return e!==r&&(Bf.set(r,e),$p.set(e,r)),e}const zf=r=>$p.get(r);function v1(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const u=indexedDB.open(r,e),c=li(u);return n&&u.addEventListener("upgradeneeded",d=>{n(li(u.result),d.oldVersion,d.newVersion,li(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const _1=["get","getKey","getAll","getAllKeys","count"],w1=["put","add","delete","clear"],Uf=new Map;function sv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Uf.get(e))return Uf.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=w1.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||_1.includes(t)))return;const a=async function(u,...c){const d=this.transaction(u,i?"readwrite":"readonly");let p=d.store;return n&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&d.done]))[0]};return Uf.set(e,a),a}m1(r=>({...r,get:(e,t,n)=>sv(e,t)||r.get(e,t,n),has:(e,t)=>!!sv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T1(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function T1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",iv="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new v0("@firebase/app"),I1="@firebase/app-compat",S1="@firebase/analytics-compat",C1="@firebase/analytics",A1="@firebase/app-check-compat",x1="@firebase/app-check",N1="@firebase/auth",R1="@firebase/auth-compat",P1="@firebase/database",k1="@firebase/data-connect",D1="@firebase/database-compat",b1="@firebase/functions",V1="@firebase/functions-compat",M1="@firebase/installations",O1="@firebase/installations-compat",F1="@firebase/messaging",L1="@firebase/messaging-compat",j1="@firebase/performance",B1="@firebase/performance-compat",z1="@firebase/remote-config",U1="@firebase/remote-config-compat",$1="@firebase/storage",q1="@firebase/storage-compat",W1="@firebase/firestore",G1="@firebase/vertexai",K1="@firebase/firestore-compat",H1="firebase",Q1="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",X1={[ip]:"fire-core",[I1]:"fire-core-compat",[C1]:"fire-analytics",[S1]:"fire-analytics-compat",[x1]:"fire-app-check",[A1]:"fire-app-check-compat",[N1]:"fire-auth",[R1]:"fire-auth-compat",[P1]:"fire-rtdb",[k1]:"fire-data-connect",[D1]:"fire-rtdb-compat",[b1]:"fire-fn",[V1]:"fire-fn-compat",[M1]:"fire-iid",[O1]:"fire-iid-compat",[F1]:"fire-fcm",[L1]:"fire-fcm-compat",[j1]:"fire-perf",[B1]:"fire-perf-compat",[z1]:"fire-rc",[U1]:"fire-rc-compat",[$1]:"fire-gcs",[q1]:"fire-gcs-compat",[W1]:"fire-fst",[K1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[H1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,Y1=new Map,ap=new Map;function ov(r,e){try{r.container.addComponent(e)}catch(t){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zl(r){const e=r.name;if(ap.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,r);for(const t of ih.values())ov(t,r);for(const t of Y1.values())ov(t,r);return!0}function E0(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function T0(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new g0("app","Firebase",Z1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=Q1;function S0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(t||(t=f0()),!t)throw ui.create("no-options");const a=ih.get(i);if(a){if(sh(t,a.options)&&sh(n,a.config))return a;throw ui.create("duplicate-app",{appName:i})}const u=new i1(i);for(const d of ap.values())u.addComponent(d);const c=new J1(t,n,u);return ih.set(i,c),c}function eC(r=op){const e=ih.get(r);if(!e&&r===op&&f0())return S0();if(!e)throw ui.create("no-app",{appName:r});return e}function ci(r,e,t){var n;let i=(n=X1[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(c.join(" "));return}zl(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",nC=1,Ul="firebase-heartbeat-store";let $f=null;function C0(){return $f||($f=v1(tC,nC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw ui.create("idb-open",{originalErrorMessage:r.message})})),$f}async function rC(r){try{const t=(await C0()).transaction(Ul),n=await t.objectStore(Ul).get(A0(r));return await t.done,n}catch(e){if(e instanceof go)Ss.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(t.message)}}}async function av(r,e){try{const n=(await C0()).transaction(Ul,"readwrite");await n.objectStore(Ul).put(e,A0(r)),await n.done}catch(t){if(t instanceof go)Ss.warn(t.message);else{const n=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(n.message)}}}function A0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1024,iC=30;class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lC(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>iC){const u=uC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ss.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:n,unsentEntries:i}=aC(this._heartbeatsCache.heartbeats),a=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ss.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function aC(r,e=sC){const t=[];let n=r.slice();for(const i of r){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),uv(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uv(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class lC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m0()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function uv(r){return nh(JSON.stringify({version:2,heartbeats:r})).length}function uC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){zl(new ya("platform-logger",e=>new E1(e),"PRIVATE")),zl(new ya("heartbeat",e=>new oC(e),"PRIVATE")),ci(ip,iv,r),ci(ip,iv,"esm2017"),ci("fire-js","")}cC("");var hC="firebase",dC="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(hC,dC,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,x0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function x(){}x.prototype=I.prototype,R.D=I.prototype,R.prototype=new x,R.prototype.constructor=R,R.C=function(D,V,M){for(var k=Array(arguments.length-2),me=2;me<arguments.length;me++)k[me-2]=arguments[me];return I.prototype[V].apply(D,k)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,x){x||(x=0);var D=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)D[V]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(V=0;16>V;++V)D[V]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=R.g[0],x=R.g[1],V=R.g[2];var M=R.g[3],k=I+(M^x&(V^M))+D[0]+3614090360&4294967295;I=x+(k<<7&4294967295|k>>>25),k=M+(V^I&(x^V))+D[1]+3905402710&4294967295,M=I+(k<<12&4294967295|k>>>20),k=V+(x^M&(I^x))+D[2]+606105819&4294967295,V=M+(k<<17&4294967295|k>>>15),k=x+(I^V&(M^I))+D[3]+3250441966&4294967295,x=V+(k<<22&4294967295|k>>>10),k=I+(M^x&(V^M))+D[4]+4118548399&4294967295,I=x+(k<<7&4294967295|k>>>25),k=M+(V^I&(x^V))+D[5]+1200080426&4294967295,M=I+(k<<12&4294967295|k>>>20),k=V+(x^M&(I^x))+D[6]+2821735955&4294967295,V=M+(k<<17&4294967295|k>>>15),k=x+(I^V&(M^I))+D[7]+4249261313&4294967295,x=V+(k<<22&4294967295|k>>>10),k=I+(M^x&(V^M))+D[8]+1770035416&4294967295,I=x+(k<<7&4294967295|k>>>25),k=M+(V^I&(x^V))+D[9]+2336552879&4294967295,M=I+(k<<12&4294967295|k>>>20),k=V+(x^M&(I^x))+D[10]+4294925233&4294967295,V=M+(k<<17&4294967295|k>>>15),k=x+(I^V&(M^I))+D[11]+2304563134&4294967295,x=V+(k<<22&4294967295|k>>>10),k=I+(M^x&(V^M))+D[12]+1804603682&4294967295,I=x+(k<<7&4294967295|k>>>25),k=M+(V^I&(x^V))+D[13]+4254626195&4294967295,M=I+(k<<12&4294967295|k>>>20),k=V+(x^M&(I^x))+D[14]+2792965006&4294967295,V=M+(k<<17&4294967295|k>>>15),k=x+(I^V&(M^I))+D[15]+1236535329&4294967295,x=V+(k<<22&4294967295|k>>>10),k=I+(V^M&(x^V))+D[1]+4129170786&4294967295,I=x+(k<<5&4294967295|k>>>27),k=M+(x^V&(I^x))+D[6]+3225465664&4294967295,M=I+(k<<9&4294967295|k>>>23),k=V+(I^x&(M^I))+D[11]+643717713&4294967295,V=M+(k<<14&4294967295|k>>>18),k=x+(M^I&(V^M))+D[0]+3921069994&4294967295,x=V+(k<<20&4294967295|k>>>12),k=I+(V^M&(x^V))+D[5]+3593408605&4294967295,I=x+(k<<5&4294967295|k>>>27),k=M+(x^V&(I^x))+D[10]+38016083&4294967295,M=I+(k<<9&4294967295|k>>>23),k=V+(I^x&(M^I))+D[15]+3634488961&4294967295,V=M+(k<<14&4294967295|k>>>18),k=x+(M^I&(V^M))+D[4]+3889429448&4294967295,x=V+(k<<20&4294967295|k>>>12),k=I+(V^M&(x^V))+D[9]+568446438&4294967295,I=x+(k<<5&4294967295|k>>>27),k=M+(x^V&(I^x))+D[14]+3275163606&4294967295,M=I+(k<<9&4294967295|k>>>23),k=V+(I^x&(M^I))+D[3]+4107603335&4294967295,V=M+(k<<14&4294967295|k>>>18),k=x+(M^I&(V^M))+D[8]+1163531501&4294967295,x=V+(k<<20&4294967295|k>>>12),k=I+(V^M&(x^V))+D[13]+2850285829&4294967295,I=x+(k<<5&4294967295|k>>>27),k=M+(x^V&(I^x))+D[2]+4243563512&4294967295,M=I+(k<<9&4294967295|k>>>23),k=V+(I^x&(M^I))+D[7]+1735328473&4294967295,V=M+(k<<14&4294967295|k>>>18),k=x+(M^I&(V^M))+D[12]+2368359562&4294967295,x=V+(k<<20&4294967295|k>>>12),k=I+(x^V^M)+D[5]+4294588738&4294967295,I=x+(k<<4&4294967295|k>>>28),k=M+(I^x^V)+D[8]+2272392833&4294967295,M=I+(k<<11&4294967295|k>>>21),k=V+(M^I^x)+D[11]+1839030562&4294967295,V=M+(k<<16&4294967295|k>>>16),k=x+(V^M^I)+D[14]+4259657740&4294967295,x=V+(k<<23&4294967295|k>>>9),k=I+(x^V^M)+D[1]+2763975236&4294967295,I=x+(k<<4&4294967295|k>>>28),k=M+(I^x^V)+D[4]+1272893353&4294967295,M=I+(k<<11&4294967295|k>>>21),k=V+(M^I^x)+D[7]+4139469664&4294967295,V=M+(k<<16&4294967295|k>>>16),k=x+(V^M^I)+D[10]+3200236656&4294967295,x=V+(k<<23&4294967295|k>>>9),k=I+(x^V^M)+D[13]+681279174&4294967295,I=x+(k<<4&4294967295|k>>>28),k=M+(I^x^V)+D[0]+3936430074&4294967295,M=I+(k<<11&4294967295|k>>>21),k=V+(M^I^x)+D[3]+3572445317&4294967295,V=M+(k<<16&4294967295|k>>>16),k=x+(V^M^I)+D[6]+76029189&4294967295,x=V+(k<<23&4294967295|k>>>9),k=I+(x^V^M)+D[9]+3654602809&4294967295,I=x+(k<<4&4294967295|k>>>28),k=M+(I^x^V)+D[12]+3873151461&4294967295,M=I+(k<<11&4294967295|k>>>21),k=V+(M^I^x)+D[15]+530742520&4294967295,V=M+(k<<16&4294967295|k>>>16),k=x+(V^M^I)+D[2]+3299628645&4294967295,x=V+(k<<23&4294967295|k>>>9),k=I+(V^(x|~M))+D[0]+4096336452&4294967295,I=x+(k<<6&4294967295|k>>>26),k=M+(x^(I|~V))+D[7]+1126891415&4294967295,M=I+(k<<10&4294967295|k>>>22),k=V+(I^(M|~x))+D[14]+2878612391&4294967295,V=M+(k<<15&4294967295|k>>>17),k=x+(M^(V|~I))+D[5]+4237533241&4294967295,x=V+(k<<21&4294967295|k>>>11),k=I+(V^(x|~M))+D[12]+1700485571&4294967295,I=x+(k<<6&4294967295|k>>>26),k=M+(x^(I|~V))+D[3]+2399980690&4294967295,M=I+(k<<10&4294967295|k>>>22),k=V+(I^(M|~x))+D[10]+4293915773&4294967295,V=M+(k<<15&4294967295|k>>>17),k=x+(M^(V|~I))+D[1]+2240044497&4294967295,x=V+(k<<21&4294967295|k>>>11),k=I+(V^(x|~M))+D[8]+1873313359&4294967295,I=x+(k<<6&4294967295|k>>>26),k=M+(x^(I|~V))+D[15]+4264355552&4294967295,M=I+(k<<10&4294967295|k>>>22),k=V+(I^(M|~x))+D[6]+2734768916&4294967295,V=M+(k<<15&4294967295|k>>>17),k=x+(M^(V|~I))+D[13]+1309151649&4294967295,x=V+(k<<21&4294967295|k>>>11),k=I+(V^(x|~M))+D[4]+4149444226&4294967295,I=x+(k<<6&4294967295|k>>>26),k=M+(x^(I|~V))+D[11]+3174756917&4294967295,M=I+(k<<10&4294967295|k>>>22),k=V+(I^(M|~x))+D[2]+718787259&4294967295,V=M+(k<<15&4294967295|k>>>17),k=x+(M^(V|~I))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+M&4294967295}n.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var x=I-this.blockSize,D=this.B,V=this.h,M=0;M<I;){if(V==0)for(;M<=x;)i(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<I;)if(D[V++]=R.charCodeAt(M++),V==this.blockSize){i(this,D),V=0;break}}else for(;M<I;)if(D[V++]=R[M++],V==this.blockSize){i(this,D),V=0;break}}this.h=V,this.o+=I},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var x=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=x&255,x/=256;for(this.u(R),R=Array(16),I=x=0;4>I;++I)for(var D=0;32>D;D+=8)R[x++]=this.g[I]>>>D&255;return R};function a(R,I){var x=c;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=I(R)}function u(R,I){this.h=I;for(var x=[],D=!0,V=R.length-1;0<=V;V--){var M=R[V]|0;D&&M==I||(x[V]=M,D=!1)}this.g=x}var c={};function d(R){return-128<=R&&128>R?a(R,function(I){return new u([I|0],0>I?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return b(p(-R));for(var I=[],x=1,D=0;R>=x;D++)I[D]=R/x|0,x*=4294967296;return new u(I,0)}function g(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return b(g(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(I,8)),D=_,V=0;V<R.length;V+=8){var M=Math.min(8,R.length-V),k=parseInt(R.substring(V,V+M),I);8>M?(M=p(Math.pow(I,M)),D=D.j(M).add(p(k))):(D=D.j(x),D=D.add(p(k)))}return D}var _=d(0),E=d(1),C=d(16777216);r=u.prototype,r.m=function(){if(P(this))return-b(this).m();for(var R=0,I=1,x=0;x<this.g.length;x++){var D=this.i(x);R+=(0<=D?D:4294967296+D)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(P(this))return"-"+b(this).toString(R);for(var I=p(Math.pow(R,6)),x=this,D="";;){var V=Q(x,I).g;x=B(x,V.j(I));var M=((0<x.g.length?x.g[0]:x.h)>>>0).toString(R);if(x=V,A(x))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function P(R){return R.h==-1}r.l=function(R){return R=B(this,R),P(R)?-1:A(R)?0:1};function b(R){for(var I=R.g.length,x=[],D=0;D<I;D++)x[D]=~R.g[D];return new u(x,~R.h).add(E)}r.abs=function(){return P(this)?b(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],D=0,V=0;V<=I;V++){var M=D+(this.i(V)&65535)+(R.i(V)&65535),k=(M>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);D=k>>>16,M&=65535,k&=65535,x[V]=k<<16|M}return new u(x,x[x.length-1]&-2147483648?-1:0)};function B(R,I){return R.add(b(I))}r.j=function(R){if(A(this)||A(R))return _;if(P(this))return P(R)?b(this).j(b(R)):b(b(this).j(R));if(P(R))return b(this.j(b(R)));if(0>this.l(C)&&0>R.l(C))return p(this.m()*R.m());for(var I=this.g.length+R.g.length,x=[],D=0;D<2*I;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<R.g.length;V++){var M=this.i(D)>>>16,k=this.i(D)&65535,me=R.i(V)>>>16,ue=R.i(V)&65535;x[2*D+2*V]+=k*ue,q(x,2*D+2*V),x[2*D+2*V+1]+=M*ue,q(x,2*D+2*V+1),x[2*D+2*V+1]+=k*me,q(x,2*D+2*V+1),x[2*D+2*V+2]+=M*me,q(x,2*D+2*V+2)}for(D=0;D<I;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=I;D<2*I;D++)x[D]=0;return new u(x,0)};function q(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function $(R,I){this.g=R,this.h=I}function Q(R,I){if(A(I))throw Error("division by zero");if(A(R))return new $(_,_);if(P(R))return I=Q(b(R),I),new $(b(I.g),b(I.h));if(P(I))return I=Q(R,b(I)),new $(b(I.g),I.h);if(30<R.g.length){if(P(R)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var x=E,D=I;0>=D.l(R);)x=F(x),D=F(D);var V=U(x,1),M=U(D,1);for(D=U(D,2),x=U(x,2);!A(D);){var k=M.add(D);0>=k.l(R)&&(V=V.add(x),M=k),D=U(D,1),x=U(x,1)}return I=B(R,V.j(I)),new $(V,I)}for(V=_;0<=R.l(I);){for(x=Math.max(1,Math.floor(R.m()/I.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=p(x),k=M.j(I);P(k)||0<k.l(R);)x-=D,M=p(x),k=M.j(I);A(M)&&(M=E),V=V.add(M),R=B(R,k)}return new $(V,R)}r.A=function(R){return Q(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],D=0;D<I;D++)x[D]=this.i(D)&R.i(D);return new u(x,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],D=0;D<I;D++)x[D]=this.i(D)|R.i(D);return new u(x,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],D=0;D<I;D++)x[D]=this.i(D)^R.i(D);return new u(x,this.h^R.h)};function F(R){for(var I=R.g.length+1,x=[],D=0;D<I;D++)x[D]=R.i(D)<<1|R.i(D-1)>>>31;return new u(x,R.h)}function U(R,I){var x=I>>5;I%=32;for(var D=R.g.length-x,V=[],M=0;M<D;M++)V[M]=0<I?R.i(M+x)>>>I|R.i(M+x+1)<<32-I:R.i(M+x);return new u(V,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,x0=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,hi=u}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N0,Pl,R0,Gc,lp,P0,k0,D0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,w){return h==Array.prototype||h==Object.prototype||(h[y]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=t(this);function i(h,y){if(y)e:{var w=n;h=h.split(".");for(var N=0;N<h.length-1;N++){var G=h[N];if(!(G in w))break e;w=w[G]}h=h[h.length-1],N=w[h],y=y(N),y!=N&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var w=0,N=!1,G={next:function(){if(!N&&w<h.length){var Z=w++;return{value:y(Z,h[Z]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(h){return h||function(){return a(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function _(h,y,w){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),h.apply(y,G)}}return function(){return h.apply(y,arguments)}}function E(h,y,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,E.apply(null,arguments)}function C(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function A(h,y){function w(){}w.prototype=y.prototype,h.aa=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(N,G,Z){for(var ge=Array(arguments.length-2),et=2;et<arguments.length;et++)ge[et-2]=arguments[et];return y.prototype[G].apply(N,ge)}}function P(h){const y=h.length;if(0<y){const w=Array(y);for(let N=0;N<y;N++)w[N]=h[N];return w}return[]}function b(h,y){for(let w=1;w<arguments.length;w++){const N=arguments[w];if(d(N)){const G=h.length||0,Z=N.length||0;h.length=G+Z;for(let ge=0;ge<Z;ge++)h[G+ge]=N[ge]}else h.push(N)}}class B{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function Q(h){return Q[" "](h),h}Q[" "]=function(){};var F=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function U(h,y,w){for(const N in h)y.call(w,h[N],N,h)}function R(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function I(h){const y={};for(const w in h)y[w]=h[w];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,y){let w,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(w in N)h[w]=N[w];for(let Z=0;Z<x.length;Z++)w=x[Z],Object.prototype.hasOwnProperty.call(N,w)&&(h[w]=N[w])}}function V(h){var y=1;h=h.split(":");const w=[];for(;0<y&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function M(h){c.setTimeout(()=>{throw h},0)}function k(){var h=re;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,w){const N=ue.get();N.set(y,w),this.h?this.h.next=N:this.g=N,this.h=N}}var ue=new B(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,te=!1,re=new me,ne=()=>{const h=c.Promise.resolve(void 0);ce=()=>{h.then(L)}};var L=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(w){M(w)}var y=ue;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}te=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h}();function ye(h,y){if(Ee.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(F){e:{try{Q(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ye.aa.h.call(this)}}A(ye,Ee);var se={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),ee=0;function ve(h,y,w,N,G){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!N,this.ha=G,this.key=++ee,this.da=this.fa=!1}function Ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h){this.src=h,this.g={},this.h=0}Be.prototype.add=function(h,y,w,N,G){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var ge=Ze(h,y,N,G);return-1<ge?(y=h[ge],w||(y.fa=!1)):(y=new ve(y,this.src,Z,!!N,G),y.fa=w,h.push(y)),y};function $e(h,y){var w=y.type;if(w in h.g){var N=h.g[w],G=Array.prototype.indexOf.call(N,y,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(N,G,1),Z&&(Ae(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ze(h,y,w,N){for(var G=0;G<h.length;++G){var Z=h[G];if(!Z.da&&Z.listener==y&&Z.capture==!!w&&Z.ha==N)return G}return-1}var je="closure_lm_"+(1e6*Math.random()|0),kn={};function Ps(h,y,w,N,G){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)Ps(h,y[Z],w,N,G);return null}return w=bn(w),h&&h[J]?h.K(y,w,p(N)?!!N.capture:!1,G):Mr(h,y,w,!1,N,G)}function Mr(h,y,w,N,G,Z){if(!y)throw Error("Invalid event type");var ge=p(G)?!!G.capture:!!G,et=en(h);if(et||(h[je]=et=new Be(h)),w=et.add(y,w,N,ge,Z),w.proxy)return w;if(N=Or(),w.proxy=N,N.src=h,N.listener=w,h.addEventListener)De||(G=ge),G===void 0&&(G=!1),h.addEventListener(y.toString(),N,G);else if(h.attachEvent)h.attachEvent(Dn(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Or(){function h(w){return y.call(h.src,h.listener,w)}const y=Tt;return h}function Yn(h,y,w,N,G){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Yn(h,y[Z],w,N,G);else N=p(N)?!!N.capture:!!N,w=bn(w),h&&h[J]?(h=h.i,y=String(y).toString(),y in h.g&&(Z=h.g[y],w=Ze(Z,w,N,G),-1<w&&(Ae(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete h.g[y],h.h--)))):h&&(h=en(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ze(y,w,N,G)),(w=-1<h?y[h]:null)&&dn(w))}function dn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[J])$e(y.i,h);else{var w=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(w,N,h.capture):y.detachEvent?y.detachEvent(Dn(w),N):y.addListener&&y.removeListener&&y.removeListener(N),(w=en(y))?($e(w,h),w.h==0&&(w.src=null,y[je]=null)):Ae(h)}}}function Dn(h){return h in kn?kn[h]:kn[h]="on"+h}function Tt(h,y){if(h.da)h=!0;else{y=new ye(y,this);var w=h.listener,N=h.ha||h.src;h.fa&&dn(h),h=w.call(N,y)}return h}function en(h){return h=h[je],h instanceof Be?h:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(h){return typeof h=="function"?h:(h[Xe]||(h[Xe]=function(y){return h.handleEvent(y)}),h[Xe])}function ut(){Y.call(this),this.i=new Be(this),this.M=this,this.F=null}A(ut,Y),ut.prototype[J]=!0,ut.prototype.removeEventListener=function(h,y,w,N){Yn(this,h,y,w,N)};function ct(h,y){var w,N=h.F;if(N)for(w=[];N;N=N.F)w.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new Ee(y,h);else if(y instanceof Ee)y.target=y.target||h;else{var G=y;y=new Ee(N,h),D(y,G)}if(G=!0,w)for(var Z=w.length-1;0<=Z;Z--){var ge=y.g=w[Z];G=_n(ge,N,!0,y)&&G}if(ge=y.g=h,G=_n(ge,N,!0,y)&&G,G=_n(ge,N,!1,y)&&G,w)for(Z=0;Z<w.length;Z++)ge=y.g=w[Z],G=_n(ge,N,!1,y)&&G}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var w=h.g[y],N=0;N<w.length;N++)Ae(w[N]);delete h.g[y],h.h--}}this.F=null},ut.prototype.K=function(h,y,w,N){return this.i.add(String(h),y,!1,w,N)},ut.prototype.L=function(h,y,w,N){return this.i.add(String(h),y,!0,w,N)};function _n(h,y,w,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,Z=0;Z<y.length;++Z){var ge=y[Z];if(ge&&!ge.da&&ge.capture==w){var et=ge.listener,Lt=ge.ha||ge.src;ge.fa&&$e(h.i,ge),G=et.call(Lt,N)!==!1&&G}}return G&&!N.defaultPrevented}function ss(h,y,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(h,y||0)}function Vn(h){h.g=ss(()=>{h.g=null,h.i&&(h.i=!1,Vn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zn extends Y{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(h){Y.call(this),this.h=h,this.g={}}A(Mn,Y);var Fr=[];function Lr(h){U(h.g,function(y,w){this.g.hasOwnProperty(w)&&dn(y)},h),h.g={}}Mn.prototype.N=function(){Mn.aa.N.call(this),Lr(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ti=c.JSON.stringify,ke=c.JSON.parse,Oe=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Je(){}Je.prototype.h=null;function ot(h){return h.h||(h.h=h.i())}function fr(){}var Ft={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){Ee.call(this,"d")}A(On,Ee);function pr(){Ee.call(this,"c")}A(pr,Ee);var Fn={},Ii=null;function is(){return Ii=Ii||new ut}Fn.La="serverreachability";function Si(h){Ee.call(this,Fn.La,h)}A(Si,Ee);function Ln(h){const y=is();ct(y,new Si(y))}Fn.STAT_EVENT="statevent";function Ci(h,y){Ee.call(this,Fn.STAT_EVENT,h),this.stat=y}A(Ci,Ee);function pt(h){const y=is();ct(y,new Ci(y,h))}Fn.Ma="timingevent";function xt(h,y){Ee.call(this,Fn.Ma,h),this.size=y}A(xt,Ee);function Nt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.xa=function(){this.g=!1};function mr(h,y,w,N,G,Z){h.info(function(){if(h.g)if(Z)for(var ge="",et=Z.split("&"),Lt=0;Lt<et.length;Lt++){var Ge=et[Lt].split("=");if(1<Ge.length){var Ut=Ge[0];Ge=Ge[1];var Vt=Ut.split("_");ge=2<=Vt.length&&Vt[1]=="type"?ge+(Ut+"="+Ge+"&"):ge+(Ut+"=redacted&")}}else ge=null;else ge=Z;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+y+`
`+w+`
`+ge})}function jr(h,y,w,N,G,Z,ge){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+y+`
`+w+`
`+Z+" "+ge})}function gr(h,y,w,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ld(h,w)+(N?" "+N:"")})}function $a(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function ld(h,y){if(!h.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var N=w[h];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return Ti(w)}catch{return y}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yr;function Ai(){}A(Ai,Je),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},yr=new Ai;function vr(h,y,w,N){this.j=h,this.i=y,this.l=w,this.R=N||1,this.U=new Mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iu}function Iu(){this.i=null,this.g="",this.h=!1}var qa={},Io={};function So(h,y,w){h.L=1,h.v=Ms(Bn(y)),h.m=w,h.P=!0,Wa(h,null)}function Wa(h,y){h.F=Date.now(),at(h),h.A=Bn(h.v);var w=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),Fs(w.i,"t",N),h.C=0,w=h.j.J,h.h=new Iu,h.g=zu(h.j,w?y:null,!h.m),0<h.O&&(h.M=new Zn(E(h.Y,h,h.g),h.O)),y=h.U,w=h.g,N=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Fr[0]=G.toString()),G=Fr);for(var Z=0;Z<G.length;Z++){var ge=Ps(w,G[Z],N||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ln(),mr(h.i,h.u,h.A,h.l,h.R,h.m)}vr.prototype.ca=function(h){h=h.target;const y=this.M;y&&En(h)==3?y.j():this.Y(h)},vr.prototype.Y=function(h){try{if(h==this.g)e:{const Vt=En(this.g);var y=this.g.Ba();const nr=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||Ya(this.g)))){this.J||Vt!=4||y==7||(y==8||0>=nr?Ln(3):Ln(2)),xi(this);var w=this.g.Z();this.X=w;t:if(Su(this)){var N=Ya(this.g);h="";var G=N.length,Z=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),ks(this);var ge="";break t}this.h.i=new c.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,h+=this.h.i.decode(N[y],{stream:!(Z&&y==G-1)});N.length=0,this.h.g+=h,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=w==200,jr(this.i,this.u,this.A,this.l,this.R,Vt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Lt=this.g;if((et=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(et)){var Ge=et;break t}}Ge=null}if(w=Ge)gr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,pt(12),er(this),ks(this);break e}}if(this.P){w=!0;let Un;for(;!this.J&&this.C<ge.length;)if(Un=ud(this,ge),Un==Io){Vt==4&&(this.s=4,pt(14),w=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==qa){this.s=4,pt(15),gr(this.i,this.l,ge,"[Invalid Chunk]"),w=!1;break}else gr(this.i,this.l,Un,null),Ga(this,Un);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||ge.length!=0||this.h.h||(this.s=1,pt(16),w=!1),this.o=this.o&&w,!w)gr(this.i,this.l,ge,"[Invalid Chunked Response]"),er(this),ks(this);else if(0<ge.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Ja(Ut),Ut.M=!0,pt(11))}}else gr(this.i,this.l,ge,null),Ga(this,ge);Vt==4&&er(this),this.o&&!this.J&&(Vt==4?Mo(this.j,this):(this.o=!1,at(this)))}else Po(this.g),w==400&&0<ge.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),er(this),ks(this)}}}catch{}finally{}};function Su(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ud(h,y){var w=h.C,N=y.indexOf(`
`,w);return N==-1?Io:(w=Number(y.substring(w,N)),isNaN(w)?qa:(N+=1,N+w>y.length?Io:(y=y.slice(N,N+w),h.C=N+w,y)))}vr.prototype.cancel=function(){this.J=!0,er(this)};function at(h){h.S=Date.now()+h.I,Cu(h,h.I)}function Cu(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Nt(E(h.ba,h),y)}function xi(h){h.B&&(c.clearTimeout(h.B),h.B=null)}vr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($a(this.i,this.A),this.L!=2&&(Ln(),pt(17)),er(this),this.s=2,ks(this)):Cu(this,this.S-h)};function ks(h){h.j.G==0||h.J||Mo(h.j,h)}function er(h){xi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Lr(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ga(h,y){try{var w=h.j;if(w.G!=0&&(w.g==h||fn(w.h,h))){if(!h.K&&fn(w.h,h)&&w.G==3){try{var N=w.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Vo(w),Ir(w);else break e;bo(w),pt(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=Nt(E(w.Za,w),6e3));if(1>=xu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else cs(w,11)}else if((h.K||w.g==h)&&Vo(w),!q(y))for(G=w.Da.g.parse(y),y=0;y<G.length;y++){let Ge=G[y];if(w.T=Ge[0],Ge=Ge[1],w.G==2)if(Ge[0]=="c"){w.K=Ge[1],w.ia=Ge[2];const Ut=Ge[3];Ut!=null&&(w.la=Ut,w.j.info("VER="+w.la));const Vt=Ge[4];Vt!=null&&(w.Aa=Vt,w.j.info("SVER="+w.Aa));const nr=Ge[5];nr!=null&&typeof nr=="number"&&0<nr&&(N=1.5*nr,w.L=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Un=h.g;if(Un){const Vi=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vi){var Z=N.h;Z.g||Vi.indexOf("spdy")==-1&&Vi.indexOf("quic")==-1&&Vi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ka(Z,Z.h),Z.h=null))}if(N.D){const Fo=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(N.ya=Fo,st(N.I,N.D,Fo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),N=w;var ge=h;if(N.qa=Bu(N,N.J?N.ia:null,N.W),ge.K){Nu(N.h,ge);var et=ge,Lt=N.L;Lt&&(et.I=Lt),et.B&&(xi(et),at(et)),N.g=ge}else bi(N);0<w.i.length&&$r(w)}else Ge[0]!="stop"&&Ge[0]!="close"||cs(w,7);else w.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?cs(w,7):Xt(w):Ge[0]!="noop"&&w.l&&w.l.ta(Ge),w.v=0)}}Ln(4)}catch{}}var Au=class{constructor(h,y){this.g=h,this.map=y}};function Ni(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xu(h){return h.h?1:h.g?h.g.size:0}function fn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ka(h,y){h.g?h.g.add(y):h.h=y}function Nu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ni.prototype.cancel=function(){if(this.i=Ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ru(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.D);return y}return P(h.i)}function Co(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var y=[],w=h.length,N=0;N<w;N++)y.push(h[N]);return y}y=[],w=0;for(N in h)y[w++]=h[N];return y}function Ao(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var y=[];h=h.length;for(var w=0;w<h;w++)y.push(w);return y}y=[],w=0;for(const N in h)y[w++]=N;return y}}}function Ds(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var w=Ao(h),N=Co(h),G=N.length,Z=0;Z<G;Z++)y.call(void 0,N[Z],w&&w[Z],h)}var Ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(h,y){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var N=h[w].indexOf("="),G=null;if(0<=N){var Z=h[w].substring(0,N);G=h[w].substring(N+1)}else Z=h[w];y(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function os(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof os){this.h=h.h,Pi(this,h.j),this.o=h.o,this.g=h.g,bs(this,h.s),this.l=h.l;var y=h.i,w=new Br;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),Vs(this,w),this.m=h.m}else h&&(y=String(h).match(Ri))?(this.h=!1,Pi(this,y[1]||"",!0),this.o=qe(y[2]||""),this.g=qe(y[3]||"",!0),bs(this,y[4]),this.l=qe(y[5]||"",!0),Vs(this,y[6]||"",!0),this.m=qe(y[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}os.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Os(y,xo,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Os(y,xo,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Os(w,w.charAt(0)=="/"?Du:ku,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Os(w,Ha)),h.join("")};function Bn(h){return new os(h)}function Pi(h,y,w){h.j=w?qe(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function bs(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Vs(h,y,w){y instanceof Br?(h.i=y,zr(h.i,h.h)):(w||(y=Os(y,bu)),h.i=new Br(y,h.h))}function st(h,y,w){h.i.set(y,w)}function Ms(h){return st(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function qe(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,Pu),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var xo=/[#\/\?@]/g,ku=/[#\?:]/g,Du=/[#\?]/g,bu=/[#\?@]/g,Ha=/#/g;function Br(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Qt(h){h.g||(h.g=new Map,h.h=0,h.i&&cd(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=Br.prototype,r.add=function(h,y){Qt(this),this.i=null,h=tr(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function _r(h,y){Qt(h),y=tr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function wr(h,y){return Qt(h),y=tr(h,y),h.g.has(y)}r.forEach=function(h,y){Qt(this),this.g.forEach(function(w,N){w.forEach(function(G){h.call(y,G,N,this)},this)},this)},r.na=function(){Qt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let N=0;N<y.length;N++){const G=h[N];for(let Z=0;Z<G.length;Z++)w.push(y[N])}return w},r.V=function(h){Qt(this);let y=[];if(typeof h=="string")wr(this,h)&&(y=y.concat(this.g.get(tr(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)y=y.concat(h[w])}return y},r.set=function(h,y){return Qt(this),this.i=null,h=tr(this,h),wr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Fs(h,y,w){_r(h,y),0<w.length&&(h.i=null,h.g.set(tr(h,y),P(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var N=y[w];const Z=encodeURIComponent(String(N)),ge=this.V(N);for(N=0;N<ge.length;N++){var G=Z;ge[N]!==""&&(G+="="+encodeURIComponent(String(ge[N]))),h.push(G)}}return this.i=h.join("&")};function tr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function zr(h,y){y&&!h.j&&(Qt(h),h.i=null,h.g.forEach(function(w,N){var G=N.toLowerCase();N!=G&&(_r(this,N),Fs(this,G,w))},h)),h.j=y}function hd(h,y){const w=new Jn;if(c.Image){const N=new Image;N.onload=C(wn,w,"TestLoadImage: loaded",!0,y,N),N.onerror=C(wn,w,"TestLoadImage: error",!1,y,N),N.onabort=C(wn,w,"TestLoadImage: abort",!1,y,N),N.ontimeout=C(wn,w,"TestLoadImage: timeout",!1,y,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function Vu(h,y){const w=new Jn,N=new AbortController,G=setTimeout(()=>{N.abort(),wn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(Z=>{clearTimeout(G),Z.ok?wn(w,"TestPingServer: ok",!0,y):wn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),wn(w,"TestPingServer: error",!1,y)})}function wn(h,y,w,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(w)}catch{}}function dd(){this.g=new Oe}function Mu(h,y,w){const N=w||"";try{Ds(h,function(G,Z){let ge=G;p(G)&&(ge=Ti(G)),y.push(N+Z+"="+encodeURIComponent(ge))})}catch(G){throw y.push(N+"type="+encodeURIComponent("_badmap")),G}}function as(h){this.l=h.Ub||null,this.j=h.eb||!1}A(as,Je),as.prototype.g=function(){return new ki(this.l,this.j)},as.prototype.i=function(h){return function(){return h}}({});function ki(h,y){ut.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ki,ut),r=ki.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Tr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ou(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ou(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Er(this):Tr(this),this.readyState==3&&Ou(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,Er(this))},r.Qa=function(h){this.g&&(this.response=h,Er(this))},r.ga=function(){this.g&&Er(this)};function Er(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Tr(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ls(h){let y="";return U(h,function(w,N){y+=N,y+=":",y+=w,y+=`\r
`}),y}function Ls(h,y,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=ls(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):st(h,y,w))}function mt(h){ut.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(mt,ut);var fd=/^https?$/i,Qa=["POST","PUT"];r=mt.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yr.g(),this.v=this.o?ot(this.o):ot(yr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){Di(this,Z);return}if(h=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)w.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())w.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qa,y,void 0))||N||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ge]of w)this.g.setRequestHeader(Z,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Di(this,Z)}};function Di(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,No(h),zn(h)}function No(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ct(this,"complete"),ct(this,"abort"),zn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),mt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Xa(this):this.bb())},r.bb=function(){Xa(this)};function Xa(h){if(h.h&&typeof u<"u"&&(!h.v[1]||En(h)!=4||h.Z()!=2)){if(h.u&&En(h)==4)ss(h.Ea,0,h);else if(ct(h,"readystatechange"),En(h)==4){h.h=!1;try{const ge=h.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var N;if(N=ge===0){var G=String(h.D).match(Ri)[1]||null;!G&&c.self&&c.self.location&&(G=c.self.location.protocol.slice(0,-1)),N=!fd.test(G?G.toLowerCase():"")}w=N}if(w)ct(h,"complete"),ct(h,"success");else{h.m=6;try{var Z=2<En(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",No(h)}}finally{zn(h)}}}}function zn(h,y){if(h.g){Ro(h);const w=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||ct(h,"ready");try{w.onreadystatechange=N}catch{}}}function Ro(h){h.I&&(c.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function En(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ke(y)}};function Ya(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Po(h){const y={};h=(h.g&&2<=En(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(q(h[N]))continue;var w=V(h[N]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=y[G]||[];y[G]=Z,Z.push(w)}R(y,function(N){return N.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Za(h){this.Aa=0,this.i=[],this.j=new Jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ur("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ur("baseRetryDelayMs",5e3,h),this.cb=Ur("retryDelaySeedMs",1e4,h),this.Wa=Ur("forwardChannelMaxRetries",2,h),this.wa=Ur("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(h&&h.concurrentRequestLimit),this.Da=new dd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Za.prototype,r.la=8,r.G=1,r.connect=function(h,y,w,N){pt(0),this.W=h,this.H=y||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.I=Bu(this,null,this.W),$r(this)};function Xt(h){if(ko(h),h.G==3){var y=h.U++,w=Bn(h.I);if(st(w,"SID",h.K),st(w,"RID",y),st(w,"TYPE","terminate"),us(h,w),y=new vr(h,h.j,y),y.L=2,y.v=Ms(Bn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.v,w=!0),w||(y.g=zu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),at(y)}ju(h)}function Ir(h){h.g&&(Ja(h),h.g.cancel(),h.g=null)}function ko(h){Ir(h),h.u&&(c.clearTimeout(h.u),h.u=null),Vo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function $r(h){if(!jn(h.h)&&!h.s){h.s=!0;var y=h.Ga;ce||ne(),te||(ce(),te=!0),re.add(y,h),h.B=0}}function pd(h,y){return xu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Nt(E(h.Ga,h,y),Lu(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new vr(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=I(Z),D(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=js(this,G,y),w=Bn(this.I),st(w,"RID",h),st(w,"CVER",22),this.D&&st(w,"X-HTTP-Session-Id",this.D),us(this,w),Z&&(this.O?y="headers="+encodeURIComponent(String(ls(Z)))+"&"+y:this.m&&Ls(w,this.m,Z)),Ka(this.h,G),this.Ua&&st(w,"TYPE","init"),this.P?(st(w,"$req",y),st(w,"SID","null"),G.T=!0,So(G,w,null)):So(G,w,y),this.G=2}}else this.G==3&&(h?Do(this,h):this.i.length==0||jn(this.h)||Do(this))};function Do(h,y){var w;y?w=y.l:w=h.U++;const N=Bn(h.I);st(N,"SID",h.K),st(N,"RID",w),st(N,"AID",h.T),us(h,N),h.m&&h.o&&Ls(N,h.m,h.o),w=new vr(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),y&&(h.i=y.D.concat(h.i)),y=js(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,w),So(w,N,y)}function us(h,y){h.H&&U(h.H,function(w,N){st(y,N,w)}),h.l&&Ds({},function(w,N){st(y,N,w)})}function js(h,y,w){w=Math.min(h.i.length,w);var N=h.l?E(h.l.Na,h.l,h):null;e:{var G=h.i;let Z=-1;for(;;){const ge=["count="+w];Z==-1?0<w?(Z=G[0].g,ge.push("ofs="+Z)):Z=0:ge.push("ofs="+Z);let et=!0;for(let Lt=0;Lt<w;Lt++){let Ge=G[Lt].g;const Ut=G[Lt].map;if(Ge-=Z,0>Ge)Z=Math.max(0,G[Lt].g-100),et=!1;else try{Mu(Ut,ge,"req"+Ge+"_")}catch{N&&N(Ut)}}if(et){N=ge.join("&");break e}}}return h=h.i.splice(0,w),y.D=h,N}function bi(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ce||ne(),te||(ce(),te=!0),re.add(y,h),h.v=0}}function bo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Nt(E(h.Fa,h),Lu(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Nt(E(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ir(this),Fu(this))};function Ja(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function Fu(h){h.g=new vr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Bn(h.qa);st(y,"RID","rpc"),st(y,"SID",h.K),st(y,"AID",h.T),st(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&st(y,"TO",h.ja),st(y,"TYPE","xmlhttp"),us(h,y),h.m&&h.o&&Ls(y,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Ms(Bn(y)),w.m=null,w.P=!0,Wa(w,h)}r.Za=function(){this.C!=null&&(this.C=null,Ir(this),bo(this),pt(19))};function Vo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mo(h,y){var w=null;if(h.g==y){Vo(h),Ja(h),h.g=null;var N=2}else if(fn(h.h,y))w=y.D,Nu(h.h,y),N=1;else return;if(h.G!=0){if(y.o)if(N==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var G=h.B;N=is(),ct(N,new xt(N,w)),$r(h)}else bi(h);else if(G=y.s,G==3||G==0&&0<y.X||!(N==1&&pd(h,y)||N==2&&bo(h)))switch(w&&0<w.length&&(y=h.h,y.i=y.i.concat(w)),G){case 1:cs(h,5);break;case 4:cs(h,10);break;case 3:cs(h,6);break;default:cs(h,2)}}}function Lu(h,y){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*y}function cs(h,y){if(h.j.info("Error code "+y),y==2){var w=E(h.fb,h),N=h.Xa;const G=!N;N=new os(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pi(N,"https"),Ms(N),G?hd(N.toString(),w):Vu(N.toString(),w)}else pt(2);h.G=0,h.l&&h.l.sa(y),ju(h),ko(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ju(h){if(h.G=0,h.ka=[],h.l){const y=Ru(h.h);(y.length!=0||h.i.length!=0)&&(b(h.ka,y),b(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function Bu(h,y,w){var N=w instanceof os?Bn(w):new os(w);if(N.g!="")y&&(N.g=y+"."+N.g),bs(N,N.s);else{var G=c.location;N=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var Z=new os(null);N&&Pi(Z,N),y&&(Z.g=y),G&&bs(Z,G),w&&(Z.l=w),N=Z}return w=h.D,y=h.ya,w&&y&&st(N,w,y),st(N,"VER",h.la),us(h,N),N}function zu(h,y,w){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new mt(new as({eb:w})):new mt(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}r=el.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Oo(){}Oo.prototype.g=function(h,y){return new pn(h,y)};function pn(h,y){ut.call(this),this.g=new Za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!q(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!q(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qr(this)}A(pn,ut),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Xt(this.g)},pn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Ti(h),h=w);y.i.push(new Au(y.Ya++,h)),y.G==3&&$r(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,pn.aa.N.call(this)};function Uu(h){On.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}A(Uu,On);function $u(){pr.call(this),this.status=1}A($u,pr);function qr(h){this.g=h}A(qr,el),qr.prototype.ua=function(){ct(this.g,"a")},qr.prototype.ta=function(h){ct(this.g,new Uu(h))},qr.prototype.sa=function(h){ct(this.g,new $u)},qr.prototype.ra=function(){ct(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,D0=function(){return new Oo},k0=function(){return is()},P0=Fn,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,Gc=To,Tu.COMPLETE="complete",R0=Tu,fr.EventType=Ft,Ft.OPEN="a",Ft.CLOSE="b",Ft.ERROR="c",Ft.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Pl=fr,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,N0=mt}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore",dv="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new v0("@firebase/firestore");function ca(){return ao.logLevel}function ae(r,...e){if(ao.logLevel<=He.DEBUG){const t=e.map(qp);ao.debug(`Firestore (${Ma}): ${r}`,...t)}}function Pt(r,...e){if(ao.logLevel<=He.ERROR){const t=e.map(qp);ao.error(`Firestore (${Ma}): ${r}`,...t)}}function $l(r,...e){if(ao.logLevel<=He.WARN){const t=e.map(qp);ao.warn(`Firestore (${Ma}): ${r}`,...t)}}function qp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+r;throw Pt(e),new Error(e)}function Pe(r,e){r||Ce()}function Ne(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends go{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class mC{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new di;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new di,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new di)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pe(typeof n.accessToken=="string"),new fC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new an(e)}}class gC{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=an.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yC{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vC{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,T0(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0);const n=a=>{a.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ae("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new fv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string"),this.R=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=_C(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function va(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function V0(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-62135596800,mv=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*mv);return new Kt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pv)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mv}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Kt(0,0))}static max(){return new be(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__name__";class Qr{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ce(),n===void 0?n=e.length-t:n>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Qr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Qr.isNumericId(e),i=Qr.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Qr.extractNumericId(e).compare(Qr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class it extends Qr{construct(e,t,n){return new it(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new it(t)}static emptyPath(){return new it([])}}const wC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Qr{construct(e,t,n){return new kt(e,t,n)}static isValidIdentifier(e){return wC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gv}static keyField(){return new kt([gv])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(u=!u,i++):c!=="."||u?(n+=c,i++):(a(),i++)}if(a(),u)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=-1;class oh{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function up(r){return r.fields.find(e=>e.kind===2)}function Xi(r){return r.fields.filter(e=>e.kind!==2)}oh.UNKNOWN_ID=-1;class Kc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ql{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ql(0,Xn.min())}}function M0(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=be.fromTimestamp(n===1e9?new Kt(t+1,0):new Kt(t,n));return new Xn(i,_e.empty(),e)}function O0(r){return new Xn(r.readTime,r.key,_a)}class Xn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xn(be.min(),_e.empty(),_a)}static max(){return new Xn(be.max(),_e.empty(),_a)}}function Wp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vi(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==F0)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,n)=>{t(e)})}static reject(e){return new W((t,n)=>{n(e)})}static waitFor(e){return new W((t,n)=>{let i=0,a=0,u=!1;e.forEach(c=>{++i,c.next(()=>{++a,u&&a===i&&t()},d=>n(d))}),u=!0,a===i&&t()})}static or(e){let t=W.resolve(!1);for(const n of e)t=t.next(i=>i?W.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new W((n,i)=>{const a=e.length,u=new Array(a);let c=0;for(let d=0;d<a;d++){const p=d;t(e[p]).next(g=>{u[p]=g,++c,c===a&&n(u)},g=>i(g))}})}static doWhile(e,t){return new W((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="SimpleDb";class Oh{static open(e,t,n,i){try{return new Oh(t,e.transaction(i,n))}catch(a){throw new Vl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new di,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Vl(e,t.error)):this.m.resolve()},this.transaction.onerror=n=>{const i=Gp(n.target.error);this.m.reject(new Vl(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ae(Kn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TC(t)}}class fi{static delete(e){return ae(Kn,"Removing database:",e),Zi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!m0())return!1;if(fi.v())return!0;const e=rh(),t=fi.C(e),n=0<t&&t<10,i=j0(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,fi.C(rh())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ae(Kn,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const u=a.target.result;t(u)},i.onblocked=()=>{n(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new Se(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new Se(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Vl(e,u))},i.onupgradeneeded=a=>{ae(Kn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.O.B(u,i.transaction,a.oldVersion,this.version).next(()=>{ae(Kn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const c=Oh.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next(p=>(c.S(),p)).catch(p=>(c.abort(p),W.reject(p))).toPromise();return d.catch(()=>{}),await c.p,d}catch(c){const d=c,p=d.name!=="FirebaseError"&&u<3;if(ae(Kn,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function j0(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class EC{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return Zi(this.q.delete())}}class Vl extends Se{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _i(r){return r.name==="IndexedDbTransactionError"}class TC{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ae(Kn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ae(Kn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zi(n)}add(e){return ae(Kn,"ADD",this.store.name,e,e),Zi(this.store.add(e))}get(e){return Zi(this.store.get(e)).next(t=>(t===void 0&&(t=null),ae(Kn,"GET",this.store.name,e,t),t))}delete(e){return ae(Kn,"DELETE",this.store.name,e),Zi(this.store.delete(e))}count(){return ae(Kn,"COUNT",this.store.name),Zi(this.store.count())}G(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new W((u,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{u(d.target.result)}})}{const a=this.cursor(n),u=[];return this.j(a,(c,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new W((i,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{i(u.target.result)}})}J(e,t){ae(Kn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.j(i,(a,u,c)=>c.delete())}Z(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.j(i,t)}X(e){const t=this.cursor({});return new W((n,i)=>{t.onerror=a=>{const u=Gp(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(c=>{c?u.continue():n()}):n()}})}j(e,t){const n=[];return new W((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const c=u.target.result;if(!c)return void i();const d=new EC(c),p=t(c.primaryKey,c.value,d);if(p instanceof W){const g=p.catch(_=>(d.done(),W.reject(_)));n.push(g)}d.isDone?i():d.U===null?c.continue():c.continue(d.U)}}).next(()=>W.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zi(r){return new W((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=Gp(n.target.error);t(i)}})}let yv=!1;function Gp(r){const e=fi.C(rh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yv||(yv=!0,setTimeout(()=>{throw n},0)),n}}return r}const Ml="IndexBackfiller";class IC{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ae(Ml,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ae(Ml,`Documents written: ${t}`)}catch(t){_i(t)?ae(Ml,"Ignoring IndexedDB error during index backfill: ",t):await vi(t)}await this.te(6e4)})}}class SC{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const n=new Set;let i=t,a=!0;return W.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!n.has(u))return ae(Ml,`Processing collection: ${u}`),this.ie(e,u,i).next(c=>{i-=c,n.add(u)});a=!1})).next(()=>t-i)}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(i,a)).next(c=>(ae(Ml,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>u.size)}))}se(e,t){let n=e;return t.changes.forEach((i,a)=>{const u=O0(a);Wp(u,n)>0&&(n=u)}),new Xn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Rn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function Fh(r){return r==null}function Wl(r){return r===0&&1/r==-1/0}function CC(r){return typeof r=="number"&&Number.isInteger(r)&&!Wl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="";function un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=vv(e)),e=AC(r.get(t),e);return vv(e)}function AC(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case ah:t+="";break;default:t+=a}}return t}function vv(r){return r+ah+""}function Yr(r){const e=r.length;if(Pe(e>=2),e===2)return Pe(r.charAt(0)===ah&&r.charAt(1)===""),it.emptyPath();const t=e-2,n=[];let i="";for(let a=0;a<e;){const u=r.indexOf(ah,a);switch((u<0||u>t)&&Ce(),r.charAt(u+1)){case"":const c=r.substring(a,u);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=r.substring(a,u),i+="\0";break;case"":i+=r.substring(a,u+1);break;default:Ce()}a=u+2}return new it(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="remoteDocuments",ou="owner",sa="owner",Gl="mutationQueues",xC="userId",Pr="mutations",_v="batchId",no="userMutationsIndex",wv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r,e){return[r,un(e)]}function B0(r,e,t){return[r,un(e),t]}const NC={},wa="documentMutations",lh="remoteDocumentsV14",RC=["prefixPath","collectionGroup","readTime","documentId"],Qc="documentKeyIndex",PC=["prefixPath","collectionGroup","documentId"],z0="collectionGroupIndex",kC=["collectionGroup","readTime","prefixPath","documentId"],Kl="remoteDocumentGlobal",cp="remoteDocumentGlobalKey",Ea="targets",U0="queryTargetsIndex",DC=["canonicalId","targetId"],Ta="targetDocuments",bC=["targetId","path"],Kp="documentTargetsIndex",VC=["path","targetId"],uh="targetGlobalKey",so="targetGlobal",Hl="collectionParents",MC=["collectionId","parent"],Ia="clientMetadata",OC="clientId",Lh="bundles",FC="bundleId",jh="namedQueries",LC="name",Hp="indexConfiguration",jC="indexId",hp="collectionGroupIndex",BC="collectionGroup",ch="indexState",zC=["indexId","uid"],$0="sequenceNumberIndex",UC=["uid","sequenceNumber"],hh="indexEntries",$C=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q0="documentKeyIndex",qC=["indexId","uid","orderedDocumentKey"],Bh="documentOverlays",WC=["userId","collectionPath","documentId"],dp="collectionPathOverlayIndex",GC=["userId","collectionPath","largestBatchId"],W0="collectionGroupOverlayIndex",KC=["userId","collectionGroup","largestBatchId"],Qp="globals",HC="name",G0=[Gl,Pr,wa,Yi,Ea,ou,so,Ta,Ia,Kl,Hl,Lh,jh],QC=[...G0,Bh],K0=[Gl,Pr,wa,lh,Ea,ou,so,Ta,Ia,Kl,Hl,Lh,jh,Bh],H0=K0,Xp=[...H0,Hp,ch,hh],XC=Xp,YC=[...Xp,Qp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends L0{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function zt(r,e){const t=Ne(r);return fi.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function au(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ZC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Jt.RED,this.left=i??Jt.EMPTY,this.right=a??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Jt(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Jt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,n,i,a){return this}insert(e,t,n){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ia(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ws([])}unionWith(e){let t=new tt(kt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Q0("Invalid base64 string: "+a):a}}(e);return new Dt(t)}static fromUint8Array(e){const t=function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a}(e);return new Dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(r){if(Pe(!!r),typeof r=="string"){let e=0;const t=JC.exec(r);if(Pe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function As(r){return typeof r=="string"?Dt.fromBase64String(r):Dt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="server_timestamp",Y0="__type__",Z0="__previous_value__",J0="__local_write_time__";function Yp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Y0])===null||t===void 0?void 0:t.stringValue)===X0}function zh(r){const e=r.mapValue.fields[Z0];return Yp(e)?zh(e):e}function Ql(r){const e=Cs(r.mapValue.fields[J0].timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,n,i,a,u,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}const dh="(default)";class lo{constructor(e,t){this.projectId=e,this.database=t||dh}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="__type__",tw="__max__",ai={mapValue:{fields:{__type__:{stringValue:tw}}}},nw="__vector__",Xl="value",Xc={nullValue:"NULL_VALUE"};function pi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yp(r)?4:rw(r)?9007199254740991:Uh(r)?10:11:Ce()}function Jr(r,e){if(r===e)return!0;const t=pi(r);if(t!==pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ql(r).isEqual(Ql(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=Cs(i.timestampValue),c=Cs(a.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return As(i.bytesValue).isEqual(As(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return yt(i.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yt(i.integerValue)===yt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=yt(i.doubleValue),c=yt(a.doubleValue);return u===c?Wl(u)===Wl(c):isNaN(u)&&isNaN(c)}return!1}(r,e);case 9:return va(r.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(i,a){const u=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Ev(u)!==Ev(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!Jr(u[d],c[d])))return!1;return!0}(r,e);default:return Ce()}}function Yl(r,e){return(r.values||[]).find(t=>Jr(t,e))!==void 0}function mi(r,e){if(r===e)return 0;const t=pi(r),n=pi(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(a,u){const c=yt(a.integerValue||a.doubleValue),d=yt(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(r,e);case 3:return Iv(r.timestampValue,e.timestampValue);case 4:return Iv(Ql(r),Ql(e));case 5:return Le(r.stringValue,e.stringValue);case 6:return function(a,u){const c=As(a),d=As(u);return c.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(a,u){const c=a.split("/"),d=u.split("/");for(let p=0;p<c.length&&p<d.length;p++){const g=Le(c[p],d[p]);if(g!==0)return g}return Le(c.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,u){const c=Le(yt(a.latitude),yt(u.latitude));return c!==0?c:Le(yt(a.longitude),yt(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Sv(r.arrayValue,e.arrayValue);case 10:return function(a,u){var c,d,p,g;const _=a.fields||{},E=u.fields||{},C=(c=_[Xl])===null||c===void 0?void 0:c.arrayValue,A=(d=E[Xl])===null||d===void 0?void 0:d.arrayValue,P=Le(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((g=A==null?void 0:A.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:Sv(C,A)}(r.mapValue,e.mapValue);case 11:return function(a,u){if(a===ai.mapValue&&u===ai.mapValue)return 0;if(a===ai.mapValue)return 1;if(u===ai.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),p=u.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let _=0;_<d.length&&_<g.length;++_){const E=Le(d[_],g[_]);if(E!==0)return E;const C=mi(c[d[_]],p[g[_]]);if(C!==0)return C}return Le(d.length,g.length)}(r.mapValue,e.mapValue);default:throw Ce()}}function Iv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Cs(r),n=Cs(e),i=Le(t.seconds,n.seconds);return i!==0?i:Le(t.nanos,n.nanos)}function Sv(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=mi(t[i],n[i]);if(a)return a}return Le(t.length,n.length)}function Sa(r){return pp(r)}function pp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Cs(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return As(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return _e.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=pp(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of n)a?a=!1:i+=",",i+=`${u}:${pp(t.fields[u])}`;return i+"}"}(r.mapValue):Ce()}function Yc(r){switch(pi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zh(r);return e?16+Yc(e):16;case 5:return 2*r.stringValue.length;case 6:return As(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Yc(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return au(n.fields,(a,u)=>{i+=a.length+Yc(u)}),i}(r.mapValue);default:throw Ce()}}function Zp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function mp(r){return!!r&&"integerValue"in r}function Zl(r){return!!r&&"arrayValue"in r}function Cv(r){return!!r&&"nullValue"in r}function Av(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qf(r){return!!r&&"mapValue"in r}function Uh(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[ew])===null||t===void 0?void 0:t.stringValue)===nw}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return au(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ol(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(r.arrayValue.values[t]);return e}return Object.assign({},r)}function rw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tw}const sw={mapValue:{fields:{[ew]:{stringValue:nw},[Xl]:{arrayValue:{}}}}};function tA(r){return"nullValue"in r?Xc:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Zp(lo.empty(),_e.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Uh(r)?sw:{mapValue:{}}:Ce()}function nA(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Zp(lo.empty(),_e.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?sw:"mapValue"in r?Uh(r)?{mapValue:{}}:ai:Ce()}function xv(r,e){const t=mi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Nv(r,e){const t=mi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=kt.emptyPath(),n={},i=[];e.forEach((u,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}u?n[c.lastSegment()]=Ol(u):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){au(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new cr(Ol(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t,n,i,a,u,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=u,this.documentState=c}static newInvalidDocument(e){return new St(e,0,be.min(),be.min(),be.min(),cr.empty(),0)}static newFoundDocument(e,t,n,i){return new St(e,1,t,be.min(),n,i,0)}static newNoDocument(e,t){return new St(e,2,t,be.min(),be.min(),cr.empty(),0)}static newUnknownDocument(e,t){return new St(e,3,t,be.min(),be.min(),cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.position=e,this.inclusive=t}}function Rv(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],u=r.position[i];if(a.field.isKeyField()?n=_e.comparator(_e.fromName(u.referenceValue),t.key):n=mi(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Pv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Jr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function rA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{}class We extends iw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new sA(e,t,n):t==="array-contains"?new aA(e,n):t==="in"?new hw(e,n):t==="not-in"?new lA(e,n):t==="array-contains-any"?new uA(e,n):new We(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new iA(e,n):new oA(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(mi(t,this.value)):t!==null&&pi(this.value)===pi(t)&&this.matchesComparison(mi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends iw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new nt(e,t)}matches(e){return Aa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Aa(r){return r.op==="and"}function gp(r){return r.op==="or"}function Jp(r){return ow(r)&&Aa(r)}function ow(r){for(const e of r.filters)if(e instanceof nt)return!1;return!0}function yp(r){if(r instanceof We)return r.field.canonicalString()+r.op.toString()+Sa(r.value);if(Jp(r))return r.filters.map(e=>yp(e)).join(",");{const e=r.filters.map(t=>yp(t)).join(",");return`${r.op}(${e})`}}function aw(r,e){return r instanceof We?function(n,i){return i instanceof We&&n.op===i.op&&n.field.isEqual(i.field)&&Jr(n.value,i.value)}(r,e):r instanceof nt?function(n,i){return i instanceof nt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,u,c)=>a&&aw(u,i.filters[c]),!0):!1}(r,e):void Ce()}function lw(r,e){const t=r.filters.concat(e);return nt.create(t,r.op)}function uw(r){return r instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`}(r):r instanceof nt?function(t){return t.op.toString()+" {"+t.getFilters().map(uw).join(" ,")+"}"}(r):"Filter"}class sA extends We{constructor(e,t,n){super(e,t,n),this.key=_e.fromName(n.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class iA extends We{constructor(e,t){super(e,"in",t),this.keys=cw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oA extends We{constructor(e,t){super(e,"not-in",t),this.keys=cw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>_e.fromName(n.referenceValue))}class aA extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zl(t)&&Yl(t.arrayValue,this.value)}}class hw extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yl(this.value.arrayValue,t)}}class lA extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Yl(this.value.arrayValue,t)}}class uA extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Yl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,t=null,n=[],i=[],a=null,u=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=u,this.endAt=c,this.le=null}}function vp(r,e=null,t=[],n=[],i=null,a=null,u=null){return new cA(r,e,t,n,i,a,u)}function uo(r){const e=Ne(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>yp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Sa(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Sa(n)).join(",")),e.le=t}return e.le}function lu(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!aw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Pv(r.startAt,e.startAt)&&Pv(r.endAt,e.endAt)}function ph(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function mh(r,e){return r.filters.filter(t=>t instanceof We&&t.field.isEqual(e))}function kv(r,e,t){let n=Xc,i=!0;for(const a of mh(r,e)){let u=Xc,c=!0;switch(a.op){case"<":case"<=":u=tA(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,c=!1;break;case"!=":case"not-in":u=Xc}xv({value:n,inclusive:i},{value:u,inclusive:c})<0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];xv({value:n,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}function Dv(r,e,t){let n=ai,i=!0;for(const a of mh(r,e)){let u=ai,c=!0;switch(a.op){case">=":case">":u=nA(a.value),c=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,c=!1;break;case"!=":case"not-in":u=ai}Nv({value:n,inclusive:i},{value:u,inclusive:c})>0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Nv({value:n,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t=null,n=[],i=[],a=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=u,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dw(r,e,t,n,i,a,u,c){return new $h(r,e,t,n,i,a,u,c)}function qh(r){return new $h(r)}function bv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hA(r){return r.collectionGroup!==null}function Fl(r){const e=Ne(r);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new tt(kt.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new fh(a,n))}),t.has(kt.keyField().canonicalString())||e.he.push(new fh(kt.keyField(),n))}return e.he}function Qn(r){const e=Ne(r);return e.Pe||(e.Pe=dA(e,Fl(r))),e.Pe}function dA(r,e){if(r.limitType==="F")return vp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new fh(i.field,a)});const t=r.endAt?new Ca(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Ca(r.startAt.position,r.startAt.inclusive):null;return vp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function _p(r,e,t){return new $h(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wh(r,e){return lu(Qn(r),Qn(e))&&r.limitType===e.limitType}function fw(r){return`${uo(Qn(r))}|lt:${r.limitType}`}function ha(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>uw(i)).join(", ")}]`),Fh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Sa(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Sa(i)).join(",")),`Target(${n})`}(Qn(r))}; limitType=${r.limitType})`}function uu(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):_e.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of Fl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(u,c,d){const p=Rv(u,c,d);return u.inclusive?p<=0:p<0}(n.startAt,Fl(n),i)||n.endAt&&!function(u,c,d){const p=Rv(u,c,d);return u.inclusive?p>=0:p>0}(n.endAt,Fl(n),i))}(r,e)}function pw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mw(r){return(e,t)=>{let n=!1;for(const i of Fl(r)){const a=fA(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function fA(r,e,t){const n=r.field.isKeyField()?_e.comparator(e.key,t.key):function(a,u,c){const d=u.data.field(a),p=c.data.field(a);return d!==null&&p!==null?mi(d,p):Ce()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return ZC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new ft(_e.comparator);function hr(){return pA}const gw=new ft(_e.comparator);function kl(...r){let e=gw;for(const t of r)e=e.insert(t.key,t);return e}function mA(r){let e=gw;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Zr(){return Ll()}function yw(){return Ll()}function Ll(){return new xs(r=>r.toString(),(r,e)=>r.isEqual(e))}const gA=new ft(_e.comparator),yA=new tt(_e.comparator);function Ue(...r){let e=yA;for(const t of r)e=e.add(t);return e}const vA=new tt(Le);function em(){return vA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function wA(r){return{integerValue:""+r}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function EA(r,e,t){return r instanceof Jl?function(i,a){const u={fields:{[Y0]:{stringValue:X0},[J0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Yp(a)&&(a=zh(a)),a&&(u.fields[Z0]=a),{mapValue:u}}(t,e):r instanceof xa?vw(r,e):r instanceof Na?_w(r,e):function(i,a){const u=IA(i,a),c=Vv(u)+Vv(i.Ie);return mp(u)&&mp(i.Ie)?wA(c):_A(i.serializer,c)}(r,e)}function TA(r,e,t){return r instanceof xa?vw(r,e):r instanceof Na?_w(r,e):t}function IA(r,e){return r instanceof eu?function(n){return mp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Jl extends Gh{}class xa extends Gh{constructor(e){super(),this.elements=e}}function vw(r,e){const t=ww(e);for(const n of r.elements)t.some(i=>Jr(i,n))||t.push(n);return{arrayValue:{values:t}}}class Na extends Gh{constructor(e){super(),this.elements=e}}function _w(r,e){let t=ww(e);for(const n of r.elements)t=t.filter(i=>!Jr(i,n));return{arrayValue:{values:t}}}class eu extends Gh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Vv(r){return yt(r.integerValue||r.doubleValue)}function ww(r){return Zl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.field=e,this.transform=t}}function CA(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof xa&&i instanceof xa||n instanceof Na&&i instanceof Na?va(n.elements,i.elements,Jr):n instanceof eu&&i instanceof eu?Jr(n.Ie,i.Ie):n instanceof Jl&&i instanceof Jl}(r.transform,e.transform)}class AA{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kh{}function Ew(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tm(r.key,kr.none()):new cu(r.key,r.data,kr.none());{const t=r.data,n=cr.empty();let i=new tt(kt.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),i=i.add(a)}return new Oa(r.key,n,new ws(i.toArray()),kr.none())}}function xA(r,e,t){r instanceof cu?function(i,a,u){const c=i.value.clone(),d=Ov(i.fieldTransforms,a,u.transformResults);c.setAll(d),a.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(r,e,t):r instanceof Oa?function(i,a,u){if(!Zc(i.precondition,a))return void a.convertToUnknownDocument(u.version);const c=Ov(i.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(Tw(i)),d.setAll(c),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(r,e,t):function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function jl(r,e,t,n){return r instanceof cu?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=a.value.clone(),g=Fv(a.fieldTransforms,d,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(r,e,t,n):r instanceof Oa?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=Fv(a.fieldTransforms,d,u),g=u.data;return g.setAll(Tw(a)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(r,e,t,n):function(a,u,c){return Zc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(r,e,t)}function Mv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&va(n,i,(a,u)=>CA(a,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class cu extends Kh{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oa extends Kh{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Tw(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Ov(r,e,t){const n=new Map;Pe(r.length===t.length);for(let i=0;i<t.length;i++){const a=r[i],u=a.transform,c=e.data.field(a.field);n.set(a.field,TA(u,c,t[i]))}return n}function Fv(r,e,t){const n=new Map;for(const i of r){const a=i.transform,u=t.data.field(i.field);n.set(i.field,EA(a,u,e))}return n}class tm extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iw extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&xA(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=yw();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let c=this.applyToLocalView(u,a.mutatedFields);c=t.has(i.key)?null:c;const d=Ew(u,c);d!==null&&n.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(be.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(t,n)=>Mv(t,n))&&va(this.baseMutations,e.baseMutations,(t,n)=>Mv(t,n))}}class rm{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Pe(e.mutations.length===n.length);let i=function(){return gA}();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,n[u].version);return new rm(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ke;function RA(r){switch(r){case ie.OK:return Ce();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce()}}function Sw(r){if(r===void 0)return Pt("GRPC error has no .code"),ie.UNKNOWN;switch(r){case Ot.OK:return ie.OK;case Ot.CANCELLED:return ie.CANCELLED;case Ot.UNKNOWN:return ie.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ie.INTERNAL;case Ot.UNAVAILABLE:return ie.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ie.NOT_FOUND;case Ot.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Ot.ABORTED:return ie.ABORTED;case Ot.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Ot.DATA_LOSS:return ie.DATA_LOSS;default:return Ce()}}(Ke=Ot||(Ot={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new hi([4294967295,4294967295],0);function Lv(r){const e=PA().encode(r),t=new x0;return t.update(e),new Uint8Array(t.digest())}function jv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hi([t,n],0),new hi([i,a],0)]}class im{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(n<0)throw new Dl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=hi.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(hi.fromNumber(n)));return i.compare(kA)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Lv(e),[n,i]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);if(!this.Re(u))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new im(a,i,t);return n.forEach(c=>u.insert(c)),u}insert(e){if(this.Ee===0)return;const t=Lv(e),[n,i]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hu(be.min(),i,new ft(Le),hr(),Ue())}}class du{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new du(n,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class Cw{constructor(e,t){this.targetId=e,this.ge=t}}class Aw{constructor(e,t,n=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Bv{constructor(){this.pe=0,this.ye=zv(),this.we=Dt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ue(),t=Ue(),n=Ue();return this.ye.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ce()}}),new du(this.we,this.be,e,t,n)}Me(){this.Se=!1,this.ye=zv()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Pe(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class DA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=hr(),this.$e=jc(),this.Ke=jc(),this.Ue=new ft(Le)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const a=i.target;if(ph(a))if(n===0){const u=new _e(a.path);this.ze(t,u,St.newNoDocument(u,be.min()))}else Pe(n===1);else{const u=this.et(t);if(u!==n){const c=this.tt(e),d=c?this.nt(c,e,u):1;if(d!==0){this.Ye(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let u,c;try{u=As(n).toUint8Array()}catch(d){if(d instanceof Q0)return $l("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new im(u,i,a)}catch(d){return $l(d instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const u=this.ke.it(),c=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,a,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((a,u)=>{const c=this.Xe(u);if(c){if(a.current&&ph(c.target)){const d=new _e(c.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,St.newNoDocument(d,e))}a.ve&&(t.set(u,a.Fe()),a.Me())}});let n=Ue();this.Ke.forEach((a,u)=>{let c=!0;u.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const i=new hu(e,t,this.Ue,this.Qe,n);return this.Qe=hr(),this.$e=jc(),this.Ke=jc(),this.Ue=new ft(Le),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Bv,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new tt(Le),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new tt(Le),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Bv),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function jc(){return new ft(_e.comparator)}function zv(){return new ft(_e.comparator)}const bA={asc:"ASCENDING",desc:"DESCENDING"},VA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MA={and:"AND",or:"OR"};class OA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wp(r,e){return r.useProto3Json||Fh(e)?e:{value:e}}function gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function LA(r,e){return gh(r,e.toTimestamp())}function yn(r){return Pe(!!r),be.fromTimestamp(function(t){const n=Cs(t);return new Kt(n.seconds,n.nanos)}(r))}function xw(r,e){return Ep(r,e).canonicalString()}function Ep(r,e){const t=function(i){return new it(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Nw(r){const e=it.fromString(r);return Pe(Fw(e)),e}function yh(r,e){return xw(r.databaseId,e.path)}function io(r,e){const t=Nw(e);if(t.get(1)!==r.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(kw(t))}function Rw(r,e){return xw(r.databaseId,e)}function Pw(r){const e=Nw(r);return e.length===4?it.emptyPath():kw(e)}function Tp(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kw(r){return Pe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Uv(r,e,t){return{name:yh(r,e),fields:t.value.mapValue.fields}}function jA(r,e,t){const n=io(r,e.name),i=yn(e.updateTime),a=e.createTime?yn(e.createTime):be.min(),u=new cr({mapValue:{fields:e.fields}}),c=St.newFoundDocument(n,i,a,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function BA(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(Pe(g===void 0||typeof g=="string"),Dt.fromBase64String(g||"")):(Pe(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Dt.fromUint8Array(g||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(p){const g=p.code===void 0?ie.UNKNOWN:Sw(p.code);return new Se(g,p.message||"")}(u);t=new Aw(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=io(r,n.document.name),a=yn(n.document.updateTime),u=n.document.createTime?yn(n.document.createTime):be.min(),c=new cr({mapValue:{fields:n.document.fields}}),d=St.newFoundDocument(i,a,u,c),p=n.targetIds||[],g=n.removedTargetIds||[];t=new Jc(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=io(r,n.document),a=n.readTime?yn(n.readTime):be.min(),u=St.newNoDocument(i,a),c=n.removedTargetIds||[];t=new Jc([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=io(r,n.document),a=n.removedTargetIds||[];t=new Jc([],a,i,null)}else{if(!("filter"in e))return Ce();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,u=new NA(i,a),c=n.targetId;t=new Cw(c,u)}}return t}function vh(r,e){let t;if(e instanceof cu)t={update:Uv(r,e.key,e.value)};else if(e instanceof tm)t={delete:yh(r,e.key)};else if(e instanceof Oa)t={update:Uv(r,e.key,e.data),updateMask:GA(e.fieldMask)};else{if(!(e instanceof Iw))return Ce();t={verify:yh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,u){const c=u.transform;if(c instanceof Jl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Na)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof eu)return{fieldPath:u.field.canonicalString(),increment:c.Ie};throw Ce()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:LA(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce()}(r,e.precondition)),t}function Ip(r,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?kr.updateTime(yn(a.updateTime)):a.exists!==void 0?kr.exists(a.exists):kr.none()}(e.currentDocument):kr.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let d=null;if("setToServerValue"in c)Pe(c.setToServerValue==="REQUEST_TIME"),d=new Jl;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];d=new xa(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];d=new Na(g)}else"increment"in c?d=new eu(u,c.increment):Ce();const p=kt.fromServerFormat(c.fieldPath);return new SA(p,d)}(r,i)):[];if(e.update){e.update.name;const i=io(r,e.update.name),a=new cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new ws(p.map(g=>kt.fromServerFormat(g)))}(e.updateMask);return new Oa(i,a,u,t,n)}return new cu(i,a,t,n)}if(e.delete){const i=io(r,e.delete);return new tm(i,t)}if(e.verify){const i=io(r,e.verify);return new Iw(i,t)}return Ce()}function zA(r,e){return r&&r.length>0?(Pe(e!==void 0),r.map(t=>function(i,a){let u=i.updateTime?yn(i.updateTime):yn(a);return u.isEqual(be.min())&&(u=yn(a)),new AA(u,i.transformResults||[])}(t,e))):[]}function Dw(r,e){return{documents:[Rw(r,e.path)]}}function bw(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Rw(r,i);const a=function(p){if(p.length!==0)return Ow(nt.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:da(E.field),direction:$A(E.dir)}}(g))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=wp(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:i}}function Vw(r){let e=Pw(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Pe(n===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(_){const E=Mw(_);return E instanceof nt&&Jp(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(_){return _.map(E=>function(A){return new fh(fa(A.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(_){let E;return E=typeof _=="object"?_.value:_,Fh(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(_){const E=!!_.before,C=_.values||[];return new Ca(C,E)}(t.startAt));let p=null;return t.endAt&&(p=function(_){const E=!_.before,C=_.values||[];return new Ca(C,E)}(t.endAt)),dw(e,i,u,a,c,"F",d,p)}function UA(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mw(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=fa(t.unaryFilter.field);return We.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=fa(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(t.unaryFilter.field);return We.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return We.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(r):r.fieldFilter!==void 0?function(t){return We.create(fa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return nt.create(t.compositeFilter.filters.map(n=>Mw(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(r):Ce()}function $A(r){return bA[r]}function qA(r){return VA[r]}function WA(r){return MA[r]}function da(r){return{fieldPath:r.canonicalString()}}function fa(r){return kt.fromServerFormat(r.fieldPath)}function Ow(r){return r instanceof We?function(t){if(t.op==="=="){if(Av(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Av(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:qA(t.op),value:t.value}}}(r):r instanceof nt?function(t){const n=t.getFilters().map(i=>Ow(i));return n.length===1?n[0]:{compositeFilter:{op:WA(t.op),filters:n}}}(r):Ce()}function GA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,n,i,a=be.min(),u=be.min(),c=Dt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.Tt=e}}function KA(r,e){let t;if(e.document)t=jA(r.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_e.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);t=St.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce();{const n=_e.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);t=St.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(i){const a=new Kt(i[0],i[1]);return be.fromTimestamp(a)}(e.readTime)),t}function $v(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(a,u){return{name:yh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:gh(a,u.version.toTimestamp()),createTime:gh(a,u.createTime.toTimestamp())}}(r.Tt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return Ce();n.unknownDocument={path:t.path.toArray(),version:co(e.version)}}return n}function _h(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function co(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(r){const e=new Kt(r.seconds,r.nanoseconds);return be.fromTimestamp(e)}function Ji(r,e){const t=(e.baseMutations||[]).map(a=>Ip(r.Tt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];u.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map(a=>Ip(r.Tt,a)),i=Kt.fromMillis(e.localWriteTimeMs);return new nm(e.batchId,i,t,n)}function bl(r){const e=ho(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?ho(r.lastLimboFreeSnapshotVersion):be.min();let n;return n=function(a){return a.documents!==void 0}(r.query)?function(a){return Pe(a.documents.length===1),Qn(qh(Pw(a.documents[0])))}(r.query):function(a){return Qn(Vw(a))}(r.query),new Es(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Dt.fromBase64String(r.resumeToken))}function jw(r,e){const t=co(e.snapshotVersion),n=co(e.lastLimboFreeSnapshotVersion);let i;i=ph(e.target)?Dw(r.Tt,e.target):bw(r.Tt,e.target).ht;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function Bw(r){const e=Vw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_p(e,e.limit,"L"):e}function Wf(r,e){return new sm(e.largestBatchId,Ip(r.Tt,e.overlayMutation))}function qv(r,e){const t=e.path.lastSegment();return[r,un(e.path.popLast()),t]}function Wv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:co(n.readTime),documentKey:un(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{getBundleMetadata(e,t){return Gv(e).get(t).next(n=>{if(n)return function(a){return{id:a.bundleId,createTime:ho(a.createTime),version:a.version}}(n)})}saveBundleMetadata(e,t){return Gv(e).put(function(i){return{bundleId:i.id,createTime:co(yn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Kv(e).get(t).next(n=>{if(n)return function(a){return{name:a.name,query:Bw(a.bundledQuery),readTime:ho(a.readTime)}}(n)})}saveNamedQuery(e,t){return Kv(e).put(function(i){return{name:i.name,readTime:co(yn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function Gv(r){return zt(r,Lh)}function Kv(r){return zt(r,jh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Hh(e,n)}getOverlay(e,t){return Cl(e).get(qv(this.userId,t)).next(n=>n?Wf(this.serializer,n):null)}getOverlays(e,t){const n=Zr();return W.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){const i=[];return n.forEach((a,u)=>{const c=new sm(t,u);i.push(this.Et(e,c))}),W.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(u=>i.add(un(u.getCollectionPath())));const a=[];return i.forEach(u=>{const c=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(Cl(e).J(dp,c))}),W.waitFor(a)}getOverlaysForCollection(e,t,n){const i=Zr(),a=un(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cl(e).G(dp,u).next(c=>{for(const d of c){const p=Wf(this.serializer,d);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const a=Zr();let u;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cl(e).Z({index:W0,range:c},(d,p,g)=>{const _=Wf(this.serializer,p);a.size()<i||_.largestBatchId===u?(a.set(_.getKey(),_),u=_.largestBatchId):g.done()}).next(()=>a)}Et(e,t){return Cl(e).put(function(i,a,u){const[c,d,p]=qv(a,u.mutation.key);return{userId:a,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vh(i.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Cl(r){return zt(r,Bh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{dt(e){return zt(e,Qp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?Dt.fromUint8Array(n):Dt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(yt(e.integerValue));else if("doubleValue"in e){const n=yt(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Wl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),typeof n=="string"&&(n=Cs(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(As(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?rw(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Uh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Ce()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const i of Object.keys(n))this.wt(i,t),this.Rt(n[i],t)}vt(e,t){var n,i;const a=e.fields||{};this.ft(t,53);const u=Xl,c=((i=(n=a[u].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(yt(c)),this.wt(u,t),this.Rt(a[u],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const i of n)this.Rt(i,t)}Dt(e,t){this.ft(t,37),_e.fromName(e).path.forEach(n=>{this.ft(t,60),this.Mt(n,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}eo.xt=new eo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=255;function XA(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function Hv(r){const e=64-function(n){let i=0;for(let a=0;a<8;++a){const u=XA(255&n[a]);if(i+=u,u!==8)break}return i}(r);return Math.ceil(e/8)}class YA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){const t=this.Ut(e),n=Hv(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Ut(e),n=Hv(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(oa),this.jt(255)}Ht(){this.Jt(oa),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===oa?(this.jt(oa),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===oa?(this.Jt(oa),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class ZA{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class JA{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Al{constructor(){this.Zt=new YA,this.Xt=new ZA(this.Zt),this.en=new JA(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new to(this.indexId,this.documentKey,this.arrayValue,n)}}function ei(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Qv(r.arrayValue,e.arrayValue),t!==0?t:(t=Qv(r.directionalValue,e.directionalValue),t!==0?t:_e.comparator(r.documentKey,e.documentKey)))}function Qv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.rn=new tt((t,n)=>kt.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const n=t;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(Pe(e.collectionGroup===this.collectionId),this.an)return!1;const t=up(e);if(t!==void 0&&!this.cn(t))return!1;const n=Xi(e);let i=new Set,a=0,u=0;for(;a<n.length&&this.cn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.ln(c,d)||!this.hn(this.sn[u++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(u>=this.sn.length||!this.hn(this.sn[u++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new tt(kt.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Kc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Kc(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Kc(n.field,n.dir==="asc"?0:1)));return new oh(oh.UNKNOWN_ID,this.collectionId,t,ql.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r){var e,t;if(Pe(r instanceof We||r instanceof nt),r instanceof We){if(r instanceof hw){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>We.create(r.field,"==",a)))||[];return nt.create(i,"or")}return r}const n=r.filters.map(i=>zw(i));return nt.create(n,r.op)}function ex(r){if(r.getFilters().length===0)return[];const e=Ap(zw(r));return Pe(Uw(e)),Sp(e)||Cp(e)?[e]:e.getFilters()}function Sp(r){return r instanceof We}function Cp(r){return r instanceof nt&&Jp(r)}function Uw(r){return Sp(r)||Cp(r)||function(t){if(t instanceof nt&&gp(t)){for(const n of t.getFilters())if(!Sp(n)&&!Cp(n))return!1;return!0}return!1}(r)}function Ap(r){if(Pe(r instanceof We||r instanceof nt),r instanceof We)return r;if(r.filters.length===1)return Ap(r.filters[0]);const e=r.filters.map(n=>Ap(n));let t=nt.create(e,r.op);return t=wh(t),Uw(t)?t:(Pe(t instanceof nt),Pe(Aa(t)),Pe(t.filters.length>1),t.filters.reduce((n,i)=>om(n,i)))}function om(r,e){let t;return Pe(r instanceof We||r instanceof nt),Pe(e instanceof We||e instanceof nt),t=r instanceof We?e instanceof We?function(i,a){return nt.create([i,a],"and")}(r,e):Yv(r,e):e instanceof We?Yv(e,r):function(i,a){if(Pe(i.filters.length>0&&a.filters.length>0),Aa(i)&&Aa(a))return lw(i,a.getFilters());const u=gp(i)?i:a,c=gp(i)?a:i,d=u.filters.map(p=>om(p,c));return nt.create(d,"or")}(r,e),wh(t)}function Yv(r,e){if(Aa(e))return lw(e,r.getFilters());{const t=e.filters.map(n=>om(r,n));return nt.create(t,"or")}}function wh(r){if(Pe(r instanceof We||r instanceof nt),r instanceof We)return r;const e=r.getFilters();if(e.length===1)return wh(e[0]);if(ow(r))return r;const t=e.map(i=>wh(i)),n=[];return t.forEach(i=>{i instanceof We?n.push(i):i instanceof nt&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:nt.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Tn=new am}addToCollectionParentIndex(e,t){return this.Tn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Xn.min())}updateCollectionGroup(e,t,n){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class am{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new tt(it.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new tt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="IndexedDbIndexManager",Bc=new Uint8Array(0);class nx{constructor(e,t){this.databaseId=t,this.In=new am,this.En=new xs(n=>uo(n),(n,i)=>lu(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const a={collectionId:n,parent:un(i)};return Jv(e).put(a)}return W.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[V0(t),""],!1,!0);return Jv(e).G(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;n.push(Yr(u.parent))}return n})}addFieldIndex(e,t){const n=xl(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const a=n.add(i);if(t.indexState){const u=la(e);return a.next(c=>{u.put(Wv(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const n=xl(e),i=la(e),a=aa(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=xl(e),n=aa(e),i=la(e);return t.J().next(()=>n.J()).next(()=>i.J())}createTargetIndexes(e,t){return W.forEach(this.dn(t),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const a=new Xv(n).Pn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const n=aa(e);let i=!0;const a=new Map;return W.forEach(this.dn(t),u=>this.An(e,u).next(c=>{i&&(i=!!c),a.set(u,c)})).next(()=>{if(i){let u=Ue();const c=[];return W.forEach(a,(d,p)=>{ae(Zv,`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(d)} to execute ${uo(t)}`);const g=function($,Q){const F=up(Q);if(F===void 0)return null;for(const U of mh($,F.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(p,d),_=function($,Q){const F=new Map;for(const U of Xi(Q))for(const R of mh($,U.fieldPath))switch(R.op){case"==":case"in":F.set(U.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return F.set(U.fieldPath.canonicalString(),R.value),Array.from(F.values())}return null}(p,d),E=function($,Q){const F=[];let U=!0;for(const R of Xi(Q)){const I=R.kind===0?kv($,R.fieldPath,$.startAt):Dv($,R.fieldPath,$.startAt);F.push(I.value),U&&(U=I.inclusive)}return new Ca(F,U)}(p,d),C=function($,Q){const F=[];let U=!0;for(const R of Xi(Q)){const I=R.kind===0?Dv($,R.fieldPath,$.endAt):kv($,R.fieldPath,$.endAt);F.push(I.value),U&&(U=I.inclusive)}return new Ca(F,U)}(p,d),A=this.Rn(d,p,E),P=this.Rn(d,p,C),b=this.Vn(d,p,_),B=this.mn(d.indexId,g,A,E.inclusive,P,C.inclusive,b);return W.forEach(B,q=>n.H(q,t.limit).next($=>{$.forEach(Q=>{const F=_e.fromSegments(Q.documentKey);u.has(F)||(u=u.add(F),c.push(F))})}))}).next(()=>c)}return W.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=ex(nt.create(e.filters,"and")).map(n=>vp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,n,i,a,u,c){const d=(t!=null?t.length:1)*Math.max(n.length,a.length),p=d/(t!=null?t.length:1),g=[];for(let _=0;_<d;++_){const E=t?this.fn(t[_/p]):Bc,C=this.gn(e,E,n[_%p],i),A=this.pn(e,E,a[_%p],u),P=c.map(b=>this.gn(e,E,b,!0));g.push(...this.createRange(C,A,P))}return g}gn(e,t,n,i){const a=new to(e,_e.empty(),t,n);return i?a:a.nn()}pn(e,t,n,i){const a=new to(e,_e.empty(),t,n);return i?a.nn():a}An(e,t){const n=new Xv(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const c of a)n.un(c)&&(!u||c.fields.length>u.fields.length)&&(u=c);return u})}getIndexType(e,t){let n=2;const i=this.dn(t);return W.forEach(i,a=>this.An(e,a).next(u=>{u?n!==0&&u.fields.length<function(d){let p=new tt(kt.comparator),g=!1;for(const _ of d.filters)for(const E of _.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?g=!0:p=p.add(E.field));for(const _ of d.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(g?1:0)}(a)&&(n=1):n=0})).next(()=>function(u){return u.limit!==null}(t)&&i.length>1&&n===2?1:n)}yn(e,t){const n=new Al;for(const i of Xi(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const u=n.tn(i.kind);eo.xt.At(a,u)}return n.Yt()}fn(e){const t=new Al;return eo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new Al;return eo.xt.At(Zp(this.databaseId,t),n.tn(function(a){const u=Xi(a);return u.length===0?0:u[u.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(n===null)return[];let i=[];i.push(new Al);let a=0;for(const u of Xi(e)){const c=n[a++];for(const d of i)if(this.bn(t,u.fieldPath)&&Zl(c))i=this.Sn(i,u,c);else{const p=d.tn(u.kind);eo.xt.At(c,p)}}return this.Dn(i)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}Sn(e,t,n){const i=[...e],a=[];for(const u of n.arrayValue.values||[])for(const c of i){const d=new Al;d.seed(c.Yt()),eo.xt.At(u,d.tn(t.kind)),a.push(d)}return a}bn(e,t){return!!e.filters.find(n=>n instanceof We&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=xl(e),i=la(e);return(t?n.G(hp,IDBKeyRange.bound(t,t)):n.G()).next(a=>{const u=[];return W.forEach(a,c=>i.get([c.indexId,this.uid]).next(d=>{u.push(function(g,_){const E=_?new ql(_.sequenceNumber,new Xn(ho(_.readTime),new _e(Yr(_.documentKey)),_.largestBatchId)):ql.empty(),C=g.fields.map(([A,P])=>new Kc(kt.fromServerFormat(A),P));return new oh(g.indexId,g.collectionGroup,C,E)}(c,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Le(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=xl(e),a=la(e);return this.vn(e).next(u=>i.G(hp,IDBKeyRange.bound(t,t)).next(c=>W.forEach(c,d=>a.put(Wv(d.indexId,this.uid,u,n)))))}updateIndexEntries(e,t){const n=new Map;return W.forEach(t,(i,a)=>{const u=n.get(i.collectionGroup);return(u?W.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(n.set(i.collectionGroup,c),W.forEach(c,d=>this.Cn(e,i,d).next(p=>{const g=this.Fn(a,d);return p.isEqual(g)?W.resolve():this.Mn(e,a,d,p,g)}))))})}xn(e,t,n,i){return aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,i){return aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const i=aa(e);let a=new tt(ei);return i.Z({index:q0,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},(u,c)=>{a=a.add(new to(n.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>a)}Fn(e,t){let n=new tt(ei);const i=this.yn(t,e);if(i==null)return n;const a=up(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Zl(u))for(const c of u.arrayValue.values||[])n=n.add(new to(t.indexId,e.key,this.fn(c),i))}else n=n.add(new to(t.indexId,e.key,Bc,i));return n}Mn(e,t,n,i,a){ae(Zv,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,g,_,E){const C=d.getIterator(),A=p.getIterator();let P=ia(C),b=ia(A);for(;P||b;){let B=!1,q=!1;if(P&&b){const $=g(P,b);$<0?q=!0:$>0&&(B=!0)}else P!=null?q=!0:B=!0;B?(_(b),b=ia(A)):q?(E(P),P=ia(C)):(P=ia(C),b=ia(A))}}(i,a,ei,c=>{u.push(this.xn(e,t,n,c))},c=>{u.push(this.On(e,t,n,c))}),W.waitFor(u)}vn(e){let t=1;return la(e).Z({index:$0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((u,c)=>ei(u,c)).filter((u,c,d)=>!c||ei(u,d[c-1])!==0);const i=[];i.push(e);for(const u of n){const c=ei(u,e),d=ei(u,t);if(c===0)i[0]=e.nn();else if(c>0&&d<0)i.push(u),i.push(u.nn());else if(d>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.Nn(i[u],i[u+1]))return[];const c=[i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Bc,[]],d=[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Bc,[]];a.push(IDBKeyRange.bound(c,d))}return a}Nn(e,t){return ei(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(e_)}getMinOffset(e,t){return W.mapArray(this.dn(t),n=>this.An(e,n).next(i=>i||Ce())).next(e_)}}function Jv(r){return zt(r,Hl)}function aa(r){return zt(r,hh)}function xl(r){return zt(r,Hp)}function la(r){return zt(r,ch)}function e_(r){Pe(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;Wp(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$w=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(r,e,t){const n=r.store(Pr),i=r.store(wa),a=[],u=IDBKeyRange.only(t.batchId);let c=0;const d=n.Z({range:u},(g,_,E)=>(c++,E.delete()));a.push(d.next(()=>{Pe(c===1)}));const p=[];for(const g of t.mutations){const _=B0(e,g.key.path,t.batchId);a.push(i.delete(_)),p.push(g.key)}return W.waitFor(a).next(()=>p)}function Eh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ce();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln($w,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class Qh{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Bn={}}static It(e,t,n,i){Pe(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Qh(a,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).Z({index:no,range:n},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const a=pa(e),u=ti(e);return u.add({}).next(c=>{Pe(typeof c=="number");const d=new nm(c,t,n,i),p=function(C,A,P){const b=P.baseMutations.map(q=>vh(C.Tt,q)),B=P.mutations.map(q=>vh(C.Tt,q));return{userId:A,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:b,mutations:B}}(this.serializer,this.userId,d),g=[];let _=new tt((E,C)=>Le(E.canonicalString(),C.canonicalString()));for(const E of i){const C=B0(this.userId,E.key.path,c);_=_.add(E.key.path.popLast()),g.push(u.put(p)),g.push(a.put(C,NC))}return _.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Bn[c]=d.keys()}),W.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return ti(e).get(t).next(n=>n?(Pe(n.userId===this.userId),Ji(this.serializer,n)):null)}Ln(e,t){return this.Bn[t]?W.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return ti(e).Z({index:no,range:i},(u,c,d)=>{c.userId===this.userId&&(Pe(c.batchId>=n),a=Ji(this.serializer,c)),d.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ro;return ti(e).Z({index:no,range:t,reverse:!0},(i,a,u)=>{n=a.batchId,u.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ro],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).G(no,t).next(n=>n.map(i=>Ji(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Hc(this.userId,t.path),i=IDBKeyRange.lowerBound(n),a=[];return pa(e).Z({range:i},(u,c,d)=>{const[p,g,_]=u,E=Yr(g);if(p===this.userId&&t.path.isEqual(E))return ti(e).get(_).next(C=>{if(!C)throw Ce();Pe(C.userId===this.userId),a.push(Ji(this.serializer,C))});d.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tt(Le);const i=[];return t.forEach(a=>{const u=Hc(this.userId,a.path),c=IDBKeyRange.lowerBound(u),d=pa(e).Z({range:c},(p,g,_)=>{const[E,C,A]=p,P=Yr(C);E===this.userId&&a.path.isEqual(P)?n=n.add(A):_.done()});i.push(d)}),W.waitFor(i).next(()=>this.kn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,a=Hc(this.userId,n),u=IDBKeyRange.lowerBound(a);let c=new tt(Le);return pa(e).Z({range:u},(d,p,g)=>{const[_,E,C]=d,A=Yr(E);_===this.userId&&n.isPrefixOf(A)?A.length===i&&(c=c.add(C)):g.done()}).next(()=>this.kn(e,c))}kn(e,t){const n=[],i=[];return t.forEach(a=>{i.push(ti(e).get(a).next(u=>{if(u===null)throw Ce();Pe(u.userId===this.userId),n.push(Ji(this.serializer,u))}))}),W.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return qw(e.ue,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),W.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return W.resolve();const n=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),i=[];return pa(e).Z({range:n},(a,u,c)=>{if(a[0]===this.userId){const d=Yr(a[1]);i.push(d)}else c.done()}).next(()=>{Pe(i.length===0)})})}containsKey(e,t){return Ww(e,this.userId,t)}Qn(e){return Gw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ro,lastStreamToken:""})}}function Ww(r,e,t){const n=Hc(e,t.path),i=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return pa(r).Z({range:a,Y:!0},(c,d,p)=>{const[g,_,E]=c;g===e&&_===i&&(u=!0),p.done()}).next(()=>u)}function ti(r){return zt(r,Pr)}function pa(r){return zt(r,wa)}function Gw(r){return zt(r,Gl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new fo(0)}static Un(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const n=new fo(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>be.fromTimestamp(new Kt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.Wn(e)).next(n=>(Pe(n.targetCount>0),n.targetCount-=1,this.Gn(e,n)))}removeTargets(e,t,n){let i=0;const a=[];return ua(e).Z((u,c)=>{const d=bl(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))}).next(()=>W.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ua(e).Z((n,i)=>{const a=bl(i);t(a)})}Wn(e){return n_(e).get(uh).next(t=>(Pe(t!==null),t))}Gn(e,t){return n_(e).put(uh,t)}zn(e,t){return ua(e).put(jw(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=uo(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return ua(e).Z({range:i,index:U0},(u,c,d)=>{const p=bl(c);lu(t,p.target)&&(a=p,d.done())}).next(()=>a)}addMatchingKeys(e,t,n){const i=[],a=oi(e);return t.forEach(u=>{const c=un(u.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,u))}),W.waitFor(i)}removeMatchingKeys(e,t,n){const i=oi(e);return W.forEach(t,a=>{const u=un(a.path);return W.waitFor([i.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])})}removeMatchingKeysForTargetId(e,t){const n=oi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=oi(e);let a=Ue();return i.Z({range:n,Y:!0},(u,c,d)=>{const p=Yr(u[1]),g=new _e(p);a=a.add(g)}).next(()=>a)}containsKey(e,t){const n=un(t.path),i=IDBKeyRange.bound([n],[V0(n)],!1,!0);let a=0;return oi(e).Z({index:Kp,Y:!0,range:i},([u,c],d,p)=>{u!==0&&(a++,p.done())}).next(()=>a>0)}lt(e,t){return ua(e).get(t).next(n=>n?bl(n):null)}}function ua(r){return zt(r,Ea)}function n_(r){return zt(r,so)}function oi(r){return zt(r,Ta)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LruGarbageCollector",Kw=1048576;function s_([r,e],[t,n]){const i=Le(r,t);return i===0?Le(e,n):i}class sx{constructor(e){this.Hn=e,this.buffer=new tt(s_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();s_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hw{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ae(r_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_i(t)?ae(r_,"Ignoring IndexedDB error during garbage collection: ",t):await vi(t)}await this.er(3e5)})}}class ix{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Rn.ae);const n=new sx(t);return this.tr.forEachTarget(e,i=>n.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>n.Zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(t_)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,a,u,c,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,u=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(n=_,c=Date.now(),this.removeTargets(e,n,t))).next(_=>(a=_,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(_=>(p=Date.now(),ca()<=He.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${i} in `+(c-u)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_})))}}function Qw(r,e){return new ix(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t){this.db=e,this.garbageCollector=Qw(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(n,i)=>t(i))}addReference(e,t,n){return zc(e,n)}removeReference(e,t,n){return zc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return zc(e,t)}ar(e,t){return function(i,a){let u=!1;return Gw(i).X(c=>Ww(i,c,a).next(d=>(d&&(u=!0),W.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._r(e,(u,c)=>{if(c<=t){const d=this.ar(e,u).next(p=>{if(!p)return a++,n.getEntry(e,u).next(()=>(n.removeEntry(u,be.min()),oi(e).delete(function(_){return[0,un(_.path)]}(u))))});i.push(d)}}).next(()=>W.waitFor(i)).next(()=>n.apply(e)).next(()=>a)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return zc(e,t)}_r(e,t){const n=oi(e);let i,a=Rn.ae;return n.Z({index:Kp},([u,c],{path:d,sequenceNumber:p})=>{u===0?(a!==Rn.ae&&t(new _e(Yr(i)),a),a=p,i=d):a=Rn.ae}).next(()=>{a!==Rn.ae&&t(new _e(Yr(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zc(r,e){return oi(r).put(function(n,i){return{targetId:0,path:un(n.path),sequenceNumber:i}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.changes=new xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?W.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ki(e).put(n)}removeEntry(e,t,n){return Ki(e).delete(function(a,u){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],_h(u),c[c.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.ur(e,n)))}getEntry(e,t){let n=St.newInvalidDocument(t);return Ki(e).Z({index:Qc,range:IDBKeyRange.only(Nl(t))},(i,a)=>{n=this.cr(t,a)}).next(()=>n)}lr(e,t){let n={size:0,document:St.newInvalidDocument(t)};return Ki(e).Z({index:Qc,range:IDBKeyRange.only(Nl(t))},(i,a)=>{n={document:this.cr(t,a),size:Eh(a)}}).next(()=>n)}getEntries(e,t){let n=hr();return this.hr(e,t,(i,a)=>{const u=this.cr(i,a);n=n.insert(i,u)}).next(()=>n)}Pr(e,t){let n=hr(),i=new ft(_e.comparator);return this.hr(e,t,(a,u)=>{const c=this.cr(a,u);n=n.insert(a,c),i=i.insert(a,Eh(u))}).next(()=>({documents:n,Tr:i}))}hr(e,t,n){if(t.isEmpty())return W.resolve();let i=new tt(a_);t.forEach(d=>i=i.add(d));const a=IDBKeyRange.bound(Nl(i.first()),Nl(i.last())),u=i.getIterator();let c=u.getNext();return Ki(e).Z({index:Qc,range:a},(d,p,g)=>{const _=_e.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&a_(c,_)<0;)n(c,null),c=u.getNext();c&&c.isEqual(_)&&(n(c,p),c=u.hasNext()?u.getNext():null),c?g.W(Nl(c)):g.done()}).next(()=>{for(;c;)n(c,null),c=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,n,i,a){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),_h(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ki(e).G(IDBKeyRange.bound(c,d,!0)).next(p=>{a==null||a.incrementDocumentReadCount(p.length);let g=hr();for(const _ of p){const E=this.cr(_e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);E.isFoundDocument()&&(uu(t,E)||i.has(E.key))&&(g=g.insert(E.key,E))}return g})}getAllFromCollectionGroup(e,t,n,i){let a=hr();const u=o_(t,n),c=o_(t,Xn.max());return Ki(e).Z({index:z0,range:IDBKeyRange.bound(u,c,!0)},(d,p,g)=>{const _=this.cr(_e.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===i&&g.done()}).next(()=>a)}newChangeBuffer(e){return new lx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return i_(e).get(cp).next(t=>(Pe(!!t),t))}ur(e,t){return i_(e).put(cp,t)}cr(e,t){if(t){const n=KA(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(be.min())))return n}return St.newInvalidDocument(e)}}function Yw(r){return new ax(r)}class lx extends Xw{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new xs(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new tt((a,u)=>Le(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const c=this.Er.get(a);if(t.push(this.Ir.removeEntry(e,a,c.readTime)),u.isValidDocument()){const d=$v(this.Ir.serializer,u);i=i.add(a.path.popLast());const p=Eh(d);n+=p-c.size,t.push(this.Ir.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=$v(this.Ir.serializer,u.convertToNoDocument(be.min()));t.push(this.Ir.addEntry(e,a,d))}}),i.forEach(a=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Ir.updateMetadata(e,n)),W.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(n=>(this.Er.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:n,Tr:i})=>(i.forEach((a,u)=>{this.Er.set(a,{size:u,readTime:n.get(a).readTime})}),n))}}function i_(r){return zt(r,Kl)}function Ki(r){return zt(r,lh)}function Nl(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o_(r,e){const t=e.documentKey.path.toArray();return[r,_h(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function a_(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(i=Le(t[a],n[a]),i)return i;return i=Le(t.length,n.length),i||(i=Le(t[t.length-2],n[n.length-2]),i||Le(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&jl(n.mutation,i,ws.empty(),Kt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Ue()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Ue()){const i=Zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let u=kl();return a.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=Zr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ue()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,c)=>{t.set(u,c)})})}computeViews(e,t,n,i){let a=hr();const u=Ll(),c=function(){return Ll()}();return t.forEach((d,p)=>{const g=n.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Oa)?a=a.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),jl(g.mutation,p,g.mutation.getFieldMask(),Kt.now())):u.set(p.key,ws.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((p,g)=>u.set(p,g)),t.forEach((p,g)=>{var _;return c.set(p,new ux(g,(_=u.get(p))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const n=Ll();let i=new ft((u,c)=>u-c),a=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const c of u)c.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let g=n.get(d)||ws.empty();g=c.applyToLocalView(p,g),n.set(d,g);const _=(i.get(c.batchId)||Ue()).add(d);i=i.insert(c.batchId,_)})}).next(()=>{const u=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,g=d.value,_=yw();g.forEach(E=>{if(!a.has(E)){const C=Ew(t.get(E),n.get(E));C!==null&&_.set(E,C),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return W.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):W.resolve(Zr());let c=_a,d=a;return u.next(p=>W.forEach(p,(g,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),a.get(g)?W.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,d,p,Ue())).next(g=>({batchId:c,changes:mA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(n=>{let i=kl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let u=kl();return this.indexManager.getCollectionParents(e,a).next(c=>W.forEach(c,d=>{const p=function(_,E){return new $h(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,n,i).next(g=>{g.forEach((_,E)=>{u=u.insert(_,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(u=>{a.forEach((d,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,St.newInvalidDocument(g)))});let c=kl();return u.forEach((d,p)=>{const g=a.get(d);g!==void 0&&jl(g.mutation,p,ws.empty(),Kt.now()),uu(t,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return W.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:Bw(i.bundledQuery),readTime:yn(i.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.overlays=new ft(_e.comparator),this.Rr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zr();return W.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.Et(e,t,a)}),W.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(n)),W.resolve()}getOverlaysForCollection(e,t,n){const i=Zr(),a=t.length+1,u=new _e(t.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new ft((p,g)=>p-g);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let g=a.get(p.largestBatchId);g===null&&(g=Zr(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=Zr(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=i)););return W.resolve(c)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const u=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new sm(t,n));let a=this.Rr.get(t);a===void 0&&(a=Ue(),this.Rr.set(t,a)),this.Rr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.Vr=new tt(Gt.mr),this.gr=new tt(Gt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Gt(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new Gt(e,t))}br(e,t){e.forEach(n=>this.removeReference(n,t))}Sr(e){const t=new _e(new it([])),n=new Gt(t,e),i=new Gt(t,e+1),a=[];return this.gr.forEachInRange([n,i],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new it([])),n=new Gt(t,e),i=new Gt(t,e+1);let a=Ue();return this.gr.forEachInRange([n,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Gt(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Gt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Le(e.Cr,t.Cr)}static pr(e,t){return Le(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new tt(Gt.mr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nm(a,t,n,i);this.mutationQueue.push(u);for(const c of i)this.Mr=this.Mr.add(new Gt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return W.resolve(u)}lookupMutationBatch(e,t){return W.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),a=i<0?0:i;return W.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ro:this.Fr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([n,i],u=>{const c=this.Or(u.Cr);a.push(c)}),W.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tt(Le);return t.forEach(i=>{const a=new Gt(i,0),u=new Gt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],c=>{n=n.add(c.Cr)})}),W.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;_e.isDocumentKey(a)||(a=a.child(""));const u=new Gt(new _e(a),0);let c=new tt(Le);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!n.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.Cr)),!0)},u),W.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(n=>{const i=this.Or(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return W.forEach(t.mutations,i=>{const a=new Gt(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Gt(t,0),i=this.Mr.firstAfterOrEqual(n);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.kr=e,this.docs=function(){return new ft(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,u=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return W.resolve(n?n.document.mutableCopy():St.newInvalidDocument(t))}getEntries(e,t){let n=hr();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():St.newInvalidDocument(i))}),W.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=hr();const u=t.path,c=new _e(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Wp(O0(g),n)<=0||(i.has(g.key)||uu(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return W.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Ce()}qr(e,t){return W.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new mx(this)}getSize(e){return W.resolve(this.size)}}class mx extends Xw{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)}),W.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.persistence=e,this.Qr=new xs(t=>uo(t),lu),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.$r=0,this.Kr=new lm,this.targetCount=0,this.Ur=fo.Kn()}forEachTarget(e,t){return this.Qr.forEach((n,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),W.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new fo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.zn(t),W.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.Qr.forEach((u,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),W.waitFor(a).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return W.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),W.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),W.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return W.resolve(n)}containsKey(e,t){return W.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Rn(0),this.zr=!1,this.zr=!0,this.jr=new dx,this.referenceDelegate=e(this),this.Hr=new gx(this),this.indexManager=new tx,this.remoteDocumentCache=function(i){return new px(i)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new Lw(t),this.Yr=new cx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new fx(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){ae("MemoryPersistence","Starting transaction:",e);const i=new yx(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next(a=>this.referenceDelegate.Xr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}ei(e,t){return W.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class yx extends L0{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.ti=new lm,this.ni=null}static ri(e){return new Xh(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),W.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),W.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.ii.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ii,n=>{const i=_e.fromPath(n);return this.si(e,i).next(a=>{a||t.removeEntry(i,be.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return W.or([()=>W.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Th{constructor(e,t){this.persistence=e,this.oi=new xs(n=>un(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Qw(this,t)}static ri(e,t){return new Th(e,t)}Zr(){}Xr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return W.forEach(this.oi,(n,i)=>this.ar(e,n,i).next(a=>a?W.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,u=>this.ar(e,u,t).next(c=>{c||(n++,a.removeEntry(u,be.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),W.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}ar(e,t,n){return W.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return W.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.serializer=e}B(e,t,n,i){const a=new Oh("createOrUpgrade",t);n<1&&i>=1&&(function(d){d.createObjectStore(ou)}(e),function(d){d.createObjectStore(Gl,{keyPath:xC}),d.createObjectStore(Pr,{keyPath:_v,autoIncrement:!0}).createIndex(no,wv,{unique:!0}),d.createObjectStore(wa)}(e),l_(e),function(d){d.createObjectStore(Yi)}(e));let u=W.resolve();return n<3&&i>=3&&(n!==0&&(function(d){d.deleteObjectStore(Ta),d.deleteObjectStore(Ea),d.deleteObjectStore(so)}(e),l_(e)),u=u.next(()=>function(d){const p=d.store(so),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return p.put(uh,g)}(a))),n<4&&i>=4&&(n!==0&&(u=u.next(()=>function(d,p){return p.store(Pr).G().next(_=>{d.deleteObjectStore(Pr),d.createObjectStore(Pr,{keyPath:_v,autoIncrement:!0}).createIndex(no,wv,{unique:!0});const E=p.store(Pr),C=_.map(A=>E.put(A));return W.waitFor(C)})}(e,a))),u=u.next(()=>{(function(d){d.createObjectStore(Ia,{keyPath:OC})})(e)})),n<5&&i>=5&&(u=u.next(()=>this._i(a))),n<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Kl)}(e),this.ai(a)))),n<7&&i>=7&&(u=u.next(()=>this.ui(a))),n<8&&i>=8&&(u=u.next(()=>this.ci(e,a))),n<9&&i>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(u=u.next(()=>this.li(a))),n<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(Lh,{keyPath:FC})})(e),function(d){d.createObjectStore(jh,{keyPath:LC})}(e)})),n<12&&i>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(Bh,{keyPath:WC});p.createIndex(dp,GC,{unique:!1}),p.createIndex(W0,KC,{unique:!1})})(e)})),n<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(lh,{keyPath:RC});p.createIndex(Qc,PC),p.createIndex(z0,kC)}(e)).next(()=>this.hi(e,a)).next(()=>e.deleteObjectStore(Yi))),n<14&&i>=14&&(u=u.next(()=>this.Pi(e,a))),n<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore(Hp,{keyPath:jC,autoIncrement:!0}).createIndex(hp,BC,{unique:!1}),d.createObjectStore(ch,{keyPath:zC}).createIndex($0,UC,{unique:!1}),d.createObjectStore(hh,{keyPath:$C}).createIndex(q0,qC,{unique:!1})}(e))),n<16&&i>=16&&(u=u.next(()=>{t.objectStore(ch).clear()}).next(()=>{t.objectStore(hh).clear()})),n<17&&i>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(Qp,{keyPath:HC})})(e)})),u}ai(e){let t=0;return e.store(Yi).Z((n,i)=>{t+=Eh(i)}).next(()=>{const n={byteSize:t};return e.store(Kl).put(cp,n)})}_i(e){const t=e.store(Gl),n=e.store(Pr);return t.G().next(i=>W.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,ro],[a.userId,a.lastAcknowledgedBatchId]);return n.G(no,u).next(c=>W.forEach(c,d=>{Pe(d.userId===a.userId);const p=Ji(this.serializer,d);return qw(e,a.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Ta),n=e.store(Yi);return e.store(so).get(uh).next(i=>{const a=[];return n.Z((u,c)=>{const d=new it(u),p=function(_){return[0,un(_)]}(d);a.push(t.get(p).next(g=>g?W.resolve():(_=>t.put({targetId:0,path:un(_),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>W.waitFor(a))})}ci(e,t){e.createObjectStore(Hl,{keyPath:MC});const n=t.store(Hl),i=new am,a=u=>{if(i.add(u)){const c=u.lastSegment(),d=u.popLast();return n.put({collectionId:c,parent:un(d)})}};return t.store(Yi).Z({Y:!0},(u,c)=>{const d=new it(u);return a(d.popLast())}).next(()=>t.store(wa).Z({Y:!0},([u,c,d],p)=>{const g=Yr(c);return a(g.popLast())}))}li(e){const t=e.store(Ea);return t.Z((n,i)=>{const a=bl(i),u=jw(this.serializer,a);return t.put(u)})}hi(e,t){const n=t.store(Yi),i=[];return n.Z((a,u)=>{const c=t.store(lh),d=function(_){return _.document?new _e(it.fromString(_.document.name).popFirst(5)):_.noDocument?_e.fromSegments(_.noDocument.path):_.unknownDocument?_e.fromSegments(_.unknownDocument.path):Ce()}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(c.put(p))}).next(()=>W.waitFor(i))}Pi(e,t){const n=t.store(Pr),i=Yw(this.serializer),a=new um(Xh.ri,this.serializer.Tt);return n.G().next(u=>{const c=new Map;return u.forEach(d=>{var p;let g=(p=c.get(d.userId))!==null&&p!==void 0?p:Ue();Ji(this.serializer,d).keys().forEach(_=>g=g.add(_)),c.set(d.userId,g)}),W.forEach(c,(d,p)=>{const g=new an(p),_=Hh.It(this.serializer,g),E=a.getIndexManager(g),C=Qh.It(g,this.serializer,E,a.referenceDelegate);return new Zw(i,C,_,E).recalculateAndSaveOverlaysForDocumentKeys(new fp(t,Rn.ae),d).next()})})}}function l_(r){r.createObjectStore(Ta,{keyPath:bC}).createIndex(Kp,VC,{unique:!0}),r.createObjectStore(Ea,{keyPath:"targetId"}).createIndex(U0,DC,{unique:!0}),r.createObjectStore(so)}const ni="IndexedDbPersistence",Gf=18e5,Kf=5e3,Hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_x="main";class cm{constructor(e,t,n,i,a,u,c,d,p,g,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=a,this.window=u,this.document=c,this.Ii=p,this.Ei=g,this.di=_,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=E=>Promise.resolve(),!cm.D())throw new Se(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ox(this,i),this.gi=t+_x,this.serializer=new Lw(d),this.pi=new fi(this.gi,this.di,new vx(this.serializer)),this.jr=new QA,this.Hr=new rx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yw(this.serializer),this.Yr=new HA,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,g===!1&&Pt(ni,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ie.FAILED_PRECONDITION,Hf);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Rn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(_i(e))return ae(ni,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae(ni,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Rl(e).get(sa).next(t=>W.resolve(this.Ni(t)))}Bi(e){return Uc(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Gf)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=zt(t,Ia);return n.G().next(i=>{const a=this.qi(i,Gf),u=i.filter(c=>a.indexOf(c)===-1);return W.forEach(u,c=>n.delete(c.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?W.resolve(!0):Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Se(ie.FAILED_PRECONDITION,Hf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(e).G().next(n=>this.qi(n,Kf).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,u=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||u&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ae(ni,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[ou,Ia],e=>{const t=new fp(e,Rn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(n=>this.ki(n.updateTimeMs,t)&&!this.$i(n.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Uc(e).G().next(t=>this.qi(t,Gf).map(n=>n.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Qh.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nx(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hh.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){ae(ni,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=function(d){return d===17?YC:d===16?XC:d===15?Xp:d===14?H0:d===13?K0:d===12?QC:d===11?G0:void Ce()}(this.di);let u;return this.pi.runTransaction(e,i,a,c=>(u=new fp(c,this.Gr?this.Gr.next():Rn.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Se(ie.FAILED_PRECONDITION,F0);return n(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>n(u)))).then(c=>(u.raiseOnCommittedEvent(),c))}ji(e){return Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ie.FAILED_PRECONDITION,Hf)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rl(e).put(sa,t)}static D(){return fi.D()}xi(e){const t=Rl(e);return t.get(sa).next(n=>this.Ni(n)?(ae(ni,"Releasing primary lease."),t.delete(sa)):W.resolve())}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Pt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;p0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ae(ni,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Pt(ni,"Failed to get zombied client id.",n),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rl(r){return zt(r,ou)}function Uc(r){return zt(r,Ia)}function Jw(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=Ue(),i=Ue();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hm(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return p0()?8:j0(rh())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.rs(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,t,i,n).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new wx;return this._s(e,t,u).next(c=>{if(a.result=c,this.Xi)return this.us(e,t,u,c.size)})}).next(()=>a.result)}us(e,t,n,i){return n.documentReadCount<this.es?(ca()<=He.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),W.resolve()):(ca()<=He.DEBUG&&ae("QueryEngine","Query:",ha(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(ca()<=He.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):W.resolve())}rs(e,t){if(bv(t))return W.resolve(null);let n=Qn(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_p(t,null,"F"),n=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const u=Ue(...a);return this.ns.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const p=this.cs(t,c);return this.ls(t,p,u,d.readTime)?this.rs(e,_p(t,null,"F")):this.hs(e,p,t,d)}))})))}ss(e,t,n,i){return bv(t)||i.isEqual(be.min())?W.resolve(null):this.ns.getDocuments(e,n).next(a=>{const u=this.cs(t,a);return this.ls(t,u,n,i)?W.resolve(null):(ca()<=He.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.hs(e,u,t,M0(i,_a)).next(c=>c))})}cs(e,t){let n=new tt(mw(e));return t.forEach((i,a)=>{uu(e,a)&&(n=n.add(a))}),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}_s(e,t,n){return ca()<=He.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ns.getDocumentsMatchingQuery(e,t,Xn.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="LocalStore",Ex=3e8;class Tx{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ft(Le),this.Is=new xs(a=>uo(a),lu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function tE(r,e,t,n){return new Tx(r,e,t,n)}async function nE(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const u=[],c=[];let d=Ue();for(const p of i){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of a){c.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:c}))})})}function Ix(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,p,g){const _=p.batch,E=_.keys();let C=W.resolve();return E.forEach(A=>{C=C.next(()=>g.getEntry(d,A)).next(P=>{const b=p.docVersions.get(A);Pe(b!==null),P.version.compareTo(b)<0&&(_.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),g.addEntry(P)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,_))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=Ue();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function rE(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Sx(r,e){const t=Ne(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const c=[];e.targetChanges.forEach((g,_)=>{const E=i.get(_);if(!E)return;c.push(t.Hr.removeMatchingKeys(a,g.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(a,g.addedDocuments,_)));let C=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(Dt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,n)),i=i.insert(_,C),function(P,b,B){return P.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Ex?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,C,g)&&c.push(t.Hr.updateTargetData(a,C))});let d=hr(),p=Ue();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),c.push(Cx(a,u,e.documentUpdates).next(g=>{d=g.Vs,p=g.fs})),!n.isEqual(be.min())){const g=t.Hr.getLastRemoteSnapshotVersion(a).next(_=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(g)}return W.waitFor(c).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,d,p)).next(()=>d)}).then(a=>(t.Ts=i,a))}function Cx(r,e,t){let n=Ue(),i=Ue();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let u=hr();return t.forEach((c,d)=>{const p=a.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(be.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):ae(dm,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Vs:u,fs:i}})}function Ax(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=ro),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ih(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Hr.getTargetData(n,e).next(a=>a?(i=a,W.resolve(i)):t.Hr.allocateTargetId(n).next(u=>(i=new Es(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Ra(r,e,t){const n=Ne(r),i=n.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,u=>n.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!_i(u))throw u;ae(dm,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function xp(r,e,t){const n=Ne(r);let i=be.min(),a=Ue();return n.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,g){const _=Ne(d),E=_.Is.get(g);return E!==void 0?W.resolve(_.Ts.get(E)):_.Hr.getTargetData(p,g)}(n,u,Qn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(u,c.targetId).next(d=>{a=d})}).next(()=>n.Ps.getDocumentsMatchingQuery(u,e,t?i:be.min(),t?a:Ue())).next(c=>(oE(n,pw(e),c),{documents:c,gs:a})))}function sE(r,e){const t=Ne(r),n=Ne(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>n.lt(a,e).next(u=>u?u.target:null))}function iE(r,e){const t=Ne(r),n=t.Es.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,M0(n,_a),Number.MAX_SAFE_INTEGER)).then(i=>(oE(t,e,i),i))}function oE(r,e,t){let n=r.Es.get(e)||be.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.Es.set(e,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firestore_clients";function u_(r,e){return`${aE}_${r}_${e}`}const lE="firestore_mutations";function c_(r,e,t){let n=`${lE}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const uE="firestore_targets";function Qf(r,e){return`${uE}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="SharedClientState";class Sh{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static bs(e,t,n){const i=JSON.parse(n);let a,u=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return u&&i.error&&(u=typeof i.error.message=="string"&&typeof i.error.code=="string",u&&(a=new Se(i.error.code,i.error.message))),u?new Sh(e,t,i.state,a):(Pt(Xr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static bs(e,t){const n=JSON.parse(t);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new Se(n.error.code,n.error.message))),a?new Bl(e,n.state,i):(Pt(Xr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ch{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=em();for(let u=0;i&&u<n.activeTargetIds.length;++u)i=CC(n.activeTargetIds[u]),a=a.add(n.activeTargetIds[u]);return i?new Ch(e,a):(Pt(Xr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fm{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fm(t.clientId,t.onlineState):(Pt(Xr,`Failed to parse online state: ${e}`),null)}}class Np{constructor(){this.activeTargetIds=em()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xf{constructor(e,t,n,i,a){this.window=e,this.Ti=t,this.persistenceKey=n,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ft(Le),this.started=!1,this.Os=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ns=u_(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Np),this.Ls=new RegExp(`^${aE}_${u}_([^_]*)$`),this.ks=new RegExp(`^${lE}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${uE}_${u}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const n of e){if(n===this.Cs)continue;const i=this.getItem(u_(this.persistenceKey,n));if(i){const a=Ch.bs(n,i);a&&(this.xs=this.xs.insert(a.clientId,a))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const n=this.Us(t);n&&this.Ws(n)}for(const n of this.Os)this.Ms(n);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,n){this.zs(e,t,n),this.js(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qf(this.persistenceKey,e));if(i){const a=Bl.bs(e,i);a&&(n=a.state)}}return t&&this.Hs.Ds(e),this.Ks(),n}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Js(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.js(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ae(Xr,"READ",e,t),t}setItem(e,t){ae(Xr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ae(Xr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ae(Xr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const n=this.Xs(t.key);return this.eo(n,null)}{const n=this.no(t.key,t.newValue);if(n)return this.eo(n.clientId,n)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const n=this.ro(t.key,t.newValue);if(n)return this.io(n)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const n=this.so(t.key,t.newValue);if(n)return this.oo(n)}}else if(t.key===this.Qs){if(t.newValue!==null){const n=this.Us(t.newValue);if(n)return this.Ws(n)}}else if(t.key===this.Bs){const n=function(a){let u=Rn.ae;if(a!=null)try{const c=JSON.parse(a);Pe(typeof c=="number"),u=c}catch(c){Pt(Xr,"Failed to read sequence number from WebStorage",c)}return u}(t.newValue);n!==Rn.ae&&this.sequenceNumberHandler(n)}else if(t.key===this.$s){const n=this._o(t.newValue);await Promise.all(n.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,n){const i=new Sh(this.currentUser,e,t,n),a=c_(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ss())}js(e){const t=c_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,n){const i=Qf(this.persistenceKey,e),a=new Bl(e,t,n);this.setItem(i,a.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const n=this.Xs(e);return Ch.bs(n,t)}ro(e,t){const n=this.ks.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Sh.bs(new an(a),i,t)}so(e,t){const n=this.qs.exec(e),i=Number(n[1]);return Bl.bs(i,t)}Us(e){return fm.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ae(Xr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const n=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),a=this.Gs(n),u=[],c=[];return a.forEach(d=>{i.has(d)||u.push(d)}),i.forEach(d=>{a.has(d)||c.push(d)}),this.syncEngine.lo(u,c).then(()=>{this.xs=n})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=em();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class cE{constructor(){this.ho=new Np,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Np,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="ConnectivityMonitor";class d_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ae(h_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ae(h_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function Rp(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",Nx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rx{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===dh?`project_id=${n}`:`project_id=${n}&database_id=${i}`}bo(e,t,n,i,a){const u=Rp(),c=this.So(e,t.toUriEncodedString());ae(Yf,`Sending RPC '${e}' ${u}:`,c,n);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,a),this.vo(e,c,d,n).then(p=>(ae(Yf,`Received RPC '${e}' ${u}: `,p),p),p=>{throw $l(Yf,`RPC '${e}' ${u} failed with error: `,p,"url: ",c,"request:",n),p})}Co(e,t,n,i,a,u){return this.bo(e,t,n,i,a)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}So(e,t){const n=Nx[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class kx extends Rx{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const a=Rp();return new Promise((u,c)=>{const d=new N0;d.setWithCredentials(!0),d.listenOnce(R0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gc.NO_ERROR:const g=d.getResponseJson();ae(on,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Gc.TIMEOUT:ae(on,`RPC '${e}' ${a} timed out`),c(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const _=d.getStatus();if(ae(on,`RPC '${e}' ${a} failed with status:`,_,"response text:",d.getResponseText()),_>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E==null?void 0:E.error;if(C&&C.status&&C.message){const A=function(b){const B=b.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(B)>=0?B:ie.UNKNOWN}(C.status);c(new Se(A,C.message))}else c(new Se(ie.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ae(on,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);ae(on,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",p,n,15)})}Wo(e,t,n){const i=Rp(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=D0(),c=k0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=a.join("");ae(on,`Creating RPC '${e}' stream ${i}: ${g}`,d);const _=u.createWebChannel(g,d);let E=!1,C=!1;const A=new Px({Fo:b=>{C?ae(on,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(E||(ae(on,`Opening RPC '${e}' stream ${i} transport.`),_.open(),E=!0),ae(on,`RPC '${e}' stream ${i} sending:`,b),_.send(b))},Mo:()=>_.close()}),P=(b,B,q)=>{b.listen(B,$=>{try{q($)}catch(Q){setTimeout(()=>{throw Q},0)}})};return P(_,Pl.EventType.OPEN,()=>{C||(ae(on,`RPC '${e}' stream ${i} transport opened.`),A.Qo())}),P(_,Pl.EventType.CLOSE,()=>{C||(C=!0,ae(on,`RPC '${e}' stream ${i} transport closed`),A.Ko())}),P(_,Pl.EventType.ERROR,b=>{C||(C=!0,$l(on,`RPC '${e}' stream ${i} transport errored:`,b),A.Ko(new Se(ie.UNAVAILABLE,"The operation could not be completed")))}),P(_,Pl.EventType.MESSAGE,b=>{var B;if(!C){const q=b.data[0];Pe(!!q);const $=q,Q=($==null?void 0:$.error)||((B=$[0])===null||B===void 0?void 0:B.error);if(Q){ae(on,`RPC '${e}' stream ${i} received error:`,Q);const F=Q.status;let U=function(x){const D=Ot[x];if(D!==void 0)return Sw(D)}(F),R=Q.message;U===void 0&&(U=ie.INTERNAL,R="Unknown error status: "+F+" with message "+Q.message),C=!0,A.Ko(new Se(U,R)),_.close()}else ae(on,`RPC '${e}' stream ${i} received:`,q),A.Uo(q)}}),P(c,P0.STAT_EVENT,b=>{b.stat===lp.PROXY?ae(on,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===lp.NOPROXY&&ae(on,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){return typeof window<"u"?window:null}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r){return new OA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,n=1e3,i=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="PersistentStream";class pE{constructor(e,t,n,i,a,u,c,d){this.Ti=e,this.n_=n,this.r_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.i_===t&&this.V_(n,i)},n=>{e(()=>{const i=new Se(ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{n(()=>this.m_(i))}),this.stream.onMessage(i=>{n(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ae(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ae(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dx extends pE{constructor(e,t,n,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=BA(this.serializer,e),n=function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?yn(u.readTime):be.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(a,u){let c;const d=u.target;if(c=ph(d)?{documents:Dw(a,d)}:{query:bw(a,d).ht},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=FA(a,u.resumeToken);const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){c.readTime=gh(a,u.snapshotVersion.toTimestamp());const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const n=UA(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.I_(t)}}class bx extends pE{constructor(e,t,n,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=zA(e.writeResults,e.commitTime),n=yn(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Tp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>vh(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{}class Mx extends Vx{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.bo(e,Ep(t,n),i,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ie.UNKNOWN,a.toString())})}Co(e,t,n,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,Ep(t,n),i,u,c,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ie.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Ox{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Pt(t),this.N_=!1):ae("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class Fx{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{n.enqueueAndForget(async()=>{yo(this)&&(ae(po,"Restarting streams for network reachability change."),await async function(d){const p=Ne(d);p.W_.add(4),await fu(p),p.j_.set("Unknown"),p.W_.delete(4),await Yh(p)}(this))})}),this.j_=new Ox(n,i)}}async function Yh(r){if(yo(r))for(const e of r.G_)await e(!0)}async function fu(r){for(const e of r.G_)await e(!1)}function Zh(r,e){const t=Ne(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),gm(t)?mm(t):Fa(t).c_()&&pm(t,e))}function Pa(r,e){const t=Ne(r),n=Fa(t);t.U_.delete(e),n.c_()&&mE(t,e),t.U_.size===0&&(n.c_()?n.P_():yo(t)&&t.j_.set("Unknown"))}function pm(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(r).y_(e)}function mE(r,e){r.H_.Ne(e),Fa(r).w_(e)}function mm(r){r.H_=new DA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Fa(r).start(),r.j_.B_()}function gm(r){return yo(r)&&!Fa(r).u_()&&r.U_.size>0}function yo(r){return Ne(r).W_.size===0}function gE(r){r.H_=void 0}async function Lx(r){r.j_.set("Online")}async function jx(r){r.U_.forEach((e,t)=>{pm(r,e)})}async function Bx(r,e){gE(r),gm(r)?(r.j_.q_(e),mm(r)):r.j_.set("Unknown")}async function zx(r,e,t){if(r.j_.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await async function(i,a){const u=a.cause;for(const c of a.targetIds)i.U_.has(c)&&(await i.remoteSyncer.rejectListen(c,u),i.U_.delete(c),i.H_.removeTarget(c))}(r,e)}catch(n){ae(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ah(r,n)}else if(e instanceof Jc?r.H_.We(e):e instanceof Cw?r.H_.Ze(e):r.H_.je(e),!t.isEqual(be.min()))try{const n=await rE(r.localStore);t.compareTo(n)>=0&&await function(a,u){const c=a.H_.ot(u);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.U_.get(p);g&&a.U_.set(p,g.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,p)=>{const g=a.U_.get(d);if(!g)return;a.U_.set(d,g.withResumeToken(Dt.EMPTY_BYTE_STRING,g.snapshotVersion)),mE(a,d);const _=new Es(g.target,d,p,g.sequenceNumber);pm(a,_)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){ae(po,"Failed to raise snapshot:",n),await Ah(r,n)}}async function Ah(r,e,t){if(!_i(e))throw e;r.W_.add(1),await fu(r),r.j_.set("Offline"),t||(t=()=>rE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ae(po,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Yh(r)})}function yE(r,e){return e().catch(t=>Ah(r,t,e))}async function pu(r){const e=Ne(r),t=gi(e);let n=e.K_.length>0?e.K_[e.K_.length-1].batchId:ro;for(;Ux(e);)try{const i=await Ax(e.localStore,n);if(i===null){e.K_.length===0&&t.P_();break}n=i.batchId,$x(e,i)}catch(i){await Ah(e,i)}vE(e)&&_E(e)}function Ux(r){return yo(r)&&r.K_.length<10}function $x(r,e){r.K_.push(e);const t=gi(r);t.c_()&&t.b_&&t.S_(e.mutations)}function vE(r){return yo(r)&&!gi(r).u_()&&r.K_.length>0}function _E(r){gi(r).start()}async function qx(r){gi(r).C_()}async function Wx(r){const e=gi(r);for(const t of r.K_)e.S_(t.mutations)}async function Gx(r,e,t){const n=r.K_.shift(),i=rm.from(n,e,t);await yE(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await pu(r)}async function Kx(r,e){e&&gi(r).b_&&await async function(n,i){if(function(u){return RA(u)&&u!==ie.ABORTED}(i.code)){const a=n.K_.shift();gi(n).h_(),await yE(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await pu(n)}}(r,e),vE(r)&&_E(r)}async function p_(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),ae(po,"RemoteStore received new credentials");const n=yo(t);t.W_.add(3),await fu(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yh(t)}async function Pp(r,e){const t=Ne(r);e?(t.W_.delete(2),await Yh(t)):e||(t.W_.add(2),await fu(t),t.j_.set("Unknown"))}function Fa(r){return r.J_||(r.J_=function(t,n,i){const a=Ne(t);return a.M_(),new Dx(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:Lx.bind(null,r),No:jx.bind(null,r),Lo:Bx.bind(null,r),p_:zx.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),gm(r)?mm(r):r.j_.set("Unknown")):(await r.J_.stop(),gE(r))})),r.J_}function gi(r){return r.Y_||(r.Y_=function(t,n,i){const a=Ne(t);return a.M_(),new bx(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:qx.bind(null,r),Lo:Kx.bind(null,r),D_:Wx.bind(null,r),v_:Gx.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await pu(r)):(await r.Y_.stop(),r.K_.length>0&&(ae(po,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const u=Date.now()+n,c=new ym(e,t,u,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wE(r,e){if(Pt("AsyncQueue",`${e}: ${r}`),_i(r))return new Se(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||_e.comparator(t.key,n.key):(t,n)=>_e.comparator(t.key,n.key),this.keyedMap=kl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ga;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.Z_=new ft(_e.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ka{constructor(e,t,n,i,a,u,c,d,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,i,a){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ka(e,t,ga.emptySet(t),u,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Qx{constructor(){this.queries=g_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=Ne(t),a=i.queries;i.queries=g_(),a.forEach((u,c)=>{for(const d of c.ta)d.onError(n)})})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function g_(){return new xs(r=>fw(r),Wh)}async function Xx(r,e){const t=Ne(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.na()&&e.ra()&&(n=2):(a=new Hx,n=e.ra()?0:1);try{switch(n){case 0:a.ea=await t.onListen(i,!0);break;case 1:a.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const c=wE(u,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&vm(t)}async function Yx(r,e){const t=Ne(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?i=e.ra()?0:1:!a.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Zx(r,e){const t=Ne(r);let n=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const c of u.ta)c.oa(i)&&(n=!0);u.ea=i}}n&&vm(t)}function Jx(r,e,t){const n=Ne(r),i=n.queries.get(e);if(i)for(const a of i.ta)a.onError(t);n.queries.delete(e)}function vm(r){r.ia.forEach(e=>{e.next()})}var kp,y_;(y_=kp||(kp={}))._a="default",y_.Cache="cache";class eN{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ka(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class tN{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=mw(e),this.wa=new ga(this.ya)}get ba(){return this.fa}Sa(e,t){const n=t?t.Da:new m_,i=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,_)=>{const E=i.get(g),C=uu(this.query,_)?_:null,A=!!E&&this.mutatedKeys.has(E.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let b=!1;E&&C?E.data.isEqual(C.data)?A!==P&&(n.track({type:3,doc:C}),b=!0):this.va(E,C)||(n.track({type:2,doc:C}),b=!0,(d&&this.ya(C,d)>0||p&&this.ya(C,p)<0)&&(c=!0)):!E&&C?(n.track({type:0,doc:C}),b=!0):E&&!C&&(n.track({type:1,doc:E}),b=!0,(d||p)&&(c=!0)),b&&(C?(u=u.add(C),a=P?a.add(g):a.delete(g)):(u=u.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),a=a.delete(g.key),n.track({type:1,doc:g})}return{wa:u,Da:n,ls:c,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((g,_)=>function(C,A){const P=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return P(C)-P(A)}(g.type,_.type)||this.ya(g.doc,_.doc)),this.Ca(n),i=i!=null&&i;const c=t&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,p=d!==this.ga;return this.ga=d,u.length!==0||p?{snapshot:new ka(this.query,e.wa,a,u,e.mutatedKeys,d===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new m_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new TE(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new EE(n))}),t}Oa(e){this.fa=e.gs,this.pa=Ue();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ka.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const La="SyncEngine";class nN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rN{constructor(e){this.key=e,this.Ba=!1}}class sN{constructor(e,t,n,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new xs(c=>fw(c),Wh),this.qa=new Map,this.Qa=new Set,this.$a=new ft(_e.comparator),this.Ka=new Map,this.Ua=new lm,this.Wa={},this.Ga=new Map,this.za=fo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function iN(r,e,t=!0){const n=Jh(r);let i;const a=n.ka.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await IE(n,e,t,!0),i}async function oN(r,e){const t=Jh(r);await IE(t,e,!0,!1)}async function IE(r,e,t,n){const i=await Ih(r.localStore,Qn(e)),a=i.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await _m(r,e,a,u==="current",i.resumeToken)),r.isPrimaryClient&&t&&Zh(r.remoteStore,i),c}async function _m(r,e,t,n,i){r.Ha=(_,E,C)=>async function(P,b,B,q){let $=b.view.Sa(B);$.ls&&($=await xp(P.localStore,b.query,!1).then(({documents:R})=>b.view.Sa(R,$)));const Q=q&&q.targetChanges.get(b.targetId),F=q&&q.targetMismatches.get(b.targetId)!=null,U=b.view.applyChanges($,P.isPrimaryClient,Q,F);return Dp(P,b.targetId,U.Ma),U.snapshot}(r,_,E,C);const a=await xp(r.localStore,e,!0),u=new tN(e,a.gs),c=u.Sa(a.documents),d=du.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),p=u.applyChanges(c,r.isPrimaryClient,d);Dp(r,t,p.Ma);const g=new nN(e,t,u);return r.ka.set(e,g),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),p.snapshot}async function aN(r,e,t){const n=Ne(r),i=n.ka.get(e),a=n.qa.get(i.targetId);if(a.length>1)return n.qa.set(i.targetId,a.filter(u=>!Wh(u,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ra(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Pa(n.remoteStore,i.targetId),Da(n,i.targetId)}).catch(vi)):(Da(n,i.targetId),await Ra(n.localStore,i.targetId,!0))}async function lN(r,e){const t=Ne(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Pa(t.remoteStore,n.targetId))}async function SE(r,e){const t=Ne(r);try{const n=await Sx(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Ka.get(a);u&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Ba=!0:i.modifiedDocuments.size>0?Pe(u.Ba):i.removedDocuments.size>0&&(Pe(u.Ba),u.Ba=!1))}),await vo(t,n,e)}catch(n){await vi(n)}}function v_(r,e,t){const n=Ne(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach((a,u)=>{const c=u.view.sa(e);c.snapshot&&i.push(c.snapshot)}),function(u,c){const d=Ne(u);d.onlineState=c;let p=!1;d.queries.forEach((g,_)=>{for(const E of _.ta)E.sa(c)&&(p=!0)}),p&&vm(d)}(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function uN(r,e,t){const n=Ne(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ka.get(e),a=i&&i.key;if(a){let u=new ft(_e.comparator);u=u.insert(a,St.newNoDocument(a,be.min()));const c=Ue().add(a),d=new hu(be.min(),new Map,new ft(Le),u,c);await SE(n,d),n.$a=n.$a.remove(a),n.Ka.delete(e),Tm(n)}else await Ra(n.localStore,e,!1).then(()=>Da(n,e,t)).catch(vi)}async function cN(r,e){const t=Ne(r),n=e.batch.batchId;try{const i=await Ix(t.localStore,e);Em(t,n,null),wm(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await vo(t,i)}catch(i){await vi(i)}}async function hN(r,e,t){const n=Ne(r);try{const i=await function(u,c){const d=Ne(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,c).next(_=>(Pe(_!==null),g=_.keys(),d.mutationQueue.removeMutationBatch(p,_))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(n.localStore,e);Em(n,e,t),wm(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await vo(n,i)}catch(i){await vi(i)}}function wm(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function Em(r,e,t){const n=Ne(r);let i=n.Wa[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function Da(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(n=>{r.Ua.containsKey(n)||CE(r,n)})}function CE(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Pa(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),Tm(r))}function Dp(r,e,t){for(const n of t)n instanceof EE?(r.Ua.addReference(n.key,e),dN(r,n)):n instanceof TE?(ae(La,"Document no longer in limbo: "+n.key),r.Ua.removeReference(n.key,e),r.Ua.containsKey(n.key)||CE(r,n.key)):Ce()}function dN(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(ae(La,"New document in limbo: "+t),r.Qa.add(n),Tm(r))}function Tm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new _e(it.fromString(e)),n=r.za.next();r.Ka.set(n,new rN(t)),r.$a=r.$a.insert(t,n),Zh(r.remoteStore,new Es(Qn(qh(t.path)),n,"TargetPurposeLimboResolution",Rn.ae))}}async function vo(r,e,t){const n=Ne(r),i=[],a=[],u=[];n.ka.isEmpty()||(n.ka.forEach((c,d)=>{u.push(n.Ha(d,e,t).then(p=>{var g;if((p||t)&&n.isPrimaryClient){const _=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){i.push(p);const _=hm.Yi(d.targetId,p);a.push(_)}}))}),await Promise.all(u),n.La.p_(i),await async function(d,p){const g=Ne(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>W.forEach(p,E=>W.forEach(E.Hi,C=>g.persistence.referenceDelegate.addReference(_,E.targetId,C)).next(()=>W.forEach(E.Ji,C=>g.persistence.referenceDelegate.removeReference(_,E.targetId,C)))))}catch(_){if(!_i(_))throw _;ae(dm,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const C=g.Ts.get(E),A=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(A);g.Ts=g.Ts.insert(E,P)}}}(n.localStore,a))}async function fN(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){ae(La,"User change. New user:",e.toKey());const n=await nE(t.localStore,e);t.currentUser=e,function(a,u){a.Ga.forEach(c=>{c.forEach(d=>{d.reject(new Se(ie.CANCELLED,u))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vo(t,n.Rs)}}function pN(r,e){const t=Ne(r),n=t.Ka.get(e);if(n&&n.Ba)return Ue().add(n.key);{let i=Ue();const a=t.qa.get(e);if(!a)return i;for(const u of a){const c=t.ka.get(u);i=i.unionWith(c.view.ba)}return i}}async function mN(r,e){const t=Ne(r),n=await xp(t.localStore,e.query,!0),i=e.view.Oa(n);return t.isPrimaryClient&&Dp(t,e.targetId,i.Ma),i}async function gN(r,e){const t=Ne(r);return iE(t.localStore,e).then(n=>vo(t,n))}async function yN(r,e,t,n){const i=Ne(r),a=await function(c,d){const p=Ne(c),g=Ne(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",_=>g.Ln(_,d).next(E=>E?p.localDocuments.getDocuments(_,E):W.resolve(null)))}(i.localStore,e);a!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(Em(i,e,n||null),wm(i,e),function(c,d){Ne(Ne(c).mutationQueue).qn(d)}(i.localStore,e)):Ce(),await vo(i,a)):ae(La,"Cannot apply mutation batch with id: "+e)}async function vN(r,e){const t=Ne(r);if(Jh(t),xE(t),e===!0&&t.ja!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await __(t,n.toArray());t.ja=!0,await Pp(t.remoteStore,!0);for(const a of i)Zh(t.remoteStore,a)}else if(e===!1&&t.ja!==!1){const n=[];let i=Promise.resolve();t.qa.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):i=i.then(()=>(Da(t,u),Ra(t.localStore,u,!0))),Pa(t.remoteStore,u)}),await i,await __(t,n),function(u){const c=Ne(u);c.Ka.forEach((d,p)=>{Pa(c.remoteStore,p)}),c.Ua.Dr(),c.Ka=new Map,c.$a=new ft(_e.comparator)}(t),t.ja=!1,await Pp(t.remoteStore,!1)}}async function __(r,e,t){const n=Ne(r),i=[],a=[];for(const u of e){let c;const d=n.qa.get(u);if(d&&d.length!==0){c=await Ih(n.localStore,Qn(d[0]));for(const p of d){const g=n.ka.get(p),_=await mN(n,g);_.snapshot&&a.push(_.snapshot)}}else{const p=await sE(n.localStore,u);c=await Ih(n.localStore,p),await _m(n,AE(p),u,!1,c.resumeToken)}i.push(c)}return n.La.p_(a),i}function AE(r){return dw(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function _N(r){return function(t){return Ne(Ne(t).persistence).zi()}(Ne(r).localStore)}async function wN(r,e,t,n){const i=Ne(r);if(i.ja)return void ae(La,"Ignoring unexpected query state notification.");const a=i.qa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await iE(i.localStore,pw(a[0])),c=hu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Dt.EMPTY_BYTE_STRING);await vo(i,u,c);break}case"rejected":await Ra(i.localStore,e,!0),Da(i,e,n);break;default:Ce()}}async function EN(r,e,t){const n=Jh(r);if(n.ja){for(const i of e){if(n.qa.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){ae(La,"Adding an already active target "+i);continue}const a=await sE(n.localStore,i),u=await Ih(n.localStore,a);await _m(n,AE(a),u.targetId,!1,u.resumeToken),Zh(n.remoteStore,u)}for(const i of t)n.qa.has(i)&&await Ra(n.localStore,i,!1).then(()=>{Pa(n.remoteStore,i),Da(n,i)}).catch(vi)}}function Jh(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=SE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uN.bind(null,e),e.La.p_=Zx.bind(null,e.eventManager),e.La.Ja=Jx.bind(null,e.eventManager),e}function xE(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dE(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return tE(this.persistence,new eE,e.initialUser,this.serializer)}Xa(e){return new um(Xh.ri,this.serializer)}Za(e){return new cE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class TN extends tu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Pe(this.persistence.referenceDelegate instanceof Th);const n=this.persistence.referenceDelegate.garbageCollector;return new Hw(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new um(n=>Th.ri(n,t),this.serializer)}}class NE extends tu{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await xE(this.ru.syncEngine),await pu(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return tE(this.persistence,new eE,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Hw(n,e.asyncQueue,t)}nu(e,t){const n=new SC(t,this.persistence);return new IC(e.asyncQueue,n)}Xa(e){const t=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new cm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,hE(),eh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new cE}}class IN extends NE{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Xf&&(this.sharedClientState.syncEngine={uo:yN.bind(null,t),co:wN.bind(null,t),lo:EN.bind(null,t),zi:_N.bind(null,t),ao:gN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async n=>{await vN(this.ru.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Za(e){const t=hE();if(!Xf.D(t))throw new Se(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class nu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fN.bind(null,this.syncEngine),await Pp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qx}()}createDatastore(e){const t=dE(e.databaseInfo.databaseId),n=function(a){return new kx(a)}(e.databaseInfo);return function(a,u,c,d){return new Mx(a,u,c,d)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,u,c){return new Fx(n,i,a,u,c)}(this.localStore,this.datastore,e.asyncQueue,t=>v_(this.syncEngine,t,0),function(){return d_.D()?new d_:new xx}())}createSyncEngine(e,t){return function(i,a,u,c,d,p,g){const _=new sN(i,a,u,c,d,p);return g&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Ne(i);ae(po,"RemoteStore shutting down."),a.W_.add(5),await fu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nu.provider={build:()=>new nu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="FirestoreClient";class CN{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=b0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async u=>{ae(yi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(ae(yi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wE(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zf(r,e){r.asyncQueue.verifyOperationInProgress(),ae(yi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await nE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function w_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await AN(r);ae(yi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>p_(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>p_(e.remoteStore,i)),r._onlineComponents=e}async function AN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae(yi,"Using user provided OfflineComponentProvider");try{await Zf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await Zf(r,new tu)}}else ae(yi,"Using default OfflineComponentProvider"),await Zf(r,new TN(void 0));return r._offlineComponents}async function xN(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae(yi,"Using user provided OnlineComponentProvider"),await w_(r,r._uninitializedComponentsProvider._online)):(ae(yi,"Using default OnlineComponentProvider"),await w_(r,new nu))),r._onlineComponents}async function NN(r){const e=await xN(r),t=e.eventManager;return t.onListen=iN.bind(null,e.syncEngine),t.onUnlisten=aN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lN.bind(null,e.syncEngine),t}function RN(r,e,t={}){const n=new di;return r.asyncQueue.enqueueAndForget(async()=>function(a,u,c,d,p){const g=new SN({next:E=>{g.su(),u.enqueueAndForget(()=>Yx(a,_));const C=E.docs.has(c);!C&&E.fromCache?p.reject(new Se(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&d&&d.source==="server"?p.reject(new Se(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new eN(qh(c.path),g,{includeMetadataChanges:!0,Ta:!0});return Xx(a,_)}(await NN(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(r,e,t){if(!t)throw new Se(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kN(r,e,t,n){if(e===!0&&n===!0)throw new Se(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function T_(r){if(!_e.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function DN(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce()}function I_(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=DN(r);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firestore.googleapis.com",S_=!0;class C_{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=S_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:S_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$w;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kw)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class PE{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new pC;switch(n.type){case"firstParty":return new yC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=E_.get(t);n&&(ae("ComponentProvider","Removing Datastore"),E_.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Im(this.firestore,e,this._query)}}class Ts{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ts(this.firestore,e,this._key)}}class ru extends Im{constructor(e,t,n){super(e,t,qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ts(this.firestore,null,new _e(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function VN(r,e,...t){if(r=y0(r),arguments.length===1&&(e=b0.newId()),PN("doc","path",e),r instanceof PE){const n=it.fromString(e,...t);return T_(n),new Ts(r,null,new _e(n))}{if(!(r instanceof Ts||r instanceof ru))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(it.fromString(e,...t));return T_(n),new Ts(r.firestore,r instanceof ru?r.converter:null,new _e(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class x_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fE(this,"async_queue_retry"),this.bu=()=>{const n=eh();n&&ae(A_,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.Su=e;const t=eh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=eh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new di;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!_i(e))throw e;ae(A_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const i=function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(n);throw Pt("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.pu=!1,n))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=ym.createAndSchedule(this,e,t,n,a=>this.Fu(a));return this.fu.push(i),i}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class kE extends PE{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new x_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x_(e),this._firestoreClient=void 0,await e}}}function MN(r,e,t){t||(t=dh);const n=E0(r,"firestore");if(n.isInitialized(t)){const i=n.getImmediate({identifier:t}),a=n.getOptions(t);if(sh(a,e))return i;throw new Se(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Se(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kw)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function ON(r){if(r._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FN(r),r._firestoreClient}function FN(r){var e,t,n;const i=r._freezeSettings(),a=function(c,d,p,g){return new eA(c,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,RE(g.experimentalLongPollingOptions),g.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new CN(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xh(Dt.fromBase64String(e))}catch(t){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xh(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}const BN=new RegExp("[~\\*/\\[\\]]");function zN(r,e,t){if(e.search(BN)>=0)throw N_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new DE(...e.split("."))._internalPath}catch{throw N_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function N_(r,e,t,n,i){let a=`Function ${e}() called with invalid data`;a+=". ";let u="";return new Se(ie.INVALID_ARGUMENT,a+r+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UN extends bE{data(){return super.data()}}function VE(r,e){return typeof e=="string"?zN(r,e):e instanceof DE?e._internalPath:e._delegate._internalPath}class $N{convertValue(e,t="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return au(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[Xl].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(u=>yt(u.doubleValue));return new jN(a)}convertGeoPoint(e){return new LN(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=it.fromString(e);Pe(Fw(n));const i=new lo(n.get(1),n.get(3)),a=new _e(n.popFirst(5));return i.isEqual(t)||Pt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ME extends bE{constructor(e,t,n,i,a,u){super(e,t,n,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new WN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(VE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class WN extends ME{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){r=I_(r,Ts);const e=I_(r.firestore,kE);return RN(ON(e),r._key).then(t=>HN(e,r,t))}class KN extends $N{constructor(e){super(),this.firestore=e}convertBytes(e){return new xh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,t)}}function HN(r,e,t){const n=t.docs.get(e._key),i=new KN(r);return new ME(r,i,e._key,n,new qN(t.hasPendingWrites,t.fromCache),e.converter)}class QN{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=JN(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function XN(r){return new QN(r)}class YN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new NE(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class ZN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new IN(t,e==null?void 0:e.cacheSizeBytes)}}}function JN(r){return new YN(void 0)}function eR(){return new ZN}(function(e,t=!0){(function(i){Ma=i})(I0),zl(new ya("firestore",(n,{instanceIdentifier:i,options:a})=>{const u=n.getProvider("app").getImmediate(),c=new kE(new mC(n.getProvider("auth-internal")),new vC(u,n.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(p.options.projectId,g)}(u,i),u);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ci(hv,dv,e),ci(hv,dv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebasestorage.googleapis.com",tR="storageBucket",nR=2*60*1e3,rR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends go{constructor(e,t,n=0){super(Jf(e),`Firebase Storage: ${t} (${Jf(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function Jf(r){return"storage/"+r}function sR(){const r="An unknown error occurred, please check the error payload for server response.";return new ns(es.UNKNOWN,r)}function iR(){return new ns(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oR(){return new ns(es.CANCELED,"User canceled the upload/download.")}function aR(r){return new ns(es.INVALID_URL,"Invalid URL '"+r+"'.")}function lR(r){return new ns(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function R_(r){return new ns(es.INVALID_ARGUMENT,r)}function FE(){return new ns(es.APP_DELETED,"The Firebase app was deleted.")}function uR(r){return new ns(es.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Dr.makeFromUrl(e,t)}catch{return new Dr(e,"")}if(n.path==="")return n;throw lR(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const u="(/(.*))?$",c=new RegExp("^gs://"+i+u,"i"),d={bucket:1,path:3};function p(Q){Q.path_=decodeURIComponent(Q.path)}const g="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${g}/b/${i}/o${E}`,"i"),A={bucket:1,path:3},P=t===OE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",B=new RegExp(`^https?://${P}/${i}/${b}`,"i"),$=[{regex:c,indices:d,postModify:a},{regex:C,indices:A,postModify:p},{regex:B,indices:{bucket:1,path:2},postModify:p}];for(let Q=0;Q<$.length;Q++){const F=$[Q],U=F.regex.exec(e);if(U){const R=U[F.indices.bucket];let I=U[F.indices.path];I||(I=""),n=new Dr(R,I),F.postModify(n);break}}if(n==null)throw aR(e);return n}}class cR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r,e,t){let n=1,i=null,a=null,u=!1,c=0;function d(){return c===2}let p=!1;function g(...b){p||(p=!0,e.apply(null,b))}function _(b){i=setTimeout(()=>{i=null,r(C,d())},b)}function E(){a&&clearTimeout(a)}function C(b,...B){if(p){E();return}if(b){E(),g.call(null,b,...B);return}if(d()||u){E(),g.call(null,b,...B);return}n<64&&(n*=2);let $;c===1?(c=2,$=0):$=(n+Math.random())*1e3,_($)}let A=!1;function P(b){A||(A=!0,E(),!p&&(i!==null?(b||(c=2),clearTimeout(i),_(0)):b||(c=1)))}return _(0),a=setTimeout(()=>{u=!0,P(!0)},t),P}function dR(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){return r!==void 0}function P_(r,e,t,n){if(n<e)throw R_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw R_(`Invalid value for '${r}'. Expected ${t} or less.`)}function pR(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var Nh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Nh||(Nh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,n,i,a,u,c,d,p,g,_,E=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=_,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new qc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const c=a.getErrorCode()===Nh.NO_ERROR,d=a.getStatus();if(!c||mR(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Nh.ABORT;n(!1,new qc(!1,null,g));return}const p=this.successCodes_.indexOf(d)!==-1;n(!0,new qc(p,a))})},t=(n,i)=>{const a=this.resolve_,u=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());fR(d)?a(d):a()}catch(d){u(d)}else if(c!==null){const d=sR();d.serverResponse=c.getErrorText(),this.errorCallback_?u(this.errorCallback_(c,d)):u(d)}else if(i.canceled){const d=this.appDelete_?FE():oR();u(d)}else{const d=iR();u(d)}};this.canceled_?t(!1,new qc(!1,null,!0)):this.backoffId_=hR(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function yR(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function vR(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _R(r,e){e&&(r["X-Firebase-GMPID"]=e)}function wR(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function ER(r,e,t,n,i,a,u=!0){const c=pR(r.urlParams),d=r.url+c,p=Object.assign({},r.headers);return _R(p,e),yR(p,t),vR(p,a),wR(p,n),new gR(d,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function IR(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this._service=e,t instanceof Dr?this._location=t:this._location=Dr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rh(e,t)}get root(){const e=new Dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IR(this._location.path)}get storage(){return this._service}get parent(){const e=TR(this._location.path);if(e===null)return null;const t=new Dr(this._location.bucket,e);return new Rh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw uR(e)}}function k_(r,e){const t=e==null?void 0:e[tR];return t==null?null:Dr.makeFromBucketSpec(t,r)}function SR(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:XS(i,r.app.options.projectId))}class CR{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=OE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nR,this._maxUploadRetryTime=rR,this._requests=new Set,i!=null?this._bucket=Dr.makeFromBucketSpec(i,this._host):this._bucket=k_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dr.makeFromBucketSpec(this._url,e):this._bucket=k_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(T0(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new cR(FE());{const u=ER(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const D_="@firebase/storage",b_="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="storage";function AR(r=eC(),e){r=y0(r);const n=E0(r,LE).getImmediate({identifier:e}),i=HS("storage");return i&&xR(n,...i),n}function xR(r,e,t,n={}){SR(r,e,t,n)}function NR(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new CR(t,n,i,e,I0)}function RR(){zl(new ya(LE,NR,"PUBLIC").setMultipleInstances(!0)),ci(D_,b_,""),ci(D_,b_,"esm2017")}RR();const PR={apiKey:"AIzaSyAlv8DyWdhTjJjZYPqkghZUyEupG5g8SFk",authDomain:"groove-slider.firebaseapp.com",projectId:"groove-slider",storageBucket:"groove-slider.appspot.com",messagingSenderId:"87433841566",appId:"1:87433841566:web:da11fb420a121cc700248f",measurementId:"G-X0QJM954YF"},jE=S0(PR),ep=MN(jE,{localCache:XN({tabManager:eR()})});AR(jE);function kR(r,e){return new Promise((t,n)=>{try{const i=DR();i.onmessage=a=>{a.data.type==="complete"?(t(a.data.file),i.terminate()):a.data.type==="error"&&(n(new Error(a.data.error)),i.terminate())},i.onerror=a=>{n(a),i.terminate()},i.postMessage({data:r,config:e})}catch(i){n(i)}})}function DR(){const r=`
    self.onmessage = async (event) => {
      const { data, config } = event.data;
      
      try {
        // Basic export processing
        const exportedFile = await processExport(data, config);
        
        self.postMessage({ 
          type: 'complete', 
          file: exportedFile 
        });
      } catch (error) {
        self.postMessage({ 
          type: 'error', 
          error: error.message 
        });
      }
    };
    
    async function processExport(data, config) {
      console.log('Processing export', data, config);
      return data; // Temporary return
    }
  `,e=new Blob([r],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}const bR=({value:r,onChange:e})=>{var u;const[t,n]=he.useState(!1),i=[{value:"720x1280",label:"720p"},{value:"1080x1920",label:"1080p"},{value:"1440x2560",label:"2K"}],a=c=>{e(c),n(!1)};return T.jsxs("div",{className:"custom-resolution-dropdown",children:[T.jsxs("div",{className:"dropdown-header",onClick:()=>n(!t),children:[((u=i.find(c=>c.value===r))==null?void 0:u.label)||r,t?T.jsx(ZI,{size:16}):T.jsx(HI,{size:16})]}),t&&T.jsx("div",{className:"dropdown-list",children:i.map(c=>T.jsx("div",{className:"dropdown-item",onClick:()=>a(c.value),children:c.label},c.value))})]})},VR=({isOpen:r,progress:e,message:t,onClose:n,onExport:i,isExporting:a,storyData:u})=>{const[c,d]=he.useState("1080x1920"),[p,g]=he.useState(!1),[_,E]=he.useState(30),[C,A]=he.useState(null),P=async()=>{const b={resolution:c,isExportLoopEnabled:p,exportLoopDuration:_};try{A(null);const q=await kR({storyData:u,resolution:c,isExportLoopEnabled:p,exportLoopDuration:_},b);i(q)}catch(B){console.error("Export failed",B),A(B.message||"Export failed. Please try again.")}};return r?T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content export-modal",children:[T.jsx("button",{className:"modal-close",onClick:n,children:T.jsx(oo,{size:20})}),a?T.jsxs("div",{className:"loading-container",children:[T.jsx("h3",{children:"Exporting Video"}),T.jsx("p",{children:t}),T.jsxs("div",{className:"progress-container",children:[T.jsx("div",{className:"progress-bar",children:T.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),T.jsxs("span",{className:"progress-text",children:[Math.round(e),"%"]})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("h3",{className:"modal-title",children:"Export Settings"}),T.jsxs("div",{className:"resolution-selector",children:[T.jsx("label",{children:"Resolution:"}),T.jsx(bR,{value:c,onChange:d})]}),T.jsxs("div",{className:"export-loop-settings",children:[T.jsx("div",{className:"loop-toggle",children:T.jsxs("label",{children:[T.jsx("span",{children:"Export as Loop"}),T.jsx("input",{type:"checkbox",checked:p,onChange:()=>g(!p)})]})}),p&&T.jsxs("div",{className:"input-container",children:[T.jsx("label",{children:"Loop Duration (seconds):"}),T.jsx("input",{type:"number",min:"5",max:"300",value:_,onChange:b=>E(Number(b.target.value)),className:"loop-duration-input"})]})]}),C&&T.jsx("div",{className:"export-error-message",children:C}),T.jsxs("div",{className:"export-actions",children:[T.jsxs("button",{className:"action-button share",onClick:()=>{},children:[T.jsx(PS,{className:"button-icon"}),"Share"]}),T.jsxs("button",{className:"action-button download",onClick:P,children:[T.jsx(a0,{className:"button-icon"}),"Export"]})]})]})]})}):null},MR=({isOpen:r,onClose:e,onSave:t})=>{const[n,i]=he.useState(""),[a,u]=he.useState(!1),[c,d]=he.useState(null);if(!r)return null;const p=async g=>{if(g.preventDefault(),!n.trim()){d("Please enter a session name");return}try{u(!0),d(null),await t(n),i(""),e()}catch(_){console.error("Error saving session:",_),d("Failed to save session: "+_.message)}finally{u(!1)}};return T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content save-session-modal",children:[T.jsx("button",{className:"modal-close",onClick:e,children:T.jsx(oo,{size:20})}),T.jsx("h3",{className:"modal-title",children:"Save Session"}),T.jsxs("form",{onSubmit:p,children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"session-name",children:"Session Name:"}),T.jsx("input",{type:"text",id:"session-name",value:n,onChange:g=>i(g.target.value),placeholder:"Enter a name for your session",autoFocus:!0,maxLength:50,className:"session-name-input"})]}),c&&T.jsx("div",{className:"save-error",children:c}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:e,disabled:a,children:"Cancel"}),T.jsx("button",{type:"submit",className:"save-button",disabled:a,children:a?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"spinner small"}),"Saving..."]}):T.jsxs(T.Fragment,{children:[T.jsx(c0,{size:16}),"Save Session"]})})]})]})]})})},V_={name:"GrooveGalleryDB",version:1},ed=()=>new Promise((r,e)=>{const t=indexedDB.open(V_.name,V_.version);t.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains("sessions")){const a=i.createObjectStore("sessions",{keyPath:"id",autoIncrement:!0});a.createIndex("name","name",{unique:!1}),a.createIndex("createdAt","createdAt",{unique:!1})}i.objectStoreNames.contains("images")||i.createObjectStore("images",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1}),i.objectStoreNames.contains("music")||i.createObjectStore("music",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1})},t.onsuccess=n=>{const i=n.target.result;r(i)},t.onerror=n=>{console.error("IndexedDB error:",n.target.error),e(n.target.error)}}),OR=async r=>{try{const e=[];for(const d of r.stories)try{const g=await(await fetch(d.url)).blob();e.push({type:d.type,blob:g})}catch(p){console.error("Error processing image:",p)}let t=null;if(r.musicUrl)try{t=await(await fetch(r.musicUrl)).blob()}catch(d){console.error("Error processing music:",d)}const i=(await ed()).transaction(["sessions","images","music"],"readwrite"),a=i.objectStore("sessions"),u={name:r.name,createdAt:new Date,bpm:r.bpm,musicStartPoint:r.musicStartPoint,imageFitMode:r.imageFitMode,duration:r.duration,isLoopingEnabled:r.isLoopingEnabled,currentIndex:r.currentIndex},c=a.add(u);return new Promise((d,p)=>{c.onsuccess=async g=>{const _=g.target.result,E=i.objectStore("images");for(const C of e)E.add({sessionId:_,type:C.type,blob:C.blob});t&&i.objectStore("music").add({sessionId:_,blob:t}),i.oncomplete=()=>{console.log(`Session saved with ID: ${_}`),d(_)},i.onerror=C=>{console.error("Transaction error:",C.target.error),p(C.target.error)}},c.onerror=g=>{console.error("Error adding session:",g.target.error),p(g.target.error)}})}catch(e){throw console.error("saveSession error:",e),e}},FR=async r=>{try{const e=await ed(),t=await new Promise((c,d)=>{const _=e.transaction("sessions","readonly").objectStore("sessions").get(r);_.onsuccess=E=>{c(E.target.result)},_.onerror=E=>{d(E.target.error)}});if(!t)throw new Error(`Session with ID ${r} not found`);const i=(await new Promise((c,d)=>{const E=e.transaction("images","readonly").objectStore("images").index("sessionId").getAll(r);E.onsuccess=C=>{c(C.target.result)},E.onerror=C=>{d(C.target.error)}})).map(c=>({type:c.type,url:URL.createObjectURL(c.blob)})),a=await new Promise((c,d)=>{const E=e.transaction("music","readonly").objectStore("music").index("sessionId").get(r);E.onsuccess=C=>{c(C.target.result)},E.onerror=C=>{d(C.target.error)}});let u=null;return a&&a.blob&&(u=URL.createObjectURL(a.blob)),{...t,stories:i,musicUrl:u}}catch(e){throw console.error("loadSession error:",e),e}},LR=async()=>{try{const r=await ed();return new Promise((e,t)=>{const a=r.transaction("sessions","readonly").objectStore("sessions").getAll();a.onsuccess=u=>{e(u.target.result)},a.onerror=u=>{t(u.target.error)}})}catch(r){throw console.error("getAllSessions error:",r),r}},jR=async r=>{try{const t=(await ed()).transaction(["sessions","images","music"],"readwrite");t.objectStore("sessions").delete(r);const u=t.objectStore("images").index("sessionId").openCursor(IDBKeyRange.only(r));u.onsuccess=g=>{const _=g.target.result;_&&(_.delete(),_.continue())};const p=t.objectStore("music").index("sessionId").openCursor(IDBKeyRange.only(r));return p.onsuccess=g=>{const _=g.target.result;_&&(_.delete(),_.continue())},new Promise((g,_)=>{t.oncomplete=()=>{console.log(`Session ${r} deleted successfully`),g()},t.onerror=E=>{console.error("Error deleting session:",E.target.error),_(E.target.error)}})}catch(e){throw console.error("deleteSession error:",e),e}},BR=({onLoadSession:r,visible:e})=>{const[t,n]=he.useState([]),[i,a]=he.useState(!0),[u,c]=he.useState(null);he.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{a(!0);const _=await LR();_.sort((E,C)=>new Date(C.createdAt)-new Date(E.createdAt)),n(_),c(null)}catch(_){console.error("Error loading sessions:",_),c("Failed to load saved sessions")}finally{a(!1)}},p=async(_,E)=>{if(_.stopPropagation(),window.confirm("Are you sure you want to delete this session?"))try{await jR(E),n(t.filter(C=>C.id!==E))}catch(C){console.error("Error deleting session:",C),alert("Failed to delete session")}},g=_=>new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?T.jsxs("div",{className:"sessions-list",children:[T.jsx("h3",{className:"sessions-title",children:"Saved Sessions"}),i&&T.jsx("div",{className:"sessions-loading",children:"Loading saved sessions..."}),u&&T.jsx("div",{className:"sessions-error",children:u}),!i&&t.length===0&&T.jsxs("div",{className:"sessions-empty",children:[T.jsx("p",{children:"No saved sessions yet"}),T.jsx("p",{className:"sessions-hint",children:"Create a slideshow and click Save to add one"})]}),!i&&t.length>0&&T.jsx("ul",{className:"sessions-items",children:t.map(_=>T.jsxs("li",{className:"session-item",onClick:()=>r(_.id),children:[T.jsxs("div",{className:"session-info",children:[T.jsx("div",{className:"session-name",children:_.name}),T.jsxs("div",{className:"session-date",children:[T.jsx(o0,{size:12}),T.jsx("span",{children:g(_.createdAt)})]}),T.jsxs("div",{className:"session-details",children:[T.jsxs("span",{children:[_.bpm," BPM"]}),T.jsxs("span",{children:[_.duration.toFixed(1),"s/slide"]})]})]}),T.jsxs("div",{className:"session-actions",children:[T.jsx("button",{className:"session-delete-btn",onClick:E=>p(E,_.id),title:"Delete session",children:T.jsx(OS,{size:16})}),T.jsx(si,{size:16,className:"session-arrow"})]})]},_.id))})]}):null},BE=()=>new Promise((r,e)=>{const t=indexedDB.open("AudioVisualizerDB",2);t.onerror=n=>e("IndexedDB error: "+n.target.errorCode),t.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains("audioPositions")||i.createObjectStore("audioPositions",{keyPath:"audioUrl"}),i.objectStoreNames.contains("visualizerStates")||i.createObjectStore("visualizerStates",{keyPath:"audioUrl"})},t.onsuccess=n=>r(n.target.result)}),M_=async(r,e)=>{try{const i=(await BE()).transaction(["visualizerStates"],"readwrite").objectStore("visualizerStates");return new Promise((a,u)=>{const c=i.put({audioUrl:r,...e,timestamp:Date.now()});c.onsuccess=()=>a(!0),c.onerror=()=>u(!1)})}catch(t){return console.error("Error storing visualizer state:",t),!1}},zR=async r=>{try{const n=(await BE()).transaction(["visualizerStates"],"readonly").objectStore("visualizerStates");return new Promise((i,a)=>{const u=n.get(r);u.onsuccess=c=>{i(c.target.result||null)},u.onerror=()=>a(null)})}catch(e){return console.error("Error retrieving visualizer state:",e),null}},UR=({audioUrl:r,onStartPointChange:e,audioRef:t,musicStartPoint:n=0})=>{const i=he.useRef(null),a=he.useRef(null),[u,c]=he.useState(null),[d,p]=he.useState(!0),[g,_]=he.useState(0),[E,C]=he.useState(800),[A,P]=he.useState(0),[b,B]=he.useState(1),[q,$]=he.useState(0),[Q,F]=he.useState(!1),U=he.useRef(null),R=he.useRef(null),I=he.useRef(!1);he.useEffect(()=>{if(!r||U.current===r)return;U.current=r,p(!0),(async()=>{try{const J=await zR(r),ee=new(window.AudioContext||window.webkitAudioContext),Ae=await(await fetch(r)).arrayBuffer(),Be=await ee.decodeAudioData(Ae);c(Be),_(Be.duration),J&&(J.zoomLevel&&B(J.zoomLevel),J.waveformOffset!==void 0&&$(J.waveformOffset),J.followPlayhead!==void 0&&F(J.followPlayhead),e&&J.startPoint!==void 0&&Math.abs(J.startPoint-n)>.001&&e(J.startPoint)),p(!1)}catch(J){console.error("Error loading audio:",J),p(!1)}})()},[r,e,n]),he.useEffect(()=>{if(!r||!u)return;const se=setTimeout(()=>{M_(r,{zoomLevel:b,waveformOffset:q,followPlayhead:Q,startPoint:n}).catch(J=>console.error("Error saving to IndexedDB:",J))},1e3);return()=>clearTimeout(se)},[b,q,Q,n,r,u]),he.useEffect(()=>{const se=t==null?void 0:t.current;if(!se)return;const J=()=>{const ve=se.currentTime;if(P(ve),I.current=!se.paused,Q&&I.current){const Ae=g/b,Be=q,$e=Be+Ae,Ze=Ae*.2;if(ve>$e-Ze){const je=Math.max(0,Math.min(g-Ae,ve-Ae*.8));$(je)}else if(ve<Be+Ze){const je=Math.max(0,Math.min(g-Ae,ve-Ae*.2));$(je)}}},ee=()=>{I.current&&se&&J(),R.current=requestAnimationFrame(ee)};return ee(),se.addEventListener("timeupdate",J),se.addEventListener("play",()=>{I.current=!0}),se.addEventListener("pause",()=>{I.current=!1}),se.addEventListener("seeking",J),()=>{se.removeEventListener("timeupdate",J),se.removeEventListener("play",()=>{I.current=!0}),se.removeEventListener("pause",()=>{I.current=!1}),se.removeEventListener("seeking",J),R.current&&cancelAnimationFrame(R.current)}},[t,Q,b,q,g]),he.useEffect(()=>{if(!u||g===0||!r)return;if(b>1){const J=g/b,ee=Math.max(0,Math.min(g-J,n-J/2));$(ee)}const se=setTimeout(()=>{storeAudioPositions(r,{startPoint:n}).catch(J=>console.error("Error saving to IndexedDB:",J))},1e3);return()=>clearTimeout(se)},[n,b,u,g,r]);const x=(se,J=!0)=>{if(isNaN(se))return"00:00.000";const ee=Math.floor(se/60),ve=Math.floor(se%60);if(J){const Ae=Math.floor(se%1*1e3);return`${ee.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}.${Ae.toString().padStart(3,"0")}`}else return`${ee.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`},D=he.useCallback(()=>{if(!u||!i.current)return;const se=i.current,J=se.getContext("2d"),ee=se.width,ve=se.height;J.clearRect(0,0,ee,ve),J.fillStyle="#222",J.fillRect(0,0,ee,ve);const Ae=u.getChannelData(0),Be=g/b,$e=Math.max(0,Math.min(g-Be,q)),Ze=$e+Be,je=Ae.length,kn=Math.floor($e/g*je),Mr=Math.floor(Ze/g*je)-kn,Or=1,Yn=0,dn=Math.floor(ee/(Or+Yn)),Dn=Math.floor(Mr/dn);J.fillStyle="#FFFFFF";for(let Xe=0;Xe<dn;Xe++){const bn=Xe*(Or+Yn),ut=kn+Math.floor(Xe/dn*Mr);let ct=0;for(let Mn=0;Mn<Dn;Mn++){const Fr=ut+Mn;if(Fr<Ae.length){const Lr=Math.abs(Ae[Fr]);Lr>ct&&(ct=Lr)}}const _n=Math.min(2,ct*.9)*(ve/2),ss=bn,Vn=ve/2-_n,Zn=_n*2;J.fillRect(ss,Vn,Or,Zn)}J.strokeStyle="rgba(100, 100, 100, 0.3)",J.lineWidth=1,J.beginPath(),J.moveTo(0,ve/2),J.lineTo(ee,ve/2),J.stroke(),J.beginPath(),J.moveTo(0,ve/4),J.lineTo(ee,ve/4),J.moveTo(0,3*ve/4),J.lineTo(ee,3*ve/4),J.stroke(),J.fillStyle="#777",J.font="10px Arial";let Tt=1;b>=32?Tt=.05:b>=16?Tt=.1:b>=8?Tt=.25:b>=4?Tt=.5:b>=2&&(Tt=1);for(let Xe=Math.ceil($e/Tt)*Tt;Xe<=Ze;Xe+=Tt){const bn=(Xe-$e)/Be*ee;J.fillStyle="rgba(100, 100, 100, 0.5)",J.fillRect(bn,0,1,ve),(Tt>=1||Tt>=.5&&Xe*2%2===0||Tt>=.25&&Xe*4%4===0||Tt>=.1&&Xe*10%10===0||Tt>=.05&&Xe*20%20===0)&&(J.fillStyle="#AAA",J.textAlign="center",J.fillText(x(Xe,!1),bn,ve-5))}if(A>=$e&&A<=Ze){const Xe=(A-$e)/Be*ee;J.fillStyle="rgba(255, 0, 0, 0.8)",J.fillRect(Xe-1,0,2,ve),J.beginPath(),J.moveTo(Xe,0),J.lineTo(Xe-4,-4),J.lineTo(Xe+4,-4),J.closePath(),J.fill()}if(n>=$e&&n<=Ze){const Xe=(n-$e)/Be*ee;J.fillStyle="rgba(255, 215, 0, 0.8)",J.fillRect(Xe-1,0,2,ve),J.beginPath(),J.moveTo(Xe,0),J.lineTo(Xe-6,-6),J.lineTo(Xe+6,-6),J.closePath(),J.fill()}const en=3;J.fillStyle="rgba(100, 100, 255, 0.5)",J.fillRect(0,ve-en,ee*(Be/g),en)},[u,A,b,q,g,n,E]);he.useEffect(()=>{if(u&&!d){const se=requestAnimationFrame(D);return()=>cancelAnimationFrame(se)}},[u,A,b,q,g,n,d,D]);const V=se=>{if(!u||!i.current||fe)return;const J=i.current,ee=J.getBoundingClientRect(),ve=se.clientX-ee.left,Ae=g/b,$e=Math.max(0,Math.min(g-Ae,q))+ve/J.width*Ae,Ze=Math.round($e*1e3)/1e3;t!=null&&t.current&&(t.current.currentTime=Ze),P(Ze)},M=()=>{B(se=>{if(se>=64)return se;const J=Math.min(64,se*2);if(u){const ee=g/se,ve=q+ee/2,Ae=g/J,Be=Math.max(0,Math.min(g-Ae,ve-Ae/2));$(Be)}return J})},k=()=>{B(se=>{if(se<=1)return 1;const J=Math.max(1,se/2);if(J===1)$(0);else if(u){const ee=g/se,ve=q+ee/2,Ae=g/J,Be=Math.max(0,Math.min(g-Ae,ve-Ae/2));$(Be)}return J})},me=()=>{if(!u)return;const se=g/b,J=Math.max(0,Math.min(g-se,n-se/2));$(J)},ue=se=>{if(!u)return;se.preventDefault();const J=g/b,ee=Math.max(0,g-J),ve=.05*J;se.deltaY>0?$(Ae=>Math.min(ee,Ae+ve)):$(Ae=>Math.max(0,Ae-ve))},[fe,ce]=he.useState(!1),[te,re]=he.useState(0),ne=se=>{u&&(se.preventDefault(),ce(!0),re(se.clientX),se.currentTarget.style.cursor="grabbing")},L=se=>{if(!fe||!u)return;const J=se.clientX-te,ee=g/b,ve=E/ee,Ae=J/ve,Be=Math.max(0,g-ee);$($e=>Math.max(0,Math.min(Be,$e-Ae))),re(se.clientX)},Y=se=>{ce(!1),se.currentTarget.style.cursor="grab"},Ee=()=>{if(!(t!=null&&t.current)||!e)return;const se=t.current.currentTime,J=Math.round(se*1e3)/1e3;e(J)},De=se=>{if(!u||!e)return;const J=se*.001,ee=Math.max(0,Math.min(g,n+J)),ve=Math.round(ee*1e3)/1e3;if(e(ve),b>1){const Ae=g/b,Be=q,$e=Be+Ae;if(ee<Be||ee>$e){const Ze=Math.max(0,Math.min(g-Ae,ee-Ae/2));$(Ze)}}},ye=()=>{const se=prompt("Enter time (MM:SS.mmm):",x(A));if(se)try{const[J,ee]=se.split(":");let ve=0,Ae=0;if(ee.includes(".")){const[Ze,je]=ee.split(".");ve=parseInt(Ze,10),Ae=parseInt(je.padEnd(3,"0").slice(0,3),10)}else ve=parseInt(ee,10);const $e=parseInt(J,10)*60+ve+Ae/1e3;if($e>=0&&$e<=g){if(t!=null&&t.current&&(t.current.currentTime=$e),P($e),b>1){const Ze=g/b,je=Math.max(0,Math.min(g-Ze,$e-Ze/2));$(je)}}else alert(`Please enter a time between 0:00.000 and ${x(g)}`)}catch{alert("Invalid time format. Please use MM:SS.mmm")}};return T.jsx("div",{className:"waveform-container",ref:a,children:d?T.jsx("div",{className:"waveform-loading",children:"Loading waveform..."}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"waveform-canvas-container",style:{position:"relative",cursor:fe?"grabbing":"grab"},onWheel:ue,onMouseDown:ne,onMouseMove:L,onMouseUp:Y,onMouseLeave:Y,onClick:V,children:[T.jsx("canvas",{ref:i,width:800,height:80,className:"waveform-canvas"}),T.jsx("button",{onClick:me,style:{position:"absolute",top:"5px",left:"30px",background:"rgba(255, 215, 0, 0.5)",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",fontSize:"10px",cursor:"pointer"},title:"Focus view on start point",children:"Find Start"}),T.jsxs("div",{style:{position:"absolute",top:"5px",left:"5px",background:"rgba(0, 0, 0, 0.5)",color:"white",borderRadius:"3px",padding:"2px 5px",fontSize:"10px"},children:[b,"x"]})]}),T.jsxs("div",{className:"waveform-timestamps",style:{display:"flex",justifyContent:"space-between",padding:"5px 0",fontSize:"12px",fontFamily:"monospace"},children:[T.jsx("span",{className:"current-time",style:{color:"white",background:"rgba(255, 0, 0, 0.2)",borderRadius:"3px",padding:"2px 5px",cursor:"pointer"},onClick:ye,title:"Click to enter exact time",children:x(A)}),T.jsxs("span",{className:"start-point",style:{color:"white",background:"rgba(255, 215, 0, 0.2)",borderRadius:"3px",padding:"2px 5px",cursor:"pointer"},onClick:me,title:"Click to focus on start point",children:["Start: ",x(n)]}),T.jsxs("span",{className:"duration",style:{color:"white",background:"rgba(100, 100, 100, 0.2)",borderRadius:"3px",padding:"2px 5px"},children:["Total: ",x(g)]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",margin:"5px 0"},children:[T.jsxs("div",{style:{display:"flex",gap:"5px"},children:[T.jsx("button",{onClick:k,disabled:b<=1,style:{background:b<=1?"#555":"#333",color:"white",border:"none",borderRadius:"3px",padding:"3px 8px",fontSize:"12px",cursor:b<=1?"not-allowed":"pointer"},children:"Zoom Out"}),T.jsx("button",{onClick:M,disabled:b>=64,style:{background:b>=64?"#555":"#333",color:"white",border:"none",borderRadius:"3px",padding:"3px 8px",fontSize:"12px",cursor:b>=64?"not-allowed":"pointer"},children:"Zoom In"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[T.jsx("input",{type:"checkbox",id:"follow-playhead",checked:Q,onChange:()=>{const se=!Q;F(se),r&&M_(r,{zoomLevel:b,waveformOffset:q,followPlayhead:se,startPoint:n}).catch(J=>console.error("Error saving follow playhead state:",J))}}),T.jsx("label",{htmlFor:"follow-playhead",style:{color:"white",fontSize:"12px"},children:"Follow Playhead"})]})]}),T.jsxs("div",{className:"navigation-controls",style:{display:"flex",justifyContent:"center",gap:"8px",padding:"10px 0"},children:[T.jsx("button",{onClick:()=>De(-5),style:{background:"#DAA520",border:"none",borderRadius:"4px",padding:"6px 12px",color:"white",cursor:"pointer"},children:"-5 ms (Start)"}),T.jsx("button",{onClick:()=>De(-1),style:{background:"#DAA520",border:"none",borderRadius:"4px",padding:"6px 12px",color:"white",cursor:"pointer"},children:"-1 ms (Start)"}),T.jsx("button",{onClick:()=>De(1),style:{background:"#DAA520",border:"none",borderRadius:"4px",padding:"6px 12px",color:"white",cursor:"pointer"},children:"+1 ms (Start)"}),T.jsx("button",{onClick:()=>De(5),style:{background:"#DAA520",border:"none",borderRadius:"4px",padding:"6px 12px",color:"white",cursor:"pointer"},children:"+5 ms (Start)"})]}),T.jsx("button",{className:"set-start-point-button",onClick:Ee,style:{background:"#FFD700",border:"none",borderRadius:"4px",padding:"10px",margin:"5px 0",color:"#333",fontWeight:"bold",cursor:"pointer",width:"100%"},children:"Set Start Point"})]})})},$R=r=>(e,t)=>(r.set(e,t),t),O_=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,zE=536870912,F_=zE*2,qR=(r,e)=>t=>{const n=e.get(t);let i=n===void 0?t.size:n<F_?n+1:0;if(!t.has(i))return r(t,i);if(t.size<zE){for(;t.has(i);)i=Math.floor(Math.random()*F_);return r(t,i)}if(t.size>O_)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*O_);return r(t,i)},UE=new WeakMap,WR=$R(UE),GR=qR(WR,UE),KR=r=>typeof r.start=="function",L_=new WeakMap,HR=r=>({...r,connect:({call:e})=>async()=>{const{port1:t,port2:n}=new MessageChannel,i=await e("connect",{port:t},[t]);return L_.set(n,i),n},disconnect:({call:e})=>async t=>{const n=L_.get(t);if(n===void 0)throw new Error("The given port is not connected.");await e("disconnect",{portId:n})},isSupported:({call:e})=>()=>e("isSupported")}),tp=new WeakMap,QR=r=>{if(tp.has(r))return tp.get(r);const e=new Map;return tp.set(r,e),e},XR=r=>{const e=HR(r);return t=>{const n=QR(t);t.addEventListener("message",({data:c})=>{const{id:d}=c;if(d!==null&&n.has(d)){const{reject:p,resolve:g}=n.get(d);n.delete(d),c.error===void 0?g(c.result):p(new Error(c.error.message))}}),KR(t)&&t.start();const i=(c,d=null,p=[])=>new Promise((g,_)=>{const E=GR(n);n.set(E,{reject:_,resolve:g}),d===null?t.postMessage({id:E,method:c},p):t.postMessage({id:E,method:c,params:d},p)}),a=(c,d,p=[])=>{t.postMessage({id:null,method:c,params:d},p)};let u={};for(const[c,d]of Object.entries(e))u={...u,[c]:d({call:i,notify:a})};return{...u}}},j_=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),B_=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),bp=(r,e)=>({startTime:e,type:"setValue",value:r}),$E=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),qE=(r,e,{startTime:t,target:n,timeConstant:i})=>n+(e-n)*Math.exp((t-r)/i),ma=r=>r.type==="exponentialRampToValue",Ph=r=>r.type==="linearRampToValue",ii=r=>ma(r)||Ph(r),Sm=r=>r.type==="setValue",_s=r=>r.type==="setValueCurve",kh=(r,e,t,n)=>{const i=r[e];return i===void 0?n:ii(i)||Sm(i)?i.value:_s(i)?i.values[i.values.length-1]:qE(t,kh(r,e-1,i.startTime,n),i)},z_=(r,e,t,n,i)=>t===void 0?[n.insertTime,i]:ii(t)?[t.endTime,t.value]:Sm(t)?[t.startTime,t.value]:_s(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,kh(r,e-1,t.startTime,i)],Vp=r=>r.type==="cancelAndHold",Mp=r=>r.type==="cancelScheduledValues",ri=r=>Vp(r)||Mp(r)?r.cancelTime:ma(r)||Ph(r)?r.endTime:r.startTime,U_=(r,e,t,{endTime:n,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((r-e)/(n-e)):0,$_=(r,e,t,{endTime:n,value:i})=>t+(r-e)/(n-e)*(i-t),YR=(r,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?r[t]:(1-(e-t))*r[t]+(1-(n-e))*r[n]},ZR=(r,{duration:e,startTime:t,values:n})=>{const i=(r-t)/e*(n.length-1);return YR(n,i)},Wc=r=>r.type==="setTarget";class JR{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=ri(e);if(Vp(e)||Mp(e)){const n=this._automationEvents.findIndex(a=>Mp(e)&&_s(a)?a.startTime+a.duration>=t:ri(a)>=t),i=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Vp(e)){const a=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&ii(i)){if(a!==void 0&&Wc(a))throw new Error("The internal list is malformed.");const u=a===void 0?i.insertTime:_s(a)?a.startTime+a.duration:ri(a),c=a===void 0?this._defaultValue:_s(a)?a.values[a.values.length-1]:a.value,d=ma(i)?U_(t,u,c,i):$_(t,u,c,i),p=ma(i)?j_(d,t,this._currenTime):B_(d,t,this._currenTime);this._automationEvents.push(p)}if(a!==void 0&&Wc(a)&&this._automationEvents.push(bp(this.getValue(t),t)),a!==void 0&&_s(a)&&a.startTime+a.duration>t){const u=t-a.startTime,c=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(u*c)),p=u/(d-1)*c,g=a.values.slice(0,d);if(p<1)for(let _=1;_<d;_+=1){const E=p*_%1;g[_]=a.values[_-1]*(1-E)+a.values[_]*E}this._automationEvents[this._automationEvents.length-1]=$E(g,a.startTime,u)}}}else{const n=this._automationEvents.findIndex(u=>ri(u)>t),i=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(i!==void 0&&_s(i)&&ri(i)+i.duration>t)return!1;const a=ma(e)?j_(e.value,e.endTime,this._currenTime):Ph(e)?B_(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(a);else{if(_s(e)&&t+e.duration>ri(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>ri(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),i=n[0];Wc(i)&&n.unshift(bp(kh(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>ri(u)>e),n=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[i];if(a!==void 0&&Wc(a)&&(n===void 0||!ii(n)||n.insertTime>e))return qE(e,kh(this._automationEvents,i-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Sm(a)&&(n===void 0||!ii(n)))return a.value;if(a!==void 0&&_s(a)&&(n===void 0||!ii(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?ZR(e,a):a.values[a.values.length-1];if(a!==void 0&&ii(a)&&(n===void 0||!ii(n)))return a.value;if(n!==void 0&&ma(n)){const[u,c]=z_(this._automationEvents,i,a,n,this._defaultValue);return U_(e,u,c,n)}if(n!==void 0&&Ph(n)){const[u,c]=z_(this._automationEvents,i,a,n,this._defaultValue);return $_(e,u,c,n)}return this._defaultValue}}const eP=r=>({cancelTime:r,type:"cancelAndHold"}),tP=r=>({cancelTime:r,type:"cancelScheduledValues"}),nP=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),rP=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),sP=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),iP=()=>new DOMException("","AbortError"),oP=r=>(e,t,[n,i,a],u)=>{r(e[i],[t,n,a],c=>c[0]===t&&c[1]===n,u)},aP=r=>(e,t,n)=>{const i=[];for(let a=0;a<n.numberOfInputs;a+=1)i.push(new Set);r.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},lP=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},ba=new WeakSet,WE=new WeakMap,GE=new WeakMap,KE=new WeakMap,HE=new WeakMap,QE=new WeakMap,XE=new WeakMap,Op=new WeakMap,q_=new WeakMap,YE={construct(){return YE}},uP=r=>{try{const e=new Proxy(r,YE);new e}catch{return!1}return!0},W_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,G_=(r,e)=>{const t=[];let n=r.replace(/^[\s]+/,""),i=n.match(W_);for(;i!==null;){const a=i[1].slice(1,-1),u=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(u),n=n.slice(i[0].length).replace(/^[\s]+/,""),i=n.match(W_)}return[t.join(";"),n]},K_=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},H_=r=>{if(!uP(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},cP=(r,e,t,n,i,a,u,c,d,p,g,_,E)=>{let C=0;return(A,P,b={credentials:"omit"})=>{const B=g.get(A);if(B!==void 0&&B.has(P))return Promise.resolve();const q=p.get(A);if(q!==void 0){const F=q.get(P);if(F!==void 0)return F}const $=a(A),Q=$.audioWorklet===void 0?i(P).then(([F,U])=>{const[R,I]=G_(F,U),x=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${I}
})})(window,'_AWGS')`;return t(x)}).then(()=>{const F=E._AWGS.pop();if(F===void 0)throw new SyntaxError;n($.currentTime,$.sampleRate,()=>F(class{},void 0,(U,R)=>{if(U.trim()==="")throw e();const I=q_.get($);if(I!==void 0){if(I.has(U))throw e();H_(R),K_(R.parameterDescriptors),I.set(U,R)}else H_(R),K_(R.parameterDescriptors),q_.set($,new Map([[U,R]]))},$.sampleRate,void 0,void 0))}):Promise.all([i(P),Promise.resolve(r(_,_))]).then(([[F,U],R])=>{const I=C+1;C=I;const[x,D]=G_(F,U),me=`${x};((AudioWorkletProcessor,registerProcessor)=>{${D}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${I}',class extends AudioWorkletProcessor{process(){return !1}})`,ue=new Blob([me],{type:"application/javascript; charset=utf-8"}),fe=URL.createObjectURL(ue);return $.audioWorklet.addModule(fe,b).then(()=>{if(c($))return $;const ce=u($);return ce.audioWorklet.addModule(fe,b).then(()=>ce)}).then(ce=>{if(d===null)throw new SyntaxError;try{new d(ce,`__sac${I}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(fe))});return q===void 0?p.set(A,new Map([[P,Q]])):q.set(P,Q),Q.then(()=>{const F=g.get(A);F===void 0?g.set(A,new Set([P])):F.add(P)}).finally(()=>{const F=p.get(A);F!==void 0&&F.delete(P)}),Q}},wi=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},td=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return r.delete(n),n},ZE=(r,e,t,n)=>{const i=wi(r,e),a=td(i,u=>u[0]===t&&u[1]===n);return i.size===0&&r.delete(e),a},mu=r=>wi(XE,r),Va=r=>{if(ba.has(r))throw new Error("The AudioNode is already stored.");ba.add(r),mu(r).forEach(e=>e(!0))},JE=r=>"port"in r,gu=r=>{if(!ba.has(r))throw new Error("The AudioNode is not stored.");ba.delete(r),mu(r).forEach(e=>e(!1))},Fp=(r,e)=>{!JE(r)&&e.every(t=>t.size===0)&&gu(r)},hP=(r,e,t,n,i,a,u,c,d,p,g,_,E)=>{const C=new WeakMap;return(A,P,b,B,q)=>{const{activeInputs:$,passiveInputs:Q}=a(P),{outputs:F}=a(A),U=c(A),R=I=>{const x=d(P),D=d(A);if(I){const V=ZE(Q,A,b,B);r($,A,V,!1),!q&&!_(A)&&t(D,x,b,B),E(P)&&Va(P)}else{const V=n($,A,b,B);e(Q,B,V,!1),!q&&!_(A)&&i(D,x,b,B);const M=u(P);if(M===0)g(P)&&Fp(P,$);else{const k=C.get(P);k!==void 0&&clearTimeout(k),C.set(P,setTimeout(()=>{g(P)&&Fp(P,$)},M*1e3))}}};return p(F,[P,b,B],I=>I[0]===P&&I[1]===b&&I[2]===B,!0)?(U.add(R),g(A)?r($,A,[b,B,R],!0):e(Q,B,[A,b,R],!0),!0):!1}},dP=r=>(e,t,[n,i,a],u)=>{const c=e.get(n);c===void 0?e.set(n,new Set([[i,t,a]])):r(c,[i,t,a],d=>d[0]===i&&d[1]===t,u)},fP=r=>(e,t)=>{const n=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(n),n.disconnect()};t.addEventListener("ended",i)},pP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},mP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...pP,...d},_=n(p,g),E=a(p)?e():null;super(c,!1,_,E),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},vn=(r,e)=>r.context===e,gP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!vn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Dh=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},_o=()=>new DOMException("","IndexSizeError"),Cm=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(n){throw n.code===12?_o():n}})(r.getChannelData)},yP={numberOfChannels:1},vP=(r,e,t,n,i,a,u,c)=>{let d=null;return class eT{constructor(g){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:E,sampleRate:C}={...yP,...g};d===null&&(d=new i(1,1,44100));const A=n!==null&&e(a,a)?new n({length:_,numberOfChannels:E,sampleRate:C}):d.createBuffer(E,_,C);if(A.numberOfChannels===0)throw t();return typeof A.copyFromChannel!="function"?(u(A),Cm(A)):e(Dh,()=>Dh(A))||c(A),r.add(A),A}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===eT.prototype||r.has(g)}}},ur=-34028234663852886e22,Nn=34028234663852886e22,Is=r=>ba.has(r),_P={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},wP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),E={..._P,...g},C=i(_,E),A=u(_),P=A?e():null;super(p,!1,C,P),this._audioBufferSourceNodeRenderer=P,this._isBufferNullified=!1,this._isBufferSet=E.buffer!==null,this._nativeAudioBufferSourceNode=C,this._onended=null,this._playbackRate=t(this,A,C.playbackRate,Nn,ur)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?c(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===g?p:_}get playbackRate(){return this._playbackRate}start(p=0,g=0,_){if(this._nativeAudioBufferSourceNode.start(p,g,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[p,g]:[p,g,_]),this.context.state!=="closed"){Va(this);const E=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",E),Is(this)&&gu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",E)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},EP=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let _=t(p);const E=vn(_,g);if(!E){const C={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=e(g,C),u!==null&&_.start(...u),c!==null&&_.stop(c)}return a.set(g,_),E?await r(g,p.playbackRate,_.playbackRate):await n(g,p.playbackRate,_.playbackRate),await i(p,g,_),_};return{set start(p){u=p},set stop(p){c=p},render(p,g){const _=a.get(g);return _!==void 0?Promise.resolve(_):d(p,g)}}},TP=r=>"playbackRate"in r,IP=r=>"frequency"in r&&"gain"in r,SP=r=>"offset"in r,CP=r=>!("frequency"in r)&&"gain"in r,AP=r=>"detune"in r&&"frequency"in r&&!("gain"in r),xP=r=>"pan"in r,Hn=r=>wi(WE,r),yu=r=>wi(KE,r),Lp=(r,e)=>{const{activeInputs:t}=Hn(r);t.forEach(i=>i.forEach(([a])=>{e.includes(r)||Lp(a,[...e,r])}));const n=TP(r)?[r.playbackRate]:JE(r)?Array.from(r.parameters.values()):IP(r)?[r.Q,r.detune,r.frequency,r.gain]:SP(r)?[r.offset]:CP(r)?[r.gain]:AP(r)?[r.detune,r.frequency]:xP(r)?[r.pan]:[];for(const i of n){const a=yu(i);a!==void 0&&a.activeInputs.forEach(([u])=>Lp(u,e))}Is(r)&&gu(r)},NP=r=>{Lp(r.destination,[])},RP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),E=u(_),C=i(_,g,E),A=E?e(c):null;super(p,!1,C,A),this._isNodeOfNativeOfflineAudioContext=E,this._nativeAudioDestinationNode=C}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},PP=r=>{const e=new WeakMap,t=async(n,i)=>{const a=i.destination;return e.set(i,a),await r(n,i,a),a};return{render(n,i){const a=e.get(i);return a!==void 0?Promise.resolve(a):t(n,i)}}},kP=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=p.listener,_=()=>{const F=new Float32Array(1),U=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=u(p);let I=!1,x=[0,0,-1,0,1,0],D=[0,0,0];const V=()=>{if(I)return;I=!0;const ue=n(p,256,9,0);ue.onaudioprocess=({inputBuffer:fe})=>{const ce=[a(fe,F,0),a(fe,F,1),a(fe,F,2),a(fe,F,3),a(fe,F,4),a(fe,F,5)];ce.some((re,ne)=>re!==x[ne])&&(g.setOrientation(...ce),x=ce);const te=[a(fe,F,6),a(fe,F,7),a(fe,F,8)];te.some((re,ne)=>re!==D[ne])&&(g.setPosition(...te),D=te)},U.connect(ue)},M=ue=>fe=>{fe!==x[ue]&&(x[ue]=fe,g.setOrientation(...x))},k=ue=>fe=>{fe!==D[ue]&&(D[ue]=fe,g.setPosition(...D))},me=(ue,fe,ce)=>{const te=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe});te.connect(U,0,ue),te.start(),Object.defineProperty(te.offset,"defaultValue",{get(){return fe}});const re=r({context:d},R,te.offset,Nn,ur);return c(re,"value",ne=>()=>ne.call(re),ne=>L=>{try{ne.call(re,L)}catch(Y){if(Y.code!==9)throw Y}V(),R&&ce(L)}),re.cancelAndHoldAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.cancelAndHoldAtTime),re.cancelScheduledValues=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.cancelScheduledValues),re.exponentialRampToValueAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.exponentialRampToValueAtTime),re.linearRampToValueAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.linearRampToValueAtTime),re.setTargetAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.setTargetAtTime),re.setValueAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.setValueAtTime),re.setValueCurveAtTime=(ne=>R?()=>{throw i()}:(...L)=>{const Y=ne.apply(re,L);return V(),Y})(re.setValueCurveAtTime),re};return{forwardX:me(0,0,M(0)),forwardY:me(1,0,M(1)),forwardZ:me(2,-1,M(2)),positionX:me(6,0,k(0)),positionY:me(7,0,k(1)),positionZ:me(8,0,k(2)),upX:me(3,0,M(3)),upY:me(4,1,M(4)),upZ:me(5,0,M(5))}},{forwardX:E,forwardY:C,forwardZ:A,positionX:P,positionY:b,positionZ:B,upX:q,upY:$,upZ:Q}=g.forwardX===void 0?_():g;return{get forwardX(){return E},get forwardY(){return C},get forwardZ(){return A},get positionX(){return P},get positionY(){return b},get positionZ(){return B},get upX(){return q},get upY(){return $},get upZ(){return Q}}},bh=r=>"context"in r,vu=r=>bh(r[0]),wo=(r,e,t,n)=>{for(const i of r)if(t(i)){if(n)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},Q_=(r,e,[t,n],i)=>{wo(r,[e,t,n],a=>a[0]===e&&a[1]===t,i)},X_=(r,[e,t,n],i)=>{const a=r.get(e);a===void 0?r.set(e,new Set([[t,n]])):wo(a,[t,n],u=>u[0]===t,i)},ja=r=>"inputs"in r,Vh=(r,e,t,n)=>{if(ja(e)){const i=e.inputs[n];return r.connect(i,t,0),[i,t,0]}return r.connect(e,t,n),[e,t,n]},tT=(r,e,t)=>{for(const n of r)if(n[0]===e&&n[1]===t)return r.delete(n),n;return null},DP=(r,e,t)=>td(r,n=>n[0]===e&&n[1]===t),nT=(r,e)=>{if(!mu(r).delete(e))throw new Error("Missing the expected event listener.")},rT=(r,e,t)=>{const n=wi(r,e),i=td(n,a=>a[0]===t);return n.size===0&&r.delete(e),i},Mh=(r,e,t,n)=>{ja(e)?r.disconnect(e.inputs[n],t,0):r.disconnect(e,t,n)},Et=r=>wi(GE,r),su=r=>wi(HE,r),mo=r=>Op.has(r),th=r=>!ba.has(r),Y_=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=r.createScriptProcessor(256,1,1),i=r.createGain(),a=r.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const c=r.createBufferSource();c.buffer=a,c.loop=!0,c.connect(n).connect(r.destination),c.connect(i),c.disconnect(i),n.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?t(!0):t(!1),c.stop(),n.onaudioprocess=null,c.disconnect(n),n.disconnect(r.destination)},c.start()}}),np=(r,e)=>{const t=new Map;for(const n of r)for(const i of n){const a=t.get(i);t.set(i,a===void 0?1:a+1)}t.forEach((n,i)=>e(i,n))},Z_=r=>"context"in r,bP=r=>{const e=new Map;r.connect=(t=>(n,i=0,a=0)=>{const u=Z_(n)?t(n,i,a):t(n,i),c=e.get(n);return c===void 0?e.set(n,[{input:a,output:i}]):c.every(d=>d.input!==a||d.output!==i)&&c.push({input:a,output:i}),u})(r.connect.bind(r)),r.disconnect=(t=>(n,i,a)=>{if(t.apply(r),n===void 0)e.clear();else if(typeof n=="number")for(const[u,c]of e){const d=c.filter(p=>p.output!==n);d.length===0?e.delete(u):e.set(u,d)}else if(e.has(n))if(i===void 0)e.delete(n);else{const u=e.get(n);if(u!==void 0){const c=u.filter(d=>d.output!==i&&(d.input!==a||a===void 0));c.length===0?e.delete(n):e.set(n,c)}}for(const[u,c]of e)c.forEach(d=>{Z_(u)?r.connect(u,d.output,d.input):r.connect(u,d.output)})})(r.disconnect)},VP=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=yu(e),{outputs:u}=Hn(r),c=mu(r),d=p=>{const g=Et(r),_=su(e);if(p){const E=rT(a,r,t);Q_(i,r,E,!1),!n&&!mo(r)&&g.connect(_,t)}else{const E=DP(i,r,t);X_(a,E,!1),!n&&!mo(r)&&g.disconnect(_,t)}};return wo(u,[e,t],p=>p[0]===e&&p[1]===t,!0)?(c.add(d),Is(r)?Q_(i,r,[t,d],!0):X_(a,[r,t,d],!0),!0):!1},MP=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=Hn(e),u=tT(i[n],r,t);return u===null?[ZE(a,r,t,n)[2],!1]:[u[2],!0]},OP=(r,e,t)=>{const{activeInputs:n,passiveInputs:i}=yu(e),a=tT(n,r,t);return a===null?[rT(i,r,t)[1],!1]:[a[2],!0]},Am=(r,e,t,n,i)=>{const[a,u]=MP(r,t,n,i);if(a!==null&&(nT(r,a),u&&!e&&!mo(r)&&Mh(Et(r),Et(t),n,i)),Is(t)){const{activeInputs:c}=Hn(t);Fp(t,c)}},xm=(r,e,t,n)=>{const[i,a]=OP(r,t,n);i!==null&&(nT(r,i),a&&!e&&!mo(r)&&Et(r).disconnect(su(t),n))},FP=(r,e)=>{const t=Hn(r),n=[];for(const i of t.outputs)vu(i)?Am(r,e,...i):xm(r,e,...i),n.push(i[0]);return t.outputs.clear(),n},LP=(r,e,t)=>{const n=Hn(r),i=[];for(const a of n.outputs)a[1]===t&&(vu(a)?Am(r,e,...a):xm(r,e,...a),i.push(a[0]),n.outputs.delete(a));return i},jP=(r,e,t,n,i)=>{const a=Hn(r);return Array.from(a.outputs).filter(u=>u[0]===t&&(n===void 0||u[1]===n)&&(i===void 0||u[2]===i)).map(u=>(vu(u)?Am(r,e,...u):xm(r,e,...u),a.outputs.delete(u),u[0]))},BP=(r,e,t,n,i,a,u,c,d,p,g,_,E,C,A,P)=>class extends p{constructor(B,q,$,Q){super($),this._context=B,this._nativeAudioNode=$;const F=g(B);_(F)&&t(Y_,()=>Y_(F,P))!==!0&&bP($),GE.set(this,$),XE.set(this,new Set),B.state!=="closed"&&q&&Va(this),r(this,Q,$)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(B){this._nativeAudioNode.channelCount=B}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(B){this._nativeAudioNode.channelCountMode=B}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(B){this._nativeAudioNode.channelInterpretation=B}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(B,q=0,$=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw i();const Q=g(this._context),F=A(Q);if(E(B)||C(B))throw a();if(bh(B)){const I=Et(B);try{const D=Vh(this._nativeAudioNode,I,q,$),V=th(this);(F||V)&&this._nativeAudioNode.disconnect(...D),this.context.state!=="closed"&&!V&&th(B)&&Va(B)}catch(D){throw D.code===12?a():D}if(e(this,B,q,$,F)){const D=d([this],B);np(D,n(F))}return B}const U=su(B);if(U.name==="playbackRate"&&U.maxValue===1024)throw u();try{this._nativeAudioNode.connect(U,q),(F||th(this))&&this._nativeAudioNode.disconnect(U,q)}catch(I){throw I.code===12?a():I}if(VP(this,B,q,F)){const I=d([this],B);np(I,n(F))}}disconnect(B,q,$){let Q;const F=g(this._context),U=A(F);if(B===void 0)Q=FP(this,U);else if(typeof B=="number"){if(B<0||B>=this.numberOfOutputs)throw i();Q=LP(this,U,B)}else{if(q!==void 0&&(q<0||q>=this.numberOfOutputs)||bh(B)&&$!==void 0&&($<0||$>=B.numberOfInputs))throw i();if(Q=jP(this,U,B,q,$),Q.length===0)throw a()}for(const R of Q){const I=d([this],R);np(I,c)}}},zP=(r,e,t,n,i,a,u,c,d,p,g,_,E)=>(C,A,P,b=null,B=null)=>{const q=P.value,$=new JR(q),Q=A?n($):null,F={get defaultValue(){return q},get maxValue(){return b===null?P.maxValue:b},get minValue(){return B===null?P.minValue:B},get value(){return P.value},set value(U){P.value=U,F.setValueAtTime(U,C.context.currentTime)},cancelAndHoldAtTime(U){if(typeof P.cancelAndHoldAtTime=="function")Q===null&&$.flush(C.context.currentTime),$.add(i(U)),P.cancelAndHoldAtTime(U);else{const R=Array.from($).pop();Q===null&&$.flush(C.context.currentTime),$.add(i(U));const I=Array.from($).pop();P.cancelScheduledValues(U),R!==I&&I!==void 0&&(I.type==="exponentialRampToValue"?P.exponentialRampToValueAtTime(I.value,I.endTime):I.type==="linearRampToValue"?P.linearRampToValueAtTime(I.value,I.endTime):I.type==="setValue"?P.setValueAtTime(I.value,I.startTime):I.type==="setValueCurve"&&P.setValueCurveAtTime(I.values,I.startTime,I.duration))}return F},cancelScheduledValues(U){return Q===null&&$.flush(C.context.currentTime),$.add(a(U)),P.cancelScheduledValues(U),F},exponentialRampToValueAtTime(U,R){if(U===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const I=C.context.currentTime;return Q===null&&$.flush(I),Array.from($).length===0&&($.add(p(q,I)),P.setValueAtTime(q,I)),$.add(u(U,R)),P.exponentialRampToValueAtTime(U,R),F},linearRampToValueAtTime(U,R){const I=C.context.currentTime;return Q===null&&$.flush(I),Array.from($).length===0&&($.add(p(q,I)),P.setValueAtTime(q,I)),$.add(c(U,R)),P.linearRampToValueAtTime(U,R),F},setTargetAtTime(U,R,I){return Q===null&&$.flush(C.context.currentTime),$.add(d(U,R,I)),P.setTargetAtTime(U,R,I),F},setValueAtTime(U,R){return Q===null&&$.flush(C.context.currentTime),$.add(p(U,R)),P.setValueAtTime(U,R),F},setValueCurveAtTime(U,R,I){const x=U instanceof Float32Array?U:new Float32Array(U);if(_!==null&&_.name==="webkitAudioContext"){const D=R+I,V=C.context.sampleRate,M=Math.ceil(R*V),k=Math.floor(D*V),me=k-M,ue=new Float32Array(me);for(let ce=0;ce<me;ce+=1){const te=(x.length-1)/I*((M+ce)/V-R),re=Math.floor(te),ne=Math.ceil(te);ue[ce]=re===ne?x[re]:(1-(te-re))*x[re]+(1-(ne-te))*x[ne]}Q===null&&$.flush(C.context.currentTime),$.add(g(ue,R,I)),P.setValueCurveAtTime(ue,R,I);const fe=k/V;fe<D&&E(F,ue[ue.length-1],fe),E(F,x[x.length-1],D)}else Q===null&&$.flush(C.context.currentTime),$.add(g(x,R,I)),P.setValueCurveAtTime(x,R,I);return F}};return t.set(F,P),e.set(F,C),r(F,Q),F},UP=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:n,value:i}=t;e.exponentialRampToValueAtTime(i,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:i}=t;e.linearRampToValueAtTime(i,n)}else if(t.type==="setTarget"){const{startTime:n,target:i,timeConstant:a}=t;e.setTargetAtTime(i,n,a)}else if(t.type==="setValue"){const{startTime:n,value:i}=t;e.setValueAtTime(i,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:i,values:a}=t;e.setValueCurveAtTime(a,i,n)}else throw new Error("Can't apply an unknown automation.")}}),$P=(r,e,t,n,i,a,u,c,d,p,g,_,E,C,A,P,b,B,q,$)=>class extends A{constructor(F,U){super(F,U),this._nativeContext=F,this._audioWorklet=r===void 0?void 0:{addModule:(R,I)=>r(this,R,I)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(F,U,R){return new t({length:U,numberOfChannels:F,sampleRate:R})}createBufferSource(){return new n(this)}createChannelMerger(F=6){return new a(this,{numberOfInputs:F})}createChannelSplitter(F=6){return new u(this,{numberOfOutputs:F})}createConstantSource(){return new c(this)}createConvolver(){return new d(this)}createDelay(F=1){return new g(this,{maxDelayTime:F})}createDynamicsCompressor(){return new _(this)}createGain(){return new E(this)}createIIRFilter(F,U){return new C(this,{feedback:U,feedforward:F})}createOscillator(){return new P(this)}createPanner(){return new b(this)}createPeriodicWave(F,U,R={disableNormalization:!1}){return new B(this,{...R,imag:U,real:F})}createStereoPanner(){return new q(this)}createWaveShaper(){return new $(this)}decodeAudioData(F,U,R){return p(this._nativeContext,F).then(I=>(typeof U=="function"&&U(I),I),I=>{throw typeof R=="function"&&R(I),I})}},qP={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},WP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),E={...qP,...g},C=i(_,E),A=u(_),P=A?t():null;super(p,!1,C,P),this._Q=e(this,A,C.Q,Nn,ur),this._detune=e(this,A,C.detune,1200*Math.log2(Nn),-1200*Math.log2(Nn)),this._frequency=e(this,A,C.frequency,p.sampleRate/2,0),this._gain=e(this,A,C.gain,40*Math.log10(Nn),ur),this._nativeBiquadFilterNode=C,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,_)}catch(E){throw E.code===11?n():E}if(p.length!==g.length||g.length!==_.length)throw n()}},GP=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=vn(p,d);if(!g){const _={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=e(d,_)}return a.set(d,p),g?(await r(d,c.Q,p.Q),await r(d,c.detune,p.detune),await r(d,c.frequency,p.frequency),await r(d,c.gain,p.gain)):(await n(d,c.Q,p.Q),await n(d,c.detune,p.detune),await n(d,c.frequency,p.frequency),await n(d,c.gain,p.gain)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},KP=(r,e)=>(t,n)=>{const i=e.get(t);if(i!==void 0)return i;const a=r.get(t);if(a!==void 0)return a;try{const u=n();return u instanceof Promise?(r.set(t,u),u.catch(()=>!1).then(c=>(r.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},HP={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},QP=(r,e,t,n,i)=>class extends r{constructor(u,c){const d=n(u),p={...HP,...c},g=t(d,p),_=i(d)?e():null;super(u,!1,g,_)}},XP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!vn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},YP={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ZP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=a({...YP,...d}),_=t(p,g),E=i(p)?e():null;super(c,!1,_,E)}},JP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!vn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},ek=r=>(e,t,n)=>r(t,e,n),tk=r=>(e,t)=>{const n=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return n.buffer=i,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},nk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},rk=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...nk,...p},E=n(g,_),C=a(g),A=C?t():null;super(d,!1,E,A),this._constantSourceNodeRenderer=A,this._nativeConstantSourceNode=E,this._offset=e(this,C,E.offset,Nn,ur),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?d:g}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),Is(this)&&gu(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},sk=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let _=t(p);const E=vn(_,g);if(!E){const C={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=e(g,C),u!==null&&_.start(u),c!==null&&_.stop(c)}return a.set(g,_),E?await r(g,p.offset,_.offset):await n(g,p.offset,_.offset),await i(p,g,_),_};return{set start(p){u=p},set stop(p){c=p},render(p,g){const _=a.get(g);return _!==void 0?Promise.resolve(_):d(p,g)}}},ik=r=>e=>(r[0]=e,r[0]),ok={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ak=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g={...ok,...d},_=t(p,g),C=i(p)?e():null;super(c,!1,_,C),this._isBufferNullified=!1,this._nativeConvolverNode=_,g.buffer!==null&&a(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},lk=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!vn(c,u)){const p={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},uk=(r,e)=>(t,n,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,i)}catch(a){throw a.name==="SyntaxError"?r():a}},ck=()=>new DOMException("","DataCloneError"),J_=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const i=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>i();try{e.postMessage(r,[r])}catch{}finally{i()}})},hk=(r,e,t,n,i,a,u,c,d,p,g)=>(_,E)=>{const C=u(_)?_:a(_);if(i.has(E)){const A=t();return Promise.reject(A)}try{i.add(E)}catch{}return e(d,()=>d(C))?C.decodeAudioData(E).then(A=>(J_(E).catch(()=>{}),e(c,()=>c(A))||g(A),r.add(A),A)):new Promise((A,P)=>{const b=async()=>{try{await J_(E)}catch{}},B=q=>{P(q),b()};try{C.decodeAudioData(E,q=>{typeof q.copyFromChannel!="function"&&(p(q),Cm(q)),r.add(q),b().then(()=>A(q))},q=>{B(q===null?n():q)})}catch(q){B(q)}})},dk=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=e.get(d);if(g===void 0)throw new Error("Missing the expected cycle count.");const _=a(d.context),E=c(_);if(g===p){if(e.delete(d),!E&&u(d)){const C=n(d),{outputs:A}=t(d);for(const P of A)if(vu(P)){const b=n(P[0]);r(C,b,P[1],P[2])}else{const b=i(P[0]);C.connect(b,P[1])}}}else e.set(d,g-p)},fk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},pk=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...fk,...p},E=n(g,_),C=a(g),A=C?t(_.maxDelayTime):null;super(d,!1,E,A),this._delayTime=e(this,C,E.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},mk=(r,e,t,n,i)=>a=>{const u=new WeakMap,c=async(d,p)=>{let g=t(d);const _=vn(g,p);if(!_){const E={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:a};g=e(p,E)}return u.set(p,g),_?await r(p,d.delayTime,g.delayTime):await n(p,d.delayTime,g.delayTime),await i(d,p,g),g};return{render(d,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):c(d,p)}}},gk=r=>(e,t,n,i)=>r(e[i],a=>a[0]===t&&a[1]===n),yk=r=>"delayTime"in r,vk=(r,e,t)=>function n(i,a){const u=bh(a)?a:t(r,a);if(yk(u))return[];if(i[0]===u)return[i];if(i.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(d=>n([...i,u],d[0])).reduce((d,p)=>d.concat(p),[])},_k={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},wk=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),E={..._k,...g},C=n(_,E),A=u(_),P=A?t():null;super(p,!1,C,P),this._attack=e(this,A,C.attack),this._knee=e(this,A,C.knee),this._nativeDynamicsCompressorNode=C,this._ratio=e(this,A,C.ratio),this._release=e(this,A,C.release),this._threshold=e(this,A,C.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Ek=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=vn(p,d);if(!g){const _={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=e(d,_)}return a.set(d,p),g?(await r(d,c.attack,p.attack),await r(d,c.knee,p.knee),await r(d,c.ratio,p.ratio),await r(d,c.release,p.release),await r(d,c.threshold,p.threshold)):(await n(d,c.attack,p.attack),await n(d,c.knee,p.knee),await n(d,c.ratio,p.ratio),await n(d,c.release,p.release),await n(d,c.threshold,p.threshold)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},Tk=()=>new DOMException("","EncodingError"),Ik=r=>e=>new Promise((t,n)=>{if(r===null){n(new SyntaxError);return}const i=r.document.head;if(i===null)n(new SyntaxError);else{const a=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),d=r.onerror,p=()=>{r.onerror=d,URL.revokeObjectURL(c)};r.onerror=(g,_,E,C,A)=>{if(_===c||_===r.location.href&&E===1&&C===1)return p(),n(A),!1;if(d!==null)return d(g,_,E,C,A)},a.onerror=()=>{p(),n(new SyntaxError)},a.onload=()=>{p(),t()},a.src=c,a.type="module",i.appendChild(a)}}),Sk=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,i){if(n!==null){let a=this._listeners.get(n);a===void 0&&(a=r(this,n),typeof n=="function"&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,i){const a=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,i)}},Ck=r=>(e,t,n)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},Ak=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},xk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Nk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...xk,...d},_=n(p,g),E=a(p),C=E?t():null;super(c,!1,_,C),this._gain=e(this,E,_.gain,Nn,ur)}get gain(){return this._gain}},Rk=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=vn(p,d);if(!g){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=e(d,_)}return a.set(d,p),g?await r(d,c.gain,p.gain):await n(d,c.gain,p.gain),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},Pk=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},kk=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},Dk=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Pn=()=>new DOMException("","InvalidStateError"),bk=r=>e=>{const t=r.get(e);if(t===void 0)throw Pn();return t},Vk=(r,e)=>t=>{let n=r.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),r.set(t,n),n},Mk=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},nd=()=>new DOMException("","InvalidAccessError"),Ok=r=>{r.getFrequencyResponse=(e=>(t,n,i)=>{if(t.length!==n.length||n.length!==i.length)throw nd();return e.call(r,t,n,i)})(r.getFrequencyResponse)},Fk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Lk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=i(p),_={...Fk,...d},E=e(p,g?null:c.baseLatency,_),C=g?t(_.feedback,_.feedforward):null;super(c,!1,E,C),Ok(E),this._nativeIIRFilterNode=E,a(this,1)}getFrequencyResponse(c,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(c,d,p)}},sT=(r,e,t,n,i,a,u,c,d,p,g)=>{const _=p.length;let E=c;for(let C=0;C<_;C+=1){let A=t[0]*p[C];for(let P=1;P<i;P+=1){const b=E-P&d-1;A+=t[P]*a[b],A-=r[P]*u[b]}for(let P=i;P<n;P+=1)A+=t[P]*a[E-P&d-1];for(let P=i;P<e;P+=1)A-=r[P]*u[E-P&d-1];a[E]=p[C],u[E]=A,E=E+1&d-1,g[C]=A}return E},jk=(r,e,t,n)=>{const i=t instanceof Float64Array?t:new Float64Array(t),a=n instanceof Float64Array?n:new Float64Array(n),u=i.length,c=a.length,d=Math.min(u,c);if(i[0]!==1){for(let A=0;A<u;A+=1)a[A]/=i[0];for(let A=1;A<c;A+=1)i[A]/=i[0]}const p=32,g=new Float32Array(p),_=new Float32Array(p),E=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),C=r.numberOfChannels;for(let A=0;A<C;A+=1){const P=r.getChannelData(A),b=E.getChannelData(A);g.fill(0),_.fill(0),sT(i,u,a,c,d,g,_,0,p,P,b)}return E},Bk=(r,e,t,n,i)=>(a,u)=>{const c=new WeakMap;let d=null;const p=async(g,_)=>{let E=null,C=e(g);const A=vn(C,_);if(_.createIIRFilter===void 0?E=r(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):A||(C=_.createIIRFilter(u,a)),c.set(_,E===null?C:E),E!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new t(g.context.destination.channelCount,g.context.length,_.sampleRate);d=(async()=>{await n(g,b,b.destination);const B=await i(b);return jk(B,_,a,u)})()}const P=await d;return E.buffer=P,E.start(0),E}return await n(g,_,C),C};return{render(g,_){const E=c.get(_);return E!==void 0?Promise.resolve(E):p(g,_)}}},zk=(r,e,t,n,i,a)=>u=>(c,d)=>{const p=r.get(c);if(p===void 0){if(!u&&a(c)){const g=n(c),{outputs:_}=t(c);for(const E of _)if(vu(E)){const C=n(E[0]);e(g,C,E[1],E[2])}else{const C=i(E[0]);g.disconnect(C,E[1])}}r.set(c,d)}else r.set(c,p+d)},Uk=r=>e=>r!==null&&e instanceof r,$k=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,qk=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,Wk=(r,e)=>t=>r(t)||e(t),Gk=r=>e=>r!==null&&e instanceof r,Kk=r=>r!==null&&r.isSecureContext,Hk=(r,e,t,n,i,a)=>class extends t{constructor(c,d){super(c),this._nativeContext=c,QE.set(this,c),n(c)&&i.set(c,new Set),this._destination=new r(this,d),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const d=typeof c=="function"?a(this,c):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?c:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},iu=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Qk=(r,e)=>(t,n,i)=>{const a=new Set;return t.connect=(u=>(c,d=0,p=0)=>{const g=a.size===0;if(e(c))return u.call(t,c,d,p),r(a,[c,d,p],_=>_[0]===c&&_[1]===d&&_[2]===p,!0),g&&n(),c;u.call(t,c,d),r(a,[c,d],_=>_[0]===c&&_[1]===d,!0),g&&n()})(t.connect),t.disconnect=(u=>(c,d,p)=>{const g=a.size>0;if(c===void 0)u.apply(t),a.clear();else if(typeof c=="number"){u.call(t,c);for(const E of a)E[1]===c&&a.delete(E)}else{e(c)?u.call(t,c,d,p):u.call(t,c,d);for(const E of a)E[0]===c&&(d===void 0||E[1]===d)&&(p===void 0||E[2]===p)&&a.delete(E)}const _=a.size===0;g&&_&&i()})(t.disconnect),t},vt=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t]&&(r[t]=n)},Ht=(r,e)=>{vt(r,e,"channelCount"),vt(r,e,"channelCountMode"),vt(r,e,"channelInterpretation")},e0=r=>typeof r.getFloatTimeDomainData=="function",Xk=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const n=Math.max(t.length,r.fftSize);for(let i=0;i<n;i+=1)e[i]=(t[i]-128)*.0078125;return e}},Yk=(r,e)=>(t,n)=>{const i=t.createAnalyser();if(Ht(i,n),!(n.maxDecibels>n.minDecibels))throw e();return vt(i,n,"fftSize"),vt(i,n,"maxDecibels"),vt(i,n,"minDecibels"),vt(i,n,"smoothingTimeConstant"),r(e0,()=>e0(i))||Xk(i),i},Zk=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,Ct=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t].value&&(r[t].value=n)},Jk=r=>{r.start=(e=>{let t=!1;return(n=0,i=0,a)=>{if(t)throw Pn();e.call(r,n,i,a),t=!0}})(r.start)},Nm=r=>{r.start=(e=>(t=0,n=0,i)=>{if(typeof i=="number"&&i<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,n,i)})(r.start)},Rm=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},e2=(r,e,t,n,i,a,u,c,d,p,g)=>(_,E)=>{const C=_.createBufferSource();return Ht(C,E),Ct(C,E,"playbackRate"),vt(C,E,"buffer"),vt(C,E,"loop"),vt(C,E,"loopEnd"),vt(C,E,"loopStart"),e(t,()=>t(_))||Jk(C),e(n,()=>n(_))||d(C),e(i,()=>i(_))||p(C,_),e(a,()=>a(_))||Nm(C),e(u,()=>u(_))||g(C,_),e(c,()=>c(_))||Rm(C),r(_,C),C},t2=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,n2=(r,e)=>(t,n,i)=>{const a=t.destination;if(a.channelCount!==n)try{a.channelCount=n}catch{}i&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:n});const u=r(t,{channelCount:n,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>d=>{c.call(u,d);try{a.channelCount=d}catch(p){if(d>a.maxChannelCount)throw p}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelCountMode=d}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelInterpretation=d}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},r2=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,s2=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),iT=(r,e)=>{const t=r.createBiquadFilter();return Ht(t,e),Ct(t,e,"Q"),Ct(t,e,"detune"),Ct(t,e,"frequency"),Ct(t,e,"gain"),vt(t,e,"type"),t},i2=(r,e)=>(t,n)=>{const i=t.createChannelMerger(n.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,i),Ht(i,n),i},o2=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Pn()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Pn()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Pn()}})},Pm=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return Ht(t,e),o2(t),t},a2=(r,e,t,n,i)=>(a,u)=>{if(a.createConstantSource===void 0)return t(a,u);const c=a.createConstantSource();return Ht(c,u),Ct(c,u,"offset"),e(n,()=>n(a))||Nm(c),e(i,()=>i(a))||Rm(c),r(a,c),c},Ba=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),l2=(r,e,t,n)=>(i,{offset:a,...u})=>{const c=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(i,{...u,gain:a}),g=c.getChannelData(0);g[0]=1,g[1]=1,d.buffer=c,d.loop=!0;const _={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(A){p.channelCount=A},get channelCountMode(){return p.channelCountMode},set channelCountMode(A){p.channelCountMode=A},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(A){p.channelInterpretation=A},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(A){d.onended=A},addEventListener(...A){return d.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return d.dispatchEvent(A[0])},removeEventListener(...A){return d.removeEventListener(A[0],A[1],A[2])},start(A=0){d.start.call(d,A)},stop(A=0){d.stop.call(d,A)}},E=()=>d.connect(p),C=()=>d.disconnect(p);return r(i,d),n(Ba(_,p),E,C)},u2=(r,e)=>(t,n)=>{const i=t.createConvolver();if(Ht(i,n),n.disableNormalization===i.normalize&&(i.normalize=!n.disableNormalization),vt(i,n,"buffer"),n.channelCount>2||(e(i,"channelCount",a=>()=>a.call(i),a=>u=>{if(u>2)throw r();return a.call(i,u)}),n.channelCountMode==="max"))throw r();return e(i,"channelCountMode",a=>()=>a.call(i),a=>u=>{if(u==="max")throw r();return a.call(i,u)}),i},oT=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return Ht(t,e),Ct(t,e,"delayTime"),t},c2=r=>(e,t)=>{const n=e.createDynamicsCompressor();if(Ht(n,t),t.channelCount>2||t.channelCountMode==="max")throw r();return Ct(n,t,"attack"),Ct(n,t,"knee"),Ct(n,t,"ratio"),Ct(n,t,"release"),Ct(n,t,"threshold"),n},br=(r,e)=>{const t=r.createGain();return Ht(t,e),Ct(t,e,"gain"),t},h2=r=>(e,t,n)=>{if(e.createIIRFilter===void 0)return r(e,t,n);const i=e.createIIRFilter(n.feedforward,n.feedback);return Ht(i,n),i};function d2(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function f2(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function t0(r,e){let t=[0,0];for(let n=r.length-1;n>=0;n-=1)t=f2(t,e),t[0]+=r[n];return t}const p2=(r,e,t,n)=>(i,a,{channelCount:u,channelCountMode:c,channelInterpretation:d,feedback:p,feedforward:g})=>{const _=s2(a,i.sampleRate),E=p instanceof Float64Array?p:new Float64Array(p),C=g instanceof Float64Array?g:new Float64Array(g),A=E.length,P=C.length,b=Math.min(A,P);if(A===0||A>20)throw n();if(E[0]===0)throw e();if(P===0||P>20)throw n();if(C[0]===0)throw e();if(E[0]!==1){for(let I=0;I<P;I+=1)C[I]/=E[0];for(let I=1;I<A;I+=1)E[I]/=E[0]}const B=t(i,_,u,u);B.channelCount=u,B.channelCountMode=c,B.channelInterpretation=d;const q=32,$=[],Q=[],F=[];for(let I=0;I<u;I+=1){$.push(0);const x=new Float32Array(q),D=new Float32Array(q);x.fill(0),D.fill(0),Q.push(x),F.push(D)}B.onaudioprocess=I=>{const x=I.inputBuffer,D=I.outputBuffer,V=x.numberOfChannels;for(let M=0;M<V;M+=1){const k=x.getChannelData(M),me=D.getChannelData(M);$[M]=sT(E,A,C,P,b,Q[M],F[M],$[M],q,k,me)}};const U=i.sampleRate/2;return Ba({get bufferSize(){return _},get channelCount(){return B.channelCount},set channelCount(I){B.channelCount=I},get channelCountMode(){return B.channelCountMode},set channelCountMode(I){B.channelCountMode=I},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(I){B.channelInterpretation=I},get context(){return B.context},get inputs(){return[B]},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},addEventListener(...I){return B.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return B.dispatchEvent(I[0])},getFrequencyResponse(I,x,D){if(I.length!==x.length||x.length!==D.length)throw r();const V=I.length;for(let M=0;M<V;M+=1){const k=-Math.PI*(I[M]/U),me=[Math.cos(k),Math.sin(k)],ue=t0(C,me),fe=t0(E,me),ce=d2(ue,fe);x[M]=Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1]),D[M]=Math.atan2(ce[1],ce[0])}},removeEventListener(...I){return B.removeEventListener(I[0],I[1],I[2])}},B)},m2=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,g2=(r,e,t,n,i,a)=>(u,c)=>{const d=u.createOscillator();return Ht(d,c),Ct(d,c,"detune"),Ct(d,c,"frequency"),c.periodicWave!==void 0?d.setPeriodicWave(c.periodicWave):vt(d,c,"type"),e(t,()=>t(u))||Nm(d),e(n,()=>n(u))||a(d,u),e(i,()=>i(u))||Rm(d),r(u,d),d},y2=r=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?r(e,t):(Ht(n,t),Ct(n,t,"orientationX"),Ct(n,t,"orientationY"),Ct(n,t,"orientationZ"),Ct(n,t,"positionX"),Ct(n,t,"positionY"),Ct(n,t,"positionZ"),vt(n,t,"coneInnerAngle"),vt(n,t,"coneOuterAngle"),vt(n,t,"coneOuterGain"),vt(n,t,"distanceModel"),vt(n,t,"maxDistance"),vt(n,t,"panningModel"),vt(n,t,"refDistance"),vt(n,t,"rolloffFactor"),n)},v2=(r,e,t,n,i,a,u,c,d,p)=>(g,{coneInnerAngle:_,coneOuterAngle:E,coneOuterGain:C,distanceModel:A,maxDistance:P,orientationX:b,orientationY:B,orientationZ:q,panningModel:$,positionX:Q,positionY:F,positionZ:U,refDistance:R,rolloffFactor:I,...x})=>{const D=g.createPanner();if(x.channelCount>2||x.channelCountMode==="max")throw u();Ht(D,x);const V={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=t(g,{...V,channelInterpretation:"speakers",numberOfInputs:6}),k=n(g,{...x,gain:1}),me=n(g,{...V,gain:1}),ue=n(g,{...V,gain:0}),fe=n(g,{...V,gain:0}),ce=n(g,{...V,gain:0}),te=n(g,{...V,gain:0}),re=n(g,{...V,gain:0}),ne=i(g,256,6,1),L=a(g,{...V,curve:new Float32Array([1,1]),oversample:"none"});let Y=[b,B,q],Ee=[Q,F,U];const De=new Float32Array(1);ne.onaudioprocess=({inputBuffer:ee})=>{const ve=[d(ee,De,0),d(ee,De,1),d(ee,De,2)];ve.some((Be,$e)=>Be!==Y[$e])&&(D.setOrientation(...ve),Y=ve);const Ae=[d(ee,De,3),d(ee,De,4),d(ee,De,5)];Ae.some((Be,$e)=>Be!==Ee[$e])&&(D.setPosition(...Ae),Ee=Ae)},Object.defineProperty(ue.gain,"defaultValue",{get:()=>0}),Object.defineProperty(fe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ce.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0});const ye={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(ee){if(ee>2)throw u();k.channelCount=ee,D.channelCount=ee},get channelCountMode(){return D.channelCountMode},set channelCountMode(ee){if(ee==="max")throw u();k.channelCountMode=ee,D.channelCountMode=ee},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(ee){k.channelInterpretation=ee,D.channelInterpretation=ee},get coneInnerAngle(){return D.coneInnerAngle},set coneInnerAngle(ee){D.coneInnerAngle=ee},get coneOuterAngle(){return D.coneOuterAngle},set coneOuterAngle(ee){D.coneOuterAngle=ee},get coneOuterGain(){return D.coneOuterGain},set coneOuterGain(ee){if(ee<0||ee>1)throw e();D.coneOuterGain=ee},get context(){return D.context},get distanceModel(){return D.distanceModel},set distanceModel(ee){D.distanceModel=ee},get inputs(){return[k]},get maxDistance(){return D.maxDistance},set maxDistance(ee){if(ee<0)throw new RangeError;D.maxDistance=ee},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get orientationX(){return me.gain},get orientationY(){return ue.gain},get orientationZ(){return fe.gain},get panningModel(){return D.panningModel},set panningModel(ee){D.panningModel=ee},get positionX(){return ce.gain},get positionY(){return te.gain},get positionZ(){return re.gain},get refDistance(){return D.refDistance},set refDistance(ee){if(ee<0)throw new RangeError;D.refDistance=ee},get rolloffFactor(){return D.rolloffFactor},set rolloffFactor(ee){if(ee<0)throw new RangeError;D.rolloffFactor=ee},addEventListener(...ee){return k.addEventListener(ee[0],ee[1],ee[2])},dispatchEvent(...ee){return k.dispatchEvent(ee[0])},removeEventListener(...ee){return k.removeEventListener(ee[0],ee[1],ee[2])}};_!==ye.coneInnerAngle&&(ye.coneInnerAngle=_),E!==ye.coneOuterAngle&&(ye.coneOuterAngle=E),C!==ye.coneOuterGain&&(ye.coneOuterGain=C),A!==ye.distanceModel&&(ye.distanceModel=A),P!==ye.maxDistance&&(ye.maxDistance=P),b!==ye.orientationX.value&&(ye.orientationX.value=b),B!==ye.orientationY.value&&(ye.orientationY.value=B),q!==ye.orientationZ.value&&(ye.orientationZ.value=q),$!==ye.panningModel&&(ye.panningModel=$),Q!==ye.positionX.value&&(ye.positionX.value=Q),F!==ye.positionY.value&&(ye.positionY.value=F),U!==ye.positionZ.value&&(ye.positionZ.value=U),R!==ye.refDistance&&(ye.refDistance=R),I!==ye.rolloffFactor&&(ye.rolloffFactor=I),(Y[0]!==1||Y[1]!==0||Y[2]!==0)&&D.setOrientation(...Y),(Ee[0]!==0||Ee[1]!==0||Ee[2]!==0)&&D.setPosition(...Ee);const se=()=>{k.connect(D),r(k,L,0,0),L.connect(me).connect(M,0,0),L.connect(ue).connect(M,0,1),L.connect(fe).connect(M,0,2),L.connect(ce).connect(M,0,3),L.connect(te).connect(M,0,4),L.connect(re).connect(M,0,5),M.connect(ne).connect(g.destination)},J=()=>{k.disconnect(D),c(k,L,0,0),L.disconnect(me),me.disconnect(M),L.disconnect(ue),ue.disconnect(M),L.disconnect(fe),fe.disconnect(M),L.disconnect(ce),ce.disconnect(M),L.disconnect(te),te.disconnect(M),L.disconnect(re),re.disconnect(M),M.disconnect(ne),ne.disconnect(g.destination)};return p(Ba(ye,D),se,J)},_2=r=>(e,{disableNormalization:t,imag:n,real:i})=>{const a=n instanceof Float32Array?n:new Float32Array(n),u=i instanceof Float32Array?i:new Float32Array(i),c=e.createPeriodicWave(u,a,{disableNormalization:t});if(Array.from(n).length<2)throw r();return c},rd=(r,e,t,n)=>r.createScriptProcessor(e,t,n),w2=(r,e)=>(t,n)=>{const i=n.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,n);const a=t.createStereoPanner();return Ht(a,n),Ct(a,n,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>i,set:u=>{if(u!==i)throw e()}}),a},E2=(r,e,t,n,i,a)=>{const c=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},_=(A,P,b,B)=>{const q=new Float32Array(16385),$=new Float32Array(16385);for(let x=0;x<16385;x+=1){const D=x/16384*d;q[x]=Math.cos(D),$[x]=Math.sin(D)}const Q=t(A,{...p,gain:0}),F=n(A,{...g,curve:q}),U=n(A,{...g,curve:c}),R=t(A,{...p,gain:0}),I=n(A,{...g,curve:$});return{connectGraph(){P.connect(Q),P.connect(U.inputs===void 0?U:U.inputs[0]),P.connect(R),U.connect(b),b.connect(F.inputs===void 0?F:F.inputs[0]),b.connect(I.inputs===void 0?I:I.inputs[0]),F.connect(Q.gain),I.connect(R.gain),Q.connect(B,0,0),R.connect(B,0,1)},disconnectGraph(){P.disconnect(Q),P.disconnect(U.inputs===void 0?U:U.inputs[0]),P.disconnect(R),U.disconnect(b),b.disconnect(F.inputs===void 0?F:F.inputs[0]),b.disconnect(I.inputs===void 0?I:I.inputs[0]),F.disconnect(Q.gain),I.disconnect(R.gain),Q.disconnect(B,0,0),R.disconnect(B,0,1)}}},E=(A,P,b,B)=>{const q=new Float32Array(16385),$=new Float32Array(16385),Q=new Float32Array(16385),F=new Float32Array(16385),U=Math.floor(16385/2);for(let ce=0;ce<16385;ce+=1)if(ce>U){const te=(ce-U)/(16384-U)*d;q[ce]=Math.cos(te),$[ce]=Math.sin(te),Q[ce]=0,F[ce]=1}else{const te=ce/(16384-U)*d;q[ce]=1,$[ce]=0,Q[ce]=Math.cos(te),F[ce]=Math.sin(te)}const R=e(A,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),I=t(A,{...p,gain:0}),x=n(A,{...g,curve:q}),D=t(A,{...p,gain:0}),V=n(A,{...g,curve:$}),M=n(A,{...g,curve:c}),k=t(A,{...p,gain:0}),me=n(A,{...g,curve:Q}),ue=t(A,{...p,gain:0}),fe=n(A,{...g,curve:F});return{connectGraph(){P.connect(R),P.connect(M.inputs===void 0?M:M.inputs[0]),R.connect(I,0),R.connect(D,0),R.connect(k,1),R.connect(ue,1),M.connect(b),b.connect(x.inputs===void 0?x:x.inputs[0]),b.connect(V.inputs===void 0?V:V.inputs[0]),b.connect(me.inputs===void 0?me:me.inputs[0]),b.connect(fe.inputs===void 0?fe:fe.inputs[0]),x.connect(I.gain),V.connect(D.gain),me.connect(k.gain),fe.connect(ue.gain),I.connect(B,0,0),k.connect(B,0,0),D.connect(B,0,1),ue.connect(B,0,1)},disconnectGraph(){P.disconnect(R),P.disconnect(M.inputs===void 0?M:M.inputs[0]),R.disconnect(I,0),R.disconnect(D,0),R.disconnect(k,1),R.disconnect(ue,1),M.disconnect(b),b.disconnect(x.inputs===void 0?x:x.inputs[0]),b.disconnect(V.inputs===void 0?V:V.inputs[0]),b.disconnect(me.inputs===void 0?me:me.inputs[0]),b.disconnect(fe.inputs===void 0?fe:fe.inputs[0]),x.disconnect(I.gain),V.disconnect(D.gain),me.disconnect(k.gain),fe.disconnect(ue.gain),I.disconnect(B,0,0),k.disconnect(B,0,0),D.disconnect(B,0,1),ue.disconnect(B,0,1)}}},C=(A,P,b,B,q)=>{if(P===1)return _(A,b,B,q);if(P===2)return E(A,b,B,q);throw i()};return(A,{channelCount:P,channelCountMode:b,pan:B,...q})=>{if(b==="max")throw i();const $=r(A,{...q,channelCount:1,channelCountMode:b,numberOfInputs:2}),Q=t(A,{...q,channelCount:P,channelCountMode:b,gain:1}),F=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:B});let{connectGraph:U,disconnectGraph:R}=C(A,P,Q,F,$);Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"maxValue",{get:()=>1}),Object.defineProperty(F.gain,"minValue",{get:()=>-1});const I={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount(M){Q.channelCount!==M&&(x&&R(),{connectGraph:U,disconnectGraph:R}=C(A,M,Q,F,$),x&&U()),Q.channelCount=M},get channelCountMode(){return Q.channelCountMode},set channelCountMode(M){if(M==="clamped-max"||M==="max")throw i();Q.channelCountMode=M},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation(M){Q.channelInterpretation=M},get context(){return Q.context},get inputs(){return[Q]},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get pan(){return F.gain},addEventListener(...M){return Q.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return Q.dispatchEvent(M[0])},removeEventListener(...M){return Q.removeEventListener(M[0],M[1],M[2])}};let x=!1;const D=()=>{U(),x=!0},V=()=>{R(),x=!1};return a(Ba(I,$),D,V)}},T2=(r,e,t,n,i,a,u)=>(c,d)=>{const p=c.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,d);Ht(p,d);const g=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(g!==null&&g.length<2)throw e();vt(p,{curve:g},"curve"),vt(p,d,"oversample");let _=null,E=!1;return u(p,"curve",P=>()=>P.call(p),P=>b=>(P.call(p,b),E&&(n(b)&&_===null?_=r(c,p):!n(b)&&_!==null&&(_(),_=null)),b)),i(p,()=>{E=!0,n(p.curve)&&(_=r(c,p))},()=>{E=!1,_!==null&&(_(),_=null)})},I2=(r,e,t,n,i)=>(a,{curve:u,oversample:c,...d})=>{const p=a.createWaveShaper(),g=a.createWaveShaper();Ht(p,d),Ht(g,d);const _=t(a,{...d,gain:1}),E=t(a,{...d,gain:-1}),C=t(a,{...d,gain:1}),A=t(a,{...d,gain:-1});let P=null,b=!1,B=null;const q={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(F){_.channelCount=F,E.channelCount=F,p.channelCount=F,C.channelCount=F,g.channelCount=F,A.channelCount=F},get channelCountMode(){return p.channelCountMode},set channelCountMode(F){_.channelCountMode=F,E.channelCountMode=F,p.channelCountMode=F,C.channelCountMode=F,g.channelCountMode=F,A.channelCountMode=F},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(F){_.channelInterpretation=F,E.channelInterpretation=F,p.channelInterpretation=F,C.channelInterpretation=F,g.channelInterpretation=F,A.channelInterpretation=F},get context(){return p.context},get curve(){return B},set curve(F){if(F!==null&&F.length<2)throw e();if(F===null)p.curve=F,g.curve=F;else{const U=F.length,R=new Float32Array(U+2-U%2),I=new Float32Array(U+2-U%2);R[0]=F[0],I[0]=-F[U-1];const x=Math.ceil((U+1)/2),D=(U+1)/2-1;for(let V=1;V<x;V+=1){const M=V/x*D,k=Math.floor(M),me=Math.ceil(M);R[V]=k===me?F[k]:(1-(M-k))*F[k]+(1-(me-M))*F[me],I[V]=k===me?-F[U-1-k]:-((1-(M-k))*F[U-1-k])-(1-(me-M))*F[U-1-me]}R[x]=U%2===1?F[x-1]:(F[x-2]+F[x-1])/2,p.curve=R,g.curve=I}B=F,b&&(n(B)&&P===null?P=r(a,_):P!==null&&(P(),P=null))},get inputs(){return[_]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(F){p.oversample=F,g.oversample=F},addEventListener(...F){return _.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return _.dispatchEvent(F[0])},removeEventListener(...F){return _.removeEventListener(F[0],F[1],F[2])}};u!==null&&(q.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==q.oversample&&(q.oversample=c);const $=()=>{_.connect(p).connect(C),_.connect(E).connect(g).connect(A).connect(C),b=!0,n(B)&&(P=r(a,_))},Q=()=>{_.disconnect(p),p.disconnect(C),_.disconnect(E),E.disconnect(g),g.disconnect(A),A.disconnect(C),b=!1,P!==null&&(P(),P=null)};return i(Ba(q,C),$,Q)},dr=()=>new DOMException("","NotSupportedError"),S2={numberOfChannels:1},C2=(r,e,t,n,i)=>class extends r{constructor(u,c,d){let p;if(typeof u=="number"&&c!==void 0&&d!==void 0)p={length:c,numberOfChannels:u,sampleRate:d};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:_,sampleRate:E}={...S2,...p},C=n(_,g,E);e(iu,()=>iu(C))||C.addEventListener("statechange",(()=>{let A=0;const P=b=>{this._state==="running"&&(A>0?(C.removeEventListener("statechange",P),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):A+=1)};return P})()),super(C,_),this._length=g,this._nativeOfflineAudioContext=C,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,NP(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},A2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},x2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...A2,...p},E=t(g,_),C=a(g),A=C?n():null,P=d.sampleRate/2;super(d,!1,E,A),this._detune=e(this,C,E.detune,153600,-153600),this._frequency=e(this,C,E.frequency,P,-P),this._nativeOscillatorNode=E,this._onended=null,this._oscillatorNodeRenderer=A,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?d:g}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),Is(this)&&gu(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},N2=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null,d=null;const p=async(g,_)=>{let E=t(g);const C=vn(E,_);if(!C){const A={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,detune:E.detune.value,frequency:E.frequency.value,periodicWave:u===null?void 0:u,type:E.type};E=e(_,A),c!==null&&E.start(c),d!==null&&E.stop(d)}return a.set(_,E),C?(await r(_,g.detune,E.detune),await r(_,g.frequency,E.frequency)):(await n(_,g.detune,E.detune),await n(_,g.frequency,E.frequency)),await i(g,_,E),E};return{set periodicWave(g){u=g},set start(g){c=g},set stop(g){d=g},render(g,_){const E=a.get(_);return E!==void 0?Promise.resolve(E):p(g,_)}}},R2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},P2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...R2,...p},E=t(g,_),C=a(g),A=C?n():null;super(d,!1,E,A),this._nativePannerNode=E,this._orientationX=e(this,C,E.orientationX,Nn,ur),this._orientationY=e(this,C,E.orientationY,Nn,ur),this._orientationZ=e(this,C,E.orientationZ,Nn,ur),this._positionX=e(this,C,E.positionX,Nn,ur),this._positionY=e(this,C,E.positionY,Nn,ur),this._positionZ=e(this,C,E.positionZ,Nn,ur),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},k2=(r,e,t,n,i,a,u,c,d,p)=>()=>{const g=new WeakMap;let _=null;const E=async(C,A)=>{let P=null,b=a(C);const B={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},q={...B,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},$=vn(b,A);if("bufferSize"in b)P=n(A,{...B,gain:1});else if(!$){const Q={...q,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=i(A,Q)}if(g.set(A,P===null?b:P),P!==null){if(_===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new u(6,C.context.length,A.sampleRate),M=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});M.connect(V.destination),_=(async()=>{const k=await Promise.all([C.orientationX,C.orientationY,C.orientationZ,C.positionX,C.positionY,C.positionZ].map(async(me,ue)=>{const fe=t(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue===0?1:0});return await c(V,me,fe.offset),fe}));for(let me=0;me<6;me+=1)k[me].connect(M,0,me),k[me].start(0);return p(V)})()}const Q=await _,F=n(A,{...B,gain:1});await d(C,A,F);const U=[];for(let V=0;V<Q.numberOfChannels;V+=1)U.push(Q.getChannelData(V));let R=[U[0][0],U[1][0],U[2][0]],I=[U[3][0],U[4][0],U[5][0]],x=n(A,{...B,gain:1}),D=i(A,{...q,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]});F.connect(x).connect(D.inputs[0]),D.connect(P);for(let V=128;V<Q.length;V+=128){const M=[U[0][V],U[1][V],U[2][V]],k=[U[3][V],U[4][V],U[5][V]];if(M.some((me,ue)=>me!==R[ue])||k.some((me,ue)=>me!==I[ue])){R=M,I=k;const me=V/A.sampleRate;x.gain.setValueAtTime(0,me),x=n(A,{...B,gain:0}),D=i(A,{...q,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]}),x.gain.setValueAtTime(1,me),F.connect(x).connect(D.inputs[0]),D.connect(P)}}return P}return $?(await r(A,C.orientationX,b.orientationX),await r(A,C.orientationY,b.orientationY),await r(A,C.orientationZ,b.orientationZ),await r(A,C.positionX,b.positionX),await r(A,C.positionY,b.positionY),await r(A,C.positionZ,b.positionZ)):(await c(A,C.orientationX,b.orientationX),await c(A,C.orientationY,b.orientationY),await c(A,C.orientationZ,b.orientationZ),await c(A,C.positionX,b.positionX),await c(A,C.positionY,b.positionY),await c(A,C.positionZ,b.positionZ)),ja(b)?await d(C,A,b.inputs[0]):await d(C,A,b),b};return{render(C,A){const P=g.get(A);return P!==void 0?Promise.resolve(P):E(C,A)}}},D2={disableNormalization:!1},b2=(r,e,t,n)=>class aT{constructor(a,u){const c=e(a),d=n({...D2,...u}),p=r(c,d);return t.add(p),p}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===aT.prototype||t.has(a)}},V2=(r,e)=>(t,n,i)=>(r(n).replay(i),e(n,t,i)),M2=(r,e,t)=>async(n,i,a)=>{const u=r(n);await Promise.all(u.activeInputs.map((c,d)=>Array.from(c).map(async([p,g])=>{const E=await e(p).render(p,i),C=n.context.destination;!t(p)&&(n!==C||!t(n))&&E.connect(a,g,d)})).reduce((c,d)=>[...c,...d],[]))},O2=(r,e,t)=>async(n,i,a)=>{const u=e(n);await Promise.all(Array.from(u.activeInputs).map(async([c,d])=>{const g=await r(c).render(c,i);t(c)||g.connect(a,d)}))},F2=(r,e,t,n)=>i=>r(iu,()=>iu(i))?Promise.resolve(r(n,n)).then(a=>{if(!a){const u=t(i,512,0,1);i.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>i.currentTime,u.connect(i.destination)}return i.startRendering()}):new Promise(a=>{const u=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=c=>{u.disconnect(),a(c.renderedBuffer)},u.connect(i.destination),i.startRendering()}),L2=r=>(e,t)=>r.set(e,t),j2=(r,e,t,n,i,a,u,c)=>(d,p)=>t(d).render(d,p).then(()=>Promise.all(Array.from(n(p)).map(g=>t(g).render(g,p)))).then(()=>i(p)).then(g=>(typeof g.copyFromChannel!="function"?(u(g),Cm(g)):e(a,()=>a(g))||c(g),r.add(g),g)),B2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},z2=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...B2,...d},_=t(p,g),E=a(p),C=E?n():null;super(c,!1,_,C),this._pan=e(this,E,_.pan)}get pan(){return this._pan}},U2=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=vn(p,d);if(!g){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=e(d,_)}return a.set(d,p),g?await r(d,c.pan,p.pan):await n(d,c.pan,p.pan),ja(p)?await i(c,d,p.inputs[0]):await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},$2=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},q2=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),i=URL.createObjectURL(t);let a=!1,u=!1;try{await n.audioWorklet.addModule(i);const c=new r(n,"a",{numberOfOutputs:0}),d=n.createOscillator();c.port.onmessage=()=>a=!0,c.onprocessorerror=()=>u=!0,d.connect(c),d.start(0),await n.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(i)}return a&&!u},W2=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{n.disconnect(),i(t.currentTime!==0)},t.startRendering()})},G2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},K2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...G2,...p},E=t(g,_),A=a(g)?n():null;super(d,!0,E,A),this._isCurveNullified=!1,this._nativeWaveShaperNode=E,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},H2=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!vn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Q2=()=>typeof window>"u"?null:window,X2=(r,e)=>t=>{t.copyFromChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let _=u<0?-u:0;_+u<d&&_<g;_+=1)n[_]=p[_+u]},t.copyToChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let _=u<0?-u:0;_+u<d&&_<g;_+=1)p[_+u]=n[_]}},Y2=r=>e=>{e.copyFromChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyToChannel)},Z2=r=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),r(e,"buffer",i=>()=>{const a=i.call(e);return a===n?null:a},i=>a=>i.call(e,a===null?n:a))},J2=(r,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const i=t.createBufferSource();e(n,()=>{const c=n.numberOfInputs;for(let d=0;d<c;d+=1)i.connect(n,0,d)},()=>i.disconnect(n))},lT=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),uT=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},_u=(r,e,t,n)=>{let i=r;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:a,set:u}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(r,e,{get:t(a),set:n(u)})},eD=r=>({...r,channelCount:r.numberOfOutputs}),tD=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},cT=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;cT(r,e,t+1e-7)}},nD=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},rD=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},sD=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},km=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},hT=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Dm=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},iD=r=>{r.start=(e=>(t=0,n=0,i)=>{const a=r.buffer,u=a===null?n:Math.min(a.duration,n);a!==null&&u>a.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,u,i)})(r.start)},dT=(r,e)=>{const t=e.createGain();r.connect(t);const n=(i=>()=>{i.call(r,t),r.removeEventListener("ended",n)})(r.disconnect);r.addEventListener("ended",n),Ba(r,t),r.stop=(i=>{let a=!1;return(u=0)=>{if(a)try{i.call(r,u)}catch{t.gain.setValueAtTime(0,u)}else i.call(r,u),a=!0}})(r.stop)},wu=(r,e)=>t=>{const n={value:r};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},oD=oP(wo),aD=dP(wo),lD=gk(td),fT=new WeakMap,uD=kk(fT),Vr=KP(new Map,new WeakMap),ts=Q2(),pT=Yk(Vr,_o),bm=Pk(Hn),cn=M2(Hn,bm,mo),cD=gP(pT,Et,cn),bt=bk(QE),Ei=m2(ts),At=Gk(Ei),mT=new WeakMap,gT=Sk(wu),sd=t2(ts),yT=Uk(sd),vT=$k(ts),hD=qk(ts),jp=r2(ts),hn=BP(aP(WE),hP(oD,aD,Vh,lD,Mh,Hn,uD,mu,Et,wo,Is,mo,th),Vr,zk(Op,Mh,Hn,Et,su,Is),_o,nd,dr,dk(Vh,Op,Hn,Et,su,bt,Is,At),vk(mT,Hn,wi),gT,bt,yT,vT,hD,At,jp),dD=mP(hn,cD,_o,pT,bt,At),Vm=new WeakSet,n0=Zk(ts),_T=ik(new Uint32Array(1)),Mm=X2(_T,_o),Om=Y2(_T),fD=vP(Vm,Vr,dr,n0,Ei,$2(n0),Mm,Om),id=fP(br),wT=O2(bm,yu,mo),Ns=ek(wT),Eu=e2(id,Vr,nD,rD,sD,km,hT,Dm,iD,Z2(_u),dT),Rs=V2(Dk(yu),wT),pD=EP(Ns,Eu,Et,Rs,cn),rs=zP(lP(KE),mT,HE,UP,eP,tP,nP,rP,sP,bp,$E,sd,cT),mD=wP(hn,pD,rs,Pn,Eu,bt,At,wu),gD=RP(hn,PP,_o,Pn,n2(br,_u),bt,At,cn),yD=GP(Ns,iT,Et,Rs,cn),Eo=L2(fT),vD=WP(hn,rs,yD,nd,iT,bt,At,Eo),za=Qk(wo,vT),_D=J2(Pn,za),Ua=i2(sd,_D),wD=XP(Ua,Et,cn),ED=QP(hn,wD,Ua,bt,At),TD=JP(Pm,Et,cn),ID=ZP(hn,TD,Pm,bt,At,eD),SD=l2(id,Eu,br,za),od=a2(id,Vr,SD,km,Dm),CD=sk(Ns,od,Et,Rs,cn),AD=rk(hn,rs,CD,od,bt,At,wu),ET=u2(dr,_u),xD=lk(ET,Et,cn),ND=ak(hn,xD,ET,bt,At,Eo),RD=mk(Ns,oT,Et,Rs,cn),PD=pk(hn,rs,RD,oT,bt,At,Eo),TT=c2(dr),kD=Ek(Ns,TT,Et,Rs,cn),DD=wk(hn,rs,kD,TT,dr,bt,At,Eo),bD=Rk(Ns,br,Et,Rs,cn),VD=Nk(hn,rs,bD,br,bt,At),MD=p2(nd,Pn,rd,dr),Fm=F2(Vr,br,rd,W2(br,Ei)),OD=Bk(Eu,Et,Ei,cn,Fm),FD=h2(MD),LD=Lk(hn,FD,OD,bt,At,Eo),jD=kP(rs,Ua,od,rd,dr,lT,At,_u),IT=new WeakMap,BD=Hk(gD,jD,gT,At,IT,wu),ST=g2(id,Vr,km,hT,Dm,dT),zD=N2(Ns,ST,Et,Rs,cn),UD=x2(hn,rs,ST,zD,bt,At,wu),CT=tk(Eu),$D=I2(CT,Pn,br,uT,za),ad=T2(CT,Pn,$D,uT,za,sd,_u),qD=v2(Vh,Pn,Ua,br,rd,ad,dr,Mh,lT,za),AT=y2(qD),WD=k2(Ns,Ua,od,br,AT,Et,Ei,Rs,cn,Fm),GD=P2(hn,rs,AT,WD,bt,At,Eo),KD=_2(_o),HD=b2(KD,bt,new WeakSet,tD),QD=E2(Ua,Pm,br,ad,dr,za),xT=w2(QD,dr),XD=U2(Ns,xT,Et,Rs,cn),YD=z2(hn,rs,xT,XD,bt,At),ZD=H2(ad,Et,cn),JD=K2(hn,Pn,ad,ZD,bt,At,Eo),eb=Kk(ts),tb=Ck(ts),nb=new WeakMap,rb=Vk(nb,Ei),sb=eb?cP(Vr,dr,Ik(ts),tb,Ak(iP),bt,rb,At,jp,new WeakMap,new WeakMap,q2(jp,Ei),ts):void 0,ib=Wk(yT,At),ob=hk(Vm,Vr,ck,Tk,new WeakSet,bt,ib,Dh,iu,Mm,Om),ab=$P(sb,dD,fD,mD,vD,ED,ID,AD,ND,ob,PD,DD,VD,LD,BD,UD,GD,HD,YD,JD),lb=Mk(IT),ub=uk(dr,Ei),cb=j2(Vm,Vr,bm,lb,Fm,Dh,Mm,Om),hb=C2(ab,Vr,Pn,ub,cb),r0=(r,e,t)=>{const n=new hb(r.numberOfChannels,Math.round(t*r.sampleRate),r.sampleRate),i=n.createBiquadFilter(),a=n.createBufferSource();return i.frequency.value=240,i.type="lowpass",a.buffer=r,a.connect(i).connect(n.destination),a.start(0,e,t),n.startRendering().then(u=>{const c=u.getChannelData(0),d=u.sampleRate;return{channelData:c,sampleRate:d}})},db=XR({analyze:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await r0(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("analyze",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])},guess:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await r0(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("guess",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])}}),fb=r=>{const e=new Worker(r);return db(e)},pb=(r,e)=>{let t=null;return()=>{if(t!==null)return t;const n=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return t=r(i),setTimeout(()=>URL.revokeObjectURL(i)),t}},mb=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:c}})=>{const u=r[i];try{if(void 0===u)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const c=new Map,u=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(c);return c.set(o,(()=>{n(),t.close(),c.delete(o)})),{result:o}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=u(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},h=(e,t,r)=>{const n=e.length,o=[];let s=!1;for(let a=0;a<n;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=r/4-1);return s&&o.push(n-1),o},d=(e,t,r)=>{const n=(e=>{let t=0;const r=e.length;for(let n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t})(e),o=.3*n;let s=[],a=n-.05*n;if(n>.25)for(;s.length<30&&a>=o;)s=h(e,a,t),a-=.05*n;const i=(e=>{const t=[];return e.forEach(((r,n)=>{const o=Math.min(e.length-n,10);for(let s=1;s<o;s+=1){const o=e[n+s]-r;t.some((e=>e.interval===o&&(e.peaks.push(r),!0)))||t.push({interval:o,peaks:[r]})}})),t})(s),c=((e,t,r={})=>{var n,o;const s=Math.max(0,null!==(n=r.maxTempo)&&void 0!==n?n:180),a=Math.max(0,null!==(o=r.minTempo)&&void 0!==o?o:90),i=[];return e.forEach((e=>{let r=60/(e.interval/t);for(;r<a;)r*=2;for(;r>s;)r/=2;if(r<a)return;let n=!1,o=e.peaks.length;i.forEach((t=>{if(t.tempo===r&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],n=!0),t.tempo>r-.5&&t.tempo<r+.5){const n=2*Math.abs(t.tempo-r);o+=(1-n)*t.peaks.length,t.score+=(1-n)*e.peaks.length}})),n||i.push({peaks:e.peaks,score:o,tempo:r})})),i})(i,t,r);return c.sort(((e,t)=>t.score-e.score)),c},p=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo},f=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:o,tempo:s}=n[0],a=Math.round(s),i=60/a;o.sort(((e,t)=>e-t));let c=o[0]/t;for(;c>i;)c-=i;return{bpm:a,offset:c,tempo:s}};l(self,{analyze:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:p(e,t,r)}),guess:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:f(e,t,r)})})})()})();`,gb=pb(fb,mb),yb=(...r)=>gb().analyze(...r),Gn=new DI({log:!0,corePath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.js",wasmPath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.wasm"}),s0=async()=>{try{console.log("Starting FFmpeg load..."),await Gn.load({corePath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.js",wasmPath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.wasm"}),console.log("FFmpeg loaded successfully")}catch(r){throw console.error("FFmpeg load error:",r),r instanceof Error&&console.error({message:r.message,name:r.name,stack:r.stack,cause:r.cause}),alert("Failed to load FFmpeg. Please check your internet connection."),r}},vb=({onCreateSlideshow:r,onLoadSession:e,onClose:t})=>{const[n,i]=he.useState(!0),[a,u]=he.useState(!1);return T.jsx("div",{className:"landing-wrapper",children:T.jsxs("div",{className:"landing-container",children:[T.jsxs("div",{className:"landing-header",children:[T.jsx("button",{className:"info-button",onClick:()=>u(!0),children:T.jsx("span",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid white",fontSize:"16px"},children:"i"})}),T.jsx("h1",{className:"app-title",children:"Groove Slider"}),T.jsx("button",{className:"close-landing-button",onClick:t,children:T.jsx(oo,{size:24})})]}),T.jsxs("div",{className:"retro-background",children:[T.jsx("div",{className:"wave-pattern top"}),T.jsx("div",{className:"wave-pattern bottom"}),T.jsxs("div",{className:"project-management",children:[T.jsx("button",{className:"create-button",onClick:r,children:"Create Slideshow"}),T.jsx("button",{className:"sessions-toggle-button",onClick:()=>i(!n),children:n?"Hide Saved Projects":"Show Saved Projects"}),n&&T.jsx("div",{className:"landing-sessions-container",children:T.jsx(BR,{visible:!0,onLoadSession:e})})]})]}),T.jsx("div",{className:"featured-section",children:T.jsxs("button",{className:"use-style-button",children:[T.jsx(zp,{size:18}),T.jsx("span",{children:"Follow Us "})]})}),a&&T.jsx(Sb,{isOpen:a,onClose:()=>u(!1)})]})})},_b=({onUpload:r,onBPMChange:e,currentBPM:t,onStartPointChange:n,audioRef:i,musicUrl:a,musicStartPoint:u})=>{const[c,d]=he.useState(0),[p,g]=he.useState(!1),[_,E]=he.useState(1),[C,A]=he.useState(0),P=he.useRef(null),[b,B]=he.useState(""),[q,$]=he.useState(!1),[Q,F]=he.useState(!1),[U,R]=he.useState(null),I=he.useRef(null),x=he.useRef(null);he.useEffect(()=>{if(!U){const ue=new(window.AudioContext||window.webkitAudioContext);R(ue)}return()=>{U&&U.close()}},[]);const D=async ue=>{try{console.log("Starting BPM detection..."),$(!0);const fe=new(window.AudioContext||window.webkitAudioContext),te=await(await fetch(ue)).arrayBuffer();console.log("Audio data fetched, decoding...");const re=await fe.decodeAudioData(te);console.log("Audio decoded, analyzing tempo...");const ne=await yb(re);console.log(`Raw detected tempo: ${ne}`);let L=ne;ne>140&&(L=ne/2);const Y=Math.round(L);return console.log(`Final detected BPM: ${Y}`),Y}catch(fe){return console.error("BPM detection failed:",fe),120}finally{$(!1)}},V=()=>{if(!P.current)return;const ue=P.current.currentTime;if(d(ue),p&&x.current!==null){const fe=Math.abs(ue-x.current);fe>.005&&ue<x.current+.5?(console.log(`Correcting drift of ${fe.toFixed(6)}s`),P.current.currentTime=x.current,i.current&&(i.current.currentTime=x.current)):ue>x.current+.5&&(x.current=null)}};he.useEffect(()=>{if(P.current&&i.current){P.current.addEventListener("timeupdate",V);const ue=()=>{i.current.currentTime=P.current.currentTime};return P.current.addEventListener("timeupdate",ue),P.current.addEventListener("seeking",()=>{I.current&&clearInterval(I.current),I.current=setInterval(()=>{V()},10)}),P.current.addEventListener("seeked",()=>{I.current&&(clearInterval(I.current),I.current=null)}),P.current.addEventListener("loadedmetadata",()=>{A(P.current.duration)}),()=>{P.current&&(P.current.removeEventListener("timeupdate",V),P.current.removeEventListener("timeupdate",ue),P.current.removeEventListener("seeking",()=>{}),P.current.removeEventListener("seeked",()=>{})),I.current&&clearInterval(I.current)}}},[i,P,p]);const M=async()=>{if(P.current)if(p)P.current.pause(),g(!1);else try{const ue=P.current.currentTime;x.current=ue,P.current.currentTime=ue,U&&U.state==="suspended"&&await U.resume(),await P.current.play(),setTimeout(()=>{Math.abs(P.current.currentTime-ue)>.005&&(console.log(`Forced correction: ${P.current.currentTime} -> ${ue}`),P.current.currentTime=ue)},10),g(!0)}catch(ue){console.error("Playback error:",ue),x.current=null}},k=()=>{F(!0),p&&P.current&&P.current.pause()},me=()=>{F(!1),p&&P.current&&(x.current=P.current.currentTime,P.current.play().catch(ue=>console.error("Resume error:",ue)))};return T.jsx("div",{className:"music-panel",children:T.jsxs("div",{className:"music-controls",children:[T.jsxs("div",{className:"bpm-control",children:[q&&T.jsxs("div",{className:"bpm-analyzer",children:[T.jsx(gS,{className:"spinner",size:18}),T.jsx("span",{children:"Analyzing beat..."})]}),T.jsxs("div",{className:"manual-bpm",children:[T.jsxs("label",{children:[T.jsx("span",{children:"AUTO-BPM"}),T.jsx("span",{children:"DETECTION:"})]}),T.jsx("input",{type:"number",min:"60",max:"180",value:t,onChange:ue=>e(parseInt(ue.target.value)),className:"bpm-input"})]}),T.jsxs("label",{className:"upload-button",children:[T.jsx(zp,{className:"icon"}),T.jsx("span",{children:"Upload Music"}),T.jsx("input",{type:"file",accept:"audio/*",onChange:async ue=>{const fe=ue.target.files[0];if(fe){const ce=URL.createObjectURL(fe);B(fe.name),$(!0);try{const te=await D(ce);console.log(`Final detected BPM: ${te}`),e(te)}catch(te){console.error("BPM detection failed:",te),e(120)}finally{$(!1)}r(ce),n(0),P.current&&(P.current.src=ce,P.current.currentTime=0)}},className:"hidden-input"})]})]}),T.jsxs("div",{className:"music-player",children:[T.jsx("audio",{ref:P,src:a,onTimeUpdate:V,preload:"auto"}),a&&T.jsx("div",{className:"music-info",children:T.jsx("span",{children:b||"Track Title"})}),T.jsx("button",{className:"audio-control-button",onClick:M,children:p?T.jsx(l0,{size:32}):T.jsx(u0,{size:32})}),a&&T.jsx(UR,{audioUrl:a,audioRef:i,onStartPointChange:ue=>{const fe=Math.round(ue*1e3)/1e3;x.current=fe,n(fe),P.current&&(P.current.currentTime=fe)},musicStartPoint:u}),T.jsx("div",{className:"audio-progress",children:T.jsx("input",{type:"range",min:"0",max:C||100,step:"0.001",value:c,onMouseDown:k,onMouseUp:me,onTouchStart:k,onTouchEnd:me,onChange:ue=>{const fe=parseFloat(ue.target.value);P.current&&(P.current.currentTime=fe,x.current=fe,Q&&n(fe),d(fe))},className:"progress-slider",style:{background:`linear-gradient(to right, #4682B4 ${c/C*100}%, #e5e5e5 ${c/C*100}%)`}})})]})]})})},wb=({currentIndex:r,totalSlides:e,onProgressClick:t})=>(console.log("Rendering ProgressBar",{currentIndex:r,totalSlides:e,bars:[...Array(e)].map((n,i)=>({index:i,isActive:i===r}))}),T.jsx("div",{className:"progress-container",children:[...Array(e)].map((n,i)=>T.jsx("div",{className:`progress-bar ${i===r?"active":""}`,style:{backgroundColor:i===r?"white":"rgba(255,255,255,0.3)"},onClick:()=>t(i)},i))})),Eb=({onPrevious:r,onNext:e,isFirstSlide:t,isLastSlide:n})=>T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:r,className:"nav-button prev",disabled:t,children:T.jsx(Hi,{})}),T.jsx("button",{onClick:e,className:"nav-button next",disabled:n,children:T.jsx(si,{})})]}),Tb=({onFileUpload:r})=>T.jsx("div",{className:"empty-state",children:T.jsxs("label",{htmlFor:"file-upload",className:"file-upload-label",children:[T.jsx(eS,{size:48}),T.jsx("span",{children:"Add Images"}),T.jsx("input",{type:"file",id:"file-upload",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]})}),Ib=({isOpen:r,progress:e,message:t})=>r?T.jsx("div",{className:"modal-overlay",children:T.jsx("div",{className:"modal-content export-progress",children:T.jsxs("div",{className:"loading-container",children:[T.jsx("h3",{className:"progress-title",children:t}),T.jsx("div",{className:"progress-bar-container",children:T.jsx("div",{className:"progress-bar-fill",style:{width:`${e||0}%`,transition:"width 0.3s ease-in-out"}})}),T.jsxs("div",{className:"progress-percentage",children:[Math.round(e||0),"%"]})]})})}):null,Sb=({isOpen:r,onClose:e})=>{const[t,n]=he.useState(null),[i,a]=he.useState(""),[u,c]=he.useState(!0);he.useEffect(()=>{r&&(async()=>{try{if(console.group("🔍 License Fetch Debugging"),console.log("Firestore DB:",ep),console.log("Modal Open:",r),!ep){console.error("❌ Firestore DB not initialized");return}const E=VN(ep,"content","license");console.log("📄 Document Reference:",E);try{const C=await GN(E);if(console.log("📋 Document Exists:",C.exists()),C.exists()){const A=C.data();console.log("📝 License Data:",A),A&&A.text?(console.log("✅ License Text Found"),a(A.text)):(console.warn("❗ No text field in license document"),a("No license text found."))}else console.warn("❌ No such document in Firestore"),a("License document does not exist.")}catch(C){if(console.error("❌ Snapshot Error:",C),C.code==="unavailable"){console.log("🌐 Offline mode: Attempting to use cached data");const A=await getDocFromCache(E);if(A.exists()){const P=A.data();a(P.text||"Cached license text")}else a("License unavailable offline")}else a(`Error loading license: ${C.message}`)}}catch(E){console.error("❌ Detailed Firebase Error:",E),a(`Error loading license: ${E.message}`)}finally{console.groupEnd(),c(!1)}})()},[r]);const d=_=>{n(_)},p=()=>{n(null)},g=()=>{switch(t){case"credits":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"Credits"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"credits-content",children:[T.jsxs("div",{className:"developer-profile",children:[T.jsx("div",{className:"developer-avatar",children:T.jsx(GI,{size:64})}),T.jsx("h3",{children:"Ben Hayes"}),T.jsx("p",{className:"developer-title",children:"Creator & Developer"})]}),T.jsxs("div",{className:"company-info",children:[T.jsx("h4",{children:"Hayzer Apps"}),T.jsx("p",{children:"Groove Slider was designed, developed, and maintained by Ben Hayes as the sole developer."})]}),T.jsxs("div",{className:"developer-note",children:[T.jsx("p",{children:"From concept to implementation, every aspect of this app was crafted to provide an elegant way to create musical slideshows of your favorite moments."}),T.jsx("p",{children:"I hope you enjoy using Groove Slider as much as I enjoyed creating it."})]}),T.jsxs("div",{className:"contact-section",children:[T.jsx("h4",{children:"Connect"}),T.jsx("p",{children:"Have feedback or suggestions? I'd love to hear from you!"}),T.jsx("p",{children:"Email: contact@hayzerapps.com"})]})]})})]});case"feedback":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"Feedback"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"feedback-form",children:[T.jsx("p",{children:"We'd love to hear your thoughts on Groove Slider!"}),T.jsx("textarea",{placeholder:"Share your feedback here...",className:"feedback-textarea",rows:6}),T.jsx("button",{className:"submit-button",children:"Submit Feedback"})]})})]});case"restore":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"Restore Purchase"})]}),T.jsxs("div",{className:"section-body",children:[T.jsx("p",{children:"Tap the button below to restore your previous purchases."}),T.jsx("button",{className:"restore-button",children:"Restore Purchases"})]})]});case"unsubscribe":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"How to Unsubscribe"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"unsubscribe-info",children:[T.jsx("p",{children:"For information on how to manage or cancel your subscription, please visit Google's official support page:"}),T.jsx("button",{className:"external-link-button",onClick:()=>window.open("https://support.google.com/googleplay/answer/7018481?hl=en&co=GENIE.Platform%3DAndroid","_blank"),children:"Google Play Subscription Help"})]})})]});case"privacy":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"Privacy Policy"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"privacy-content",children:[T.jsx("h3",{children:"Privacy Policy for Groove Slider"}),T.jsx("p",{children:"Last Updated: March 2, 2025"}),T.jsx("h4",{children:"Introduction"}),T.jsx("p",{children:"Welcome to Groove Slider. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we handle your data when you use our application and tell you about your privacy rights."}),T.jsx("h4",{children:"What Data We Collect"}),T.jsx("p",{children:"Groove Slider requires access to the following on your device:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Image files (photos, pictures) that you select to include in your slideshows"}),T.jsx("li",{children:"Audio files (music, sounds) that you select to add to your slideshows"})]}),T.jsx("h4",{children:"How We Use Your Data"}),T.jsx("p",{children:"We use your data for the following purposes:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"To create slideshows with your selected images"}),T.jsx("li",{children:"To add your selected music to your slideshows"}),T.jsx("li",{children:"To export these slideshows as MP4 video files to your device"})]}),T.jsx("h4",{children:"Data Processing"}),T.jsx("p",{children:"All data processing happens locally on your device. Your images and music:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Are not uploaded to our servers"}),T.jsx("li",{children:"Are not shared with third parties"}),T.jsx("li",{children:"Are only accessed when you explicitly grant permission"}),T.jsx("li",{children:"Are only used for the purpose of creating and exporting your slideshows"})]}),T.jsx("h4",{children:"Storage"}),T.jsx("p",{children:"The app stores:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Temporary copies of your selected images and music while processing"}),T.jsx("li",{children:"Your slideshow settings and preferences"}),T.jsx("li",{children:"Completed MP4 video files that are saved to your device storage"})]}),T.jsx("h4",{children:"Third-Party Services"}),T.jsx("p",{children:"Our app does not integrate with third-party analytics or advertising services."}),T.jsx("h4",{children:"Your Rights"}),T.jsx("p",{children:"You have the right to:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Delete your saved slideshows and preferences by uninstalling the app"}),T.jsx("li",{children:"Control what files you share with the app through your device permissions"})]}),T.jsx("h4",{children:"Children's Privacy"}),T.jsx("p",{children:"Our service is not directed to anyone under the age of 13. We do not knowingly collect personal information from children."}),T.jsx("h4",{children:"Changes to This Privacy Policy"}),T.jsx("p",{children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'}),T.jsx("h4",{children:"Contact Us"}),T.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us at: contact@grooveslider.app"})]})})]});case"license":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Hi,{size:24})}),T.jsx("h2",{children:"License Agreement"})]}),T.jsx("div",{className:"section-body",children:T.jsx("div",{className:"license-content",children:u?T.jsx("p",{children:"Loading license..."}):T.jsxs(T.Fragment,{children:[T.jsx("h3",{children:"End User License Agreement"}),T.jsx("p",{children:"Last Updated: March 2, 2025"}),T.jsx("div",{className:"license-text",children:i||"No license text available."})]})})})]});default:return null}};return T.jsx("div",{className:"modal-overlay",children:T.jsx("div",{className:"info-modal",children:t?g():T.jsxs(T.Fragment,{children:[T.jsxs("header",{className:"info-header",children:[T.jsx("h2",{children:"Settings"}),T.jsx("button",{className:"close-button",onClick:e,children:T.jsx(oo,{size:24})})]}),T.jsxs("div",{className:"info-content",children:[T.jsxs("div",{className:"pro-banner",children:[T.jsxs("div",{className:"pro-text",children:[T.jsxs("h3",{children:["Groove Slider ",T.jsx("span",{className:"pro-badge",children:"Pro"})]}),T.jsx("p",{children:"Unlock All Features"})]}),T.jsx("div",{className:"pro-image",children:T.jsx("div",{style:{width:80,height:80,background:"rgba(255,255,255,0.2)",borderRadius:"8px"}})})]}),T.jsxs("div",{className:"info-item-group",children:[T.jsxs("div",{className:"info-item",onClick:()=>d("credits"),children:[T.jsx(dS,{className:"info-icon"}),T.jsxs("div",{className:"info-text",children:[T.jsx("h4",{children:"Credits"}),T.jsx("p",{children:"About"})]}),T.jsx(si,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("feedback"),children:[T.jsx(wS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Feedback"})}),T.jsx(si,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("restore"),children:[T.jsx(DS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Restore Purchase"})}),T.jsx(si,{})]})]}),T.jsxs("div",{className:"info-item-group",children:[T.jsxs("div",{className:"info-item",onClick:()=>d("unsubscribe"),children:[T.jsx(nS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"How to unsubscribe"})}),T.jsx(si,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("privacy"),children:[T.jsx(vS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Privacy Policy"})}),T.jsx(si,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("license"),children:[T.jsx(lS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"License"})}),T.jsx(si,{})]}),T.jsxs("div",{className:"info-item",children:[T.jsx(cS,{className:"info-icon"}),T.jsxs("div",{className:"info-text",children:[T.jsx("h4",{children:"Version"}),T.jsx("p",{children:"Version 0.9.0 (Beta)"})]})]})]})]})]})})})},Cb=({isVisible:r,onClose:e})=>r?T.jsx("div",{className:"share-notification",children:T.jsxs("div",{className:"share-content",children:[T.jsx("h3",{children:"Export Complete! 🎉"}),T.jsx("p",{children:"Share your creation:"}),T.jsxs("div",{className:"share-buttons",children:[T.jsx("button",{onClick:()=>window.open("https://instagram.com","_blank"),className:"share-button instagram",children:"Share to Instagram"}),T.jsx("button",{onClick:()=>window.open("https://tiktok.com","_blank"),className:"share-button tiktok",children:"Share to TikTok"})]}),T.jsx("button",{onClick:e,className:"close-notification",children:T.jsx(oo,{size:20})})]})}):null,NT=({stories:r,onClose:e,onReorder:t,onDelete:n})=>{const[i,a]=he.useState(r.map((b,B)=>B+1)),[u,c]=he.useState(null),[d,p]=he.useState(null),[g,_]=he.useState(!1),E=b=>{c(u===b?null:b)},C=(b,B)=>{u===B&&(_(!0),b.currentTarget.style.cursor="grabbing")},A=(b,B)=>{b.preventDefault(),g&&u!==null&&u!==B&&p(B)},P=b=>{if(u!==null&&u!==b){const B=[...r],[q]=B.splice(u,1);B.splice(b,0,q);const $=B.map((Q,F)=>F+1);a($),t(B),c(null),p(null),_(!1)}};return T.jsxs("div",{className:"edit-panel",children:[T.jsxs("div",{className:"edit-panel-header",children:[T.jsx("h3",{children:"Re-order by Tap, Drag, Drop"}),T.jsx("button",{className:"edit-panel-close",onClick:e,children:T.jsx(oo,{size:20})})]}),T.jsx("div",{className:"thumbnails-container",children:r.map((b,B)=>T.jsx("div",{className:`thumbnail ${u===B?"selected":""}
${d===B?"drag-over":""}`,onClick:()=>E(B),onMouseDown:q=>C(q,B),onTouchStart:q=>C(q,B),onDragOver:q=>A(q,B),onMouseOver:q=>g&&A(q,B),onTouchMove:q=>{const $=q.touches[0],F=document.elementFromPoint($.clientX,$.clientY).closest(".thumbnail");if(F){const U=Array.from(F.parentNode.children).indexOf(F);A(q,U)}},onMouseUp:()=>P(B),onTouchEnd:()=>d!==null&&P(d),draggable:u===B,children:T.jsxs("div",{className:"thumbnail-content",children:[T.jsx("button",{className:"delete-button",onClick:q=>{q.stopPropagation(),n(B)},children:T.jsx(oo,{size:16})}),T.jsxs("div",{className:"image-thumbnail",children:[T.jsx("img",{src:b.url,alt:`Slide ${B+1}`}),u===B&&T.jsx("div",{className:"selection-dot"})]})]})},B))})]})},Ab=({onFileUpload:r,onSaveSession:e,onExportSession:t,onPlayPause:n,isPlaying:i,duration:a,onDurationChange:u,onEdit:c,onMusicUpload:d,onBPMChange:p,musicUrl:g,bpm:_,onStartPointChange:E,musicStartPoint:C,audioRef:A,isLoopingEnabled:P,setIsLoopingEnabled:b,showEditPanel:B,setShowEditPanel:q,stories:$,setStories:Q,handleDelete:F,handleReorder:U})=>{const[R,I]=he.useState(!1),[x,D]=he.useState(!1),[V,M]=he.useState(1);he.useEffect(()=>{const te=[.125,.25,.5,1,2,4,8,16].find(re=>Math.abs(a*_/(4*60)-re)<.01);te&&M(te)},[a,_]);const k=(ce,te)=>ce*4*60/te,me=()=>{I(!R),x&&D(!1),B&&q(!1)},ue=()=>{D(!x),R&&I(!1),B&&q(!1)},fe=()=>{q(!B),R&&I(!1),x&&D(!1)};return T.jsxs("div",{className:"bottom-menu w-full flex flex-col items-stretch",children:[R&&T.jsx("div",{className:"duration-panel",children:T.jsxs("div",{className:"duration-controls",children:[T.jsx("h3",{children:"Bar-Based Slide Transitions"}),T.jsx("div",{className:"bar-options",children:[{value:.125,label:"⅛ Bar"},{value:.25,label:"¼ Bar"},{value:.5,label:"½ Bar"},{value:1,label:"1 Bar"},{value:2,label:"2 Bars"},{value:4,label:"4 Bars"},{value:8,label:"8 Bars"},{value:16,label:"16 Bars"}].map(ce=>T.jsx("button",{className:`bar-option ${V===ce.value?"selected":""}`,onClick:()=>{const te=k(ce.value,_);M(ce.value),u(te)},children:ce.label},ce.value))}),T.jsxs("div",{className:"duration-info",children:[T.jsx("span",{children:"Slide Change Speed:"}),T.jsxs("span",{className:"time-info",children:[a.toFixed(2),"s /",_," BPM"]})]})]})}),x&&T.jsx(_b,{audioRef:A,onUpload:d,onBPMChange:p,currentBPM:_,onStartPointChange:E,musicStartPoint:C,musicUrl:g}),B&&T.jsx(NT,{stories:$,onClose:()=>q(!1),onReorder:ce=>{Q(ce),U(ce)},onDelete:F}),T.jsxs("div",{className:"bottom-menu-buttons",children:[T.jsxs("button",{className:`bottom-menu-button ${P?"active":""}`,onClick:()=>b(!P),"data-loop":"true",children:[T.jsx(xS,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Loop"})]}),T.jsxs("button",{className:`bottom-menu-button ${R?"active":""}`,onClick:me,children:[T.jsx(o0,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Speed"})]}),T.jsxs("button",{className:`bottom-menu-button ${x?"active":""}`,onClick:ue,children:[T.jsx(zp,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Music"})]}),T.jsxs("button",{className:`bottom-menu-button ${i?"active":""}`,onClick:n,children:[i?T.jsx(l0,{className:"bottom-menu-icon"}):T.jsx(u0,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:i?"Pause":"Play"})]}),T.jsxs("div",{className:"bottom-menu-right-group",children:[T.jsxs("button",{className:`bottom-menu-button ${B?"active":""}`,onClick:fe,children:[T.jsx(VS,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Edit"})]}),T.jsxs("label",{className:"bottom-menu-button",children:[T.jsx(pS,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Add"}),T.jsx("input",{type:"file",id:"file-upload-bottom",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]}),T.jsxs("button",{className:"bottom-menu-button",onClick:e,children:[T.jsx(c0,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Save"})]}),T.jsxs("button",{className:"bottom-menu-button",onClick:t,children:[T.jsx(a0,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Export"})]})]})]})]})},xb=()=>{const[r,e]=he.useState(!0),[t,n]=he.useState(0),[i,a]=he.useState([]),[u,c]=he.useState(!1),[d,p]=he.useState(2),[g,_]=he.useState(!1),[E,C]=he.useState(!1),[A,P]=he.useState(!1),[b,B]=he.useState(null),[q,$]=he.useState(!1),[Q,F]=he.useState(!1),[U,R]=he.useState(!1),[I,x]=he.useState("cover"),[D,V]=he.useState(!1),[M,k]=he.useState(!1),[me,ue]=he.useState(null),[fe,ce]=he.useState(""),[te,re]=he.useState(!1),[ne,L]=he.useState(null),[Y,Ee]=he.useState(120),[De,ye]=he.useState(0),[se,J]=he.useState(!0),[ee,ve]=he.useState({}),[Ae,Be]=he.useState(null),[$e,Ze]=he.useState(null),je=he.useRef(null),kn=he.useRef(null),Ps=()=>{i.length>0?window.confirm("Start a new project? Any unsaved changes will be lost.")&&(Mr(),e(!1)):e(!1)},Mr=()=>{a([]),n(0),L(null),je.current&&(je.current.pause(),je.current.src=""),c(!1),Ee(120),ye(0),p(2),J(!1)},Or=ke=>new Promise((Oe,Je)=>{const ot=new Image;ot.onload=()=>Oe(ke),ot.onerror=Je,ot.src=ke});he.useEffect(()=>{const ke=async()=>{const Oe=[t-1,t,t+1].filter(Je=>Je>=0&&Je<i.length);for(const Je of Oe)if(!ee[i[Je].url])try{await Or(i[Je].url),ve(ot=>({...ot,[i[Je].url]:!0}))}catch(ot){console.error("Failed to preload image:",ot)}};i.length>0&&ke()},[t,i]),he.useEffect(()=>{s0().catch(console.error)},[]);const Yn=ke=>{const Oe=Array.from(ke.target.files).filter(ot=>ot.type.startsWith("image/"));if(Oe.length===0){alert("Please select image files only.");return}const Je=Oe.map(ot=>({type:"image",url:URL.createObjectURL(ot)}));a(ot=>[...ot,...Je]),ke.target.value=""},dn=ke=>{L(ke),ye(0),je.current&&(je.current.src=ke,je.current.currentTime=0)},Dn=ke=>{Ee(ke);const ot=([.125,.25,.5,1,2,4,8,16].find(fr=>Math.abs(d*ke/(4*60)-fr)<.01)||1)*4*60/ke;p(ot)},Tt=()=>{kn.current=setInterval(()=>{n(ke=>!se&&ke>=i.length-1?(en(),c(!1),je.current&&je.current.pause(),ke):(ke+1)%i.length)},d*1e3)},en=()=>{kn.current&&clearInterval(kn.current)},Xe=async()=>{if(u)en(),je.current&&je.current.pause(),c(!1);else{if(t===i.length-1&&n(0),Tt(),je.current&&ne){const ke=De;je.current.currentTime=ke;try{await je.current.play(),setTimeout(()=>{Math.abs(je.current.currentTime-ke)>.01&&(console.log("Correcting audio timing drift on play"),je.current.currentTime=ke)},10)}catch(Oe){console.log("Play error:",Oe)}}c(!0)}};he.useEffect(()=>()=>en(),[]),he.useEffect(()=>{u&&(en(),Tt())},[d]);const bn=()=>{t<i.length-1&&n(t+1)},ut=()=>{t>0&&n(t-1)},ct=ke=>Be(ke.touches[0].clientX),_n=ke=>Ze(ke.touches[0].clientX),ss=()=>{if(!Ae||!$e)return;const ke=Ae-$e,Oe=ke>50,Je=ke<-50;Oe&&t<i.length-1&&bn(),Je&&t>0&&ut(),Be(null),Ze(null)},Vn=ke=>{u&&(en(),c(!1),je.current&&je.current.pause()),n(0),a(ke)},Zn=ke=>{const Oe=i.filter((Je,ot)=>ot!==ke);a(Oe),t>=ke&&n(Math.max(0,t-1))},Mn=(ke,Oe,Je)=>Je!=="cover"?`scale=${ke}:${Oe}:force_original_aspect_ratio=1,pad=${ke}:${Oe}:(ow-iw)/2:(oh-ih)/2:black`:`scale=iw*max(${ke}/iw\\,${Oe}/ih):ih*max(${ke}/iw\\,${Oe}/ih),crop=${ke}:${Oe}`,Fr=async ke=>{try{u&&(en(),je.current&&je.current.pause(),c(!1));const Oe=await FR(ke);a(Oe.stories),Ee(Oe.bpm),p(Oe.duration),J(Oe.isLoopingEnabled),n(Oe.currentIndex),x(Oe.imageFitMode||"cover"),Oe.musicUrl&&(L(Oe.musicUrl),ye(Oe.musicStartPoint),je.current&&(je.current.src=Oe.musicUrl,je.current.currentTime=Oe.musicStartPoint)),r&&e(!1),alert("Session loaded successfully!")}catch(Oe){console.error("Error loading session:",Oe),alert("Failed to load session: "+Oe.message)}},Lr=async ke=>{const Oe={...ke},{resolution:Je="1080x1920",isExportLoopEnabled:ot=!1,exportLoopDuration:fr=0}=Oe;try{let Ft,On="untitled.mp4";if("showSaveFilePicker"in window)Ft=await window.showSaveFilePicker({suggestedName:On,types:[{description:"MP4 Video",accept:{"video/mp4":[".mp4"]}}]});else{const xt=document.createElement("a");xt.download=On,Ft={createWritable:async()=>({write:async Nt=>{const Jn=URL.createObjectURL(new Blob([Nt],{type:"video/mp4"}));xt.href=Jn,xt.click(),URL.revokeObjectURL(Jn)},close:async()=>{}})}}k(!0),re(!0),ce("Preparing to export video..."),ue(0),Gn.loaded||await s0();let pr=[];const Fn=[],[Ii,is]=Je.split("x").map(Number),Si=i.length*d,Ln=ot&&fr>0?Math.ceil(fr/Si):1;for(let xt=0;xt<Ln;xt++)for(let Nt=0;Nt<i.length;Nt++){const Jn=i[Nt];ce(`Processing image ${Nt+1}/${i.length} (Loop ${xt+1}/${Ln})`);const mr=`input_${xt}_${Nt}.png`,jr=`processed_${xt}_${Nt}.mp4`;await Gn.writeFile(mr,await qy(Jn.url)),pr.push(mr),await Gn.exec(["-loop","1","-i",mr,"-c:v","libx264","-t",`${d}`,"-pix_fmt","yuv420p","-vf",Mn(Ii,is,I),"-r","30","-preset","ultrafast",jr]),pr.push(jr),Fn.push({name:jr}),ue((xt*i.length+Nt+1)/(Ln*i.length)*75)}if(await Gn.writeFile("list.txt",Fn.map(xt=>`file '${xt.name}'`).join(`
`)),pr.push("list.txt"),ce("Creating final video..."),ue(85),await Gn.exec(["-f","concat","-safe","0","-i","list.txt","-c:v","copy","temp_output.mp4"]),pr.push("temp_output.mp4"),ne){ce("Adding background music...");try{await Gn.writeFile("background.mp3",await qy(ne)),await Gn.exec(["-i","temp_output.mp4","-ss",String(De),"-i","background.mp3","-shortest","-map","0:v","-map","1:a","-c:v","copy","-c:a","aac","-b:a","192k","final_output.mp4"]),await Gn.deleteFile("background.mp3"),await Gn.deleteFile("temp_output.mp4")}catch(xt){console.error("Music error:",xt),await Gn.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"])}}else await Gn.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"]);ce("Preparing download..."),ue(95);const Ci=await Gn.readFile("final_output.mp4");ue(100);const pt=await Ft.createWritable();await pt.write(new Blob([Ci.buffer],{type:"video/mp4"})),await pt.close(),re(!1),k(!1),V(!0)}catch(Ft){console.error("Export error:",Ft),re(!1),k(!1),alert(`Export failed: ${Ft.message}`)}},Ti=async ke=>{try{re(!0),ce("Saving session..."),ue(10);const Oe={name:ke,stories:i,musicUrl:ne,bpm:Y,musicStartPoint:De,imageFitMode:I,duration:d,isLoopingEnabled:se,currentIndex:t};ue(40),await OR(Oe),ue(100),ce("Session saved successfully!"),setTimeout(()=>{re(!1),alert("Session saved successfully!")},1e3)}catch(Oe){console.error("Error saving session to database:",Oe),re(!1),alert(`Failed to save session: ${Oe.message}`)}};return T.jsx(T.Fragment,{children:r?T.jsx(vb,{onCreateSlideshow:Ps,onLoadSession:Fr,onClose:()=>e(!1)}):T.jsx("div",{className:"app-container",children:T.jsx("div",{className:"app-content",children:T.jsxs("div",{className:"slider-container",children:[T.jsxs("div",{className:"title-bar",children:[T.jsx("h1",{className:"slider-title",children:"Groove Slider"}),T.jsx("button",{onClick:()=>e(!0),className:"projects-button",children:"back"})]}),T.jsx("audio",{ref:je,src:ne,loop:!0}),i.length===0?T.jsx(Tb,{onFileUpload:Yn}):T.jsxs("div",{className:"story-container",onTouchStart:ct,onTouchMove:_n,onTouchEnd:ss,children:[T.jsx("div",{className:"story-slide",children:T.jsx("div",{className:"media-wrapper",children:T.jsxs("div",{className:"image-container",style:{position:"relative",width:"100%",height:"100%"},children:[T.jsx("button",{className:"image-fit-toggle",onClick:ke=>{ke.preventDefault(),console.log("Image fit button clicked"),x(Oe=>{const Je=Oe==="cover"?"contain":"cover";return console.log("New image fit mode:",Je),Je})},children:I==="cover"?T.jsx(TS,{}):T.jsx(oS,{})}),i[t]&&i[t].url?T.jsx("img",{src:i[t].url,alt:`Slide ${t+1}`,className:"media-content",style:{objectFit:I,width:"100%",height:"100%",display:"block"},loading:"eager"}):T.jsx("div",{className:"empty-image-placeholder",style:{backgroundColor:"#f5f5f5",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#333"},children:"Select an image to display"})]})})}),T.jsx(Eb,{onPrevious:ut,onNext:bn,isFirstSlide:t===0,isLastSlide:t===i.length-1}),T.jsx(wb,{currentIndex:t,totalSlides:i.length,onProgressClick:ke=>{console.log("Current Index:",t),console.log("Clicked Index:",ke),console.log("Total Stories:",i.length),n(ke)}})]}),T.jsx(Ab,{audioRef:je,onFileUpload:Yn,onSaveSession:()=>$(!0),onExportSession:()=>P(!0),onPlayPause:Xe,isPlaying:u,duration:d,onDurationChange:p,onEdit:()=>C(!E),onMusicUpload:dn,onBPMChange:Dn,musicUrl:ne,bpm:Y,onStartPointChange:ye,musicStartPoint:De,onMusicPanelToggle:()=>setShowMusicPanel(!showMusicPanel),isLoopingEnabled:se,setIsLoopingEnabled:J,showEditPanel:E,setShowEditPanel:C,stories:i,setStories:a,handleDelete:Zn,handleReorder:Vn}),E&&T.jsx(NT,{stories:i,onClose:()=>C(!E),onReorder:Vn,onDelete:Zn}),T.jsx(VR,{isOpen:A,progress:me,message:fe,onClose:()=>P(!1),onExport:Lr,isExporting:M}),T.jsx(MR,{isOpen:q,onClose:()=>$(!1),onSave:Ti}),T.jsx(Ib,{isOpen:te,progress:me,message:fe}),T.jsx(Cb,{isVisible:D,onClose:()=>V(!1)})]})})})})};function Nb({installPrompt:r,onInstallClick:e}){return T.jsxs("div",{className:"app-container",children:[r&&T.jsx("button",{onClick:e,style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Install App"}),T.jsx(xb,{})]})}function Rb(){const[r,e]=he.useState(null);he.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{console.log("Attempting to register service worker"),console.log("Current origin:",window.location.origin),console.log("Current pathname:",window.location.pathname);const a=await navigator.serviceWorker.register("/groove-slider-img/sw.js",{scope:"/groove-slider-img/",type:"classic"});console.log("Service Worker registered successfully:",a),console.log("Registration scope:",a.scope)}catch(a){console.error("Service Worker registration failed:",a),console.error("Full error:",JSON.stringify(a,Object.getOwnPropertyNames(a)))}});const n=a=>{a.preventDefault(),e(a)},i=a=>{console.log("App was successfully installed")};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",i)}},[]);const t=async()=>{if(r){r.prompt();const{outcome:n}=await r.userChoice;console.log(n==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null)}};return T.jsx(he.StrictMode,{children:T.jsx(Nb,{installPrompt:r,onInstallClick:t})})}zI.createRoot(document.getElementById("root")).render(T.jsx(Rb,{}));
