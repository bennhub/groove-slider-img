import{F as kI,f as qy}from"./ffmpeg.C6phY-E3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Mf={exports:{}},Sl={},Of={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function PI(){if(Wy)return Fe;Wy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function T(b){return b===null||typeof b!="object"?null:(b=_&&b[_]||b["@@iterator"],typeof b=="function"?b:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function V(b,q,ne){this.props=b,this.context=q,this.refs=k,this.updater=ne||C}V.prototype.isReactComponent={},V.prototype.setState=function(b,q){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,q,"setState")},V.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function B(){}B.prototype=V.prototype;function Q(b,q,ne){this.props=b,this.context=q,this.refs=k,this.updater=ne||C}var $=Q.prototype=new B;$.constructor=Q,x($,V.prototype),$.isPureReactComponent=!0;var Z=Array.isArray,L=Object.prototype.hasOwnProperty,U={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(b,q,ne){var me,he={},Ie=null,Re=null;if(q!=null)for(me in q.ref!==void 0&&(Re=q.ref),q.key!==void 0&&(Ie=""+q.key),q)L.call(q,me)&&!R.hasOwnProperty(me)&&(he[me]=q[me]);var de=arguments.length-2;if(de===1)he.children=ne;else if(1<de){for(var Be=Array(de),tt=0;tt<de;tt++)Be[tt]=arguments[tt+2];he.children=Be}if(b&&b.defaultProps)for(me in de=b.defaultProps,de)he[me]===void 0&&(he[me]=de[me]);return{$$typeof:r,type:b,key:Ie,ref:Re,props:he,_owner:U.current}}function N(b,q){return{$$typeof:r,type:b.type,key:q,ref:b.ref,props:b.props,_owner:b._owner}}function D(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function M(b){var q={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ne){return q[ne]})}var O=/\/+/g;function P(b,q){return typeof b=="object"&&b!==null&&b.key!=null?M(""+b.key):q.toString(36)}function ce(b,q,ne,me,he){var Ie=typeof b;(Ie==="undefined"||Ie==="boolean")&&(b=null);var Re=!1;if(b===null)Re=!0;else switch(Ie){case"string":case"number":Re=!0;break;case"object":switch(b.$$typeof){case r:case e:Re=!0}}if(Re)return Re=b,he=he(Re),b=me===""?"."+P(Re,0):me,Z(he)?(ne="",b!=null&&(ne=b.replace(O,"$&/")+"/"),ce(he,q,ne,"",function(tt){return tt})):he!=null&&(D(he)&&(he=N(he,ne+(!he.key||Re&&Re.key===he.key?"":(""+he.key).replace(O,"$&/")+"/")+b)),q.push(he)),1;if(Re=0,me=me===""?".":me+":",Z(b))for(var de=0;de<b.length;de++){Ie=b[de];var Be=me+P(Ie,de);Re+=ce(Ie,q,ne,Be,he)}else if(Be=T(b),typeof Be=="function")for(b=Be.call(b),de=0;!(Ie=b.next()).done;)Ie=Ie.value,Be=me+P(Ie,de++),Re+=ce(Ie,q,ne,Be,he);else if(Ie==="object")throw q=String(b),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Re}function ye(b,q,ne){if(b==null)return b;var me=[],he=0;return ce(b,me,"","",function(Ie){return q.call(ne,Ie,he++)}),me}function ge(b){if(b._status===-1){var q=b._result;q=q(),q.then(function(ne){(b._status===0||b._status===-1)&&(b._status=1,b._result=ne)},function(ne){(b._status===0||b._status===-1)&&(b._status=2,b._result=ne)}),b._status===-1&&(b._status=0,b._result=q)}if(b._status===1)return b._result.default;throw b._result}var le={current:null},X={transition:null},ee={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:X,ReactCurrentOwner:U};function K(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:ye,forEach:function(b,q,ne){ye(b,function(){q.apply(this,arguments)},ne)},count:function(b){var q=0;return ye(b,function(){q++}),q},toArray:function(b){return ye(b,function(q){return q})||[]},only:function(b){if(!D(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Fe.Component=V,Fe.Fragment=t,Fe.Profiler=i,Fe.PureComponent=Q,Fe.StrictMode=n,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Fe.act=K,Fe.cloneElement=function(b,q,ne){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var me=x({},b.props),he=b.key,Ie=b.ref,Re=b._owner;if(q!=null){if(q.ref!==void 0&&(Ie=q.ref,Re=U.current),q.key!==void 0&&(he=""+q.key),b.type&&b.type.defaultProps)var de=b.type.defaultProps;for(Be in q)L.call(q,Be)&&!R.hasOwnProperty(Be)&&(me[Be]=q[Be]===void 0&&de!==void 0?de[Be]:q[Be])}var Be=arguments.length-2;if(Be===1)me.children=ne;else if(1<Be){de=Array(Be);for(var tt=0;tt<Be;tt++)de[tt]=arguments[tt+2];me.children=de}return{$$typeof:r,type:b.type,key:he,ref:Ie,props:me,_owner:Re}},Fe.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:a,_context:b},b.Consumer=b},Fe.createElement=I,Fe.createFactory=function(b){var q=I.bind(null,b);return q.type=b,q},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(b){return{$$typeof:c,render:b}},Fe.isValidElement=D,Fe.lazy=function(b){return{$$typeof:g,_payload:{_status:-1,_result:b},_init:ge}},Fe.memo=function(b,q){return{$$typeof:p,type:b,compare:q===void 0?null:q}},Fe.startTransition=function(b){var q=X.transition;X.transition={};try{b()}finally{X.transition=q}},Fe.unstable_act=K,Fe.useCallback=function(b,q){return le.current.useCallback(b,q)},Fe.useContext=function(b){return le.current.useContext(b)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(b){return le.current.useDeferredValue(b)},Fe.useEffect=function(b,q){return le.current.useEffect(b,q)},Fe.useId=function(){return le.current.useId()},Fe.useImperativeHandle=function(b,q,ne){return le.current.useImperativeHandle(b,q,ne)},Fe.useInsertionEffect=function(b,q){return le.current.useInsertionEffect(b,q)},Fe.useLayoutEffect=function(b,q){return le.current.useLayoutEffect(b,q)},Fe.useMemo=function(b,q){return le.current.useMemo(b,q)},Fe.useReducer=function(b,q,ne){return le.current.useReducer(b,q,ne)},Fe.useRef=function(b){return le.current.useRef(b)},Fe.useState=function(b){return le.current.useState(b)},Fe.useSyncExternalStore=function(b,q,ne){return le.current.useSyncExternalStore(b,q,ne)},Fe.useTransition=function(){return le.current.useTransition()},Fe.version="18.3.1",Fe}var Gy;function Bp(){return Gy||(Gy=1,Of.exports=PI()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function DI(){if(Ky)return Sl;Ky=1;var r=Bp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var g,_={},T=null,C=null;p!==void 0&&(T=""+p),d.key!==void 0&&(T=""+d.key),d.ref!==void 0&&(C=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(_[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)_[g]===void 0&&(_[g]=d[g]);return{$$typeof:e,type:c,key:T,ref:C,props:_,_owner:i.current}}return Sl.Fragment=t,Sl.jsx=u,Sl.jsxs=u,Sl}var Hy;function bI(){return Hy||(Hy=1,Mf.exports=DI()),Mf.exports}var E=bI(),ae=Bp(),Oc={},Ff={exports:{}},Nn={},Lf={exports:{}},jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function VI(){return Qy||(Qy=1,function(r){function e(X,ee){var K=X.length;X.push(ee);e:for(;0<K;){var b=K-1>>>1,q=X[b];if(0<i(q,ee))X[b]=ee,X[K]=q,K=b;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],K=X.pop();if(K!==ee){X[0]=K;e:for(var b=0,q=X.length,ne=q>>>1;b<ne;){var me=2*(b+1)-1,he=X[me],Ie=me+1,Re=X[Ie];if(0>i(he,K))Ie<q&&0>i(Re,he)?(X[b]=Re,X[Ie]=K,b=Ie):(X[b]=he,X[me]=K,b=me);else if(Ie<q&&0>i(Re,K))X[b]=Re,X[Ie]=K,b=Ie;else break e}}return ee}function i(X,ee){var K=X.sortIndex-ee.sortIndex;return K!==0?K:X.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],g=1,_=null,T=3,C=!1,x=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(X){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=X)n(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function Z(X){if(k=!1,$(X),!x)if(t(d)!==null)x=!0,ge(L);else{var ee=t(p);ee!==null&&le(Z,ee.startTime-X)}}function L(X,ee){x=!1,k&&(k=!1,B(I),I=-1),C=!0;var K=T;try{for($(ee),_=t(d);_!==null&&(!(_.expirationTime>ee)||X&&!M());){var b=_.callback;if(typeof b=="function"){_.callback=null,T=_.priorityLevel;var q=b(_.expirationTime<=ee);ee=r.unstable_now(),typeof q=="function"?_.callback=q:_===t(d)&&n(d),$(ee)}else n(d);_=t(d)}if(_!==null)var ne=!0;else{var me=t(p);me!==null&&le(Z,me.startTime-ee),ne=!1}return ne}finally{_=null,T=K,C=!1}}var U=!1,R=null,I=-1,N=5,D=-1;function M(){return!(r.unstable_now()-D<N)}function O(){if(R!==null){var X=r.unstable_now();D=X;var ee=!0;try{ee=R(!0,X)}finally{ee?P():(U=!1,R=null)}}else U=!1}var P;if(typeof Q=="function")P=function(){Q(O)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ye=ce.port2;ce.port1.onmessage=O,P=function(){ye.postMessage(null)}}else P=function(){V(O,0)};function ge(X){R=X,U||(U=!0,P())}function le(X,ee){I=V(function(){X(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){x||C||(x=!0,ge(L))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(X){switch(T){case 1:case 2:case 3:var ee=3;break;default:ee=T}var K=T;T=ee;try{return X()}finally{T=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var K=T;T=X;try{return ee()}finally{T=K}},r.unstable_scheduleCallback=function(X,ee,K){var b=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?b+K:b):K=b,X){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=K+q,X={id:g++,callback:ee,priorityLevel:X,startTime:K,expirationTime:q,sortIndex:-1},K>b?(X.sortIndex=K,e(p,X),t(d)===null&&X===t(p)&&(k?(B(I),I=-1):k=!0,le(Z,K-b))):(X.sortIndex=q,e(d,X),x||C||(x=!0,ge(L))),X},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(X){var ee=T;return function(){var K=T;T=ee;try{return X.apply(this,arguments)}finally{T=K}}}}(jf)),jf}var Xy;function MI(){return Xy||(Xy=1,Lf.exports=VI()),Lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function OI(){if(Yy)return Nn;Yy=1;var r=Bp(),e=MI();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){u(s,o),u(s+"Capture",o)}function u(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function T(s){return d.call(_,s)?!0:d.call(g,s)?!1:p.test(s)?_[s]=!0:(g[s]=!0,!1)}function C(s,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,o,l,f){if(o===null||typeof o>"u"||C(s,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function k(s,o,l,f,m,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){V[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];V[o]=new k(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){V[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){V[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){V[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){V[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){V[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){V[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){V[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function Q(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(B,Q);V[o]=new k(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(B,Q);V[o]=new k(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(B,Q);V[o]=new k(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){V[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),V.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){V[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,o,l,f){var m=V.hasOwnProperty(o)?V[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,l,m,f)&&(l=null),f||m===null?T(o)&&(l===null?s.removeAttribute(o):s.setAttribute(o,""+l)):m.mustUseProperty?s[m.propertyName]=l===null?m.type===3?!1:"":l:(o=m.attributeName,f=m.attributeNamespace,l===null?s.removeAttribute(o):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?s.setAttributeNS(f,o,l):s.setAttribute(o,l))))}var Z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),U=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),X=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var K=Object.assign,b;function q(s){if(b===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);b=o&&o[1]||""}return`
`+b+s}var ne=!1;function me(s,o){if(!s||ne)return"";ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(J){var f=J}Reflect.construct(s,[],o)}else{try{o.call()}catch(J){f=J}s.call(o.prototype)}else{try{throw Error()}catch(J){f=J}s()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var m=J.stack.split(`
`),v=f.stack.split(`
`),S=m.length-1,F=v.length-1;1<=S&&0<=F&&m[S]!==v[F];)F--;for(;1<=S&&0<=F;S--,F--)if(m[S]!==v[F]){if(S!==1||F!==1)do if(S--,F--,0>F||m[S]!==v[F]){var j=`
`+m[S].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=S&&0<=F);break}}}finally{ne=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?q(s):""}function he(s){switch(s.tag){case 5:return q(s.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return s=me(s.type,!1),s;case 11:return s=me(s.type.render,!1),s;case 1:return s=me(s.type,!0),s;default:return""}}function Ie(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case U:return"Portal";case N:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case ce:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case M:return(s.displayName||"Context")+".Consumer";case D:return(s._context.displayName||"Context")+".Provider";case O:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ye:return o=s.displayName||null,o!==null?o:Ie(s.type)||"Memo";case ge:o=s._payload,s=s._init;try{return Ie(s(o))}catch{}}return null}function Re(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function de(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Be(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function tt(s){var o=Be(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function bt(s){s._valueTracker||(s._valueTracker=tt(s))}function Gt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return s&&(f=Be(s)?s.checked?"true":"false":s.value),s=f,s!==l?(o.setValue(s),!0):!1}function vn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function je(s,o){var l=o.checked;return K({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function Hn(s,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=de(o.value!=null?o.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function un(s,o){o=o.checked,o!=null&&$(s,"checked",o,!1)}function br(s,o){un(s,o);var l=de(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?_n(s,o.type,l):o.hasOwnProperty("defaultValue")&&_n(s,o.type,de(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function ut(s,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,l||o===s.value||(s.value=o),s.defaultValue=o}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function _n(s,o,l){(o!=="number"||vn(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Dn=Array.isArray;function cn(s,o,l,f){if(s=s.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=o.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&f&&(s[l].defaultSelected=!0)}else{for(l=""+de(l),o=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function ur(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hn(s,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Dn(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}s._wrapperState={initialValue:de(l)}}function Vr(s,o){var l=de(o.value),f=de(o.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),o.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function Mr(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function nt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?nt(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var wn,wi=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,l,f,m)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=wn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function cr(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(s){ns.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Or[o]=Or[s]})});function Ei(s,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Or.hasOwnProperty(s)&&Or[s]?(""+o).trim():o+"px"}function Ti(s,o){s=s.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=Ei(l,o[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,m):s[l]=m}}var Ii=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(s,o){if(o){if(Ii[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ve(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function rt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hr=null,Vt=null,bn=null;function dr(s){if(s=ul(s)){if(typeof hr!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Yu(o),hr(s.stateNode,s.type,o))}}function Vn(s){Vt?bn?bn.push(s):bn=[s]:Vt=s}function Si(){if(Vt){var s=Vt,o=bn;if(bn=Vt=null,dr(s),o)for(s=0;s<o.length;s++)dr(o[s])}}function rs(s,o){return s(o)}function Ci(){}var Mn=!1;function xi(s,o,l){if(Mn)return s(o,l);Mn=!0;try{return rs(s,o,l)}finally{Mn=!1,(Vt!==null||bn!==null)&&(Ci(),Si())}}function ht(s,o){var l=s.stateNode;if(l===null)return null;var f=Yu(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var It=!1;if(c)try{var St={};Object.defineProperty(St,"passive",{get:function(){It=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{It=!1}function Qn(s,o,l,f,m,v,S,F,j){var J=Array.prototype.slice.call(arguments,3);try{o.apply(l,J)}catch(oe){this.onError(oe)}}var fr=!1,Fr=null,pr=!1,$a=null,ld={onError:function(s){fr=!0,Fr=s}};function To(s,o,l,f,m,v,S,F,j){fr=!1,Fr=null,Qn.apply(ld,arguments)}function Tu(s,o,l,f,m,v,S,F,j){if(To.apply(this,arguments),fr){if(fr){var J=Fr;fr=!1,Fr=null}else throw Error(t(198));pr||(pr=!0,$a=J)}}function mr(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function Ai(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function gr(s){if(mr(s)!==s)throw Error(t(188))}function Iu(s){var o=s.alternate;if(!o){if(o=mr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var l=s,f=o;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return gr(m),s;if(v===f)return gr(m),o;v=v.sibling}throw Error(t(188))}if(l.return!==f.return)l=m,f=v;else{for(var S=!1,F=m.child;F;){if(F===l){S=!0,l=m,f=v;break}if(F===f){S=!0,f=m,l=v;break}F=F.sibling}if(!S){for(F=v.child;F;){if(F===l){S=!0,l=v,f=m;break}if(F===f){S=!0,f=v,l=m;break}F=F.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:o}function qa(s){return s=Iu(s),s!==null?Io(s):null}function Io(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Io(s);if(o!==null)return o;s=s.sibling}return null}var So=e.unstable_scheduleCallback,Wa=e.unstable_cancelCallback,Su=e.unstable_shouldYield,ud=e.unstable_requestPaint,st=e.unstable_now,Cu=e.unstable_getCurrentPriorityLevel,Ni=e.unstable_ImmediatePriority,Rs=e.unstable_UserBlockingPriority,Xn=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,xu=e.unstable_IdlePriority,Ri=null,On=null;function Au(s){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Ri,s,void 0,(s.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Ru,Ka=Math.log,Nu=Math.LN2;function Ru(s){return s>>>=0,s===0?32:31-(Ka(s)/Nu|0)|0}var Co=64,xo=4194304;function ks(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ki(s,o){var l=s.pendingLanes;if(l===0)return 0;var f=0,m=s.suspendedLanes,v=s.pingedLanes,S=l&268435455;if(S!==0){var F=S&~m;F!==0?f=ks(F):(v&=S,v!==0&&(f=ks(v)))}else S=l&~m,S!==0?f=ks(S):v!==0&&(f=ks(v));if(f===0)return 0;if(o!==0&&o!==f&&!(o&m)&&(m=f&-f,v=o&-o,m>=v||m===16&&(v&4194240)!==0))return o;if(f&4&&(f|=l&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)l=31-dn(o),m=1<<l,f|=s[l],o&=~m;return f}function cd(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(s,o){for(var l=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-dn(v),F=1<<S,j=m[S];j===-1?(!(F&l)||F&f)&&(m[S]=cd(F,o)):j<=o&&(s.expiredLanes|=F),v&=~F}}function Fn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Pi(){var s=Co;return Co<<=1,!(Co&4194240)&&(Co=64),s}function Ps(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function Ds(s,o,l){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-dn(o),s[o]=l}function Je(s,o){var l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var m=31-dn(l),v=1<<m;o[m]=0,f[m]=-1,s[m]=-1,l&=~v}}function bs(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var f=31-dn(l),m=1<<f;m&o|s[f]&o&&(s[f]|=o),l&=~m}}var ze=0;function Vs(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var ku,Ao,Pu,Du,bu,Ha=!1,Lr=[],Kt=null,yr=null,vr=null,Ms=new Map,Yn=new Map,jr=[],hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(s,o){switch(s){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Ms.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(o.pointerId)}}function En(s,o,l,f,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},o!==null&&(o=ul(o),o!==null&&Ao(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function dd(s,o,l,f,m){switch(o){case"focusin":return Kt=En(Kt,s,o,l,f,m),!0;case"dragenter":return yr=En(yr,s,o,l,f,m),!0;case"mouseover":return vr=En(vr,s,o,l,f,m),!0;case"pointerover":var v=m.pointerId;return Ms.set(v,En(Ms.get(v)||null,s,o,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,Yn.set(v,En(Yn.get(v)||null,s,o,l,f,m)),!0}return!1}function Mu(s){var o=Oi(s.target);if(o!==null){var l=mr(o);if(l!==null){if(o=l.tag,o===13){if(o=Ai(l),o!==null){s.blockedOn=o,bu(s.priority,function(){Pu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function is(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=No(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);He=f,l.target.dispatchEvent(f),He=null}else return o=ul(l),o!==null&&Ao(o),s.blockedOn=l,!1;o.shift()}return!0}function Di(s,o,l){is(s)&&l.delete(o)}function Ou(){Ha=!1,Kt!==null&&is(Kt)&&(Kt=null),yr!==null&&is(yr)&&(yr=null),vr!==null&&is(vr)&&(vr=null),Ms.forEach(Di),Yn.forEach(Di)}function _r(s,o){s.blockedOn===o&&(s.blockedOn=null,Ha||(Ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ou)))}function wr(s){function o(m){return _r(m,s)}if(0<Lr.length){_r(Lr[0],s);for(var l=1;l<Lr.length;l++){var f=Lr[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Kt!==null&&_r(Kt,s),yr!==null&&_r(yr,s),vr!==null&&_r(vr,s),Ms.forEach(o),Yn.forEach(o),l=0;l<jr.length;l++)f=jr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<jr.length&&(l=jr[0],l.blockedOn===null);)Mu(l),l.blockedOn===null&&jr.shift()}var os=Z.ReactCurrentBatchConfig,Os=!0;function dt(s,o,l,f){var m=ze,v=os.transition;os.transition=null;try{ze=1,Qa(s,o,l,f)}finally{ze=m,os.transition=v}}function fd(s,o,l,f){var m=ze,v=os.transition;os.transition=null;try{ze=4,Qa(s,o,l,f)}finally{ze=m,os.transition=v}}function Qa(s,o,l,f){if(Os){var m=No(s,o,l,f);if(m===null)Sd(s,o,f,bi,l),Vu(s,f);else if(dd(m,s,o,l,f))f.stopPropagation();else if(Vu(s,f),o&4&&-1<hd.indexOf(s)){for(;m!==null;){var v=ul(m);if(v!==null&&ku(v),v=No(s,o,l,f),v===null&&Sd(s,o,f,bi,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else Sd(s,o,f,null,l)}}var bi=null;function No(s,o,l,f){if(bi=null,s=rt(f),s=Oi(s),s!==null)if(o=mr(s),o===null)s=null;else if(l=o.tag,l===13){if(s=Ai(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return bi=s,null}function Xa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cu()){case Ni:return 1;case Rs:return 4;case Xn:case Ga:return 16;case xu:return 536870912;default:return 16}default:return 16}}var Ln=null,Ro=null,Tn=null;function Ya(){if(Tn)return Tn;var s,o=Ro,l=o.length,f,m="value"in Ln?Ln.value:Ln.textContent,v=m.length;for(s=0;s<l&&o[s]===m[s];s++);var S=l-s;for(f=1;f<=S&&o[l-f]===m[v-f];f++);return Tn=m.slice(s,1<f?1-f:void 0)}function ko(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Br(){return!0}function Za(){return!1}function Ht(s){function o(l,f,m,v,S){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(l=s[F],this[F]=l?l(v):v[F]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Br:Za,this.isPropagationStopped=Za,this}return K(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Br)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Br)},persist:function(){},isPersistent:Br}),o}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=Ht(Er),zr=K({},Er,{view:0,detail:0}),pd=Ht(zr),Do,as,Fs,Vi=K({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Fs&&(Fs&&s.type==="mousemove"?(Do=s.screenX-Fs.screenX,as=s.screenY-Fs.screenY):as=Do=0,Fs=s),Do)},movementY:function(s){return"movementY"in s?s.movementY:as}}),bo=Ht(Vi),Ja=K({},Vi,{dataTransfer:0}),Fu=Ht(Ja),Vo=K({},zr,{relatedTarget:0}),Mo=Ht(Vo),Lu=K({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),ls=Ht(Lu),ju=K({},Er,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bu=Ht(ju),zu=K({},Er,{data:0}),el=Ht(zu),Oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Uu[s])?!!o[s]:!1}function Ur(){return $u}var h=K({},zr,{key:function(s){if(s.key){var o=Oo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ko(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?fn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(s){return s.type==="keypress"?ko(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ko(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Ht(h),w=K({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Ht(w),G=K({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),te=Ht(G),pe=K({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Ht(pe),Mt=K({},Vi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Ht(Mt),jt=[9,13,27,32],kt=c&&"CompositionEvent"in window,Zn=null;c&&"documentMode"in document&&(Zn=document.documentMode);var jn=c&&"TextEvent"in window&&!Zn,Mi=c&&(!kt||Zn&&8<Zn&&11>=Zn),Fo=" ",Lm=!1;function jm(s,o){switch(s){case"keyup":return jt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function AT(s,o){switch(s){case"compositionend":return Bm(o);case"keypress":return o.which!==32?null:(Lm=!0,Fo);case"textInput":return s=o.data,s===Fo&&Lm?null:s;default:return null}}function NT(s,o){if(Lo)return s==="compositionend"||!kt&&jm(s,o)?(s=Ya(),Tn=Ro=Ln=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Mi&&o.locale!=="ko"?null:o.data;default:return null}}var RT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!RT[s.type]:o==="textarea"}function Um(s,o,l,f){Vn(f),o=Hu(o,"onChange"),0<o.length&&(l=new Po("onChange","change",null,l,f),s.push({event:l,listeners:o}))}var tl=null,nl=null;function kT(s){og(s,0)}function qu(s){var o=$o(s);if(Gt(o))return s}function PT(s,o){if(s==="change")return o}var $m=!1;if(c){var md;if(c){var gd="oninput"in document;if(!gd){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),gd=typeof qm.oninput=="function"}md=gd}else md=!1;$m=md&&(!document.documentMode||9<document.documentMode)}function Wm(){tl&&(tl.detachEvent("onpropertychange",Gm),nl=tl=null)}function Gm(s){if(s.propertyName==="value"&&qu(nl)){var o=[];Um(o,nl,s,rt(s)),xi(kT,o)}}function DT(s,o,l){s==="focusin"?(Wm(),tl=o,nl=l,tl.attachEvent("onpropertychange",Gm)):s==="focusout"&&Wm()}function bT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(nl)}function VT(s,o){if(s==="click")return qu(o)}function MT(s,o){if(s==="input"||s==="change")return qu(o)}function OT(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Tr=typeof Object.is=="function"?Object.is:OT;function rl(s,o){if(Tr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!d.call(o,m)||!Tr(s[m],o[m]))return!1}return!0}function Km(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hm(s,o){var l=Km(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=o&&f>=o)return{node:l,offset:o-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Km(l)}}function Qm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Qm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Xm(){for(var s=window,o=vn();o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=vn(s.document)}return o}function yd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function FT(s){var o=Xm(),l=s.focusedElem,f=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&Qm(l.ownerDocument.documentElement,l)){if(f!==null&&yd(l)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(s,l.value.length);else if(s=(o=l.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=l.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!s.extend&&v>f&&(m=f,f=v,v=m),m=Hm(l,v);var S=Hm(l,f);m&&S&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),v>f?(s.addRange(o),s.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),s.addRange(o)))}}for(o=[],s=l;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)s=o[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var LT=c&&"documentMode"in document&&11>=document.documentMode,jo=null,vd=null,sl=null,_d=!1;function Ym(s,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_d||jo==null||jo!==vn(f)||(f=jo,"selectionStart"in f&&yd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sl&&rl(sl,f)||(sl=f,f=Hu(vd,"onSelect"),0<f.length&&(o=new Po("onSelect","select",null,o,l),s.push({event:o,listeners:f}),o.target=jo)))}function Wu(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Bo={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},wd={},Zm={};c&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Gu(s){if(wd[s])return wd[s];if(!Bo[s])return s;var o=Bo[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in Zm)return wd[s]=o[l];return s}var Jm=Gu("animationend"),eg=Gu("animationiteration"),tg=Gu("animationstart"),ng=Gu("transitionend"),rg=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(s,o){rg.set(s,o),a(o,[s])}for(var Ed=0;Ed<sg.length;Ed++){var Td=sg[Ed],jT=Td.toLowerCase(),BT=Td[0].toUpperCase()+Td.slice(1);Ls(jT,"on"+BT)}Ls(Jm,"onAnimationEnd"),Ls(eg,"onAnimationIteration"),Ls(tg,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(ng,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zT=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function ig(s,o,l){var f=s.type||"unknown-event";s.currentTarget=l,Tu(f,o,void 0,s),s.currentTarget=null}function og(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],m=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var S=f.length-1;0<=S;S--){var F=f[S],j=F.instance,J=F.currentTarget;if(F=F.listener,j!==v&&m.isPropagationStopped())break e;ig(m,F,J),v=j}else for(S=0;S<f.length;S++){if(F=f[S],j=F.instance,J=F.currentTarget,F=F.listener,j!==v&&m.isPropagationStopped())break e;ig(m,F,J),v=j}}}if(pr)throw s=$a,pr=!1,$a=null,s}function ot(s,o){var l=o[kd];l===void 0&&(l=o[kd]=new Set);var f=s+"__bubble";l.has(f)||(ag(o,s,2,!1),l.add(f))}function Id(s,o,l){var f=0;o&&(f|=4),ag(l,s,f,o)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function ol(s){if(!s[Ku]){s[Ku]=!0,n.forEach(function(l){l!=="selectionchange"&&(zT.has(l)||Id(l,!1,s),Id(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ku]||(o[Ku]=!0,Id("selectionchange",!1,o))}}function ag(s,o,l,f){switch(Xa(o)){case 1:var m=dt;break;case 4:m=fd;break;default:m=Qa}l=m.bind(null,o,l,s),m=void 0,!It||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,l,{capture:!0,passive:m}):s.addEventListener(o,l,!0):m!==void 0?s.addEventListener(o,l,{passive:m}):s.addEventListener(o,l,!1)}function Sd(s,o,l,f,m){var v=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var F=f.stateNode.containerInfo;if(F===m||F.nodeType===8&&F.parentNode===m)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;S=S.return}for(;F!==null;){if(S=Oi(F),S===null)return;if(j=S.tag,j===5||j===6){f=v=S;continue e}F=F.parentNode}}f=f.return}xi(function(){var J=v,oe=rt(l),ue=[];e:{var se=rg.get(s);if(se!==void 0){var _e=Po,Ee=s;switch(s){case"keypress":if(ko(l)===0)break e;case"keydown":case"keyup":_e=y;break;case"focusin":Ee="focus",_e=Mo;break;case"focusout":Ee="blur",_e=Mo;break;case"beforeblur":case"afterblur":_e=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=te;break;case Jm:case eg:case tg:_e=ls;break;case ng:_e=Qe;break;case"scroll":_e=pd;break;case"wheel":_e=$e;break;case"copy":case"cut":case"paste":_e=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=A}var Ce=(o&4)!==0,Ct=!Ce&&s==="scroll",H=Ce?se!==null?se+"Capture":null:se;Ce=[];for(var z=J,Y;z!==null;){Y=z;var fe=Y.stateNode;if(Y.tag===5&&fe!==null&&(Y=fe,H!==null&&(fe=ht(z,H),fe!=null&&Ce.push(al(z,fe,Y)))),Ct)break;z=z.return}0<Ce.length&&(se=new _e(se,Ee,null,l,oe),ue.push({event:se,listeners:Ce}))}}if(!(o&7)){e:{if(se=s==="mouseover"||s==="pointerover",_e=s==="mouseout"||s==="pointerout",se&&l!==He&&(Ee=l.relatedTarget||l.fromElement)&&(Oi(Ee)||Ee[us]))break e;if((_e||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,_e?(Ee=l.relatedTarget||l.toElement,_e=J,Ee=Ee?Oi(Ee):null,Ee!==null&&(Ct=mr(Ee),Ee!==Ct||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(_e=null,Ee=J),_e!==Ee)){if(Ce=bo,fe="onMouseLeave",H="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=A,fe="onPointerLeave",H="onPointerEnter",z="pointer"),Ct=_e==null?se:$o(_e),Y=Ee==null?se:$o(Ee),se=new Ce(fe,z+"leave",_e,l,oe),se.target=Ct,se.relatedTarget=Y,fe=null,Oi(oe)===J&&(Ce=new Ce(H,z+"enter",Ee,l,oe),Ce.target=Y,Ce.relatedTarget=Ct,fe=Ce),Ct=fe,_e&&Ee)t:{for(Ce=_e,H=Ee,z=0,Y=Ce;Y;Y=zo(Y))z++;for(Y=0,fe=H;fe;fe=zo(fe))Y++;for(;0<z-Y;)Ce=zo(Ce),z--;for(;0<Y-z;)H=zo(H),Y--;for(;z--;){if(Ce===H||H!==null&&Ce===H.alternate)break t;Ce=zo(Ce),H=zo(H)}Ce=null}else Ce=null;_e!==null&&lg(ue,se,_e,Ce,!1),Ee!==null&&Ct!==null&&lg(ue,Ct,Ee,Ce,!0)}}e:{if(se=J?$o(J):window,_e=se.nodeName&&se.nodeName.toLowerCase(),_e==="select"||_e==="input"&&se.type==="file")var Ae=PT;else if(zm(se))if($m)Ae=MT;else{Ae=bT;var De=DT}else(_e=se.nodeName)&&_e.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ae=VT);if(Ae&&(Ae=Ae(s,J))){Um(ue,Ae,l,oe);break e}De&&De(s,se,J),s==="focusout"&&(De=se._wrapperState)&&De.controlled&&se.type==="number"&&_n(se,"number",se.value)}switch(De=J?$o(J):window,s){case"focusin":(zm(De)||De.contentEditable==="true")&&(jo=De,vd=J,sl=null);break;case"focusout":sl=vd=jo=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Ym(ue,l,oe);break;case"selectionchange":if(LT)break;case"keydown":case"keyup":Ym(ue,l,oe)}var be;if(kt)e:{switch(s){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Lo?jm(s,l)&&(Me="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(Mi&&l.locale!=="ko"&&(Lo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Lo&&(be=Ya()):(Ln=oe,Ro="value"in Ln?Ln.value:Ln.textContent,Lo=!0)),De=Hu(J,Me),0<De.length&&(Me=new el(Me,s,null,l,oe),ue.push({event:Me,listeners:De}),be?Me.data=be:(be=Bm(l),be!==null&&(Me.data=be)))),(be=jn?AT(s,l):NT(s,l))&&(J=Hu(J,"onBeforeInput"),0<J.length&&(oe=new el("onBeforeInput","beforeinput",null,l,oe),ue.push({event:oe,listeners:J}),oe.data=be))}og(ue,o)})}function al(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Hu(s,o){for(var l=o+"Capture",f=[];s!==null;){var m=s,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=ht(s,l),v!=null&&f.unshift(al(s,v,m)),v=ht(s,o),v!=null&&f.push(al(s,v,m))),s=s.return}return f}function zo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function lg(s,o,l,f,m){for(var v=o._reactName,S=[];l!==null&&l!==f;){var F=l,j=F.alternate,J=F.stateNode;if(j!==null&&j===f)break;F.tag===5&&J!==null&&(F=J,m?(j=ht(l,v),j!=null&&S.unshift(al(l,j,F))):m||(j=ht(l,v),j!=null&&S.push(al(l,j,F)))),l=l.return}S.length!==0&&s.push({event:o,listeners:S})}var UT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function ug(s){return(typeof s=="string"?s:""+s).replace(UT,`
`).replace($T,"")}function Qu(s,o,l){if(o=ug(o),ug(s)!==o&&l)throw Error(t(425))}function Xu(){}var Cd=null,xd=null;function Ad(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(s){return cg.resolve(null).then(s).catch(GT)}:Nd;function GT(s){setTimeout(function(){throw s})}function Rd(s,o){var l=o,f=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){s.removeChild(m),wr(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);wr(o)}function js(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function hg(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),$r="__reactFiber$"+Uo,ll="__reactProps$"+Uo,us="__reactContainer$"+Uo,kd="__reactEvents$"+Uo,KT="__reactListeners$"+Uo,HT="__reactHandles$"+Uo;function Oi(s){var o=s[$r];if(o)return o;for(var l=s.parentNode;l;){if(o=l[us]||l[$r]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=hg(s);s!==null;){if(l=s[$r])return l;s=hg(s)}return o}s=l,l=s.parentNode}return null}function ul(s){return s=s[$r]||s[us],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $o(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Yu(s){return s[ll]||null}var Pd=[],qo=-1;function Bs(s){return{current:s}}function at(s){0>qo||(s.current=Pd[qo],Pd[qo]=null,qo--)}function it(s,o){qo++,Pd[qo]=s.current,s.current=o}var zs={},Zt=Bs(zs),In=Bs(!1),Fi=zs;function Wo(s,o){var l=s.type.contextTypes;if(!l)return zs;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=o[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(s){return s=s.childContextTypes,s!=null}function Zu(){at(In),at(Zt)}function dg(s,o,l){if(Zt.current!==zs)throw Error(t(168));it(Zt,o),it(In,l)}function fg(s,o,l){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(t(108,Re(s)||"Unknown",m));return K({},l,f)}function Ju(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zs,Fi=Zt.current,it(Zt,s),it(In,In.current),!0}function pg(s,o,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=fg(s,o,Fi),f.__reactInternalMemoizedMergedChildContext=s,at(In),at(Zt),it(Zt,s)):at(In),it(In,l)}var cs=null,ec=!1,Dd=!1;function mg(s){cs===null?cs=[s]:cs.push(s)}function QT(s){ec=!0,mg(s)}function Us(){if(!Dd&&cs!==null){Dd=!0;var s=0,o=ze;try{var l=cs;for(ze=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}cs=null,ec=!1}catch(m){throw cs!==null&&(cs=cs.slice(s+1)),So(Ni,Us),m}finally{ze=o,Dd=!1}}return null}var Go=[],Ko=0,tc=null,nc=0,Jn=[],er=0,Li=null,hs=1,ds="";function ji(s,o){Go[Ko++]=nc,Go[Ko++]=tc,tc=s,nc=o}function gg(s,o,l){Jn[er++]=hs,Jn[er++]=ds,Jn[er++]=Li,Li=s;var f=hs;s=ds;var m=32-dn(f)-1;f&=~(1<<m),l+=1;var v=32-dn(o)+m;if(30<v){var S=m-m%5;v=(f&(1<<S)-1).toString(32),f>>=S,m-=S,hs=1<<32-dn(o)+m|l<<m|f,ds=v+s}else hs=1<<v|l<<m|f,ds=s}function bd(s){s.return!==null&&(ji(s,1),gg(s,1,0))}function Vd(s){for(;s===tc;)tc=Go[--Ko],Go[Ko]=null,nc=Go[--Ko],Go[Ko]=null;for(;s===Li;)Li=Jn[--er],Jn[er]=null,ds=Jn[--er],Jn[er]=null,hs=Jn[--er],Jn[er]=null}var Bn=null,zn=null,ft=!1,Ir=null;function yg(s,o){var l=sr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=s,o=s.deletions,o===null?(s.deletions=[l],s.flags|=16):o.push(l)}function vg(s,o){switch(s.tag){case 5:var l=s.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Bn=s,zn=js(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Bn=s,zn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Li!==null?{id:hs,overflow:ds}:null,s.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=sr(18,null,null,0),l.stateNode=o,l.return=s,s.child=l,Bn=s,zn=null,!0):!1;default:return!1}}function Md(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(ft){var o=zn;if(o){var l=o;if(!vg(s,o)){if(Md(s))throw Error(t(418));o=js(l.nextSibling);var f=Bn;o&&vg(s,o)?yg(f,l):(s.flags=s.flags&-4097|2,ft=!1,Bn=s)}}else{if(Md(s))throw Error(t(418));s.flags=s.flags&-4097|2,ft=!1,Bn=s}}}function _g(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bn=s}function rc(s){if(s!==Bn)return!1;if(!ft)return _g(s),ft=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Ad(s.type,s.memoizedProps)),o&&(o=zn)){if(Md(s))throw wg(),Error(t(418));for(;o;)yg(s,o),o=js(o.nextSibling)}if(_g(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(o===0){zn=js(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}s=s.nextSibling}zn=null}}else zn=Bn?js(s.stateNode.nextSibling):null;return!0}function wg(){for(var s=zn;s;)s=js(s.nextSibling)}function Ho(){zn=Bn=null,ft=!1}function Fd(s){Ir===null?Ir=[s]:Ir.push(s)}var XT=Z.ReactCurrentBatchConfig;function cl(s,o,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var m=f,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var F=m.refs;S===null?delete F[v]:F[v]=S},o._stringRef=v,o)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function sc(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Eg(s){var o=s._init;return o(s._payload)}function Tg(s){function o(H,z){if(s){var Y=H.deletions;Y===null?(H.deletions=[z],H.flags|=16):Y.push(z)}}function l(H,z){if(!s)return null;for(;z!==null;)o(H,z),z=z.sibling;return null}function f(H,z){for(H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function m(H,z){return H=Xs(H,z),H.index=0,H.sibling=null,H}function v(H,z,Y){return H.index=Y,s?(Y=H.alternate,Y!==null?(Y=Y.index,Y<z?(H.flags|=2,z):Y):(H.flags|=2,z)):(H.flags|=1048576,z)}function S(H){return s&&H.alternate===null&&(H.flags|=2),H}function F(H,z,Y,fe){return z===null||z.tag!==6?(z=Rf(Y,H.mode,fe),z.return=H,z):(z=m(z,Y),z.return=H,z)}function j(H,z,Y,fe){var Ae=Y.type;return Ae===R?oe(H,z,Y.props.children,fe,Y.key):z!==null&&(z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ge&&Eg(Ae)===z.type)?(fe=m(z,Y.props),fe.ref=cl(H,z,Y),fe.return=H,fe):(fe=Nc(Y.type,Y.key,Y.props,null,H.mode,fe),fe.ref=cl(H,z,Y),fe.return=H,fe)}function J(H,z,Y,fe){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=kf(Y,H.mode,fe),z.return=H,z):(z=m(z,Y.children||[]),z.return=H,z)}function oe(H,z,Y,fe,Ae){return z===null||z.tag!==7?(z=Ki(Y,H.mode,fe,Ae),z.return=H,z):(z=m(z,Y),z.return=H,z)}function ue(H,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Rf(""+z,H.mode,Y),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return Y=Nc(z.type,z.key,z.props,null,H.mode,Y),Y.ref=cl(H,null,z),Y.return=H,Y;case U:return z=kf(z,H.mode,Y),z.return=H,z;case ge:var fe=z._init;return ue(H,fe(z._payload),Y)}if(Dn(z)||ee(z))return z=Ki(z,H.mode,Y,null),z.return=H,z;sc(H,z)}return null}function se(H,z,Y,fe){var Ae=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ae!==null?null:F(H,z,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:return Y.key===Ae?j(H,z,Y,fe):null;case U:return Y.key===Ae?J(H,z,Y,fe):null;case ge:return Ae=Y._init,se(H,z,Ae(Y._payload),fe)}if(Dn(Y)||ee(Y))return Ae!==null?null:oe(H,z,Y,fe,null);sc(H,Y)}return null}function _e(H,z,Y,fe,Ae){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return H=H.get(Y)||null,F(z,H,""+fe,Ae);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case L:return H=H.get(fe.key===null?Y:fe.key)||null,j(z,H,fe,Ae);case U:return H=H.get(fe.key===null?Y:fe.key)||null,J(z,H,fe,Ae);case ge:var De=fe._init;return _e(H,z,Y,De(fe._payload),Ae)}if(Dn(fe)||ee(fe))return H=H.get(Y)||null,oe(z,H,fe,Ae,null);sc(z,fe)}return null}function Ee(H,z,Y,fe){for(var Ae=null,De=null,be=z,Me=z=0,Ut=null;be!==null&&Me<Y.length;Me++){be.index>Me?(Ut=be,be=null):Ut=be.sibling;var Ke=se(H,be,Y[Me],fe);if(Ke===null){be===null&&(be=Ut);break}s&&be&&Ke.alternate===null&&o(H,be),z=v(Ke,z,Me),De===null?Ae=Ke:De.sibling=Ke,De=Ke,be=Ut}if(Me===Y.length)return l(H,be),ft&&ji(H,Me),Ae;if(be===null){for(;Me<Y.length;Me++)be=ue(H,Y[Me],fe),be!==null&&(z=v(be,z,Me),De===null?Ae=be:De.sibling=be,De=be);return ft&&ji(H,Me),Ae}for(be=f(H,be);Me<Y.length;Me++)Ut=_e(be,H,Me,Y[Me],fe),Ut!==null&&(s&&Ut.alternate!==null&&be.delete(Ut.key===null?Me:Ut.key),z=v(Ut,z,Me),De===null?Ae=Ut:De.sibling=Ut,De=Ut);return s&&be.forEach(function(Ys){return o(H,Ys)}),ft&&ji(H,Me),Ae}function Ce(H,z,Y,fe){var Ae=ee(Y);if(typeof Ae!="function")throw Error(t(150));if(Y=Ae.call(Y),Y==null)throw Error(t(151));for(var De=Ae=null,be=z,Me=z=0,Ut=null,Ke=Y.next();be!==null&&!Ke.done;Me++,Ke=Y.next()){be.index>Me?(Ut=be,be=null):Ut=be.sibling;var Ys=se(H,be,Ke.value,fe);if(Ys===null){be===null&&(be=Ut);break}s&&be&&Ys.alternate===null&&o(H,be),z=v(Ys,z,Me),De===null?Ae=Ys:De.sibling=Ys,De=Ys,be=Ut}if(Ke.done)return l(H,be),ft&&ji(H,Me),Ae;if(be===null){for(;!Ke.done;Me++,Ke=Y.next())Ke=ue(H,Ke.value,fe),Ke!==null&&(z=v(Ke,z,Me),De===null?Ae=Ke:De.sibling=Ke,De=Ke);return ft&&ji(H,Me),Ae}for(be=f(H,be);!Ke.done;Me++,Ke=Y.next())Ke=_e(be,H,Me,Ke.value,fe),Ke!==null&&(s&&Ke.alternate!==null&&be.delete(Ke.key===null?Me:Ke.key),z=v(Ke,z,Me),De===null?Ae=Ke:De.sibling=Ke,De=Ke);return s&&be.forEach(function(RI){return o(H,RI)}),ft&&ji(H,Me),Ae}function Ct(H,z,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:e:{for(var Ae=Y.key,De=z;De!==null;){if(De.key===Ae){if(Ae=Y.type,Ae===R){if(De.tag===7){l(H,De.sibling),z=m(De,Y.props.children),z.return=H,H=z;break e}}else if(De.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ge&&Eg(Ae)===De.type){l(H,De.sibling),z=m(De,Y.props),z.ref=cl(H,De,Y),z.return=H,H=z;break e}l(H,De);break}else o(H,De);De=De.sibling}Y.type===R?(z=Ki(Y.props.children,H.mode,fe,Y.key),z.return=H,H=z):(fe=Nc(Y.type,Y.key,Y.props,null,H.mode,fe),fe.ref=cl(H,z,Y),fe.return=H,H=fe)}return S(H);case U:e:{for(De=Y.key;z!==null;){if(z.key===De)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){l(H,z.sibling),z=m(z,Y.children||[]),z.return=H,H=z;break e}else{l(H,z);break}else o(H,z);z=z.sibling}z=kf(Y,H.mode,fe),z.return=H,H=z}return S(H);case ge:return De=Y._init,Ct(H,z,De(Y._payload),fe)}if(Dn(Y))return Ee(H,z,Y,fe);if(ee(Y))return Ce(H,z,Y,fe);sc(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,z!==null&&z.tag===6?(l(H,z.sibling),z=m(z,Y),z.return=H,H=z):(l(H,z),z=Rf(Y,H.mode,fe),z.return=H,H=z),S(H)):l(H,z)}return Ct}var Qo=Tg(!0),Ig=Tg(!1),ic=Bs(null),oc=null,Xo=null,Ld=null;function jd(){Ld=Xo=oc=null}function Bd(s){var o=ic.current;at(ic),s._currentValue=o}function zd(s,o,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===l)break;s=s.return}}function Yo(s,o){oc=s,Ld=Xo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(Cn=!0),s.firstContext=null)}function tr(s){var o=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:o,next:null},Xo===null){if(oc===null)throw Error(t(308));Xo=s,oc.dependencies={lanes:0,firstContext:s}}else Xo=Xo.next=s;return o}var Bi=null;function Ud(s){Bi===null?Bi=[s]:Bi.push(s)}function Sg(s,o,l,f){var m=o.interleaved;return m===null?(l.next=l,Ud(o)):(l.next=m.next,m.next=l),o.interleaved=l,fs(s,f)}function fs(s,o){s.lanes|=o;var l=s.alternate;for(l!==null&&(l.lanes|=o),l=s,s=s.return;s!==null;)s.childLanes|=o,l=s.alternate,l!==null&&(l.childLanes|=o),l=s,s=s.return;return l.tag===3?l.stateNode:null}var $s=!1;function $d(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ps(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function qs(s,o,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,Ge&2){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,fs(s,l)}return m=f.interleaved,m===null?(o.next=o,Ud(f)):(o.next=m.next,m.next=o),f.interleaved=o,fs(s,l)}function ac(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,bs(s,l)}}function xg(s,o){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?m=v=o:v=v.next=o}else m=v=o;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}function lc(s,o,l,f){var m=s.updateQueue;$s=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,F=m.shared.pending;if(F!==null){m.shared.pending=null;var j=F,J=j.next;j.next=null,S===null?v=J:S.next=J,S=j;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,F=oe.lastBaseUpdate,F!==S&&(F===null?oe.firstBaseUpdate=J:F.next=J,oe.lastBaseUpdate=j))}if(v!==null){var ue=m.baseState;S=0,oe=J=j=null,F=v;do{var se=F.lane,_e=F.eventTime;if((f&se)===se){oe!==null&&(oe=oe.next={eventTime:_e,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Ee=s,Ce=F;switch(se=o,_e=l,Ce.tag){case 1:if(Ee=Ce.payload,typeof Ee=="function"){ue=Ee.call(_e,ue,se);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ce.payload,se=typeof Ee=="function"?Ee.call(_e,ue,se):Ee,se==null)break e;ue=K({},ue,se);break e;case 2:$s=!0}}F.callback!==null&&F.lane!==0&&(s.flags|=64,se=m.effects,se===null?m.effects=[F]:se.push(F))}else _e={eventTime:_e,lane:se,tag:F.tag,payload:F.payload,callback:F.callback,next:null},oe===null?(J=oe=_e,j=ue):oe=oe.next=_e,S|=se;if(F=F.next,F===null){if(F=m.shared.pending,F===null)break;se=F,F=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(oe===null&&(j=ue),m.baseState=j,m.firstBaseUpdate=J,m.lastBaseUpdate=oe,o=m.shared.interleaved,o!==null){m=o;do S|=m.lane,m=m.next;while(m!==o)}else v===null&&(m.shared.lanes=0);$i|=S,s.lanes=S,s.memoizedState=ue}}function Ag(s,o,l){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var hl={},qr=Bs(hl),dl=Bs(hl),fl=Bs(hl);function zi(s){if(s===hl)throw Error(t(174));return s}function qd(s,o){switch(it(fl,o),it(dl,s),it(qr,hl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ct(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ct(o,s)}at(qr),it(qr,o)}function Zo(){at(qr),at(dl),at(fl)}function Ng(s){zi(fl.current);var o=zi(qr.current),l=ct(o,s.type);o!==l&&(it(dl,s),it(qr,l))}function Wd(s){dl.current===s&&(at(qr),at(dl))}var gt=Bs(0);function uc(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Gd=[];function Kd(){for(var s=0;s<Gd.length;s++)Gd[s]._workInProgressVersionPrimary=null;Gd.length=0}var cc=Z.ReactCurrentDispatcher,Hd=Z.ReactCurrentBatchConfig,Ui=0,yt=null,Ot=null,Bt=null,hc=!1,pl=!1,ml=0,YT=0;function Jt(){throw Error(t(321))}function Qd(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Tr(s[l],o[l]))return!1;return!0}function Xd(s,o,l,f,m,v){if(Ui=v,yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,cc.current=s===null||s.memoizedState===null?tI:nI,s=l(f,m),pl){v=0;do{if(pl=!1,ml=0,25<=v)throw Error(t(301));v+=1,Bt=Ot=null,o.updateQueue=null,cc.current=rI,s=l(f,m)}while(pl)}if(cc.current=pc,o=Ot!==null&&Ot.next!==null,Ui=0,Bt=Ot=yt=null,hc=!1,o)throw Error(t(300));return s}function Yd(){var s=ml!==0;return ml=0,s}function Wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?yt.memoizedState=Bt=s:Bt=Bt.next=s,Bt}function nr(){if(Ot===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var o=Bt===null?yt.memoizedState:Bt.next;if(o!==null)Bt=o,Ot=s;else{if(s===null)throw Error(t(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Bt===null?yt.memoizedState=Bt=s:Bt=Bt.next=s}return Bt}function gl(s,o){return typeof o=="function"?o(s):o}function Zd(s){var o=nr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=Ot,m=f.baseQueue,v=l.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}f.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,f=f.baseState;var F=S=null,j=null,J=v;do{var oe=J.lane;if((Ui&oe)===oe)j!==null&&(j=j.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:s(f,J.action);else{var ue={lane:oe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};j===null?(F=j=ue,S=f):j=j.next=ue,yt.lanes|=oe,$i|=oe}J=J.next}while(J!==null&&J!==v);j===null?S=f:j.next=F,Tr(f,o.memoizedState)||(Cn=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=j,l.lastRenderedState=f}if(s=l.interleaved,s!==null){m=s;do v=m.lane,yt.lanes|=v,$i|=v,m=m.next;while(m!==s)}else m===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Jd(s){var o=nr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,m=l.pending,v=o.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do v=s(v,S.action),S=S.next;while(S!==m);Tr(v,o.memoizedState)||(Cn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,f]}function Rg(){}function kg(s,o){var l=yt,f=nr(),m=o(),v=!Tr(f.memoizedState,m);if(v&&(f.memoizedState=m,Cn=!0),f=f.queue,ef(bg.bind(null,l,f,s),[s]),f.getSnapshot!==o||v||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,yl(9,Dg.bind(null,l,f,m,o),void 0,null),zt===null)throw Error(t(349));Ui&30||Pg(l,o,m)}return m}function Pg(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Dg(s,o,l,f){o.value=l,o.getSnapshot=f,Vg(o)&&Mg(s)}function bg(s,o,l){return l(function(){Vg(o)&&Mg(s)})}function Vg(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Tr(s,l)}catch{return!0}}function Mg(s){var o=fs(s,1);o!==null&&Ar(o,s,1,-1)}function Og(s){var o=Wr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:s},o.queue=s,s=s.dispatch=eI.bind(null,yt,s),[o.memoizedState,s]}function yl(s,o,l,f){return s={tag:s,create:o,destroy:l,deps:f,next:null},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.lastEffect=s.next=s):(l=o.lastEffect,l===null?o.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,o.lastEffect=s)),s}function Fg(){return nr().memoizedState}function dc(s,o,l,f){var m=Wr();yt.flags|=s,m.memoizedState=yl(1|o,l,void 0,f===void 0?null:f)}function fc(s,o,l,f){var m=nr();f=f===void 0?null:f;var v=void 0;if(Ot!==null){var S=Ot.memoizedState;if(v=S.destroy,f!==null&&Qd(f,S.deps)){m.memoizedState=yl(o,l,v,f);return}}yt.flags|=s,m.memoizedState=yl(1|o,l,v,f)}function Lg(s,o){return dc(8390656,8,s,o)}function ef(s,o){return fc(2048,8,s,o)}function jg(s,o){return fc(4,2,s,o)}function Bg(s,o){return fc(4,4,s,o)}function zg(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ug(s,o,l){return l=l!=null?l.concat([s]):null,fc(4,4,zg.bind(null,o,s),l)}function tf(){}function $g(s,o){var l=nr();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(l.memoizedState=[s,o],s)}function qg(s,o){var l=nr();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(s=s(),l.memoizedState=[s,o],s)}function Wg(s,o,l){return Ui&21?(Tr(l,o)||(l=Pi(),yt.lanes|=l,$i|=l,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,Cn=!0),s.memoizedState=l)}function ZT(s,o){var l=ze;ze=l!==0&&4>l?l:4,s(!0);var f=Hd.transition;Hd.transition={};try{s(!1),o()}finally{ze=l,Hd.transition=f}}function Gg(){return nr().memoizedState}function JT(s,o,l){var f=Hs(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},Kg(s))Hg(o,l);else if(l=Sg(s,o,l,f),l!==null){var m=mn();Ar(l,s,f,m),Qg(l,o,f)}}function eI(s,o,l){var f=Hs(s),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kg(s))Hg(o,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,F=v(S,l);if(m.hasEagerState=!0,m.eagerState=F,Tr(F,S)){var j=o.interleaved;j===null?(m.next=m,Ud(o)):(m.next=j.next,j.next=m),o.interleaved=m;return}}catch{}finally{}l=Sg(s,o,m,f),l!==null&&(m=mn(),Ar(l,s,f,m),Qg(l,o,f))}}function Kg(s){var o=s.alternate;return s===yt||o!==null&&o===yt}function Hg(s,o){pl=hc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function Qg(s,o,l){if(l&4194240){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,bs(s,l)}}var pc={readContext:tr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},tI={readContext:tr,useCallback:function(s,o){return Wr().memoizedState=[s,o===void 0?null:o],s},useContext:tr,useEffect:Lg,useImperativeHandle:function(s,o,l){return l=l!=null?l.concat([s]):null,dc(4194308,4,zg.bind(null,o,s),l)},useLayoutEffect:function(s,o){return dc(4194308,4,s,o)},useInsertionEffect:function(s,o){return dc(4,2,s,o)},useMemo:function(s,o){var l=Wr();return o=o===void 0?null:o,s=s(),l.memoizedState=[s,o],s},useReducer:function(s,o,l){var f=Wr();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=JT.bind(null,yt,s),[f.memoizedState,s]},useRef:function(s){var o=Wr();return s={current:s},o.memoizedState=s},useState:Og,useDebugValue:tf,useDeferredValue:function(s){return Wr().memoizedState=s},useTransition:function(){var s=Og(!1),o=s[0];return s=ZT.bind(null,s[1]),Wr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,l){var f=yt,m=Wr();if(ft){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),zt===null)throw Error(t(349));Ui&30||Pg(f,o,l)}m.memoizedState=l;var v={value:l,getSnapshot:o};return m.queue=v,Lg(bg.bind(null,f,v,s),[s]),f.flags|=2048,yl(9,Dg.bind(null,f,v,l,o),void 0,null),l},useId:function(){var s=Wr(),o=zt.identifierPrefix;if(ft){var l=ds,f=hs;l=(f&~(1<<32-dn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=ml++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=YT++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},nI={readContext:tr,useCallback:$g,useContext:tr,useEffect:ef,useImperativeHandle:Ug,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Zd,useRef:Fg,useState:function(){return Zd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=nr();return Wg(o,Ot.memoizedState,s)},useTransition:function(){var s=Zd(gl)[0],o=nr().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:kg,useId:Gg,unstable_isNewReconciler:!1},rI={readContext:tr,useCallback:$g,useContext:tr,useEffect:ef,useImperativeHandle:Ug,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Jd,useRef:Fg,useState:function(){return Jd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=nr();return Ot===null?o.memoizedState=s:Wg(o,Ot.memoizedState,s)},useTransition:function(){var s=Jd(gl)[0],o=nr().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:kg,useId:Gg,unstable_isNewReconciler:!1};function Sr(s,o){if(s&&s.defaultProps){o=K({},o),s=s.defaultProps;for(var l in s)o[l]===void 0&&(o[l]=s[l]);return o}return o}function nf(s,o,l,f){o=s.memoizedState,l=l(f,o),l=l==null?o:K({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var mc={isMounted:function(s){return(s=s._reactInternals)?mr(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var f=mn(),m=Hs(s),v=ps(f,m);v.payload=o,l!=null&&(v.callback=l),o=qs(s,v,m),o!==null&&(Ar(o,s,m,f),ac(o,s,m))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var f=mn(),m=Hs(s),v=ps(f,m);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=qs(s,v,m),o!==null&&(Ar(o,s,m,f),ac(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=mn(),f=Hs(s),m=ps(l,f);m.tag=2,o!=null&&(m.callback=o),o=qs(s,m,f),o!==null&&(Ar(o,s,f,l),ac(o,s,f))}};function Xg(s,o,l,f,m,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,S):o.prototype&&o.prototype.isPureReactComponent?!rl(l,f)||!rl(m,v):!0}function Yg(s,o,l){var f=!1,m=zs,v=o.contextType;return typeof v=="object"&&v!==null?v=tr(v):(m=Sn(o)?Fi:Zt.current,f=o.contextTypes,v=(f=f!=null)?Wo(s,m):zs),o=new o(l,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=v),o}function Zg(s,o,l,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==s&&mc.enqueueReplaceState(o,o.state,null)}function rf(s,o,l,f){var m=s.stateNode;m.props=l,m.state=s.memoizedState,m.refs={},$d(s);var v=o.contextType;typeof v=="object"&&v!==null?m.context=tr(v):(v=Sn(o)?Fi:Zt.current,m.context=Wo(s,v)),m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(nf(s,o,v,l),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&mc.enqueueReplaceState(m,m.state,null),lc(s,l,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Jo(s,o){try{var l="",f=o;do l+=he(f),f=f.return;while(f);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:m,digest:null}}function sf(s,o,l){return{value:s,source:null,stack:l??null,digest:o??null}}function of(s,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var sI=typeof WeakMap=="function"?WeakMap:Map;function Jg(s,o,l){l=ps(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){Tc||(Tc=!0,Ef=f),of(s,o)},l}function ey(s,o,l){l=ps(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;l.payload=function(){return f(m)},l.callback=function(){of(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){of(s,o),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function ty(s,o,l){var f=s.pingCache;if(f===null){f=s.pingCache=new sI;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(l)||(m.add(l),s=vI.bind(null,s,o,l),o.then(s,s))}function ny(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function ry(s,o,l,f,m){return s.mode&1?(s.flags|=65536,s.lanes=m,s):(s===o?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ps(-1,1),o.tag=2,qs(l,o,1))),l.lanes|=1),s)}var iI=Z.ReactCurrentOwner,Cn=!1;function pn(s,o,l,f){o.child=s===null?Ig(o,null,l,f):Qo(o,s.child,l,f)}function sy(s,o,l,f,m){l=l.render;var v=o.ref;return Yo(o,m),f=Xd(s,o,l,f,v,m),l=Yd(),s!==null&&!Cn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ms(s,o,m)):(ft&&l&&bd(o),o.flags|=1,pn(s,o,f,m),o.child)}function iy(s,o,l,f,m){if(s===null){var v=l.type;return typeof v=="function"&&!Nf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,oy(s,o,v,f,m)):(s=Nc(l.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!(s.lanes&m)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(S,f)&&s.ref===o.ref)return ms(s,o,m)}return o.flags|=1,s=Xs(v,f),s.ref=o.ref,s.return=o,o.child=s}function oy(s,o,l,f,m){if(s!==null){var v=s.memoizedProps;if(rl(v,f)&&s.ref===o.ref)if(Cn=!1,o.pendingProps=f=v,(s.lanes&m)!==0)s.flags&131072&&(Cn=!0);else return o.lanes=s.lanes,ms(s,o,m)}return af(s,o,l,f,m)}function ay(s,o,l){var f=o.pendingProps,m=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(ta,Un),Un|=l;else{if(!(l&1073741824))return s=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,it(ta,Un),Un|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,it(ta,Un),Un|=f}else v!==null?(f=v.baseLanes|l,o.memoizedState=null):f=l,it(ta,Un),Un|=f;return pn(s,o,m,l),o.child}function ly(s,o){var l=o.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function af(s,o,l,f,m){var v=Sn(l)?Fi:Zt.current;return v=Wo(o,v),Yo(o,m),l=Xd(s,o,l,f,v,m),f=Yd(),s!==null&&!Cn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ms(s,o,m)):(ft&&f&&bd(o),o.flags|=1,pn(s,o,l,m),o.child)}function uy(s,o,l,f,m){if(Sn(l)){var v=!0;Ju(o)}else v=!1;if(Yo(o,m),o.stateNode===null)yc(s,o),Yg(o,l,f),rf(o,l,f,m),f=!0;else if(s===null){var S=o.stateNode,F=o.memoizedProps;S.props=F;var j=S.context,J=l.contextType;typeof J=="object"&&J!==null?J=tr(J):(J=Sn(l)?Fi:Zt.current,J=Wo(o,J));var oe=l.getDerivedStateFromProps,ue=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==f||j!==J)&&Zg(o,S,f,J),$s=!1;var se=o.memoizedState;S.state=se,lc(o,f,S,m),j=o.memoizedState,F!==f||se!==j||In.current||$s?(typeof oe=="function"&&(nf(o,l,oe,f),j=o.memoizedState),(F=$s||Xg(o,l,F,f,se,j,J))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=j),S.props=f,S.state=j,S.context=J,f=F):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,Cg(s,o),F=o.memoizedProps,J=o.type===o.elementType?F:Sr(o.type,F),S.props=J,ue=o.pendingProps,se=S.context,j=l.contextType,typeof j=="object"&&j!==null?j=tr(j):(j=Sn(l)?Fi:Zt.current,j=Wo(o,j));var _e=l.getDerivedStateFromProps;(oe=typeof _e=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==ue||se!==j)&&Zg(o,S,f,j),$s=!1,se=o.memoizedState,S.state=se,lc(o,f,S,m);var Ee=o.memoizedState;F!==ue||se!==Ee||In.current||$s?(typeof _e=="function"&&(nf(o,l,_e,f),Ee=o.memoizedState),(J=$s||Xg(o,l,J,f,se,Ee,j)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ee,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ee,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Ee),S.props=f,S.state=Ee,S.context=j,f=J):(typeof S.componentDidUpdate!="function"||F===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),f=!1)}return lf(s,o,l,f,v,m)}function lf(s,o,l,f,m,v){ly(s,o);var S=(o.flags&128)!==0;if(!f&&!S)return m&&pg(o,l,!1),ms(s,o,v);f=o.stateNode,iI.current=o;var F=S&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&S?(o.child=Qo(o,s.child,null,v),o.child=Qo(o,null,F,v)):pn(s,o,F,v),o.memoizedState=f.state,m&&pg(o,l,!0),o.child}function cy(s){var o=s.stateNode;o.pendingContext?dg(s,o.pendingContext,o.pendingContext!==o.context):o.context&&dg(s,o.context,!1),qd(s,o.containerInfo)}function hy(s,o,l,f,m){return Ho(),Fd(m),o.flags|=256,pn(s,o,l,f),o.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(s){return{baseLanes:s,cachePool:null,transitions:null}}function dy(s,o,l){var f=o.pendingProps,m=gt.current,v=!1,S=(o.flags&128)!==0,F;if((F=S)||(F=s!==null&&s.memoizedState===null?!1:(m&2)!==0),F?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),it(gt,m&1),s===null)return Od(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(S=f.children,s=f.fallback,v?(f=o.mode,v=o.child,S={mode:"hidden",children:S},!(f&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Rc(S,f,0,null),s=Ki(s,f,l,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=cf(l),o.memoizedState=uf,s):hf(o,S));if(m=s.memoizedState,m!==null&&(F=m.dehydrated,F!==null))return oI(s,o,S,f,F,m,l);if(v){v=f.fallback,S=o.mode,m=s.child,F=m.sibling;var j={mode:"hidden",children:f.children};return!(S&1)&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=j,o.deletions=null):(f=Xs(m,j),f.subtreeFlags=m.subtreeFlags&14680064),F!==null?v=Xs(F,v):(v=Ki(v,S,l,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,S=s.child.memoizedState,S=S===null?cf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~l,o.memoizedState=uf,f}return v=s.child,s=v.sibling,f=Xs(v,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,s!==null&&(l=o.deletions,l===null?(o.deletions=[s],o.flags|=16):l.push(s)),o.child=f,o.memoizedState=null,f}function hf(s,o){return o=Rc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function gc(s,o,l,f){return f!==null&&Fd(f),Qo(o,s.child,null,l),s=hf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function oI(s,o,l,f,m,v,S){if(l)return o.flags&256?(o.flags&=-257,f=sf(Error(t(422))),gc(s,o,S,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=f.fallback,m=o.mode,f=Rc({mode:"visible",children:f.children},m,0,null),v=Ki(v,m,S,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,o.mode&1&&Qo(o,s.child,null,S),o.child.memoizedState=cf(S),o.memoizedState=uf,v);if(!(o.mode&1))return gc(s,o,S,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var F=f.dgst;return f=F,v=Error(t(419)),f=sf(v,f,void 0),gc(s,o,S,f)}if(F=(S&s.childLanes)!==0,Cn||F){if(f=zt,f!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|S)?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,fs(s,m),Ar(f,s,m,-1))}return Af(),f=sf(Error(t(421))),gc(s,o,S,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=_I.bind(null,s),m._reactRetry=o,null):(s=v.treeContext,zn=js(m.nextSibling),Bn=o,ft=!0,Ir=null,s!==null&&(Jn[er++]=hs,Jn[er++]=ds,Jn[er++]=Li,hs=s.id,ds=s.overflow,Li=o),o=hf(o,f.children),o.flags|=4096,o)}function fy(s,o,l){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),zd(s.return,o,l)}function df(s,o,l,f,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function py(s,o,l){var f=o.pendingProps,m=f.revealOrder,v=f.tail;if(pn(s,o,f.children,l),f=gt.current,f&2)f=f&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fy(s,l,o);else if(s.tag===19)fy(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(it(gt,f),!(o.mode&1))o.memoizedState=null;else switch(m){case"forwards":for(l=o.child,m=null;l!==null;)s=l.alternate,s!==null&&uc(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),df(o,!1,m,l,v);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&uc(s)===null){o.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}df(o,!0,l,null,v);break;case"together":df(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yc(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ms(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),$i|=o.lanes,!(l&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,l=Xs(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Xs(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function aI(s,o,l){switch(o.tag){case 3:cy(o),Ho();break;case 5:Ng(o);break;case 1:Sn(o.type)&&Ju(o);break;case 4:qd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;it(ic,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(it(gt,gt.current&1),o.flags|=128,null):l&o.child.childLanes?dy(s,o,l):(it(gt,gt.current&1),s=ms(s,o,l),s!==null?s.sibling:null);it(gt,gt.current&1);break;case 19:if(f=(l&o.childLanes)!==0,s.flags&128){if(f)return py(s,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),it(gt,gt.current),f)break;return null;case 22:case 23:return o.lanes=0,ay(s,o,l)}return ms(s,o,l)}var my,ff,gy,yy;my=function(s,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ff=function(){},gy=function(s,o,l,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,zi(qr.current);var v=null;switch(l){case"input":m=je(s,m),f=je(s,f),v=[];break;case"select":m=K({},m,{value:void 0}),f=K({},f,{value:void 0}),v=[];break;case"textarea":m=ur(s,m),f=ur(s,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Xu)}ke(l,f);var S;l=null;for(J in m)if(!f.hasOwnProperty(J)&&m.hasOwnProperty(J)&&m[J]!=null)if(J==="style"){var F=m[J];for(S in F)F.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?v||(v=[]):(v=v||[]).push(J,null));for(J in f){var j=f[J];if(F=m!=null?m[J]:void 0,f.hasOwnProperty(J)&&j!==F&&(j!=null||F!=null))if(J==="style")if(F){for(S in F)!F.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in j)j.hasOwnProperty(S)&&F[S]!==j[S]&&(l||(l={}),l[S]=j[S])}else l||(v||(v=[]),v.push(J,l)),l=j;else J==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,F=F?F.__html:void 0,j!=null&&F!==j&&(v=v||[]).push(J,j)):J==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(J,""+j):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(j!=null&&J==="onScroll"&&ot("scroll",s),v||F===j||(v=[])):(v=v||[]).push(J,j))}l&&(v=v||[]).push("style",l);var J=v;(o.updateQueue=J)&&(o.flags|=4)}},yy=function(s,o,l,f){l!==f&&(o.flags|=4)};function vl(s,o){if(!ft)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function en(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(o)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=l,o}function lI(s,o,l){var f=o.pendingProps;switch(Vd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(o),null;case 1:return Sn(o.type)&&Zu(),en(o),null;case 3:return f=o.stateNode,Zo(),at(In),at(Zt),Kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(rc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Ir!==null&&(Sf(Ir),Ir=null))),ff(s,o),en(o),null;case 5:Wd(o);var m=zi(fl.current);if(l=o.type,s!==null&&o.stateNode!=null)gy(s,o,l,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return en(o),null}if(s=zi(qr.current),rc(o)){f=o.stateNode,l=o.type;var v=o.memoizedProps;switch(f[$r]=o,f[ll]=v,s=(o.mode&1)!==0,l){case"dialog":ot("cancel",f),ot("close",f);break;case"iframe":case"object":case"embed":ot("load",f);break;case"video":case"audio":for(m=0;m<il.length;m++)ot(il[m],f);break;case"source":ot("error",f);break;case"img":case"image":case"link":ot("error",f),ot("load",f);break;case"details":ot("toggle",f);break;case"input":Hn(f,v),ot("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},ot("invalid",f);break;case"textarea":hn(f,v),ot("invalid",f)}ke(l,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var F=v[S];S==="children"?typeof F=="string"?f.textContent!==F&&(v.suppressHydrationWarning!==!0&&Qu(f.textContent,F,s),m=["children",F]):typeof F=="number"&&f.textContent!==""+F&&(v.suppressHydrationWarning!==!0&&Qu(f.textContent,F,s),m=["children",""+F]):i.hasOwnProperty(S)&&F!=null&&S==="onScroll"&&ot("scroll",f)}switch(l){case"input":bt(f),ut(f,v,!0);break;case"textarea":bt(f),Mr(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Xu)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=nt(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=S.createElement(l,{is:f.is}):(s=S.createElement(l),l==="select"&&(S=s,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):s=S.createElementNS(s,l),s[$r]=o,s[ll]=f,my(s,o,!1,!1),o.stateNode=s;e:{switch(S=Ve(l,f),l){case"dialog":ot("cancel",s),ot("close",s),m=f;break;case"iframe":case"object":case"embed":ot("load",s),m=f;break;case"video":case"audio":for(m=0;m<il.length;m++)ot(il[m],s);m=f;break;case"source":ot("error",s),m=f;break;case"img":case"image":case"link":ot("error",s),ot("load",s),m=f;break;case"details":ot("toggle",s),m=f;break;case"input":Hn(s,f),m=je(s,f),ot("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=K({},f,{value:void 0}),ot("invalid",s);break;case"textarea":hn(s,f),m=ur(s,f),ot("invalid",s);break;default:m=f}ke(l,m),F=m;for(v in F)if(F.hasOwnProperty(v)){var j=F[v];v==="style"?Ti(s,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&wi(s,j)):v==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&cr(s,j):typeof j=="number"&&cr(s,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?j!=null&&v==="onScroll"&&ot("scroll",s):j!=null&&$(s,v,j,S))}switch(l){case"input":bt(s),ut(s,f,!1);break;case"textarea":bt(s),Mr(s);break;case"option":f.value!=null&&s.setAttribute("value",""+de(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?cn(s,!!f.multiple,v,!1):f.defaultValue!=null&&cn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Xu)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return en(o),null;case 6:if(s&&o.stateNode!=null)yy(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(l=zi(fl.current),zi(qr.current),rc(o)){if(f=o.stateNode,l=o.memoizedProps,f[$r]=o,(v=f.nodeValue!==l)&&(s=Bn,s!==null))switch(s.tag){case 3:Qu(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qu(f.nodeValue,l,(s.mode&1)!==0)}v&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[$r]=o,o.stateNode=f}return en(o),null;case 13:if(at(gt),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ft&&zn!==null&&o.mode&1&&!(o.flags&128))wg(),Ho(),o.flags|=98560,v=!1;else if(v=rc(o),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[$r]=o}else Ho(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;en(o),v=!1}else Ir!==null&&(Sf(Ir),Ir=null),v=!0;if(!v)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(s===null||gt.current&1?Ft===0&&(Ft=3):Af())),o.updateQueue!==null&&(o.flags|=4),en(o),null);case 4:return Zo(),ff(s,o),s===null&&ol(o.stateNode.containerInfo),en(o),null;case 10:return Bd(o.type._context),en(o),null;case 17:return Sn(o.type)&&Zu(),en(o),null;case 19:if(at(gt),v=o.memoizedState,v===null)return en(o),null;if(f=(o.flags&128)!==0,S=v.rendering,S===null)if(f)vl(v,!1);else{if(Ft!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(S=uc(s),S!==null){for(o.flags|=128,vl(v,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)v=l,s=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return it(gt,gt.current&1|2),o.child}s=s.sibling}v.tail!==null&&st()>na&&(o.flags|=128,f=!0,vl(v,!1),o.lanes=4194304)}else{if(!f)if(s=uc(S),s!==null){if(o.flags|=128,f=!0,l=s.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),vl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ft)return en(o),null}else 2*st()-v.renderingStartTime>na&&l!==1073741824&&(o.flags|=128,f=!0,vl(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=st(),o.sibling=null,l=gt.current,it(gt,f?l&1|2:l&1),o):(en(o),null);case 22:case 23:return xf(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?Un&1073741824&&(en(o),o.subtreeFlags&6&&(o.flags|=8192)):en(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function uI(s,o){switch(Vd(o),o.tag){case 1:return Sn(o.type)&&Zu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Zo(),at(In),at(Zt),Kd(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Wd(o),null;case 13:if(at(gt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ho()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return at(gt),null;case 4:return Zo(),null;case 10:return Bd(o.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var vc=!1,tn=!1,cI=typeof WeakSet=="function"?WeakSet:Set,we=null;function ea(s,o){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){_t(s,o,f)}else l.current=null}function pf(s,o,l){try{l()}catch(f){_t(s,o,f)}}var vy=!1;function hI(s,o){if(Cd=Os,s=Xm(),yd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,F=-1,j=-1,J=0,oe=0,ue=s,se=null;t:for(;;){for(var _e;ue!==l||m!==0&&ue.nodeType!==3||(F=S+m),ue!==v||f!==0&&ue.nodeType!==3||(j=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(_e=ue.firstChild)!==null;)se=ue,ue=_e;for(;;){if(ue===s)break t;if(se===l&&++J===m&&(F=S),se===v&&++oe===f&&(j=S),(_e=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=_e}l=F===-1||j===-1?null:{start:F,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(xd={focusedElem:s,selectionRange:l},Os=!1,we=o;we!==null;)if(o=we,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,we=s;else for(;we!==null;){o=we;try{var Ee=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Ce=Ee.memoizedProps,Ct=Ee.memoizedState,H=o.stateNode,z=H.getSnapshotBeforeUpdate(o.elementType===o.type?Ce:Sr(o.type,Ce),Ct);H.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){_t(o,o.return,fe)}if(s=o.sibling,s!==null){s.return=o.return,we=s;break}we=o.return}return Ee=vy,vy=!1,Ee}function _l(s,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var v=m.destroy;m.destroy=void 0,v!==void 0&&pf(o,l,v)}m=m.next}while(m!==f)}}function _c(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function mf(s){var o=s.ref;if(o!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof o=="function"?o(s):o.current=s}}function _y(s){var o=s.alternate;o!==null&&(s.alternate=null,_y(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[$r],delete o[ll],delete o[kd],delete o[KT],delete o[HT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function wy(s){return s.tag===5||s.tag===3||s.tag===4}function Ey(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Xu));else if(f!==4&&(s=s.child,s!==null))for(gf(s,o,l),s=s.sibling;s!==null;)gf(s,o,l),s=s.sibling}function yf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(yf(s,o,l),s=s.sibling;s!==null;)yf(s,o,l),s=s.sibling}var Qt=null,Cr=!1;function Ws(s,o,l){for(l=l.child;l!==null;)Ty(s,o,l),l=l.sibling}function Ty(s,o,l){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Ri,l)}catch{}switch(l.tag){case 5:tn||ea(l,o);case 6:var f=Qt,m=Cr;Qt=null,Ws(s,o,l),Qt=f,Cr=m,Qt!==null&&(Cr?(s=Qt,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Qt.removeChild(l.stateNode));break;case 18:Qt!==null&&(Cr?(s=Qt,l=l.stateNode,s.nodeType===8?Rd(s.parentNode,l):s.nodeType===1&&Rd(s,l),wr(s)):Rd(Qt,l.stateNode));break;case 4:f=Qt,m=Cr,Qt=l.stateNode.containerInfo,Cr=!0,Ws(s,o,l),Qt=f,Cr=m;break;case 0:case 11:case 14:case 15:if(!tn&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&pf(l,o,S),m=m.next}while(m!==f)}Ws(s,o,l);break;case 1:if(!tn&&(ea(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(F){_t(l,o,F)}Ws(s,o,l);break;case 21:Ws(s,o,l);break;case 22:l.mode&1?(tn=(f=tn)||l.memoizedState!==null,Ws(s,o,l),tn=f):Ws(s,o,l);break;default:Ws(s,o,l)}}function Iy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new cI),o.forEach(function(f){var m=wI.bind(null,s,f);l.has(f)||(l.add(f),f.then(m,m))})}}function xr(s,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var v=s,S=o,F=S;e:for(;F!==null;){switch(F.tag){case 5:Qt=F.stateNode,Cr=!1;break e;case 3:Qt=F.stateNode.containerInfo,Cr=!0;break e;case 4:Qt=F.stateNode.containerInfo,Cr=!0;break e}F=F.return}if(Qt===null)throw Error(t(160));Ty(v,S,m),Qt=null,Cr=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(J){_t(m,o,J)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sy(o,s),o=o.sibling}function Sy(s,o){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(xr(o,s),Gr(s),f&4){try{_l(3,s,s.return),_c(3,s)}catch(Ce){_t(s,s.return,Ce)}try{_l(5,s,s.return)}catch(Ce){_t(s,s.return,Ce)}}break;case 1:xr(o,s),Gr(s),f&512&&l!==null&&ea(l,l.return);break;case 5:if(xr(o,s),Gr(s),f&512&&l!==null&&ea(l,l.return),s.flags&32){var m=s.stateNode;try{cr(m,"")}catch(Ce){_t(s,s.return,Ce)}}if(f&4&&(m=s.stateNode,m!=null)){var v=s.memoizedProps,S=l!==null?l.memoizedProps:v,F=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{F==="input"&&v.type==="radio"&&v.name!=null&&un(m,v),Ve(F,S);var J=Ve(F,v);for(S=0;S<j.length;S+=2){var oe=j[S],ue=j[S+1];oe==="style"?Ti(m,ue):oe==="dangerouslySetInnerHTML"?wi(m,ue):oe==="children"?cr(m,ue):$(m,oe,ue,J)}switch(F){case"input":br(m,v);break;case"textarea":Vr(m,v);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var _e=v.value;_e!=null?cn(m,!!v.multiple,_e,!1):se!==!!v.multiple&&(v.defaultValue!=null?cn(m,!!v.multiple,v.defaultValue,!0):cn(m,!!v.multiple,v.multiple?[]:"",!1))}m[ll]=v}catch(Ce){_t(s,s.return,Ce)}}break;case 6:if(xr(o,s),Gr(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,v=s.memoizedProps;try{m.nodeValue=v}catch(Ce){_t(s,s.return,Ce)}}break;case 3:if(xr(o,s),Gr(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{wr(o.containerInfo)}catch(Ce){_t(s,s.return,Ce)}break;case 4:xr(o,s),Gr(s);break;case 13:xr(o,s),Gr(s),m=s.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(wf=st())),f&4&&Iy(s);break;case 22:if(oe=l!==null&&l.memoizedState!==null,s.mode&1?(tn=(J=tn)||oe,xr(o,s),tn=J):xr(o,s),Gr(s),f&8192){if(J=s.memoizedState!==null,(s.stateNode.isHidden=J)&&!oe&&s.mode&1)for(we=s,oe=s.child;oe!==null;){for(ue=we=oe;we!==null;){switch(se=we,_e=se.child,se.tag){case 0:case 11:case 14:case 15:_l(4,se,se.return);break;case 1:ea(se,se.return);var Ee=se.stateNode;if(typeof Ee.componentWillUnmount=="function"){f=se,l=se.return;try{o=f,Ee.props=o.memoizedProps,Ee.state=o.memoizedState,Ee.componentWillUnmount()}catch(Ce){_t(f,l,Ce)}}break;case 5:ea(se,se.return);break;case 22:if(se.memoizedState!==null){Ay(ue);continue}}_e!==null?(_e.return=se,we=_e):Ay(ue)}oe=oe.sibling}e:for(oe=null,ue=s;;){if(ue.tag===5){if(oe===null){oe=ue;try{m=ue.stateNode,J?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(F=ue.stateNode,j=ue.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,F.style.display=Ei("display",S))}catch(Ce){_t(s,s.return,Ce)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=J?"":ue.memoizedProps}catch(Ce){_t(s,s.return,Ce)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===s)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===s)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===s)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:xr(o,s),Gr(s),f&4&&Iy(s);break;case 21:break;default:xr(o,s),Gr(s)}}function Gr(s){var o=s.flags;if(o&2){try{e:{for(var l=s.return;l!==null;){if(wy(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(cr(m,""),f.flags&=-33);var v=Ey(s);yf(s,v,m);break;case 3:case 4:var S=f.stateNode.containerInfo,F=Ey(s);gf(s,F,S);break;default:throw Error(t(161))}}catch(j){_t(s,s.return,j)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function dI(s,o,l){we=s,Cy(s)}function Cy(s,o,l){for(var f=(s.mode&1)!==0;we!==null;){var m=we,v=m.child;if(m.tag===22&&f){var S=m.memoizedState!==null||vc;if(!S){var F=m.alternate,j=F!==null&&F.memoizedState!==null||tn;F=vc;var J=tn;if(vc=S,(tn=j)&&!J)for(we=m;we!==null;)S=we,j=S.child,S.tag===22&&S.memoizedState!==null?Ny(m):j!==null?(j.return=S,we=j):Ny(m);for(;v!==null;)we=v,Cy(v),v=v.sibling;we=m,vc=F,tn=J}xy(s)}else m.subtreeFlags&8772&&v!==null?(v.return=m,we=v):xy(s)}}function xy(s){for(;we!==null;){var o=we;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:tn||_c(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!tn)if(l===null)f.componentDidMount();else{var m=o.elementType===o.type?l.memoizedProps:Sr(o.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Ag(o,v,f);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Ag(o,S,l)}break;case 5:var F=o.stateNode;if(l===null&&o.flags&4){l=F;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&l.focus();break;case"img":j.src&&(l.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var J=o.alternate;if(J!==null){var oe=J.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&wr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}tn||o.flags&512&&mf(o)}catch(se){_t(o,o.return,se)}}if(o===s){we=null;break}if(l=o.sibling,l!==null){l.return=o.return,we=l;break}we=o.return}}function Ay(s){for(;we!==null;){var o=we;if(o===s){we=null;break}var l=o.sibling;if(l!==null){l.return=o.return,we=l;break}we=o.return}}function Ny(s){for(;we!==null;){var o=we;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{_c(4,o)}catch(j){_t(o,l,j)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(j){_t(o,m,j)}}var v=o.return;try{mf(o)}catch(j){_t(o,v,j)}break;case 5:var S=o.return;try{mf(o)}catch(j){_t(o,S,j)}}}catch(j){_t(o,o.return,j)}if(o===s){we=null;break}var F=o.sibling;if(F!==null){F.return=o.return,we=F;break}we=o.return}}var fI=Math.ceil,wc=Z.ReactCurrentDispatcher,vf=Z.ReactCurrentOwner,rr=Z.ReactCurrentBatchConfig,Ge=0,zt=null,Pt=null,Xt=0,Un=0,ta=Bs(0),Ft=0,wl=null,$i=0,Ec=0,_f=0,El=null,xn=null,wf=0,na=1/0,gs=null,Tc=!1,Ef=null,Gs=null,Ic=!1,Ks=null,Sc=0,Tl=0,Tf=null,Cc=-1,xc=0;function mn(){return Ge&6?st():Cc!==-1?Cc:Cc=st()}function Hs(s){return s.mode&1?Ge&2&&Xt!==0?Xt&-Xt:XT.transition!==null?(xc===0&&(xc=Pi()),xc):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Xa(s.type)),s):1}function Ar(s,o,l,f){if(50<Tl)throw Tl=0,Tf=null,Error(t(185));Ds(s,l,f),(!(Ge&2)||s!==zt)&&(s===zt&&(!(Ge&2)&&(Ec|=l),Ft===4&&Qs(s,Xt)),An(s,f),l===1&&Ge===0&&!(o.mode&1)&&(na=st()+500,ec&&Us()))}function An(s,o){var l=s.callbackNode;ss(s,o);var f=ki(s,s===zt?Xt:0);if(f===0)l!==null&&Wa(l),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(l!=null&&Wa(l),o===1)s.tag===0?QT(ky.bind(null,s)):mg(ky.bind(null,s)),WT(function(){!(Ge&6)&&Us()}),l=null;else{switch(Vs(f)){case 1:l=Ni;break;case 4:l=Rs;break;case 16:l=Xn;break;case 536870912:l=xu;break;default:l=Xn}l=Ly(l,Ry.bind(null,s))}s.callbackPriority=o,s.callbackNode=l}}function Ry(s,o){if(Cc=-1,xc=0,Ge&6)throw Error(t(327));var l=s.callbackNode;if(ra()&&s.callbackNode!==l)return null;var f=ki(s,s===zt?Xt:0);if(f===0)return null;if(f&30||f&s.expiredLanes||o)o=Ac(s,f);else{o=f;var m=Ge;Ge|=2;var v=Dy();(zt!==s||Xt!==o)&&(gs=null,na=st()+500,Wi(s,o));do try{gI();break}catch(F){Py(s,F)}while(!0);jd(),wc.current=v,Ge=m,Pt!==null?o=0:(zt=null,Xt=0,o=Ft)}if(o!==0){if(o===2&&(m=Fn(s),m!==0&&(f=m,o=If(s,m))),o===1)throw l=wl,Wi(s,0),Qs(s,f),An(s,st()),l;if(o===6)Qs(s,f);else{if(m=s.current.alternate,!(f&30)&&!pI(m)&&(o=Ac(s,f),o===2&&(v=Fn(s),v!==0&&(f=v,o=If(s,v))),o===1))throw l=wl,Wi(s,0),Qs(s,f),An(s,st()),l;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Gi(s,xn,gs);break;case 3:if(Qs(s,f),(f&130023424)===f&&(o=wf+500-st(),10<o)){if(ki(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){mn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=Nd(Gi.bind(null,s,xn,gs),o);break}Gi(s,xn,gs);break;case 4:if(Qs(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var S=31-dn(f);v=1<<S,S=o[S],S>m&&(m=S),f&=~v}if(f=m,f=st()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*fI(f/1960))-f,10<f){s.timeoutHandle=Nd(Gi.bind(null,s,xn,gs),f);break}Gi(s,xn,gs);break;case 5:Gi(s,xn,gs);break;default:throw Error(t(329))}}}return An(s,st()),s.callbackNode===l?Ry.bind(null,s):null}function If(s,o){var l=El;return s.current.memoizedState.isDehydrated&&(Wi(s,o).flags|=256),s=Ac(s,o),s!==2&&(o=xn,xn=l,o!==null&&Sf(o)),s}function Sf(s){xn===null?xn=s:xn.push.apply(xn,s)}function pI(s){for(var o=s;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!Tr(v(),m))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Qs(s,o){for(o&=~_f,o&=~Ec,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var l=31-dn(o),f=1<<l;s[l]=-1,o&=~f}}function ky(s){if(Ge&6)throw Error(t(327));ra();var o=ki(s,0);if(!(o&1))return An(s,st()),null;var l=Ac(s,o);if(s.tag!==0&&l===2){var f=Fn(s);f!==0&&(o=f,l=If(s,f))}if(l===1)throw l=wl,Wi(s,0),Qs(s,o),An(s,st()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Gi(s,xn,gs),An(s,st()),null}function Cf(s,o){var l=Ge;Ge|=1;try{return s(o)}finally{Ge=l,Ge===0&&(na=st()+500,ec&&Us())}}function qi(s){Ks!==null&&Ks.tag===0&&!(Ge&6)&&ra();var o=Ge;Ge|=1;var l=rr.transition,f=ze;try{if(rr.transition=null,ze=1,s)return s()}finally{ze=f,rr.transition=l,Ge=o,!(Ge&6)&&Us()}}function xf(){Un=ta.current,at(ta)}function Wi(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,qT(l)),Pt!==null)for(l=Pt.return;l!==null;){var f=l;switch(Vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Zu();break;case 3:Zo(),at(In),at(Zt),Kd();break;case 5:Wd(f);break;case 4:Zo();break;case 13:at(gt);break;case 19:at(gt);break;case 10:Bd(f.type._context);break;case 22:case 23:xf()}l=l.return}if(zt=s,Pt=s=Xs(s.current,null),Xt=Un=o,Ft=0,wl=null,_f=Ec=$i=0,xn=El=null,Bi!==null){for(o=0;o<Bi.length;o++)if(l=Bi[o],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,v=l.pending;if(v!==null){var S=v.next;v.next=m,f.next=S}l.pending=f}Bi=null}return s}function Py(s,o){do{var l=Pt;try{if(jd(),cc.current=pc,hc){for(var f=yt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}hc=!1}if(Ui=0,Bt=Ot=yt=null,pl=!1,ml=0,vf.current=null,l===null||l.return===null){Ft=1,wl=o,Pt=null;break}e:{var v=s,S=l.return,F=l,j=o;if(o=Xt,F.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var J=j,oe=F,ue=oe.tag;if(!(oe.mode&1)&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var _e=ny(S);if(_e!==null){_e.flags&=-257,ry(_e,S,F,v,o),_e.mode&1&&ty(v,J,o),o=_e,j=J;var Ee=o.updateQueue;if(Ee===null){var Ce=new Set;Ce.add(j),o.updateQueue=Ce}else Ee.add(j);break e}else{if(!(o&1)){ty(v,J,o),Af();break e}j=Error(t(426))}}else if(ft&&F.mode&1){var Ct=ny(S);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),ry(Ct,S,F,v,o),Fd(Jo(j,F));break e}}v=j=Jo(j,F),Ft!==4&&(Ft=2),El===null?El=[v]:El.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var H=Jg(v,j,o);xg(v,H);break e;case 1:F=j;var z=v.type,Y=v.stateNode;if(!(v.flags&128)&&(typeof z.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Gs===null||!Gs.has(Y)))){v.flags|=65536,o&=-o,v.lanes|=o;var fe=ey(v,F,o);xg(v,fe);break e}}v=v.return}while(v!==null)}Vy(l)}catch(Ae){o=Ae,Pt===l&&l!==null&&(Pt=l=l.return);continue}break}while(!0)}function Dy(){var s=wc.current;return wc.current=pc,s===null?pc:s}function Af(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),zt===null||!($i&268435455)&&!(Ec&268435455)||Qs(zt,Xt)}function Ac(s,o){var l=Ge;Ge|=2;var f=Dy();(zt!==s||Xt!==o)&&(gs=null,Wi(s,o));do try{mI();break}catch(m){Py(s,m)}while(!0);if(jd(),Ge=l,wc.current=f,Pt!==null)throw Error(t(261));return zt=null,Xt=0,Ft}function mI(){for(;Pt!==null;)by(Pt)}function gI(){for(;Pt!==null&&!Su();)by(Pt)}function by(s){var o=Fy(s.alternate,s,Un);s.memoizedProps=s.pendingProps,o===null?Vy(s):Pt=o,vf.current=null}function Vy(s){var o=s;do{var l=o.alternate;if(s=o.return,o.flags&32768){if(l=uI(l,o),l!==null){l.flags&=32767,Pt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ft=6,Pt=null;return}}else if(l=lI(l,o,Un),l!==null){Pt=l;return}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=s}while(o!==null);Ft===0&&(Ft=5)}function Gi(s,o,l){var f=ze,m=rr.transition;try{rr.transition=null,ze=1,yI(s,o,l,f)}finally{rr.transition=m,ze=f}return null}function yI(s,o,l,f){do ra();while(Ks!==null);if(Ge&6)throw Error(t(327));l=s.finishedWork;var m=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=l.lanes|l.childLanes;if(Je(s,v),s===zt&&(Pt=zt=null,Xt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Ic||(Ic=!0,Ly(Xn,function(){return ra(),null})),v=(l.flags&15990)!==0,l.subtreeFlags&15990||v){v=rr.transition,rr.transition=null;var S=ze;ze=1;var F=Ge;Ge|=4,vf.current=null,hI(s,l),Sy(l,s),FT(xd),Os=!!Cd,xd=Cd=null,s.current=l,dI(l),ud(),Ge=F,ze=S,rr.transition=v}else s.current=l;if(Ic&&(Ic=!1,Ks=s,Sc=m),v=s.pendingLanes,v===0&&(Gs=null),Au(l.stateNode),An(s,st()),o!==null)for(f=s.onRecoverableError,l=0;l<o.length;l++)m=o[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(Tc)throw Tc=!1,s=Ef,Ef=null,s;return Sc&1&&s.tag!==0&&ra(),v=s.pendingLanes,v&1?s===Tf?Tl++:(Tl=0,Tf=s):Tl=0,Us(),null}function ra(){if(Ks!==null){var s=Vs(Sc),o=rr.transition,l=ze;try{if(rr.transition=null,ze=16>s?16:s,Ks===null)var f=!1;else{if(s=Ks,Ks=null,Sc=0,Ge&6)throw Error(t(331));var m=Ge;for(Ge|=4,we=s.current;we!==null;){var v=we,S=v.child;if(we.flags&16){var F=v.deletions;if(F!==null){for(var j=0;j<F.length;j++){var J=F[j];for(we=J;we!==null;){var oe=we;switch(oe.tag){case 0:case 11:case 15:_l(8,oe,v)}var ue=oe.child;if(ue!==null)ue.return=oe,we=ue;else for(;we!==null;){oe=we;var se=oe.sibling,_e=oe.return;if(_y(oe),oe===J){we=null;break}if(se!==null){se.return=_e,we=se;break}we=_e}}}var Ee=v.alternate;if(Ee!==null){var Ce=Ee.child;if(Ce!==null){Ee.child=null;do{var Ct=Ce.sibling;Ce.sibling=null,Ce=Ct}while(Ce!==null)}}we=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,we=S;else e:for(;we!==null;){if(v=we,v.flags&2048)switch(v.tag){case 0:case 11:case 15:_l(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,we=H;break e}we=v.return}}var z=s.current;for(we=z;we!==null;){S=we;var Y=S.child;if(S.subtreeFlags&2064&&Y!==null)Y.return=S,we=Y;else e:for(S=z;we!==null;){if(F=we,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:_c(9,F)}}catch(Ae){_t(F,F.return,Ae)}if(F===S){we=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,we=fe;break e}we=F.return}}if(Ge=m,Us(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Ri,s)}catch{}f=!0}return f}finally{ze=l,rr.transition=o}}return!1}function My(s,o,l){o=Jo(l,o),o=Jg(s,o,1),s=qs(s,o,1),o=mn(),s!==null&&(Ds(s,1,o),An(s,o))}function _t(s,o,l){if(s.tag===3)My(s,s,l);else for(;o!==null;){if(o.tag===3){My(o,s,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Gs===null||!Gs.has(f))){s=Jo(l,s),s=ey(o,s,1),o=qs(o,s,1),s=mn(),o!==null&&(Ds(o,1,s),An(o,s));break}}o=o.return}}function vI(s,o,l){var f=s.pingCache;f!==null&&f.delete(o),o=mn(),s.pingedLanes|=s.suspendedLanes&l,zt===s&&(Xt&l)===l&&(Ft===4||Ft===3&&(Xt&130023424)===Xt&&500>st()-wf?Wi(s,0):_f|=l),An(s,o)}function Oy(s,o){o===0&&(s.mode&1?(o=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):o=1);var l=mn();s=fs(s,o),s!==null&&(Ds(s,o,l),An(s,l))}function _I(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),Oy(s,l)}function wI(s,o){var l=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Oy(s,l)}var Fy;Fy=function(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps||In.current)Cn=!0;else{if(!(s.lanes&l)&&!(o.flags&128))return Cn=!1,aI(s,o,l);Cn=!!(s.flags&131072)}else Cn=!1,ft&&o.flags&1048576&&gg(o,nc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;yc(s,o),s=o.pendingProps;var m=Wo(o,Zt.current);Yo(o,l),m=Xd(null,o,f,s,m,l);var v=Yd();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(f)?(v=!0,Ju(o)):v=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,$d(o),m.updater=mc,o.stateNode=m,m._reactInternals=o,rf(o,f,s,l),o=lf(null,o,f,!0,v,l)):(o.tag=0,ft&&v&&bd(o),pn(null,o,m,l),o=o.child),o;case 16:f=o.elementType;e:{switch(yc(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=TI(f),s=Sr(f,s),m){case 0:o=af(null,o,f,s,l);break e;case 1:o=uy(null,o,f,s,l);break e;case 11:o=sy(null,o,f,s,l);break e;case 14:o=iy(null,o,f,Sr(f.type,s),l);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Sr(f,m),af(s,o,f,m,l);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Sr(f,m),uy(s,o,f,m,l);case 3:e:{if(cy(o),s===null)throw Error(t(387));f=o.pendingProps,v=o.memoizedState,m=v.element,Cg(s,o),lc(o,f,null,l);var S=o.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){m=Jo(Error(t(423)),o),o=hy(s,o,f,l,m);break e}else if(f!==m){m=Jo(Error(t(424)),o),o=hy(s,o,f,l,m);break e}else for(zn=js(o.stateNode.containerInfo.firstChild),Bn=o,ft=!0,Ir=null,l=Ig(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ho(),f===m){o=ms(s,o,l);break e}pn(s,o,f,l)}o=o.child}return o;case 5:return Ng(o),s===null&&Od(o),f=o.type,m=o.pendingProps,v=s!==null?s.memoizedProps:null,S=m.children,Ad(f,m)?S=null:v!==null&&Ad(f,v)&&(o.flags|=32),ly(s,o),pn(s,o,S,l),o.child;case 6:return s===null&&Od(o),null;case 13:return dy(s,o,l);case 4:return qd(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Qo(o,null,f,l):pn(s,o,f,l),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Sr(f,m),sy(s,o,f,m,l);case 7:return pn(s,o,o.pendingProps,l),o.child;case 8:return pn(s,o,o.pendingProps.children,l),o.child;case 12:return pn(s,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,v=o.memoizedProps,S=m.value,it(ic,f._currentValue),f._currentValue=S,v!==null)if(Tr(v.value,S)){if(v.children===m.children&&!In.current){o=ms(s,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var F=v.dependencies;if(F!==null){S=v.child;for(var j=F.firstContext;j!==null;){if(j.context===f){if(v.tag===1){j=ps(-1,l&-l),j.tag=2;var J=v.updateQueue;if(J!==null){J=J.shared;var oe=J.pending;oe===null?j.next=j:(j.next=oe.next,oe.next=j),J.pending=j}}v.lanes|=l,j=v.alternate,j!==null&&(j.lanes|=l),zd(v.return,l,o),F.lanes|=l;break}j=j.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,F=S.alternate,F!==null&&(F.lanes|=l),zd(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}pn(s,o,m.children,l),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Yo(o,l),m=tr(m),f=f(m),o.flags|=1,pn(s,o,f,l),o.child;case 14:return f=o.type,m=Sr(f,o.pendingProps),m=Sr(f.type,m),iy(s,o,f,m,l);case 15:return oy(s,o,o.type,o.pendingProps,l);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:Sr(f,m),yc(s,o),o.tag=1,Sn(f)?(s=!0,Ju(o)):s=!1,Yo(o,l),Yg(o,f,m),rf(o,f,m,l),lf(null,o,f,!0,s,l);case 19:return py(s,o,l);case 22:return ay(s,o,l)}throw Error(t(156,o.tag))};function Ly(s,o){return So(s,o)}function EI(s,o,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,o,l,f){return new EI(s,o,l,f)}function Nf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function TI(s){if(typeof s=="function")return Nf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===O)return 11;if(s===ye)return 14}return 2}function Xs(s,o){var l=s.alternate;return l===null?(l=sr(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function Nc(s,o,l,f,m,v){var S=2;if(f=s,typeof s=="function")Nf(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case R:return Ki(l.children,m,v,o);case I:S=8,m|=8;break;case N:return s=sr(12,l,o,m|2),s.elementType=N,s.lanes=v,s;case P:return s=sr(13,l,o,m),s.elementType=P,s.lanes=v,s;case ce:return s=sr(19,l,o,m),s.elementType=ce,s.lanes=v,s;case le:return Rc(l,m,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:S=10;break e;case M:S=9;break e;case O:S=11;break e;case ye:S=14;break e;case ge:S=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=sr(S,l,o,m),o.elementType=s,o.type=f,o.lanes=v,o}function Ki(s,o,l,f){return s=sr(7,s,f,o),s.lanes=l,s}function Rc(s,o,l,f){return s=sr(22,s,f,o),s.elementType=le,s.lanes=l,s.stateNode={isHidden:!1},s}function Rf(s,o,l){return s=sr(6,s,null,o),s.lanes=l,s}function kf(s,o,l){return o=sr(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function II(s,o,l,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ps(0),this.expirationTimes=Ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Pf(s,o,l,f,m,v,S,F,j){return s=new II(s,o,l,F,j),o===1?(o=1,v===!0&&(o|=8)):o=0,v=sr(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},$d(v),s}function SI(s,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:f==null?null:""+f,children:s,containerInfo:o,implementation:l}}function jy(s){if(!s)return zs;s=s._reactInternals;e:{if(mr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(Sn(l))return fg(s,l,o)}return o}function By(s,o,l,f,m,v,S,F,j){return s=Pf(l,f,!0,s,m,v,S,F,j),s.context=jy(null),l=s.current,f=mn(),m=Hs(l),v=ps(f,m),v.callback=o??null,qs(l,v,m),s.current.lanes=m,Ds(s,m,f),An(s,f),s}function kc(s,o,l,f){var m=o.current,v=mn(),S=Hs(m);return l=jy(l),o.context===null?o.context=l:o.pendingContext=l,o=ps(v,S),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=qs(m,o,S),s!==null&&(Ar(s,m,S,v),ac(s,m,S)),S}function Pc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function zy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Df(s,o){zy(s,o),(s=s.alternate)&&zy(s,o)}function CI(){return null}var Uy=typeof reportError=="function"?reportError:function(s){console.error(s)};function bf(s){this._internalRoot=s}Dc.prototype.render=bf.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));kc(s,o,null,null)},Dc.prototype.unmount=bf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;qi(function(){kc(null,s,null,null)}),o[us]=null}};function Dc(s){this._internalRoot=s}Dc.prototype.unstable_scheduleHydration=function(s){if(s){var o=Du();s={blockedOn:null,target:s,priority:o};for(var l=0;l<jr.length&&o!==0&&o<jr[l].priority;l++);jr.splice(l,0,s),l===0&&Mu(s)}};function Vf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function $y(){}function xI(s,o,l,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var J=Pc(S);v.call(J)}}var S=By(o,f,s,0,null,!1,!1,"",$y);return s._reactRootContainer=S,s[us]=S.current,ol(s.nodeType===8?s.parentNode:s),qi(),S}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var F=f;f=function(){var J=Pc(j);F.call(J)}}var j=Pf(s,0,!1,null,null,!1,!1,"",$y);return s._reactRootContainer=j,s[us]=j.current,ol(s.nodeType===8?s.parentNode:s),qi(function(){kc(o,j,l,f)}),j}function Vc(s,o,l,f,m){var v=l._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var F=m;m=function(){var j=Pc(S);F.call(j)}}kc(o,S,s,m)}else S=xI(l,o,s,m,f);return Pc(S)}ku=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var l=ks(o.pendingLanes);l!==0&&(bs(o,l|1),An(o,st()),!(Ge&6)&&(na=st()+500,Us()))}break;case 13:qi(function(){var f=fs(s,1);if(f!==null){var m=mn();Ar(f,s,1,m)}}),Df(s,1)}},Ao=function(s){if(s.tag===13){var o=fs(s,134217728);if(o!==null){var l=mn();Ar(o,s,134217728,l)}Df(s,134217728)}},Pu=function(s){if(s.tag===13){var o=Hs(s),l=fs(s,o);if(l!==null){var f=mn();Ar(l,s,o,f)}Df(s,o)}},Du=function(){return ze},bu=function(s,o){var l=ze;try{return ze=s,o()}finally{ze=l}},hr=function(s,o,l){switch(o){case"input":if(br(s,l),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==s&&f.form===s.form){var m=Yu(f);if(!m)throw Error(t(90));Gt(f),br(f,m)}}}break;case"textarea":Vr(s,l);break;case"select":o=l.value,o!=null&&cn(s,!!l.multiple,o,!1)}},rs=Cf,Ci=qi;var AI={usingClientEntryPoint:!1,Events:[ul,$o,Yu,Vn,Si,Cf]},Il={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NI={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qa(s),s===null?null:s.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||CI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Ri=Mc.inject(NI),On=Mc}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AI,Nn.createPortal=function(s,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(o))throw Error(t(200));return SI(s,o,null,l)},Nn.createRoot=function(s,o){if(!Vf(s))throw Error(t(299));var l=!1,f="",m=Uy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Pf(s,1,!1,null,null,l,!1,f,m),s[us]=o.current,ol(s.nodeType===8?s.parentNode:s),new bf(o)},Nn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qa(o),s=s===null?null:s.stateNode,s},Nn.flushSync=function(s){return qi(s)},Nn.hydrate=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!0,l)},Nn.hydrateRoot=function(s,o,l){if(!Vf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,m=!1,v="",S=Uy;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=By(o,null,s,1,l??null,m,!1,v,S),s[us]=o.current,ol(s),f)for(s=0;s<f.length;s++)l=f[s],m=l._getVersion,m=m(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,m]:o.mutableSourceEagerHydrationData.push(l,m);return new Dc(o)},Nn.render=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!1,l)},Nn.unmountComponentAtNode=function(s){if(!bc(s))throw Error(t(40));return s._reactRootContainer?(qi(function(){Vc(null,null,s,!1,function(){s._reactRootContainer=null,s[us]=null})}),!0):!1},Nn.unstable_batchedUpdates=Cf,Nn.unstable_renderSubtreeIntoContainer=function(s,o,l,f){if(!bc(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vc(s,o,l,!1,f)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Zy;function FI(){if(Zy)return Ff.exports;Zy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ff.exports=OI(),Ff.exports}var Jy;function LI(){if(Jy)return Oc;Jy=1;var r=FI();return Oc.createRoot=r.createRoot,Oc.hydrateRoot=r.hydrateRoot,Oc}var jI=LI();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s0=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=ae.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:u,...c},d)=>ae.createElement("svg",{ref:d,...zI,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:s0("lucide",i),...c},[...u.map(([p,g])=>ae.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,e)=>{const t=ae.forwardRef(({className:n,...i},a)=>ae.createElement(UI,{ref:a,iconNode:e,className:s0(`lucide-${BI(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],qI=Ye("Award",$I);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],GI=Ye("ChevronDown",WI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ni=Ye("ChevronLeft",KI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vs=Ye("ChevronRight",HI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],XI=Ye("ChevronUp",QI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ZI=Ye("CirclePlus",YI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],e1=Ye("CircleSlash",JI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],i0=Ye("Clock",t1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],o0=Ye("Download",n1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16.2V21h-4.8",key:"1hrera"}],["path",{d:"M21 7.8V3h-4.8",key:"ul1q53"}],["path",{d:"M3 16.2V21h4.8",key:"1x04uo"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 7.8V3h4.8",key:"1ijppm"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],s1=Ye("Expand",r1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],o1=Ye("FileText",i1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],l1=Ye("GitCommitHorizontal",a1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],c1=Ye("Globe",u1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],d1=Ye("ImagePlus",h1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],p1=Ye("Loader",f1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],g1=Ye("Lock",m1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],v1=Ye("MessageSquare",y1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],w1=Ye("Minimize",_1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],zp=Ye("Music",E1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],a0=Ye("Pause",T1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],l0=Ye("Play",I1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],C1=Ye("RotateCw",S1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],u0=Ye("Save",x1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],N1=Ye("Share",A1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],k1=Ye("ShoppingBag",R1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],D1=Ye("SquarePen",P1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V1=Ye("Trash2",b1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],O1=Ye("Volume",M1);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oo=Ye("X",F1),L1=()=>{};var ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},j1=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],u=r[t++],c=r[t++],d=((i&7)<<18|(a&63)<<12|(u&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=r[t++],u=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},h0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],u=i+1<r.length,c=u?r[i+1]:0,d=i+2<r.length,p=d?r[i+2]:0,g=a>>2,_=(a&3)<<4|c>>4;let T=(c&15)<<2|p>>6,C=p&63;d||(C=64,u||(T=64)),n.push(t[g],t[_],t[T],t[C])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(c0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):j1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const p=i<r.length?t[r.charAt(i)]:64;++i;const _=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||p==null||_==null)throw new B1;const T=a<<2|c>>4;if(n.push(T),p!==64){const C=c<<4&240|p>>2;if(n.push(C),_!==64){const x=p<<6&192|_;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class B1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z1=function(r){const e=c0(r);return h0.encodeByteArray(e,!0)},nh=function(r){return z1(r).replace(/\./g,"")},U1=function(r){try{return h0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=()=>$1().__FIREBASE_DEFAULTS__,W1=()=>{if(typeof process>"u"||typeof ev>"u")return;const r=ev.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},G1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&U1(r[1]);return e&&JSON.parse(e)},Up=()=>{try{return L1()||q1()||W1()||G1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},K1=r=>{var e,t;return(t=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},H1=r=>{const e=K1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},d0=()=>{var r;return(r=Up())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[nh(JSON.stringify(t)),nh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y1(){var r;const e=(r=Up())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f0(){return!Y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function p0(){try{return typeof indexedDB=="object"}catch{return!1}}function Z1(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="FirebaseError";class go extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=J1,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m0.prototype.create)}}class m0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?eS(a,n):"Error",c=`${this.serviceName}: ${u} (${i}).`;return new go(i,c,n)}}function eS(r,e){return r.replace(tS,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const tS=/\{\$([^}]+)}/g;function sh(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],u=e[i];if(tv(a)&&tv(u)){if(!sh(a,u))return!1}else if(a!==u)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function tv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(r){return r&&r._delegate?r._delegate:r}class ya{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Q1;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sS(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&u.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rS(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rS(r){return r===Qi?void 0:r}function sS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(We||(We={}));const oS={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},aS=We.INFO,lS={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},uS=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=lS[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y0{constructor(e){this.name=e,this._logLevel=aS,this._logHandler=uS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const cS=(r,e)=>e.some(t=>r instanceof t);let nv,rv;function hS(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dS(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v0=new WeakMap,rp=new WeakMap,_0=new WeakMap,Bf=new WeakMap,$p=new WeakMap;function fS(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(oi(r.result)),i()},u=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&v0.set(t,r)}).catch(()=>{}),$p.set(e,r),e}function pS(r){if(rp.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});rp.set(r,e)}let sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return rp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||_0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mS(r){sp=r(sp)}function gS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(zf(this),e,...t);return _0.set(n,e.sort?e.sort():[e]),oi(n)}:dS().includes(r)?function(...e){return r.apply(zf(this),e),oi(v0.get(this))}:function(...e){return oi(r.apply(zf(this),e))}}function yS(r){return typeof r=="function"?gS(r):(r instanceof IDBTransaction&&pS(r),cS(r,hS())?new Proxy(r,sp):r)}function oi(r){if(r instanceof IDBRequest)return fS(r);if(Bf.has(r))return Bf.get(r);const e=yS(r);return e!==r&&(Bf.set(r,e),$p.set(e,r)),e}const zf=r=>$p.get(r);function vS(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const u=indexedDB.open(r,e),c=oi(u);return n&&u.addEventListener("upgradeneeded",d=>{n(oi(u.result),d.oldVersion,d.newVersion,oi(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const _S=["get","getKey","getAll","getAllKeys","count"],wS=["put","add","delete","clear"],Uf=new Map;function sv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Uf.get(e))return Uf.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=wS.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||_S.includes(t)))return;const a=async function(u,...c){const d=this.transaction(u,i?"readwrite":"readonly");let p=d.store;return n&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&d.done]))[0]};return Uf.set(e,a),a}mS(r=>({...r,get:(e,t,n)=>sv(e,t)||r.get(e,t,n),has:(e,t)=>!!sv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TS(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function TS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",iv="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new y0("@firebase/app"),IS="@firebase/app-compat",SS="@firebase/analytics-compat",CS="@firebase/analytics",xS="@firebase/app-check-compat",AS="@firebase/app-check",NS="@firebase/auth",RS="@firebase/auth-compat",kS="@firebase/database",PS="@firebase/data-connect",DS="@firebase/database-compat",bS="@firebase/functions",VS="@firebase/functions-compat",MS="@firebase/installations",OS="@firebase/installations-compat",FS="@firebase/messaging",LS="@firebase/messaging-compat",jS="@firebase/performance",BS="@firebase/performance-compat",zS="@firebase/remote-config",US="@firebase/remote-config-compat",$S="@firebase/storage",qS="@firebase/storage-compat",WS="@firebase/firestore",GS="@firebase/vertexai",KS="@firebase/firestore-compat",HS="firebase",QS="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",XS={[ip]:"fire-core",[IS]:"fire-core-compat",[CS]:"fire-analytics",[SS]:"fire-analytics-compat",[AS]:"fire-app-check",[xS]:"fire-app-check-compat",[NS]:"fire-auth",[RS]:"fire-auth-compat",[kS]:"fire-rtdb",[PS]:"fire-data-connect",[DS]:"fire-rtdb-compat",[bS]:"fire-fn",[VS]:"fire-fn-compat",[MS]:"fire-iid",[OS]:"fire-iid-compat",[FS]:"fire-fcm",[LS]:"fire-fcm-compat",[jS]:"fire-perf",[BS]:"fire-perf-compat",[zS]:"fire-rc",[US]:"fire-rc-compat",[$S]:"fire-gcs",[qS]:"fire-gcs-compat",[WS]:"fire-fst",[KS]:"fire-fst-compat",[GS]:"fire-vertex","fire-js":"fire-js",[HS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,YS=new Map,ap=new Map;function ov(r,e){try{r.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zl(r){const e=r.name;if(ap.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,r);for(const t of ih.values())ov(t,r);for(const t of YS.values())ov(t,r);return!0}function w0(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function E0(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new m0("app","Firebase",ZS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=QS;function I0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ai.create("bad-app-name",{appName:String(i)});if(t||(t=d0()),!t)throw ai.create("no-options");const a=ih.get(i);if(a){if(sh(t,a.options)&&sh(n,a.config))return a;throw ai.create("duplicate-app",{appName:i})}const u=new iS(i);for(const d of ap.values())u.addComponent(d);const c=new JS(t,n,u);return ih.set(i,c),c}function eC(r=op){const e=ih.get(r);if(!e&&r===op&&d0())return I0();if(!e)throw ai.create("no-app",{appName:r});return e}function li(r,e,t){var n;let i=(n=XS[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(c.join(" "));return}zl(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",nC=1,Ul="firebase-heartbeat-store";let $f=null;function S0(){return $f||($f=vS(tC,nC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw ai.create("idb-open",{originalErrorMessage:r.message})})),$f}async function rC(r){try{const t=(await S0()).transaction(Ul),n=await t.objectStore(Ul).get(C0(r));return await t.done,n}catch(e){if(e instanceof go)Is.warn(e.message);else{const t=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function av(r,e){try{const n=(await S0()).transaction(Ul,"readwrite");await n.objectStore(Ul).put(e,C0(r)),await n.done}catch(t){if(t instanceof go)Is.warn(t.message);else{const n=ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(n.message)}}}function C0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1024,iC=30;class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lC(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>iC){const u=uC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Is.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:n,unsentEntries:i}=aC(this._heartbeatsCache.heartbeats),a=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Is.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function aC(r,e=sC){const t=[];let n=r.slice();for(const i of r){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),uv(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uv(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class lC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return p0()?Z1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function uv(r){return nh(JSON.stringify({version:2,heartbeats:r})).length}function uC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){zl(new ya("platform-logger",e=>new ES(e),"PRIVATE")),zl(new ya("heartbeat",e=>new oC(e),"PRIVATE")),li(ip,iv,r),li(ip,iv,"esm2017"),li("fire-js","")}cC("");var hC="firebase",dC="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(hC,dC,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,x0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(D,M,O){for(var P=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)P[ce-2]=arguments[ce];return I.prototype[M].apply(D,P)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,N){N||(N=0);var D=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)D[M]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(M=0;16>M;++M)D[M]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],M=R.g[2];var O=R.g[3],P=I+(O^N&(M^O))+D[0]+3614090360&4294967295;I=N+(P<<7&4294967295|P>>>25),P=O+(M^I&(N^M))+D[1]+3905402710&4294967295,O=I+(P<<12&4294967295|P>>>20),P=M+(N^O&(I^N))+D[2]+606105819&4294967295,M=O+(P<<17&4294967295|P>>>15),P=N+(I^M&(O^I))+D[3]+3250441966&4294967295,N=M+(P<<22&4294967295|P>>>10),P=I+(O^N&(M^O))+D[4]+4118548399&4294967295,I=N+(P<<7&4294967295|P>>>25),P=O+(M^I&(N^M))+D[5]+1200080426&4294967295,O=I+(P<<12&4294967295|P>>>20),P=M+(N^O&(I^N))+D[6]+2821735955&4294967295,M=O+(P<<17&4294967295|P>>>15),P=N+(I^M&(O^I))+D[7]+4249261313&4294967295,N=M+(P<<22&4294967295|P>>>10),P=I+(O^N&(M^O))+D[8]+1770035416&4294967295,I=N+(P<<7&4294967295|P>>>25),P=O+(M^I&(N^M))+D[9]+2336552879&4294967295,O=I+(P<<12&4294967295|P>>>20),P=M+(N^O&(I^N))+D[10]+4294925233&4294967295,M=O+(P<<17&4294967295|P>>>15),P=N+(I^M&(O^I))+D[11]+2304563134&4294967295,N=M+(P<<22&4294967295|P>>>10),P=I+(O^N&(M^O))+D[12]+1804603682&4294967295,I=N+(P<<7&4294967295|P>>>25),P=O+(M^I&(N^M))+D[13]+4254626195&4294967295,O=I+(P<<12&4294967295|P>>>20),P=M+(N^O&(I^N))+D[14]+2792965006&4294967295,M=O+(P<<17&4294967295|P>>>15),P=N+(I^M&(O^I))+D[15]+1236535329&4294967295,N=M+(P<<22&4294967295|P>>>10),P=I+(M^O&(N^M))+D[1]+4129170786&4294967295,I=N+(P<<5&4294967295|P>>>27),P=O+(N^M&(I^N))+D[6]+3225465664&4294967295,O=I+(P<<9&4294967295|P>>>23),P=M+(I^N&(O^I))+D[11]+643717713&4294967295,M=O+(P<<14&4294967295|P>>>18),P=N+(O^I&(M^O))+D[0]+3921069994&4294967295,N=M+(P<<20&4294967295|P>>>12),P=I+(M^O&(N^M))+D[5]+3593408605&4294967295,I=N+(P<<5&4294967295|P>>>27),P=O+(N^M&(I^N))+D[10]+38016083&4294967295,O=I+(P<<9&4294967295|P>>>23),P=M+(I^N&(O^I))+D[15]+3634488961&4294967295,M=O+(P<<14&4294967295|P>>>18),P=N+(O^I&(M^O))+D[4]+3889429448&4294967295,N=M+(P<<20&4294967295|P>>>12),P=I+(M^O&(N^M))+D[9]+568446438&4294967295,I=N+(P<<5&4294967295|P>>>27),P=O+(N^M&(I^N))+D[14]+3275163606&4294967295,O=I+(P<<9&4294967295|P>>>23),P=M+(I^N&(O^I))+D[3]+4107603335&4294967295,M=O+(P<<14&4294967295|P>>>18),P=N+(O^I&(M^O))+D[8]+1163531501&4294967295,N=M+(P<<20&4294967295|P>>>12),P=I+(M^O&(N^M))+D[13]+2850285829&4294967295,I=N+(P<<5&4294967295|P>>>27),P=O+(N^M&(I^N))+D[2]+4243563512&4294967295,O=I+(P<<9&4294967295|P>>>23),P=M+(I^N&(O^I))+D[7]+1735328473&4294967295,M=O+(P<<14&4294967295|P>>>18),P=N+(O^I&(M^O))+D[12]+2368359562&4294967295,N=M+(P<<20&4294967295|P>>>12),P=I+(N^M^O)+D[5]+4294588738&4294967295,I=N+(P<<4&4294967295|P>>>28),P=O+(I^N^M)+D[8]+2272392833&4294967295,O=I+(P<<11&4294967295|P>>>21),P=M+(O^I^N)+D[11]+1839030562&4294967295,M=O+(P<<16&4294967295|P>>>16),P=N+(M^O^I)+D[14]+4259657740&4294967295,N=M+(P<<23&4294967295|P>>>9),P=I+(N^M^O)+D[1]+2763975236&4294967295,I=N+(P<<4&4294967295|P>>>28),P=O+(I^N^M)+D[4]+1272893353&4294967295,O=I+(P<<11&4294967295|P>>>21),P=M+(O^I^N)+D[7]+4139469664&4294967295,M=O+(P<<16&4294967295|P>>>16),P=N+(M^O^I)+D[10]+3200236656&4294967295,N=M+(P<<23&4294967295|P>>>9),P=I+(N^M^O)+D[13]+681279174&4294967295,I=N+(P<<4&4294967295|P>>>28),P=O+(I^N^M)+D[0]+3936430074&4294967295,O=I+(P<<11&4294967295|P>>>21),P=M+(O^I^N)+D[3]+3572445317&4294967295,M=O+(P<<16&4294967295|P>>>16),P=N+(M^O^I)+D[6]+76029189&4294967295,N=M+(P<<23&4294967295|P>>>9),P=I+(N^M^O)+D[9]+3654602809&4294967295,I=N+(P<<4&4294967295|P>>>28),P=O+(I^N^M)+D[12]+3873151461&4294967295,O=I+(P<<11&4294967295|P>>>21),P=M+(O^I^N)+D[15]+530742520&4294967295,M=O+(P<<16&4294967295|P>>>16),P=N+(M^O^I)+D[2]+3299628645&4294967295,N=M+(P<<23&4294967295|P>>>9),P=I+(M^(N|~O))+D[0]+4096336452&4294967295,I=N+(P<<6&4294967295|P>>>26),P=O+(N^(I|~M))+D[7]+1126891415&4294967295,O=I+(P<<10&4294967295|P>>>22),P=M+(I^(O|~N))+D[14]+2878612391&4294967295,M=O+(P<<15&4294967295|P>>>17),P=N+(O^(M|~I))+D[5]+4237533241&4294967295,N=M+(P<<21&4294967295|P>>>11),P=I+(M^(N|~O))+D[12]+1700485571&4294967295,I=N+(P<<6&4294967295|P>>>26),P=O+(N^(I|~M))+D[3]+2399980690&4294967295,O=I+(P<<10&4294967295|P>>>22),P=M+(I^(O|~N))+D[10]+4293915773&4294967295,M=O+(P<<15&4294967295|P>>>17),P=N+(O^(M|~I))+D[1]+2240044497&4294967295,N=M+(P<<21&4294967295|P>>>11),P=I+(M^(N|~O))+D[8]+1873313359&4294967295,I=N+(P<<6&4294967295|P>>>26),P=O+(N^(I|~M))+D[15]+4264355552&4294967295,O=I+(P<<10&4294967295|P>>>22),P=M+(I^(O|~N))+D[6]+2734768916&4294967295,M=O+(P<<15&4294967295|P>>>17),P=N+(O^(M|~I))+D[13]+1309151649&4294967295,N=M+(P<<21&4294967295|P>>>11),P=I+(M^(N|~O))+D[4]+4149444226&4294967295,I=N+(P<<6&4294967295|P>>>26),P=O+(N^(I|~M))+D[11]+3174756917&4294967295,O=I+(P<<10&4294967295|P>>>22),P=M+(I^(O|~N))+D[2]+718787259&4294967295,M=O+(P<<15&4294967295|P>>>17),P=N+(O^(M|~I))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+O&4294967295}n.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,D=this.B,M=this.h,O=0;O<I;){if(M==0)for(;O<=N;)i(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<I;)if(D[M++]=R.charCodeAt(O++),M==this.blockSize){i(this,D),M=0;break}}else for(;O<I;)if(D[M++]=R[O++],M==this.blockSize){i(this,D),M=0;break}}this.h=M,this.o+=I},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var D=0;32>D;D+=8)R[N++]=this.g[I]>>>D&255;return R};function a(R,I){var N=c;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function u(R,I){this.h=I;for(var N=[],D=!0,M=R.length-1;0<=M;M--){var O=R[M]|0;D&&O==I||(N[M]=O,D=!1)}this.g=N}var c={};function d(R){return-128<=R&&128>R?a(R,function(I){return new u([I|0],0>I?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return V(p(-R));for(var I=[],N=1,D=0;R>=N;D++)I[D]=R/N|0,N*=4294967296;return new u(I,0)}function g(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return V(g(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(I,8)),D=_,M=0;M<R.length;M+=8){var O=Math.min(8,R.length-M),P=parseInt(R.substring(M,M+O),I);8>O?(O=p(Math.pow(I,O)),D=D.j(O).add(p(P))):(D=D.j(N),D=D.add(p(P)))}return D}var _=d(0),T=d(1),C=d(16777216);r=u.prototype,r.m=function(){if(k(this))return-V(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var D=this.i(N);R+=(0<=D?D:4294967296+D)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(k(this))return"-"+V(this).toString(R);for(var I=p(Math.pow(R,6)),N=this,D="";;){var M=Z(N,I).g;N=B(N,M.j(I));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=M,x(N))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}r.l=function(R){return R=B(this,R),k(R)?-1:x(R)?0:1};function V(R){for(var I=R.g.length,N=[],D=0;D<I;D++)N[D]=~R.g[D];return new u(N,~R.h).add(T)}r.abs=function(){return k(this)?V(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],D=0,M=0;M<=I;M++){var O=D+(this.i(M)&65535)+(R.i(M)&65535),P=(O>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);D=P>>>16,O&=65535,P&=65535,N[M]=P<<16|O}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(R,I){return R.add(V(I))}r.j=function(R){if(x(this)||x(R))return _;if(k(this))return k(R)?V(this).j(V(R)):V(V(this).j(R));if(k(R))return V(this.j(V(R)));if(0>this.l(C)&&0>R.l(C))return p(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],D=0;D<2*I;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<R.g.length;M++){var O=this.i(D)>>>16,P=this.i(D)&65535,ce=R.i(M)>>>16,ye=R.i(M)&65535;N[2*D+2*M]+=P*ye,Q(N,2*D+2*M),N[2*D+2*M+1]+=O*ye,Q(N,2*D+2*M+1),N[2*D+2*M+1]+=P*ce,Q(N,2*D+2*M+1),N[2*D+2*M+2]+=O*ce,Q(N,2*D+2*M+2)}for(D=0;D<I;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=I;D<2*I;D++)N[D]=0;return new u(N,0)};function Q(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function $(R,I){this.g=R,this.h=I}function Z(R,I){if(x(I))throw Error("division by zero");if(x(R))return new $(_,_);if(k(R))return I=Z(V(R),I),new $(V(I.g),V(I.h));if(k(I))return I=Z(R,V(I)),new $(V(I.g),I.h);if(30<R.g.length){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var N=T,D=I;0>=D.l(R);)N=L(N),D=L(D);var M=U(N,1),O=U(D,1);for(D=U(D,2),N=U(N,2);!x(D);){var P=O.add(D);0>=P.l(R)&&(M=M.add(N),O=P),D=U(D,1),N=U(N,1)}return I=B(R,M.j(I)),new $(M,I)}for(M=_;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=p(N),P=O.j(I);k(P)||0<P.l(R);)N-=D,O=p(N),P=O.j(I);x(O)&&(O=T),M=M.add(O),R=B(R,P)}return new $(M,R)}r.A=function(R){return Z(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],D=0;D<I;D++)N[D]=this.i(D)&R.i(D);return new u(N,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],D=0;D<I;D++)N[D]=this.i(D)|R.i(D);return new u(N,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],D=0;D<I;D++)N[D]=this.i(D)^R.i(D);return new u(N,this.h^R.h)};function L(R){for(var I=R.g.length+1,N=[],D=0;D<I;D++)N[D]=R.i(D)<<1|R.i(D-1)>>>31;return new u(N,R.h)}function U(R,I){var N=I>>5;I%=32;for(var D=R.g.length-N,M=[],O=0;O<D;O++)M[O]=0<I?R.i(O+N)>>>I|R.i(O+N+1)<<32-I:R.i(O+N);return new u(M,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,x0=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,ui=u}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A0,kl,N0,Gc,lp,R0,k0,P0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,w){return h==Array.prototype||h==Object.prototype||(h[y]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=t(this);function i(h,y){if(y)e:{var w=n;h=h.split(".");for(var A=0;A<h.length-1;A++){var G=h[A];if(!(G in w))break e;w=w[G]}h=h[h.length-1],A=w[h],y=y(A),y!=A&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var w=0,A=!1,G={next:function(){if(!A&&w<h.length){var te=w++;return{value:y(te,h[te]),done:!1}}return A=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(h){return h||function(){return a(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function _(h,y,w){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,A),h.apply(y,G)}}return function(){return h.apply(y,arguments)}}function T(h,y,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,T.apply(null,arguments)}function C(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function x(h,y){function w(){}w.prototype=y.prototype,h.aa=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(A,G,te){for(var pe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)pe[Qe-2]=arguments[Qe];return y.prototype[G].apply(A,pe)}}function k(h){const y=h.length;if(0<y){const w=Array(y);for(let A=0;A<y;A++)w[A]=h[A];return w}return[]}function V(h,y){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(d(A)){const G=h.length||0,te=A.length||0;h.length=G+te;for(let pe=0;pe<te;pe++)h[G+pe]=A[pe]}else h.push(A)}}class B{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Q(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function Z(h){return Z[" "](h),h}Z[" "]=function(){};var L=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function U(h,y,w){for(const A in h)y.call(w,h[A],A,h)}function R(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function I(h){const y={};for(const w in h)y[w]=h[w];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,y){let w,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(w in A)h[w]=A[w];for(let te=0;te<N.length;te++)w=N[te],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function M(h){var y=1;h=h.split(":");const w=[];for(;0<y&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function O(h){c.setTimeout(()=>{throw h},0)}function P(){var h=ee;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,w){const A=ye.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var ye=new B(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let le,X=!1,ee=new ce,K=()=>{const h=c.Promise.resolve(void 0);le=()=>{h.then(b)}};var b=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(w){O(w)}var y=ye;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}X=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h}();function he(h,y){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(L){e:{try{Z(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&he.aa.h.call(this)}}x(he,ne);var Ie={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),de=0;function Be(h,y,w,A,G){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=G,this.key=++de,this.da=this.fa=!1}function tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function bt(h){this.src=h,this.g={},this.h=0}bt.prototype.add=function(h,y,w,A,G){var te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);var pe=vn(h,y,A,G);return-1<pe?(y=h[pe],w||(y.fa=!1)):(y=new Be(y,this.src,te,!!A,G),y.fa=w,h.push(y)),y};function Gt(h,y){var w=y.type;if(w in h.g){var A=h.g[w],G=Array.prototype.indexOf.call(A,y,void 0),te;(te=0<=G)&&Array.prototype.splice.call(A,G,1),te&&(tt(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function vn(h,y,w,A){for(var G=0;G<h.length;++G){var te=h[G];if(!te.da&&te.listener==y&&te.capture==!!w&&te.ha==A)return G}return-1}var je="closure_lm_"+(1e6*Math.random()|0),Hn={};function un(h,y,w,A,G){if(Array.isArray(y)){for(var te=0;te<y.length;te++)un(h,y[te],w,A,G);return null}return w=Mr(w),h&&h[Re]?h.K(y,w,p(A)?!!A.capture:!1,G):br(h,y,w,!1,A,G)}function br(h,y,w,A,G,te){if(!y)throw Error("Invalid event type");var pe=p(G)?!!G.capture:!!G,Qe=hn(h);if(Qe||(h[je]=Qe=new bt(h)),w=Qe.add(y,w,A,pe,te),w.proxy)return w;if(A=ut(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)me||(G=pe),G===void 0&&(G=!1),h.addEventListener(y.toString(),A,G);else if(h.attachEvent)h.attachEvent(cn(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ut(){function h(w){return y.call(h.src,h.listener,w)}const y=ur;return h}function _n(h,y,w,A,G){if(Array.isArray(y))for(var te=0;te<y.length;te++)_n(h,y[te],w,A,G);else A=p(A)?!!A.capture:!!A,w=Mr(w),h&&h[Re]?(h=h.i,y=String(y).toString(),y in h.g&&(te=h.g[y],w=vn(te,w,A,G),-1<w&&(tt(te[w]),Array.prototype.splice.call(te,w,1),te.length==0&&(delete h.g[y],h.h--)))):h&&(h=hn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=vn(y,w,A,G)),(w=-1<h?y[h]:null)&&Dn(w))}function Dn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Re])Gt(y.i,h);else{var w=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(w,A,h.capture):y.detachEvent?y.detachEvent(cn(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=hn(y))?(Gt(w,h),w.h==0&&(w.src=null,y[je]=null)):tt(h)}}}function cn(h){return h in Hn?Hn[h]:Hn[h]="on"+h}function ur(h,y){if(h.da)h=!0;else{y=new he(y,this);var w=h.listener,A=h.ha||h.src;h.fa&&Dn(h),h=w.call(A,y)}return h}function hn(h){return h=h[je],h instanceof bt?h:null}var Vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mr(h){return typeof h=="function"?h:(h[Vr]||(h[Vr]=function(y){return h.handleEvent(y)}),h[Vr])}function nt(){q.call(this),this.i=new bt(this),this.M=this,this.F=null}x(nt,q),nt.prototype[Re]=!0,nt.prototype.removeEventListener=function(h,y,w,A){_n(this,h,y,w,A)};function ct(h,y){var w,A=h.F;if(A)for(w=[];A;A=A.F)w.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new ne(y,h);else if(y instanceof ne)y.target=y.target||h;else{var G=y;y=new ne(A,h),D(y,G)}if(G=!0,w)for(var te=w.length-1;0<=te;te--){var pe=y.g=w[te];G=wn(pe,A,!0,y)&&G}if(pe=y.g=h,G=wn(pe,A,!0,y)&&G,G=wn(pe,A,!1,y)&&G,w)for(te=0;te<w.length;te++)pe=y.g=w[te],G=wn(pe,A,!1,y)&&G}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var w=h.g[y],A=0;A<w.length;A++)tt(w[A]);delete h.g[y],h.h--}}this.F=null},nt.prototype.K=function(h,y,w,A){return this.i.add(String(h),y,!1,w,A)},nt.prototype.L=function(h,y,w,A){return this.i.add(String(h),y,!0,w,A)};function wn(h,y,w,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,te=0;te<y.length;++te){var pe=y[te];if(pe&&!pe.da&&pe.capture==w){var Qe=pe.listener,Mt=pe.ha||pe.src;pe.fa&&Gt(h.i,pe),G=Qe.call(Mt,A)!==!1&&G}}return G&&!A.defaultPrevented}function wi(h,y,w){if(typeof h=="function")w&&(h=T(h,w));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(h,y||0)}function cr(h){h.g=wi(()=>{h.g=null,h.i&&(h.i=!1,cr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Or extends q{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(h){q.call(this),this.h=h,this.g={}}x(ns,q);var Ei=[];function Ti(h){U(h.g,function(y,w){this.g.hasOwnProperty(w)&&Dn(y)},h),h.g={}}ns.prototype.N=function(){ns.aa.N.call(this),Ti(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=c.JSON.stringify,ke=c.JSON.parse,Ve=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function He(){}He.prototype.h=null;function rt(h){return h.h||(h.h=h.i())}function hr(){}var Vt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){ne.call(this,"d")}x(bn,ne);function dr(){ne.call(this,"c")}x(dr,ne);var Vn={},Si=null;function rs(){return Si=Si||new nt}Vn.La="serverreachability";function Ci(h){ne.call(this,Vn.La,h)}x(Ci,ne);function Mn(h){const y=rs();ct(y,new Ci(y))}Vn.STAT_EVENT="statevent";function xi(h,y){ne.call(this,Vn.STAT_EVENT,h),this.stat=y}x(xi,ne);function ht(h){const y=rs();ct(y,new xi(y,h))}Vn.Ma="timingevent";function It(h,y){ne.call(this,Vn.Ma,h),this.size=y}x(It,ne);function St(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function fr(h,y,w,A,G,te){h.info(function(){if(h.g)if(te)for(var pe="",Qe=te.split("&"),Mt=0;Mt<Qe.length;Mt++){var $e=Qe[Mt].split("=");if(1<$e.length){var jt=$e[0];$e=$e[1];var kt=jt.split("_");pe=2<=kt.length&&kt[1]=="type"?pe+(jt+"="+$e+"&"):pe+(jt+"=redacted&")}}else pe=null;else pe=te;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+y+`
`+w+`
`+pe})}function Fr(h,y,w,A,G,te,pe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+y+`
`+w+`
`+te+" "+pe})}function pr(h,y,w,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ld(h,w)+(A?" "+A:"")})}function $a(h,y){h.info(function(){return"TIMEOUT: "+y})}Qn.prototype.info=function(){};function ld(h,y){if(!h.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var A=w[h];if(!(2>A.length)){var G=A[1];if(Array.isArray(G)&&!(1>G.length)){var te=G[0];if(te!="noop"&&te!="stop"&&te!="close")for(var pe=1;pe<G.length;pe++)G[pe]=""}}}}return Ii(w)}catch{return y}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mr;function Ai(){}x(Ai,He),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},mr=new Ai;function gr(h,y,w,A){this.j=h,this.i=y,this.l=w,this.R=A||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iu}function Iu(){this.i=null,this.g="",this.h=!1}var qa={},Io={};function So(h,y,w){h.L=1,h.v=bs(Fn(y)),h.m=w,h.P=!0,Wa(h,null)}function Wa(h,y){h.F=Date.now(),st(h),h.A=Fn(h.v);var w=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),Ms(w.i,"t",A),h.C=0,w=h.j.J,h.h=new Iu,h.g=zu(h.j,w?y:null,!h.m),0<h.O&&(h.M=new Or(T(h.Y,h,h.g),h.O)),y=h.U,w=h.g,A=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ei[0]=G.toString()),G=Ei);for(var te=0;te<G.length;te++){var pe=un(w,G[te],A||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Mn(),fr(h.i,h.u,h.A,h.l,h.R,h.m)}gr.prototype.ca=function(h){h=h.target;const y=this.M;y&&Tn(h)==3?y.j():this.Y(h)},gr.prototype.Y=function(h){try{if(h==this.g)e:{const kt=Tn(this.g);var y=this.g.Ba();const Zn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Ya(this.g)))){this.J||kt!=4||y==7||(y==8||0>=Zn?Mn(3):Mn(2)),Ni(this);var w=this.g.Z();this.X=w;t:if(Su(this)){var A=Ya(this.g);h="";var G=A.length,te=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),Rs(this);var pe="";break t}this.h.i=new c.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,h+=this.h.i.decode(A[y],{stream:!(te&&y==G-1)});A.length=0,this.h.g+=h,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=w==200,Fr(this.i,this.u,this.A,this.l,this.R,kt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Mt=this.g;if((Qe=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Qe)){var $e=Qe;break t}}$e=null}if(w=$e)pr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,ht(12),Xn(this),Rs(this);break e}}if(this.P){w=!0;let jn;for(;!this.J&&this.C<pe.length;)if(jn=ud(this,pe),jn==Io){kt==4&&(this.s=4,ht(14),w=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==qa){this.s=4,ht(15),pr(this.i,this.l,pe,"[Invalid Chunk]"),w=!1;break}else pr(this.i,this.l,jn,null),Ga(this,jn);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||pe.length!=0||this.h.h||(this.s=1,ht(16),w=!1),this.o=this.o&&w,!w)pr(this.i,this.l,pe,"[Invalid Chunked Response]"),Xn(this),Rs(this);else if(0<pe.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Ja(jt),jt.M=!0,ht(11))}}else pr(this.i,this.l,pe,null),Ga(this,pe);kt==4&&Xn(this),this.o&&!this.J&&(kt==4?Mo(this.j,this):(this.o=!1,st(this)))}else ko(this.g),w==400&&0<pe.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Xn(this),Rs(this)}}}catch{}finally{}};function Su(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ud(h,y){var w=h.C,A=y.indexOf(`
`,w);return A==-1?Io:(w=Number(y.substring(w,A)),isNaN(w)?qa:(A+=1,A+w>y.length?Io:(y=y.slice(A,A+w),h.C=A+w,y)))}gr.prototype.cancel=function(){this.J=!0,Xn(this)};function st(h){h.S=Date.now()+h.I,Cu(h,h.I)}function Cu(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=St(T(h.ba,h),y)}function Ni(h){h.B&&(c.clearTimeout(h.B),h.B=null)}gr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($a(this.i,this.A),this.L!=2&&(Mn(),ht(17)),Xn(this),this.s=2,Rs(this)):Cu(this,this.S-h)};function Rs(h){h.j.G==0||h.J||Mo(h.j,h)}function Xn(h){Ni(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ti(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ga(h,y){try{var w=h.j;if(w.G!=0&&(w.g==h||dn(w.h,h))){if(!h.K&&dn(w.h,h)&&w.G==3){try{var A=w.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Vo(w),Er(w);else break e;bo(w),ht(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=St(T(w.Za,w),6e3));if(1>=Au(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ls(w,11)}else if((h.K||w.g==h)&&Vo(w),!Q(y))for(G=w.Da.g.parse(y),y=0;y<G.length;y++){let $e=G[y];if(w.T=$e[0],$e=$e[1],w.G==2)if($e[0]=="c"){w.K=$e[1],w.ia=$e[2];const jt=$e[3];jt!=null&&(w.la=jt,w.j.info("VER="+w.la));const kt=$e[4];kt!=null&&(w.Aa=kt,w.j.info("SVER="+w.Aa));const Zn=$e[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(A=1.5*Zn,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const jn=h.g;if(jn){const Mi=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var te=A.h;te.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ka(te,te.h),te.h=null))}if(A.D){const Fo=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(A.ya=Fo,Je(A.I,A.D,Fo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var pe=h;if(A.qa=Bu(A,A.J?A.ia:null,A.W),pe.K){Nu(A.h,pe);var Qe=pe,Mt=A.L;Mt&&(Qe.I=Mt),Qe.B&&(Ni(Qe),st(Qe)),A.g=pe}else Vi(A);0<w.i.length&&zr(w)}else $e[0]!="stop"&&$e[0]!="close"||ls(w,7);else w.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ls(w,7):Ht(w):$e[0]!="noop"&&w.l&&w.l.ta($e),w.v=0)}}Mn(4)}catch{}}var xu=class{constructor(h,y){this.g=h,this.map=y}};function Ri(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Au(h){return h.h?1:h.g?h.g.size:0}function dn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ka(h,y){h.g?h.g.add(y):h.h=y}function Nu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ri.prototype.cancel=function(){if(this.i=Ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ru(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.D);return y}return k(h.i)}function Co(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var y=[],w=h.length,A=0;A<w;A++)y.push(h[A]);return y}y=[],w=0;for(A in h)y[w++]=h[A];return y}function xo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var y=[];h=h.length;for(var w=0;w<h;w++)y.push(w);return y}y=[],w=0;for(const A in h)y[w++]=A;return y}}}function ks(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var w=xo(h),A=Co(h),G=A.length,te=0;te<G;te++)y.call(void 0,A[te],w&&w[te],h)}var ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(h,y){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var A=h[w].indexOf("="),G=null;if(0<=A){var te=h[w].substring(0,A);G=h[w].substring(A+1)}else te=h[w];y(te,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ss(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ss){this.h=h.h,Pi(this,h.j),this.o=h.o,this.g=h.g,Ps(this,h.s),this.l=h.l;var y=h.i,w=new Lr;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),Ds(this,w),this.m=h.m}else h&&(y=String(h).match(ki))?(this.h=!1,Pi(this,y[1]||"",!0),this.o=ze(y[2]||""),this.g=ze(y[3]||"",!0),Ps(this,y[4]),this.l=ze(y[5]||"",!0),Ds(this,y[6]||"",!0),this.m=ze(y[7]||"")):(this.h=!1,this.i=new Lr(null,this.h))}ss.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Vs(y,Ao,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vs(y,Ao,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Vs(w,w.charAt(0)=="/"?Du:Pu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Vs(w,Ha)),h.join("")};function Fn(h){return new ss(h)}function Pi(h,y,w){h.j=w?ze(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ps(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Ds(h,y,w){y instanceof Lr?(h.i=y,jr(h.i,h.h)):(w||(y=Vs(y,bu)),h.i=new Lr(y,h.h))}function Je(h,y,w){h.i.set(y,w)}function bs(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ze(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vs(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,ku),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ku(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ao=/[#\/\?@]/g,Pu=/[#\?:]/g,Du=/[#\?]/g,bu=/[#\?@]/g,Ha=/#/g;function Lr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&cd(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=Lr.prototype,r.add=function(h,y){Kt(this),this.i=null,h=Yn(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function yr(h,y){Kt(h),y=Yn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function vr(h,y){return Kt(h),y=Yn(h,y),h.g.has(y)}r.forEach=function(h,y){Kt(this),this.g.forEach(function(w,A){w.forEach(function(G){h.call(y,G,A,this)},this)},this)},r.na=function(){Kt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let A=0;A<y.length;A++){const G=h[A];for(let te=0;te<G.length;te++)w.push(y[A])}return w},r.V=function(h){Kt(this);let y=[];if(typeof h=="string")vr(this,h)&&(y=y.concat(this.g.get(Yn(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)y=y.concat(h[w])}return y},r.set=function(h,y){return Kt(this),this.i=null,h=Yn(this,h),vr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Ms(h,y,w){yr(h,y),0<w.length&&(h.i=null,h.g.set(Yn(h,y),k(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var A=y[w];const te=encodeURIComponent(String(A)),pe=this.V(A);for(A=0;A<pe.length;A++){var G=te;pe[A]!==""&&(G+="="+encodeURIComponent(String(pe[A]))),h.push(G)}}return this.i=h.join("&")};function Yn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function jr(h,y){y&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(w,A){var G=A.toLowerCase();A!=G&&(yr(this,A),Ms(this,G,w))},h)),h.j=y}function hd(h,y){const w=new Qn;if(c.Image){const A=new Image;A.onload=C(En,w,"TestLoadImage: loaded",!0,y,A),A.onerror=C(En,w,"TestLoadImage: error",!1,y,A),A.onabort=C(En,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=C(En,w,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Vu(h,y){const w=new Qn,A=new AbortController,G=setTimeout(()=>{A.abort(),En(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(te=>{clearTimeout(G),te.ok?En(w,"TestPingServer: ok",!0,y):En(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),En(w,"TestPingServer: error",!1,y)})}function En(h,y,w,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(w)}catch{}}function dd(){this.g=new Ve}function Mu(h,y,w){const A=w||"";try{ks(h,function(G,te){let pe=G;p(G)&&(pe=Ii(G)),y.push(A+te+"="+encodeURIComponent(pe))})}catch(G){throw y.push(A+"type="+encodeURIComponent("_badmap")),G}}function is(h){this.l=h.Ub||null,this.j=h.eb||!1}x(is,He),is.prototype.g=function(){return new Di(this.l,this.j)},is.prototype.i=function(h){return function(){return h}}({});function Di(h,y){nt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Di,nt),r=Di.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,wr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ou(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ou(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?_r(this):wr(this),this.readyState==3&&Ou(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,_r(this))},r.Qa=function(h){this.g&&(this.response=h,_r(this))},r.ga=function(){this.g&&_r(this)};function _r(h){h.readyState=4,h.l=null,h.j=null,h.v=null,wr(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function os(h){let y="";return U(h,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Os(h,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=os(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):Je(h,y,w))}function dt(h){nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(dt,nt);var fd=/^https?$/i,Qa=["POST","PUT"];r=dt.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mr.g(),this.v=this.o?rt(this.o):rt(mr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(te){bi(this,te);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)w.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const te of A.keys())w.set(te,A.get(te));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qa,y,void 0))||A||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,pe]of w)this.g.setRequestHeader(te,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){bi(this,te)}};function bi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,No(h),Ln(h)}function No(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ct(this,"complete"),ct(this,"abort"),Ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ln(this,!0)),dt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Xa(this):this.bb())},r.bb=function(){Xa(this)};function Xa(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Tn(h)!=4||h.Z()!=2)){if(h.u&&Tn(h)==4)wi(h.Ea,0,h);else if(ct(h,"readystatechange"),Tn(h)==4){h.h=!1;try{const pe=h.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=pe===0){var G=String(h.D).match(ki)[1]||null;!G&&c.self&&c.self.location&&(G=c.self.location.protocol.slice(0,-1)),A=!fd.test(G?G.toLowerCase():"")}w=A}if(w)ct(h,"complete"),ct(h,"success");else{h.m=6;try{var te=2<Tn(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",No(h)}}finally{Ln(h)}}}}function Ln(h,y){if(h.g){Ro(h);const w=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||ct(h,"ready");try{w.onreadystatechange=A}catch{}}}function Ro(h){h.I&&(c.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Tn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ke(y)}};function Ya(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ko(h){const y={};h=(h.g&&2<=Tn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(Q(h[A]))continue;var w=M(h[A]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=y[G]||[];y[G]=te,te.push(w)}R(y,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Za(h){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,h),this.cb=Br("retryDelaySeedMs",1e4,h),this.Wa=Br("forwardChannelMaxRetries",2,h),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(h&&h.concurrentRequestLimit),this.Da=new dd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Za.prototype,r.la=8,r.G=1,r.connect=function(h,y,w,A){ht(0),this.W=h,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=Bu(this,null,this.W),zr(this)};function Ht(h){if(Po(h),h.G==3){var y=h.U++,w=Fn(h.I);if(Je(w,"SID",h.K),Je(w,"RID",y),Je(w,"TYPE","terminate"),as(h,w),y=new gr(h,h.j,y),y.L=2,y.v=bs(Fn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.v,w=!0),w||(y.g=zu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),st(y)}ju(h)}function Er(h){h.g&&(Ja(h),h.g.cancel(),h.g=null)}function Po(h){Er(h),h.u&&(c.clearTimeout(h.u),h.u=null),Vo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function zr(h){if(!On(h.h)&&!h.s){h.s=!0;var y=h.Ga;le||K(),X||(le(),X=!0),ee.add(y,h),h.B=0}}function pd(h,y){return Au(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=St(T(h.Ga,h,y),Lu(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new gr(this,this.j,h);let te=this.o;if(this.S&&(te?(te=I(te),D(te,this.S)):te=this.S),this.m!==null||this.O||(G.H=te,te=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Fs(this,G,y),w=Fn(this.I),Je(w,"RID",h),Je(w,"CVER",22),this.D&&Je(w,"X-HTTP-Session-Id",this.D),as(this,w),te&&(this.O?y="headers="+encodeURIComponent(String(os(te)))+"&"+y:this.m&&Os(w,this.m,te)),Ka(this.h,G),this.Ua&&Je(w,"TYPE","init"),this.P?(Je(w,"$req",y),Je(w,"SID","null"),G.T=!0,So(G,w,null)):So(G,w,y),this.G=2}}else this.G==3&&(h?Do(this,h):this.i.length==0||On(this.h)||Do(this))};function Do(h,y){var w;y?w=y.l:w=h.U++;const A=Fn(h.I);Je(A,"SID",h.K),Je(A,"RID",w),Je(A,"AID",h.T),as(h,A),h.m&&h.o&&Os(A,h.m,h.o),w=new gr(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Fs(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,w),So(w,A,y)}function as(h,y){h.H&&U(h.H,function(w,A){Je(y,A,w)}),h.l&&ks({},function(w,A){Je(y,A,w)})}function Fs(h,y,w){w=Math.min(h.i.length,w);var A=h.l?T(h.l.Na,h.l,h):null;e:{var G=h.i;let te=-1;for(;;){const pe=["count="+w];te==-1?0<w?(te=G[0].g,pe.push("ofs="+te)):te=0:pe.push("ofs="+te);let Qe=!0;for(let Mt=0;Mt<w;Mt++){let $e=G[Mt].g;const jt=G[Mt].map;if($e-=te,0>$e)te=Math.max(0,G[Mt].g-100),Qe=!1;else try{Mu(jt,pe,"req"+$e+"_")}catch{A&&A(jt)}}if(Qe){A=pe.join("&");break e}}}return h=h.i.splice(0,w),y.D=h,A}function Vi(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;le||K(),X||(le(),X=!0),ee.add(y,h),h.v=0}}function bo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=St(T(h.Fa,h),Lu(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=St(T(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Er(this),Fu(this))};function Ja(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function Fu(h){h.g=new gr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Fn(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),as(h,y),h.m&&h.o&&Os(y,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=bs(Fn(y)),w.m=null,w.P=!0,Wa(w,h)}r.Za=function(){this.C!=null&&(this.C=null,Er(this),bo(this),ht(19))};function Vo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mo(h,y){var w=null;if(h.g==y){Vo(h),Ja(h),h.g=null;var A=2}else if(dn(h.h,y))w=y.D,Nu(h.h,y),A=1;else return;if(h.G!=0){if(y.o)if(A==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var G=h.B;A=rs(),ct(A,new It(A,w)),zr(h)}else Vi(h);else if(G=y.s,G==3||G==0&&0<y.X||!(A==1&&pd(h,y)||A==2&&bo(h)))switch(w&&0<w.length&&(y=h.h,y.i=y.i.concat(w)),G){case 1:ls(h,5);break;case 4:ls(h,10);break;case 3:ls(h,6);break;default:ls(h,2)}}}function Lu(h,y){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*y}function ls(h,y){if(h.j.info("Error code "+y),y==2){var w=T(h.fb,h),A=h.Xa;const G=!A;A=new ss(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pi(A,"https"),bs(A),G?hd(A.toString(),w):Vu(A.toString(),w)}else ht(2);h.G=0,h.l&&h.l.sa(y),ju(h),Po(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function ju(h){if(h.G=0,h.ka=[],h.l){const y=Ru(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ka,y),V(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Bu(h,y,w){var A=w instanceof ss?Fn(w):new ss(w);if(A.g!="")y&&(A.g=y+"."+A.g),Ps(A,A.s);else{var G=c.location;A=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var te=new ss(null);A&&Pi(te,A),y&&(te.g=y),G&&Ps(te,G),w&&(te.l=w),A=te}return w=h.D,y=h.ya,w&&y&&Je(A,w,y),Je(A,"VER",h.la),as(h,A),A}function zu(h,y,w){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new dt(new is({eb:w})):new dt(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}r=el.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Oo(){}Oo.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){nt.call(this),this.g=new Za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!Q(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Q(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ur(this)}x(fn,nt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ht(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Ii(h),h=w);y.i.push(new xu(y.Ya++,h)),y.G==3&&zr(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,fn.aa.N.call(this)};function Uu(h){bn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}x(Uu,bn);function $u(){dr.call(this),this.status=1}x($u,dr);function Ur(h){this.g=h}x(Ur,el),Ur.prototype.ua=function(){ct(this.g,"a")},Ur.prototype.ta=function(h){ct(this.g,new Uu(h))},Ur.prototype.sa=function(h){ct(this.g,new $u)},Ur.prototype.ra=function(){ct(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,P0=function(){return new Oo},k0=function(){return rs()},R0=Vn,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,Gc=To,Tu.COMPLETE="complete",N0=Tu,hr.EventType=Vt,Vt.OPEN="a",Vt.CLOSE="b",Vt.ERROR="c",Vt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,kl=hr,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,A0=dt}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore",dv="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new y0("@firebase/firestore");function ca(){return ao.logLevel}function ie(r,...e){if(ao.logLevel<=We.DEBUG){const t=e.map(qp);ao.debug(`Firestore (${Ma}): ${r}`,...t)}}function xt(r,...e){if(ao.logLevel<=We.ERROR){const t=e.map(qp);ao.error(`Firestore (${Ma}): ${r}`,...t)}}function $l(r,...e){if(ao.logLevel<=We.WARN){const t=e.map(qp);ao.warn(`Firestore (${Ma}): ${r}`,...t)}}function qp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+r;throw xt(e),new Error(e)}function Ne(r,e){r||Se()}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends go{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class mC{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ci,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ci)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ne(typeof n.accessToken=="string"),new fC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new rn(e)}}class gC{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yC{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vC{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,E0(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0);const n=a=>{a.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new fv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string"),this.R=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=_C(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function Oe(r,e){return r<e?-1:r>e?1:0}function va(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function b0(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-62135596800,mv=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*mv);return new qt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pv)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mv}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new qt(0,0))}static max(){return new Pe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__name__";class Kr{constructor(e,t,n){t===void 0?t=0:t>e.length&&Se(),n===void 0?n=e.length-t:n>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Kr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Kr.isNumericId(e),i=Kr.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Kr.extractNumericId(e).compare(Kr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class et extends Kr{construct(e,t,n){return new et(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Te(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new et(t)}static emptyPath(){return new et([])}}const wC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Kr{construct(e,t,n){return new At(e,t,n)}static isValidIdentifier(e){return wC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gv}static keyField(){return new At([gv])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Te(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Te(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Te(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(u=!u,i++):c!=="."||u?(n+=c,i++):(a(),i++)}if(a(),u)throw new Te(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=-1;class oh{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function up(r){return r.fields.find(e=>e.kind===2)}function Xi(r){return r.fields.filter(e=>e.kind!==2)}oh.UNKNOWN_ID=-1;class Kc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ql{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ql(0,Kn.min())}}function V0(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(n===1e9?new qt(t+1,0):new qt(t,n));return new Kn(i,ve.empty(),e)}function M0(r){return new Kn(r.readTime,r.key,_a)}class Kn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Kn(Pe.min(),ve.empty(),_a)}static max(){return new Kn(Pe.max(),ve.empty(),_a)}}function Wp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Oe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==O0)throw r;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,n)=>{t(e)})}static reject(e){return new W((t,n)=>{n(e)})}static waitFor(e){return new W((t,n)=>{let i=0,a=0,u=!1;e.forEach(c=>{++i,c.next(()=>{++a,u&&a===i&&t()},d=>n(d))}),u=!0,a===i&&t()})}static or(e){let t=W.resolve(!1);for(const n of e)t=t.next(i=>i?W.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new W((n,i)=>{const a=e.length,u=new Array(a);let c=0;for(let d=0;d<a;d++){const p=d;t(e[p]).next(g=>{u[p]=g,++c,c===a&&n(u)},g=>i(g))}})}static doWhile(e,t){return new W((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class Oh{static open(e,t,n,i){try{return new Oh(t,e.transaction(i,n))}catch(a){throw new Vl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new ci,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Vl(e,t.error)):this.m.resolve()},this.transaction.onerror=n=>{const i=Gp(n.target.error);this.m.reject(new Vl(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ie(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TC(t)}}class hi{static delete(e){return ie(qn,"Removing database:",e),Zi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!p0())return!1;if(hi.v())return!0;const e=rh(),t=hi.C(e),n=0<t&&t<10,i=L0(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,hi.C(rh())===12.2&&xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ie(qn,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const u=a.target.result;t(u)},i.onblocked=()=>{n(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new Te(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new Te(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Vl(e,u))},i.onupgradeneeded=a=>{ie(qn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.O.B(u,i.transaction,a.oldVersion,this.version).next(()=>{ie(qn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const c=Oh.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next(p=>(c.S(),p)).catch(p=>(c.abort(p),W.reject(p))).toPromise();return d.catch(()=>{}),await c.p,d}catch(c){const d=c,p=d.name!=="FirebaseError"&&u<3;if(ie(qn,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function L0(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class EC{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return Zi(this.q.delete())}}class Vl extends Te{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(r){return r.name==="IndexedDbTransactionError"}class TC{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ie(qn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ie(qn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zi(n)}add(e){return ie(qn,"ADD",this.store.name,e,e),Zi(this.store.add(e))}get(e){return Zi(this.store.get(e)).next(t=>(t===void 0&&(t=null),ie(qn,"GET",this.store.name,e,t),t))}delete(e){return ie(qn,"DELETE",this.store.name,e),Zi(this.store.delete(e))}count(){return ie(qn,"COUNT",this.store.name),Zi(this.store.count())}G(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new W((u,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{u(d.target.result)}})}{const a=this.cursor(n),u=[];return this.j(a,(c,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new W((i,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{i(u.target.result)}})}J(e,t){ie(qn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.j(i,(a,u,c)=>c.delete())}Z(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.j(i,t)}X(e){const t=this.cursor({});return new W((n,i)=>{t.onerror=a=>{const u=Gp(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(c=>{c?u.continue():n()}):n()}})}j(e,t){const n=[];return new W((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const c=u.target.result;if(!c)return void i();const d=new EC(c),p=t(c.primaryKey,c.value,d);if(p instanceof W){const g=p.catch(_=>(d.done(),W.reject(_)));n.push(g)}d.isDone?i():d.U===null?c.continue():c.continue(d.U)}}).next(()=>W.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zi(r){return new W((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=Gp(n.target.error);t(i)}})}let yv=!1;function Gp(r){const e=hi.C(rh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yv||(yv=!0,setTimeout(()=>{throw n},0)),n}}return r}const Ml="IndexBackfiller";class IC{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ie(Ml,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ie(Ml,`Documents written: ${t}`)}catch(t){yi(t)?ie(Ml,"Ignoring IndexedDB error during index backfill: ",t):await gi(t)}await this.te(6e4)})}}class SC{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const n=new Set;let i=t,a=!0;return W.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!n.has(u))return ie(Ml,`Processing collection: ${u}`),this.ie(e,u,i).next(c=>{i-=c,n.add(u)});a=!1})).next(()=>t-i)}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(i,a)).next(c=>(ie(Ml,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>u.size)}))}se(e,t){let n=e;return t.changes.forEach((i,a)=>{const u=M0(a);Wp(u,n)>0&&(n=u)}),new Kn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}kn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function Fh(r){return r==null}function Wl(r){return r===0&&1/r==-1/0}function CC(r){return typeof r=="number"&&Number.isInteger(r)&&!Wl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="";function on(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=vv(e)),e=xC(r.get(t),e);return vv(e)}function xC(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case ah:t+="";break;default:t+=a}}return t}function vv(r){return r+ah+""}function Qr(r){const e=r.length;if(Ne(e>=2),e===2)return Ne(r.charAt(0)===ah&&r.charAt(1)===""),et.emptyPath();const t=e-2,n=[];let i="";for(let a=0;a<e;){const u=r.indexOf(ah,a);switch((u<0||u>t)&&Se(),r.charAt(u+1)){case"":const c=r.substring(a,u);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=r.substring(a,u),i+="\0";break;case"":i+=r.substring(a,u+1);break;default:Se()}a=u+2}return new et(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="remoteDocuments",ou="owner",sa="owner",Gl="mutationQueues",AC="userId",Nr="mutations",_v="batchId",no="userMutationsIndex",wv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r,e){return[r,on(e)]}function j0(r,e,t){return[r,on(e),t]}const NC={},wa="documentMutations",lh="remoteDocumentsV14",RC=["prefixPath","collectionGroup","readTime","documentId"],Qc="documentKeyIndex",kC=["prefixPath","collectionGroup","documentId"],B0="collectionGroupIndex",PC=["collectionGroup","readTime","prefixPath","documentId"],Kl="remoteDocumentGlobal",cp="remoteDocumentGlobalKey",Ea="targets",z0="queryTargetsIndex",DC=["canonicalId","targetId"],Ta="targetDocuments",bC=["targetId","path"],Kp="documentTargetsIndex",VC=["path","targetId"],uh="targetGlobalKey",so="targetGlobal",Hl="collectionParents",MC=["collectionId","parent"],Ia="clientMetadata",OC="clientId",Lh="bundles",FC="bundleId",jh="namedQueries",LC="name",Hp="indexConfiguration",jC="indexId",hp="collectionGroupIndex",BC="collectionGroup",ch="indexState",zC=["indexId","uid"],U0="sequenceNumberIndex",UC=["uid","sequenceNumber"],hh="indexEntries",$C=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$0="documentKeyIndex",qC=["indexId","uid","orderedDocumentKey"],Bh="documentOverlays",WC=["userId","collectionPath","documentId"],dp="collectionPathOverlayIndex",GC=["userId","collectionPath","largestBatchId"],q0="collectionGroupOverlayIndex",KC=["userId","collectionGroup","largestBatchId"],Qp="globals",HC="name",W0=[Gl,Nr,wa,Yi,Ea,ou,so,Ta,Ia,Kl,Hl,Lh,jh],QC=[...W0,Bh],G0=[Gl,Nr,wa,lh,Ea,ou,so,Ta,Ia,Kl,Hl,Lh,jh,Bh],K0=G0,Xp=[...K0,Hp,ch,hh],XC=Xp,YC=[...Xp,Qp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends F0{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Lt(r,e){const t=xe(r);return hi.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function au(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ZC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Yt.RED,this.left=i??Yt.EMPTY,this.right=a??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Yt(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,n,i,a){return this}insert(e,t,n){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ia(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new _s([])}unionWith(e){let t=new Xe(At.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new H0("Invalid base64 string: "+a):a}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(r){if(Ne(!!r),typeof r=="string"){let e=0;const t=JC.exec(r);if(Ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:pt(r.seconds),nanos:pt(r.nanos)}}function pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Cs(r){return typeof r=="string"?Nt.fromBase64String(r):Nt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="server_timestamp",X0="__type__",Y0="__previous_value__",Z0="__local_write_time__";function Yp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[X0])===null||t===void 0?void 0:t.stringValue)===Q0}function zh(r){const e=r.mapValue.fields[Y0];return Yp(e)?zh(e):e}function Ql(r){const e=Ss(r.mapValue.fields[Z0].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,n,i,a,u,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}const dh="(default)";class lo{constructor(e,t){this.projectId=e,this.database=t||dh}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",ew="__max__",ii={mapValue:{fields:{__type__:{stringValue:ew}}}},tw="__vector__",Xl="value",Xc={nullValue:"NULL_VALUE"};function di(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yp(r)?4:nw(r)?9007199254740991:Uh(r)?10:11:Se()}function Yr(r,e){if(r===e)return!0;const t=di(r);if(t!==di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ql(r).isEqual(Ql(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=Ss(i.timestampValue),c=Ss(a.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return Cs(i.bytesValue).isEqual(Cs(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return pt(i.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return pt(i.integerValue)===pt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=pt(i.doubleValue),c=pt(a.doubleValue);return u===c?Wl(u)===Wl(c):isNaN(u)&&isNaN(c)}return!1}(r,e);case 9:return va(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(i,a){const u=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Ev(u)!==Ev(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!Yr(u[d],c[d])))return!1;return!0}(r,e);default:return Se()}}function Yl(r,e){return(r.values||[]).find(t=>Yr(t,e))!==void 0}function fi(r,e){if(r===e)return 0;const t=di(r),n=di(e);if(t!==n)return Oe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return function(a,u){const c=pt(a.integerValue||a.doubleValue),d=pt(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(r,e);case 3:return Iv(r.timestampValue,e.timestampValue);case 4:return Iv(Ql(r),Ql(e));case 5:return Oe(r.stringValue,e.stringValue);case 6:return function(a,u){const c=Cs(a),d=Cs(u);return c.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(a,u){const c=a.split("/"),d=u.split("/");for(let p=0;p<c.length&&p<d.length;p++){const g=Oe(c[p],d[p]);if(g!==0)return g}return Oe(c.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,u){const c=Oe(pt(a.latitude),pt(u.latitude));return c!==0?c:Oe(pt(a.longitude),pt(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Sv(r.arrayValue,e.arrayValue);case 10:return function(a,u){var c,d,p,g;const _=a.fields||{},T=u.fields||{},C=(c=_[Xl])===null||c===void 0?void 0:c.arrayValue,x=(d=T[Xl])===null||d===void 0?void 0:d.arrayValue,k=Oe(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0);return k!==0?k:Sv(C,x)}(r.mapValue,e.mapValue);case 11:return function(a,u){if(a===ii.mapValue&&u===ii.mapValue)return 0;if(a===ii.mapValue)return 1;if(u===ii.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),p=u.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let _=0;_<d.length&&_<g.length;++_){const T=Oe(d[_],g[_]);if(T!==0)return T;const C=fi(c[d[_]],p[g[_]]);if(C!==0)return C}return Oe(d.length,g.length)}(r.mapValue,e.mapValue);default:throw Se()}}function Iv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const t=Ss(r),n=Ss(e),i=Oe(t.seconds,n.seconds);return i!==0?i:Oe(t.nanos,n.nanos)}function Sv(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=fi(t[i],n[i]);if(a)return a}return Oe(t.length,n.length)}function Sa(r){return pp(r)}function pp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Ss(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Cs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ve.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=pp(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of n)a?a=!1:i+=",",i+=`${u}:${pp(t.fields[u])}`;return i+"}"}(r.mapValue):Se()}function Yc(r){switch(di(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zh(r);return e?16+Yc(e):16;case 5:return 2*r.stringValue.length;case 6:return Cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Yc(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return au(n.fields,(a,u)=>{i+=a.length+Yc(u)}),i}(r.mapValue);default:throw Se()}}function Zp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function mp(r){return!!r&&"integerValue"in r}function Zl(r){return!!r&&"arrayValue"in r}function Cv(r){return!!r&&"nullValue"in r}function xv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qf(r){return!!r&&"mapValue"in r}function Uh(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J0])===null||t===void 0?void 0:t.stringValue)===tw}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return au(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ol(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ew}const rw={mapValue:{fields:{[J0]:{stringValue:tw},[Xl]:{arrayValue:{}}}}};function tx(r){return"nullValue"in r?Xc:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Zp(lo.empty(),ve.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Uh(r)?rw:{mapValue:{}}:Se()}function nx(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Zp(lo.empty(),ve.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?rw:"mapValue"in r?Uh(r)?{mapValue:{}}:ii:Se()}function Av(r,e){const t=fi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Nv(r,e){const t=fi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=At.emptyPath(),n={},i=[];e.forEach((u,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}u?n[c.lastSegment()]=Ol(u):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){au(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new or(Ol(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t,n,i,a,u,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=u,this.documentState=c}static newInvalidDocument(e){return new wt(e,0,Pe.min(),Pe.min(),Pe.min(),or.empty(),0)}static newFoundDocument(e,t,n,i){return new wt(e,1,t,Pe.min(),n,i,0)}static newNoDocument(e,t){return new wt(e,2,t,Pe.min(),Pe.min(),or.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,Pe.min(),Pe.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.position=e,this.inclusive=t}}function Rv(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],u=r.position[i];if(a.field.isKeyField()?n=ve.comparator(ve.fromName(u.referenceValue),t.key):n=fi(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function kv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Yr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function rx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{}class Ue extends sw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new sx(e,t,n):t==="array-contains"?new ax(e,n):t==="in"?new cw(e,n):t==="not-in"?new lx(e,n):t==="array-contains-any"?new ux(e,n):new Ue(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new ix(e,n):new ox(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fi(t,this.value)):t!==null&&di(this.value)===di(t)&&this.matchesComparison(fi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends sw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ze(e,t)}matches(e){return xa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xa(r){return r.op==="and"}function gp(r){return r.op==="or"}function Jp(r){return iw(r)&&xa(r)}function iw(r){for(const e of r.filters)if(e instanceof Ze)return!1;return!0}function yp(r){if(r instanceof Ue)return r.field.canonicalString()+r.op.toString()+Sa(r.value);if(Jp(r))return r.filters.map(e=>yp(e)).join(",");{const e=r.filters.map(t=>yp(t)).join(",");return`${r.op}(${e})`}}function ow(r,e){return r instanceof Ue?function(n,i){return i instanceof Ue&&n.op===i.op&&n.field.isEqual(i.field)&&Yr(n.value,i.value)}(r,e):r instanceof Ze?function(n,i){return i instanceof Ze&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,u,c)=>a&&ow(u,i.filters[c]),!0):!1}(r,e):void Se()}function aw(r,e){const t=r.filters.concat(e);return Ze.create(t,r.op)}function lw(r){return r instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`}(r):r instanceof Ze?function(t){return t.op.toString()+" {"+t.getFilters().map(lw).join(" ,")+"}"}(r):"Filter"}class sx extends Ue{constructor(e,t,n){super(e,t,n),this.key=ve.fromName(n.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class ix extends Ue{constructor(e,t){super(e,"in",t),this.keys=uw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ox extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=uw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ve.fromName(n.referenceValue))}class ax extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zl(t)&&Yl(t.arrayValue,this.value)}}class cw extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yl(this.value.arrayValue,t)}}class lx extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Yl(this.value.arrayValue,t)}}class ux extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Yl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t=null,n=[],i=[],a=null,u=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=u,this.endAt=c,this.le=null}}function vp(r,e=null,t=[],n=[],i=null,a=null,u=null){return new cx(r,e,t,n,i,a,u)}function uo(r){const e=xe(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>yp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Sa(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Sa(n)).join(",")),e.le=t}return e.le}function lu(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rx(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ow(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!kv(r.startAt,e.startAt)&&kv(r.endAt,e.endAt)}function ph(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function mh(r,e){return r.filters.filter(t=>t instanceof Ue&&t.field.isEqual(e))}function Pv(r,e,t){let n=Xc,i=!0;for(const a of mh(r,e)){let u=Xc,c=!0;switch(a.op){case"<":case"<=":u=tx(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,c=!1;break;case"!=":case"not-in":u=Xc}Av({value:n,inclusive:i},{value:u,inclusive:c})<0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Av({value:n,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}function Dv(r,e,t){let n=ii,i=!0;for(const a of mh(r,e)){let u=ii,c=!0;switch(a.op){case">=":case">":u=nx(a.value),c=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,c=!1;break;case"!=":case"not-in":u=ii}Nv({value:n,inclusive:i},{value:u,inclusive:c})>0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Nv({value:n,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t=null,n=[],i=[],a=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=u,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function hw(r,e,t,n,i,a,u,c){return new $h(r,e,t,n,i,a,u,c)}function qh(r){return new $h(r)}function bv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hx(r){return r.collectionGroup!==null}function Fl(r){const e=xe(r);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Xe(At.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new fh(a,n))}),t.has(At.keyField().canonicalString())||e.he.push(new fh(At.keyField(),n))}return e.he}function Gn(r){const e=xe(r);return e.Pe||(e.Pe=dx(e,Fl(r))),e.Pe}function dx(r,e){if(r.limitType==="F")return vp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new fh(i.field,a)});const t=r.endAt?new Ca(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Ca(r.startAt.position,r.startAt.inclusive):null;return vp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function _p(r,e,t){return new $h(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wh(r,e){return lu(Gn(r),Gn(e))&&r.limitType===e.limitType}function dw(r){return`${uo(Gn(r))}|lt:${r.limitType}`}function ha(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>lw(i)).join(", ")}]`),Fh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Sa(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Sa(i)).join(",")),`Target(${n})`}(Gn(r))}; limitType=${r.limitType})`}function uu(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ve.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of Fl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(u,c,d){const p=Rv(u,c,d);return u.inclusive?p<=0:p<0}(n.startAt,Fl(n),i)||n.endAt&&!function(u,c,d){const p=Rv(u,c,d);return u.inclusive?p>=0:p>0}(n.endAt,Fl(n),i))}(r,e)}function fw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function pw(r){return(e,t)=>{let n=!1;for(const i of Fl(r)){const a=fx(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function fx(r,e,t){const n=r.field.isKeyField()?ve.comparator(e.key,t.key):function(a,u,c){const d=u.data.field(a),p=c.data.field(a);return d!==null&&p!==null?fi(d,p):Se()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return ZC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new lt(ve.comparator);function ar(){return px}const mw=new lt(ve.comparator);function Pl(...r){let e=mw;for(const t of r)e=e.insert(t.key,t);return e}function mx(r){let e=mw;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Xr(){return Ll()}function gw(){return Ll()}function Ll(){return new xs(r=>r.toString(),(r,e)=>r.isEqual(e))}const gx=new lt(ve.comparator),yx=new Xe(ve.comparator);function Le(...r){let e=yx;for(const t of r)e=e.add(t);return e}const vx=new Xe(Oe);function em(){return vx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function wx(r){return{integerValue:""+r}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function Ex(r,e,t){return r instanceof Jl?function(i,a){const u={fields:{[X0]:{stringValue:Q0},[Z0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Yp(a)&&(a=zh(a)),a&&(u.fields[Y0]=a),{mapValue:u}}(t,e):r instanceof Aa?yw(r,e):r instanceof Na?vw(r,e):function(i,a){const u=Ix(i,a),c=Vv(u)+Vv(i.Ie);return mp(u)&&mp(i.Ie)?wx(c):_x(i.serializer,c)}(r,e)}function Tx(r,e,t){return r instanceof Aa?yw(r,e):r instanceof Na?vw(r,e):t}function Ix(r,e){return r instanceof eu?function(n){return mp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Jl extends Gh{}class Aa extends Gh{constructor(e){super(),this.elements=e}}function yw(r,e){const t=_w(e);for(const n of r.elements)t.some(i=>Yr(i,n))||t.push(n);return{arrayValue:{values:t}}}class Na extends Gh{constructor(e){super(),this.elements=e}}function vw(r,e){let t=_w(e);for(const n of r.elements)t=t.filter(i=>!Yr(i,n));return{arrayValue:{values:t}}}class eu extends Gh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Vv(r){return pt(r.integerValue||r.doubleValue)}function _w(r){return Zl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.field=e,this.transform=t}}function Cx(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof Aa&&i instanceof Aa||n instanceof Na&&i instanceof Na?va(n.elements,i.elements,Yr):n instanceof eu&&i instanceof eu?Yr(n.Ie,i.Ie):n instanceof Jl&&i instanceof Jl}(r.transform,e.transform)}class xx{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kh{}function ww(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tm(r.key,Rr.none()):new cu(r.key,r.data,Rr.none());{const t=r.data,n=or.empty();let i=new Xe(At.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),i=i.add(a)}return new Oa(r.key,n,new _s(i.toArray()),Rr.none())}}function Ax(r,e,t){r instanceof cu?function(i,a,u){const c=i.value.clone(),d=Ov(i.fieldTransforms,a,u.transformResults);c.setAll(d),a.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(r,e,t):r instanceof Oa?function(i,a,u){if(!Zc(i.precondition,a))return void a.convertToUnknownDocument(u.version);const c=Ov(i.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(Ew(i)),d.setAll(c),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(r,e,t):function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function jl(r,e,t,n){return r instanceof cu?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=a.value.clone(),g=Fv(a.fieldTransforms,d,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(r,e,t,n):r instanceof Oa?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=Fv(a.fieldTransforms,d,u),g=u.data;return g.setAll(Ew(a)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(r,e,t,n):function(a,u,c){return Zc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(r,e,t)}function Mv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&va(n,i,(a,u)=>Cx(a,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class cu extends Kh{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oa extends Kh{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Ov(r,e,t){const n=new Map;Ne(r.length===t.length);for(let i=0;i<t.length;i++){const a=r[i],u=a.transform,c=e.data.field(a.field);n.set(a.field,Tx(u,c,t[i]))}return n}function Fv(r,e,t){const n=new Map;for(const i of r){const a=i.transform,u=t.data.field(i.field);n.set(i.field,Ex(a,u,e))}return n}class tm extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tw extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Ax(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gw();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let c=this.applyToLocalView(u,a.mutatedFields);c=t.has(i.key)?null:c;const d=ww(u,c);d!==null&&n.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(t,n)=>Mv(t,n))&&va(this.baseMutations,e.baseMutations,(t,n)=>Mv(t,n))}}class rm{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Ne(e.mutations.length===n.length);let i=function(){return gx}();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,n[u].version);return new rm(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,qe;function Rx(r){switch(r){case re.OK:return Se();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Se()}}function Iw(r){if(r===void 0)return xt("GRPC error has no .code"),re.UNKNOWN;switch(r){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Se()}}(qe=Dt||(Dt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new ui([4294967295,4294967295],0);function Lv(r){const e=kx().encode(r),t=new x0;return t.update(e),new Uint8Array(t.digest())}function jv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ui([t,n],0),new ui([i,a],0)]}class im{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(n<0)throw new Dl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ui.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(ui.fromNumber(n)));return i.compare(Px)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Lv(e),[n,i]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);if(!this.Re(u))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new im(a,i,t);return n.forEach(c=>u.insert(c)),u}insert(e){if(this.Ee===0)return;const t=Lv(e),[n,i]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hu(Pe.min(),i,new lt(Oe),ar(),Le())}}class du{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new du(n,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class Sw{constructor(e,t){this.targetId=e,this.ge=t}}class Cw{constructor(e,t,n=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Bv{constructor(){this.pe=0,this.ye=zv(),this.we=Nt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Le(),t=Le(),n=Le();return this.ye.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Se()}}),new du(this.we,this.be,e,t,n)}Me(){this.Se=!1,this.ye=zv()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ne(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Dx{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ar(),this.$e=jc(),this.Ke=jc(),this.Ue=new lt(Oe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const a=i.target;if(ph(a))if(n===0){const u=new ve(a.path);this.ze(t,u,wt.newNoDocument(u,Pe.min()))}else Ne(n===1);else{const u=this.et(t);if(u!==n){const c=this.tt(e),d=c?this.nt(c,e,u):1;if(d!==0){this.Ye(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let u,c;try{u=Cs(n).toUint8Array()}catch(d){if(d instanceof H0)return $l("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new im(u,i,a)}catch(d){return $l(d instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const u=this.ke.it(),c=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,a,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((a,u)=>{const c=this.Xe(u);if(c){if(a.current&&ph(c.target)){const d=new ve(c.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,wt.newNoDocument(d,e))}a.ve&&(t.set(u,a.Fe()),a.Me())}});let n=Le();this.Ke.forEach((a,u)=>{let c=!0;u.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const i=new hu(e,t,this.Ue,this.Qe,n);return this.Qe=ar(),this.$e=jc(),this.Ke=jc(),this.Ue=new lt(Oe),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Bv,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Xe(Oe),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Xe(Oe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Bv),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function jc(){return new lt(ve.comparator)}function zv(){return new lt(ve.comparator)}const bx={asc:"ASCENDING",desc:"DESCENDING"},Vx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mx={and:"AND",or:"OR"};class Ox{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wp(r,e){return r.useProto3Json||Fh(e)?e:{value:e}}function gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fx(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Lx(r,e){return gh(r,e.toTimestamp())}function gn(r){return Ne(!!r),Pe.fromTimestamp(function(t){const n=Ss(t);return new qt(n.seconds,n.nanos)}(r))}function xw(r,e){return Ep(r,e).canonicalString()}function Ep(r,e){const t=function(i){return new et(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Aw(r){const e=et.fromString(r);return Ne(Ow(e)),e}function yh(r,e){return xw(r.databaseId,e.path)}function io(r,e){const t=Aw(e);if(t.get(1)!==r.databaseId.projectId)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(kw(t))}function Nw(r,e){return xw(r.databaseId,e)}function Rw(r){const e=Aw(r);return e.length===4?et.emptyPath():kw(e)}function Tp(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kw(r){return Ne(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Uv(r,e,t){return{name:yh(r,e),fields:t.value.mapValue.fields}}function jx(r,e,t){const n=io(r,e.name),i=gn(e.updateTime),a=e.createTime?gn(e.createTime):Pe.min(),u=new or({mapValue:{fields:e.fields}}),c=wt.newFoundDocument(n,i,a,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Bx(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(Ne(g===void 0||typeof g=="string"),Nt.fromBase64String(g||"")):(Ne(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Nt.fromUint8Array(g||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(p){const g=p.code===void 0?re.UNKNOWN:Iw(p.code);return new Te(g,p.message||"")}(u);t=new Cw(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=io(r,n.document.name),a=gn(n.document.updateTime),u=n.document.createTime?gn(n.document.createTime):Pe.min(),c=new or({mapValue:{fields:n.document.fields}}),d=wt.newFoundDocument(i,a,u,c),p=n.targetIds||[],g=n.removedTargetIds||[];t=new Jc(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=io(r,n.document),a=n.readTime?gn(n.readTime):Pe.min(),u=wt.newNoDocument(i,a),c=n.removedTargetIds||[];t=new Jc([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=io(r,n.document),a=n.removedTargetIds||[];t=new Jc([],a,i,null)}else{if(!("filter"in e))return Se();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,u=new Nx(i,a),c=n.targetId;t=new Sw(c,u)}}return t}function vh(r,e){let t;if(e instanceof cu)t={update:Uv(r,e.key,e.value)};else if(e instanceof tm)t={delete:yh(r,e.key)};else if(e instanceof Oa)t={update:Uv(r,e.key,e.data),updateMask:Gx(e.fieldMask)};else{if(!(e instanceof Tw))return Se();t={verify:yh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,u){const c=u.transform;if(c instanceof Jl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Aa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Na)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof eu)return{fieldPath:u.field.canonicalString(),increment:c.Ie};throw Se()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Lx(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se()}(r,e.precondition)),t}function Ip(r,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?Rr.updateTime(gn(a.updateTime)):a.exists!==void 0?Rr.exists(a.exists):Rr.none()}(e.currentDocument):Rr.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let d=null;if("setToServerValue"in c)Ne(c.setToServerValue==="REQUEST_TIME"),d=new Jl;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];d=new Aa(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];d=new Na(g)}else"increment"in c?d=new eu(u,c.increment):Se();const p=At.fromServerFormat(c.fieldPath);return new Sx(p,d)}(r,i)):[];if(e.update){e.update.name;const i=io(r,e.update.name),a=new or({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new _s(p.map(g=>At.fromServerFormat(g)))}(e.updateMask);return new Oa(i,a,u,t,n)}return new cu(i,a,t,n)}if(e.delete){const i=io(r,e.delete);return new tm(i,t)}if(e.verify){const i=io(r,e.verify);return new Tw(i,t)}return Se()}function zx(r,e){return r&&r.length>0?(Ne(e!==void 0),r.map(t=>function(i,a){let u=i.updateTime?gn(i.updateTime):gn(a);return u.isEqual(Pe.min())&&(u=gn(a)),new xx(u,i.transformResults||[])}(t,e))):[]}function Pw(r,e){return{documents:[Nw(r,e.path)]}}function Dw(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Nw(r,i);const a=function(p){if(p.length!==0)return Mw(Ze.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(p){if(p.length!==0)return p.map(g=>function(T){return{field:da(T.field),direction:$x(T.dir)}}(g))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=wp(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:i}}function bw(r){let e=Rw(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Ne(n===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(_){const T=Vw(_);return T instanceof Ze&&Jp(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(_){return _.map(T=>function(x){return new fh(fa(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(T))}(t.orderBy));let c=null;t.limit&&(c=function(_){let T;return T=typeof _=="object"?_.value:_,Fh(T)?null:T}(t.limit));let d=null;t.startAt&&(d=function(_){const T=!!_.before,C=_.values||[];return new Ca(C,T)}(t.startAt));let p=null;return t.endAt&&(p=function(_){const T=!_.before,C=_.values||[];return new Ca(C,T)}(t.endAt)),hw(e,i,u,a,c,"F",d,p)}function Ux(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vw(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=fa(t.unaryFilter.field);return Ue.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=fa(t.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(t.unaryFilter.field);return Ue.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return Ue.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(r):r.fieldFilter!==void 0?function(t){return Ue.create(fa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ze.create(t.compositeFilter.filters.map(n=>Vw(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(r):Se()}function $x(r){return bx[r]}function qx(r){return Vx[r]}function Wx(r){return Mx[r]}function da(r){return{fieldPath:r.canonicalString()}}function fa(r){return At.fromServerFormat(r.fieldPath)}function Mw(r){return r instanceof Ue?function(t){if(t.op==="=="){if(xv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:qx(t.op),value:t.value}}}(r):r instanceof Ze?function(t){const n=t.getFilters().map(i=>Mw(i));return n.length===1?n[0]:{compositeFilter:{op:Wx(t.op),filters:n}}}(r):Se()}function Gx(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ow(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,n,i,a=Pe.min(),u=Pe.min(),c=Nt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.Tt=e}}function Kx(r,e){let t;if(e.document)t=jx(r.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ve.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);t=wt.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se();{const n=ve.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);t=wt.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(i){const a=new qt(i[0],i[1]);return Pe.fromTimestamp(a)}(e.readTime)),t}function $v(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(a,u){return{name:yh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:gh(a,u.version.toTimestamp()),createTime:gh(a,u.createTime.toTimestamp())}}(r.Tt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return Se();n.unknownDocument={path:t.path.toArray(),version:co(e.version)}}return n}function _h(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function co(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(r){const e=new qt(r.seconds,r.nanoseconds);return Pe.fromTimestamp(e)}function Ji(r,e){const t=(e.baseMutations||[]).map(a=>Ip(r.Tt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];u.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map(a=>Ip(r.Tt,a)),i=qt.fromMillis(e.localWriteTimeMs);return new nm(e.batchId,i,t,n)}function bl(r){const e=ho(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?ho(r.lastLimboFreeSnapshotVersion):Pe.min();let n;return n=function(a){return a.documents!==void 0}(r.query)?function(a){return Ne(a.documents.length===1),Gn(qh(Rw(a.documents[0])))}(r.query):function(a){return Gn(bw(a))}(r.query),new ws(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Nt.fromBase64String(r.resumeToken))}function Lw(r,e){const t=co(e.snapshotVersion),n=co(e.lastLimboFreeSnapshotVersion);let i;i=ph(e.target)?Pw(r.Tt,e.target):Dw(r.Tt,e.target).ht;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function jw(r){const e=bw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_p(e,e.limit,"L"):e}function Wf(r,e){return new sm(e.largestBatchId,Ip(r.Tt,e.overlayMutation))}function qv(r,e){const t=e.path.lastSegment();return[r,on(e.path.popLast()),t]}function Wv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:co(n.readTime),documentKey:on(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{getBundleMetadata(e,t){return Gv(e).get(t).next(n=>{if(n)return function(a){return{id:a.bundleId,createTime:ho(a.createTime),version:a.version}}(n)})}saveBundleMetadata(e,t){return Gv(e).put(function(i){return{bundleId:i.id,createTime:co(gn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Kv(e).get(t).next(n=>{if(n)return function(a){return{name:a.name,query:jw(a.bundledQuery),readTime:ho(a.readTime)}}(n)})}saveNamedQuery(e,t){return Kv(e).put(function(i){return{name:i.name,readTime:co(gn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function Gv(r){return Lt(r,Lh)}function Kv(r){return Lt(r,jh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Hh(e,n)}getOverlay(e,t){return Cl(e).get(qv(this.userId,t)).next(n=>n?Wf(this.serializer,n):null)}getOverlays(e,t){const n=Xr();return W.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){const i=[];return n.forEach((a,u)=>{const c=new sm(t,u);i.push(this.Et(e,c))}),W.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(u=>i.add(on(u.getCollectionPath())));const a=[];return i.forEach(u=>{const c=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(Cl(e).J(dp,c))}),W.waitFor(a)}getOverlaysForCollection(e,t,n){const i=Xr(),a=on(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cl(e).G(dp,u).next(c=>{for(const d of c){const p=Wf(this.serializer,d);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const a=Xr();let u;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cl(e).Z({index:q0,range:c},(d,p,g)=>{const _=Wf(this.serializer,p);a.size()<i||_.largestBatchId===u?(a.set(_.getKey(),_),u=_.largestBatchId):g.done()}).next(()=>a)}Et(e,t){return Cl(e).put(function(i,a,u){const[c,d,p]=qv(a,u.mutation.key);return{userId:a,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vh(i.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Cl(r){return Lt(r,Bh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{dt(e){return Lt(e,Qp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?Nt.fromUint8Array(n):Nt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pt(e.integerValue));else if("doubleValue"in e){const n=pt(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Wl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),typeof n=="string"&&(n=Ss(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Cs(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?nw(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Uh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Se()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const i of Object.keys(n))this.wt(i,t),this.Rt(n[i],t)}vt(e,t){var n,i;const a=e.fields||{};this.ft(t,53);const u=Xl,c=((i=(n=a[u].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(pt(c)),this.wt(u,t),this.Rt(a[u],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const i of n)this.Rt(i,t)}Dt(e,t){this.ft(t,37),ve.fromName(e).path.forEach(n=>{this.ft(t,60),this.Mt(n,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}eo.xt=new eo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=255;function Xx(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function Hv(r){const e=64-function(n){let i=0;for(let a=0;a<8;++a){const u=Xx(255&n[a]);if(i+=u,u!==8)break}return i}(r);return Math.ceil(e/8)}class Yx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){const t=this.Ut(e),n=Hv(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Ut(e),n=Hv(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(oa),this.jt(255)}Ht(){this.Jt(oa),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===oa?(this.jt(oa),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===oa?(this.Jt(oa),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Zx{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class Jx{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class xl{constructor(){this.Zt=new Yx,this.Xt=new Zx(this.Zt),this.en=new Jx(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new to(this.indexId,this.documentKey,this.arrayValue,n)}}function Zs(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Qv(r.arrayValue,e.arrayValue),t!==0?t:(t=Qv(r.directionalValue,e.directionalValue),t!==0?t:ve.comparator(r.documentKey,e.documentKey)))}function Qv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.rn=new Xe((t,n)=>At.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const n=t;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(Ne(e.collectionGroup===this.collectionId),this.an)return!1;const t=up(e);if(t!==void 0&&!this.cn(t))return!1;const n=Xi(e);let i=new Set,a=0,u=0;for(;a<n.length&&this.cn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.ln(c,d)||!this.hn(this.sn[u++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(u>=this.sn.length||!this.hn(this.sn[u++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new Xe(At.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Kc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Kc(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Kc(n.field,n.dir==="asc"?0:1)));return new oh(oh.UNKNOWN_ID,this.collectionId,t,ql.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(r){var e,t;if(Ne(r instanceof Ue||r instanceof Ze),r instanceof Ue){if(r instanceof cw){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Ue.create(r.field,"==",a)))||[];return Ze.create(i,"or")}return r}const n=r.filters.map(i=>Bw(i));return Ze.create(n,r.op)}function eA(r){if(r.getFilters().length===0)return[];const e=xp(Bw(r));return Ne(zw(e)),Sp(e)||Cp(e)?[e]:e.getFilters()}function Sp(r){return r instanceof Ue}function Cp(r){return r instanceof Ze&&Jp(r)}function zw(r){return Sp(r)||Cp(r)||function(t){if(t instanceof Ze&&gp(t)){for(const n of t.getFilters())if(!Sp(n)&&!Cp(n))return!1;return!0}return!1}(r)}function xp(r){if(Ne(r instanceof Ue||r instanceof Ze),r instanceof Ue)return r;if(r.filters.length===1)return xp(r.filters[0]);const e=r.filters.map(n=>xp(n));let t=Ze.create(e,r.op);return t=wh(t),zw(t)?t:(Ne(t instanceof Ze),Ne(xa(t)),Ne(t.filters.length>1),t.filters.reduce((n,i)=>om(n,i)))}function om(r,e){let t;return Ne(r instanceof Ue||r instanceof Ze),Ne(e instanceof Ue||e instanceof Ze),t=r instanceof Ue?e instanceof Ue?function(i,a){return Ze.create([i,a],"and")}(r,e):Yv(r,e):e instanceof Ue?Yv(e,r):function(i,a){if(Ne(i.filters.length>0&&a.filters.length>0),xa(i)&&xa(a))return aw(i,a.getFilters());const u=gp(i)?i:a,c=gp(i)?a:i,d=u.filters.map(p=>om(p,c));return Ze.create(d,"or")}(r,e),wh(t)}function Yv(r,e){if(xa(e))return aw(e,r.getFilters());{const t=e.filters.map(n=>om(r,n));return Ze.create(t,"or")}}function wh(r){if(Ne(r instanceof Ue||r instanceof Ze),r instanceof Ue)return r;const e=r.getFilters();if(e.length===1)return wh(e[0]);if(iw(r))return r;const t=e.map(i=>wh(i)),n=[];return t.forEach(i=>{i instanceof Ue?n.push(i):i instanceof Ze&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:Ze.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.Tn=new am}addToCollectionParentIndex(e,t){return this.Tn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Kn.min())}updateCollectionGroup(e,t,n){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class am{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Xe(et.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Xe(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="IndexedDbIndexManager",Bc=new Uint8Array(0);class nA{constructor(e,t){this.databaseId=t,this.In=new am,this.En=new xs(n=>uo(n),(n,i)=>lu(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const a={collectionId:n,parent:on(i)};return Jv(e).put(a)}return W.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[b0(t),""],!1,!0);return Jv(e).G(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;n.push(Qr(u.parent))}return n})}addFieldIndex(e,t){const n=Al(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const a=n.add(i);if(t.indexState){const u=la(e);return a.next(c=>{u.put(Wv(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const n=Al(e),i=la(e),a=aa(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Al(e),n=aa(e),i=la(e);return t.J().next(()=>n.J()).next(()=>i.J())}createTargetIndexes(e,t){return W.forEach(this.dn(t),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const a=new Xv(n).Pn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const n=aa(e);let i=!0;const a=new Map;return W.forEach(this.dn(t),u=>this.An(e,u).next(c=>{i&&(i=!!c),a.set(u,c)})).next(()=>{if(i){let u=Le();const c=[];return W.forEach(a,(d,p)=>{ie(Zv,`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(d)} to execute ${uo(t)}`);const g=function($,Z){const L=up(Z);if(L===void 0)return null;for(const U of mh($,L.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(p,d),_=function($,Z){const L=new Map;for(const U of Xi(Z))for(const R of mh($,U.fieldPath))switch(R.op){case"==":case"in":L.set(U.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return L.set(U.fieldPath.canonicalString(),R.value),Array.from(L.values())}return null}(p,d),T=function($,Z){const L=[];let U=!0;for(const R of Xi(Z)){const I=R.kind===0?Pv($,R.fieldPath,$.startAt):Dv($,R.fieldPath,$.startAt);L.push(I.value),U&&(U=I.inclusive)}return new Ca(L,U)}(p,d),C=function($,Z){const L=[];let U=!0;for(const R of Xi(Z)){const I=R.kind===0?Dv($,R.fieldPath,$.endAt):Pv($,R.fieldPath,$.endAt);L.push(I.value),U&&(U=I.inclusive)}return new Ca(L,U)}(p,d),x=this.Rn(d,p,T),k=this.Rn(d,p,C),V=this.Vn(d,p,_),B=this.mn(d.indexId,g,x,T.inclusive,k,C.inclusive,V);return W.forEach(B,Q=>n.H(Q,t.limit).next($=>{$.forEach(Z=>{const L=ve.fromSegments(Z.documentKey);u.has(L)||(u=u.add(L),c.push(L))})}))}).next(()=>c)}return W.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=eA(Ze.create(e.filters,"and")).map(n=>vp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,n,i,a,u,c){const d=(t!=null?t.length:1)*Math.max(n.length,a.length),p=d/(t!=null?t.length:1),g=[];for(let _=0;_<d;++_){const T=t?this.fn(t[_/p]):Bc,C=this.gn(e,T,n[_%p],i),x=this.pn(e,T,a[_%p],u),k=c.map(V=>this.gn(e,T,V,!0));g.push(...this.createRange(C,x,k))}return g}gn(e,t,n,i){const a=new to(e,ve.empty(),t,n);return i?a:a.nn()}pn(e,t,n,i){const a=new to(e,ve.empty(),t,n);return i?a.nn():a}An(e,t){const n=new Xv(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const c of a)n.un(c)&&(!u||c.fields.length>u.fields.length)&&(u=c);return u})}getIndexType(e,t){let n=2;const i=this.dn(t);return W.forEach(i,a=>this.An(e,a).next(u=>{u?n!==0&&u.fields.length<function(d){let p=new Xe(At.comparator),g=!1;for(const _ of d.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?g=!0:p=p.add(T.field));for(const _ of d.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(g?1:0)}(a)&&(n=1):n=0})).next(()=>function(u){return u.limit!==null}(t)&&i.length>1&&n===2?1:n)}yn(e,t){const n=new xl;for(const i of Xi(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const u=n.tn(i.kind);eo.xt.At(a,u)}return n.Yt()}fn(e){const t=new xl;return eo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new xl;return eo.xt.At(Zp(this.databaseId,t),n.tn(function(a){const u=Xi(a);return u.length===0?0:u[u.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(n===null)return[];let i=[];i.push(new xl);let a=0;for(const u of Xi(e)){const c=n[a++];for(const d of i)if(this.bn(t,u.fieldPath)&&Zl(c))i=this.Sn(i,u,c);else{const p=d.tn(u.kind);eo.xt.At(c,p)}}return this.Dn(i)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}Sn(e,t,n){const i=[...e],a=[];for(const u of n.arrayValue.values||[])for(const c of i){const d=new xl;d.seed(c.Yt()),eo.xt.At(u,d.tn(t.kind)),a.push(d)}return a}bn(e,t){return!!e.filters.find(n=>n instanceof Ue&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=Al(e),i=la(e);return(t?n.G(hp,IDBKeyRange.bound(t,t)):n.G()).next(a=>{const u=[];return W.forEach(a,c=>i.get([c.indexId,this.uid]).next(d=>{u.push(function(g,_){const T=_?new ql(_.sequenceNumber,new Kn(ho(_.readTime),new ve(Qr(_.documentKey)),_.largestBatchId)):ql.empty(),C=g.fields.map(([x,k])=>new Kc(At.fromServerFormat(x),k));return new oh(g.indexId,g.collectionGroup,C,T)}(c,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Oe(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=Al(e),a=la(e);return this.vn(e).next(u=>i.G(hp,IDBKeyRange.bound(t,t)).next(c=>W.forEach(c,d=>a.put(Wv(d.indexId,this.uid,u,n)))))}updateIndexEntries(e,t){const n=new Map;return W.forEach(t,(i,a)=>{const u=n.get(i.collectionGroup);return(u?W.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(n.set(i.collectionGroup,c),W.forEach(c,d=>this.Cn(e,i,d).next(p=>{const g=this.Fn(a,d);return p.isEqual(g)?W.resolve():this.Mn(e,a,d,p,g)}))))})}xn(e,t,n,i){return aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,i){return aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const i=aa(e);let a=new Xe(Zs);return i.Z({index:$0,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},(u,c)=>{a=a.add(new to(n.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>a)}Fn(e,t){let n=new Xe(Zs);const i=this.yn(t,e);if(i==null)return n;const a=up(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Zl(u))for(const c of u.arrayValue.values||[])n=n.add(new to(t.indexId,e.key,this.fn(c),i))}else n=n.add(new to(t.indexId,e.key,Bc,i));return n}Mn(e,t,n,i,a){ie(Zv,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,g,_,T){const C=d.getIterator(),x=p.getIterator();let k=ia(C),V=ia(x);for(;k||V;){let B=!1,Q=!1;if(k&&V){const $=g(k,V);$<0?Q=!0:$>0&&(B=!0)}else k!=null?Q=!0:B=!0;B?(_(V),V=ia(x)):Q?(T(k),k=ia(C)):(k=ia(C),V=ia(x))}}(i,a,Zs,c=>{u.push(this.xn(e,t,n,c))},c=>{u.push(this.On(e,t,n,c))}),W.waitFor(u)}vn(e){let t=1;return la(e).Z({index:U0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((u,c)=>Zs(u,c)).filter((u,c,d)=>!c||Zs(u,d[c-1])!==0);const i=[];i.push(e);for(const u of n){const c=Zs(u,e),d=Zs(u,t);if(c===0)i[0]=e.nn();else if(c>0&&d<0)i.push(u),i.push(u.nn());else if(d>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.Nn(i[u],i[u+1]))return[];const c=[i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Bc,[]],d=[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Bc,[]];a.push(IDBKeyRange.bound(c,d))}return a}Nn(e,t){return Zs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(e_)}getMinOffset(e,t){return W.mapArray(this.dn(t),n=>this.An(e,n).next(i=>i||Se())).next(e_)}}function Jv(r){return Lt(r,Hl)}function aa(r){return Lt(r,hh)}function Al(r){return Lt(r,Hp)}function la(r){return Lt(r,ch)}function e_(r){Ne(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;Wp(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Kn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r,e,t){const n=r.store(Nr),i=r.store(wa),a=[],u=IDBKeyRange.only(t.batchId);let c=0;const d=n.Z({range:u},(g,_,T)=>(c++,T.delete()));a.push(d.next(()=>{Ne(c===1)}));const p=[];for(const g of t.mutations){const _=j0(e,g.key.path,t.batchId);a.push(i.delete(_)),p.push(g.key)}return W.waitFor(a).next(()=>p)}function Eh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Se();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(Uw,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Qh{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Bn={}}static It(e,t,n,i){Ne(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Qh(a,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).Z({index:no,range:n},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const a=pa(e),u=Js(e);return u.add({}).next(c=>{Ne(typeof c=="number");const d=new nm(c,t,n,i),p=function(C,x,k){const V=k.baseMutations.map(Q=>vh(C.Tt,Q)),B=k.mutations.map(Q=>vh(C.Tt,Q));return{userId:x,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:V,mutations:B}}(this.serializer,this.userId,d),g=[];let _=new Xe((T,C)=>Oe(T.canonicalString(),C.canonicalString()));for(const T of i){const C=j0(this.userId,T.key.path,c);_=_.add(T.key.path.popLast()),g.push(u.put(p)),g.push(a.put(C,NC))}return _.forEach(T=>{g.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Bn[c]=d.keys()}),W.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return Js(e).get(t).next(n=>n?(Ne(n.userId===this.userId),Ji(this.serializer,n)):null)}Ln(e,t){return this.Bn[t]?W.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Js(e).Z({index:no,range:i},(u,c,d)=>{c.userId===this.userId&&(Ne(c.batchId>=n),a=Ji(this.serializer,c)),d.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ro;return Js(e).Z({index:no,range:t,reverse:!0},(i,a,u)=>{n=a.batchId,u.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ro],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).G(no,t).next(n=>n.map(i=>Ji(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Hc(this.userId,t.path),i=IDBKeyRange.lowerBound(n),a=[];return pa(e).Z({range:i},(u,c,d)=>{const[p,g,_]=u,T=Qr(g);if(p===this.userId&&t.path.isEqual(T))return Js(e).get(_).next(C=>{if(!C)throw Se();Ne(C.userId===this.userId),a.push(Ji(this.serializer,C))});d.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xe(Oe);const i=[];return t.forEach(a=>{const u=Hc(this.userId,a.path),c=IDBKeyRange.lowerBound(u),d=pa(e).Z({range:c},(p,g,_)=>{const[T,C,x]=p,k=Qr(C);T===this.userId&&a.path.isEqual(k)?n=n.add(x):_.done()});i.push(d)}),W.waitFor(i).next(()=>this.kn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,a=Hc(this.userId,n),u=IDBKeyRange.lowerBound(a);let c=new Xe(Oe);return pa(e).Z({range:u},(d,p,g)=>{const[_,T,C]=d,x=Qr(T);_===this.userId&&n.isPrefixOf(x)?x.length===i&&(c=c.add(C)):g.done()}).next(()=>this.kn(e,c))}kn(e,t){const n=[],i=[];return t.forEach(a=>{i.push(Js(e).get(a).next(u=>{if(u===null)throw Se();Ne(u.userId===this.userId),n.push(Ji(this.serializer,u))}))}),W.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return $w(e.ue,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),W.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return W.resolve();const n=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),i=[];return pa(e).Z({range:n},(a,u,c)=>{if(a[0]===this.userId){const d=Qr(a[1]);i.push(d)}else c.done()}).next(()=>{Ne(i.length===0)})})}containsKey(e,t){return qw(e,this.userId,t)}Qn(e){return Ww(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ro,lastStreamToken:""})}}function qw(r,e,t){const n=Hc(e,t.path),i=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return pa(r).Z({range:a,Y:!0},(c,d,p)=>{const[g,_,T]=c;g===e&&_===i&&(u=!0),p.done()}).next(()=>u)}function Js(r){return Lt(r,Nr)}function pa(r){return Lt(r,wa)}function Ww(r){return Lt(r,Gl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new fo(0)}static Un(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const n=new fo(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Pe.fromTimestamp(new qt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.Wn(e)).next(n=>(Ne(n.targetCount>0),n.targetCount-=1,this.Gn(e,n)))}removeTargets(e,t,n){let i=0;const a=[];return ua(e).Z((u,c)=>{const d=bl(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))}).next(()=>W.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ua(e).Z((n,i)=>{const a=bl(i);t(a)})}Wn(e){return n_(e).get(uh).next(t=>(Ne(t!==null),t))}Gn(e,t){return n_(e).put(uh,t)}zn(e,t){return ua(e).put(Lw(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=uo(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return ua(e).Z({range:i,index:z0},(u,c,d)=>{const p=bl(c);lu(t,p.target)&&(a=p,d.done())}).next(()=>a)}addMatchingKeys(e,t,n){const i=[],a=si(e);return t.forEach(u=>{const c=on(u.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,u))}),W.waitFor(i)}removeMatchingKeys(e,t,n){const i=si(e);return W.forEach(t,a=>{const u=on(a.path);return W.waitFor([i.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])})}removeMatchingKeysForTargetId(e,t){const n=si(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=si(e);let a=Le();return i.Z({range:n,Y:!0},(u,c,d)=>{const p=Qr(u[1]),g=new ve(p);a=a.add(g)}).next(()=>a)}containsKey(e,t){const n=on(t.path),i=IDBKeyRange.bound([n],[b0(n)],!1,!0);let a=0;return si(e).Z({index:Kp,Y:!0,range:i},([u,c],d,p)=>{u!==0&&(a++,p.done())}).next(()=>a>0)}lt(e,t){return ua(e).get(t).next(n=>n?bl(n):null)}}function ua(r){return Lt(r,Ea)}function n_(r){return Lt(r,so)}function si(r){return Lt(r,Ta)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LruGarbageCollector",Gw=1048576;function s_([r,e],[t,n]){const i=Oe(r,t);return i===0?Oe(e,n):i}class sA{constructor(e){this.Hn=e,this.buffer=new Xe(s_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();s_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kw{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ie(r_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yi(t)?ie(r_,"Ignoring IndexedDB error during garbage collection: ",t):await gi(t)}await this.er(3e5)})}}class iA{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return W.resolve(kn.ae);const n=new sA(t);return this.tr.forEachTarget(e,i=>n.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>n.Zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(t_)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,a,u,c,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,u=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(n=_,c=Date.now(),this.removeTargets(e,n,t))).next(_=>(a=_,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(_=>(p=Date.now(),ca()<=We.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${i} in `+(c-u)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_})))}}function Hw(r,e){return new iA(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t){this.db=e,this.garbageCollector=Hw(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(n,i)=>t(i))}addReference(e,t,n){return zc(e,n)}removeReference(e,t,n){return zc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return zc(e,t)}ar(e,t){return function(i,a){let u=!1;return Ww(i).X(c=>qw(i,c,a).next(d=>(d&&(u=!0),W.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._r(e,(u,c)=>{if(c<=t){const d=this.ar(e,u).next(p=>{if(!p)return a++,n.getEntry(e,u).next(()=>(n.removeEntry(u,Pe.min()),si(e).delete(function(_){return[0,on(_.path)]}(u))))});i.push(d)}}).next(()=>W.waitFor(i)).next(()=>n.apply(e)).next(()=>a)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return zc(e,t)}_r(e,t){const n=si(e);let i,a=kn.ae;return n.Z({index:Kp},([u,c],{path:d,sequenceNumber:p})=>{u===0?(a!==kn.ae&&t(new ve(Qr(i)),a),a=p,i=d):a=kn.ae}).next(()=>{a!==kn.ae&&t(new ve(Qr(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zc(r,e){return si(r).put(function(n,i){return{targetId:0,path:on(n.path),sequenceNumber:i}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.changes=new xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?W.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Hi(e).put(n)}removeEntry(e,t,n){return Hi(e).delete(function(a,u){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],_h(u),c[c.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.ur(e,n)))}getEntry(e,t){let n=wt.newInvalidDocument(t);return Hi(e).Z({index:Qc,range:IDBKeyRange.only(Nl(t))},(i,a)=>{n=this.cr(t,a)}).next(()=>n)}lr(e,t){let n={size:0,document:wt.newInvalidDocument(t)};return Hi(e).Z({index:Qc,range:IDBKeyRange.only(Nl(t))},(i,a)=>{n={document:this.cr(t,a),size:Eh(a)}}).next(()=>n)}getEntries(e,t){let n=ar();return this.hr(e,t,(i,a)=>{const u=this.cr(i,a);n=n.insert(i,u)}).next(()=>n)}Pr(e,t){let n=ar(),i=new lt(ve.comparator);return this.hr(e,t,(a,u)=>{const c=this.cr(a,u);n=n.insert(a,c),i=i.insert(a,Eh(u))}).next(()=>({documents:n,Tr:i}))}hr(e,t,n){if(t.isEmpty())return W.resolve();let i=new Xe(a_);t.forEach(d=>i=i.add(d));const a=IDBKeyRange.bound(Nl(i.first()),Nl(i.last())),u=i.getIterator();let c=u.getNext();return Hi(e).Z({index:Qc,range:a},(d,p,g)=>{const _=ve.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&a_(c,_)<0;)n(c,null),c=u.getNext();c&&c.isEqual(_)&&(n(c,p),c=u.hasNext()?u.getNext():null),c?g.W(Nl(c)):g.done()}).next(()=>{for(;c;)n(c,null),c=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,n,i,a){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),_h(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hi(e).G(IDBKeyRange.bound(c,d,!0)).next(p=>{a==null||a.incrementDocumentReadCount(p.length);let g=ar();for(const _ of p){const T=this.cr(ve.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(uu(t,T)||i.has(T.key))&&(g=g.insert(T.key,T))}return g})}getAllFromCollectionGroup(e,t,n,i){let a=ar();const u=o_(t,n),c=o_(t,Kn.max());return Hi(e).Z({index:B0,range:IDBKeyRange.bound(u,c,!0)},(d,p,g)=>{const _=this.cr(ve.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===i&&g.done()}).next(()=>a)}newChangeBuffer(e){return new lA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return i_(e).get(cp).next(t=>(Ne(!!t),t))}ur(e,t){return i_(e).put(cp,t)}cr(e,t){if(t){const n=Kx(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pe.min())))return n}return wt.newInvalidDocument(e)}}function Xw(r){return new aA(r)}class lA extends Qw{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new xs(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new Xe((a,u)=>Oe(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const c=this.Er.get(a);if(t.push(this.Ir.removeEntry(e,a,c.readTime)),u.isValidDocument()){const d=$v(this.Ir.serializer,u);i=i.add(a.path.popLast());const p=Eh(d);n+=p-c.size,t.push(this.Ir.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=$v(this.Ir.serializer,u.convertToNoDocument(Pe.min()));t.push(this.Ir.addEntry(e,a,d))}}),i.forEach(a=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Ir.updateMetadata(e,n)),W.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(n=>(this.Er.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:n,Tr:i})=>(i.forEach((a,u)=>{this.Er.set(a,{size:u,readTime:n.get(a).readTime})}),n))}}function i_(r){return Lt(r,Kl)}function Hi(r){return Lt(r,lh)}function Nl(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o_(r,e){const t=e.documentKey.path.toArray();return[r,_h(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function a_(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(i=Oe(t[a],n[a]),i)return i;return i=Oe(t.length,n.length),i||(i=Oe(t[t.length-2],n[n.length-2]),i||Oe(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&jl(n.mutation,i,_s.empty(),qt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Le()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Le()){const i=Xr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let u=Pl();return a.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=Xr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Le()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,c)=>{t.set(u,c)})})}computeViews(e,t,n,i){let a=ar();const u=Ll(),c=function(){return Ll()}();return t.forEach((d,p)=>{const g=n.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Oa)?a=a.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),jl(g.mutation,p,g.mutation.getFieldMask(),qt.now())):u.set(p.key,_s.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((p,g)=>u.set(p,g)),t.forEach((p,g)=>{var _;return c.set(p,new uA(g,(_=u.get(p))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const n=Ll();let i=new lt((u,c)=>u-c),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const c of u)c.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let g=n.get(d)||_s.empty();g=c.applyToLocalView(p,g),n.set(d,g);const _=(i.get(c.batchId)||Le()).add(d);i=i.insert(c.batchId,_)})}).next(()=>{const u=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,g=d.value,_=gw();g.forEach(T=>{if(!a.has(T)){const C=ww(t.get(T),n.get(T));C!==null&&_.set(T,C),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return W.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):W.resolve(Xr());let c=_a,d=a;return u.next(p=>W.forEach(p,(g,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),a.get(g)?W.resolve():this.remoteDocumentCache.getEntry(e,g).next(T=>{d=d.insert(g,T)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,d,p,Le())).next(g=>({batchId:c,changes:mx(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(n=>{let i=Pl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let u=Pl();return this.indexManager.getCollectionParents(e,a).next(c=>W.forEach(c,d=>{const p=function(_,T){return new $h(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,n,i).next(g=>{g.forEach((_,T)=>{u=u.insert(_,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(u=>{a.forEach((d,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,wt.newInvalidDocument(g)))});let c=Pl();return u.forEach((d,p)=>{const g=a.get(d);g!==void 0&&jl(g.mutation,p,_s.empty(),qt.now()),uu(t,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return W.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:jw(i.bundledQuery),readTime:gn(i.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.overlays=new lt(ve.comparator),this.Rr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xr();return W.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.Et(e,t,a)}),W.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(n)),W.resolve()}getOverlaysForCollection(e,t,n){const i=Xr(),a=t.length+1,u=new ve(t.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new lt((p,g)=>p-g);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let g=a.get(p.largestBatchId);g===null&&(g=Xr(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=Xr(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=i)););return W.resolve(c)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const u=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new sm(t,n));let a=this.Rr.get(t);a===void 0&&(a=Le(),this.Rr.set(t,a)),this.Rr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.Vr=new Xe($t.mr),this.gr=new Xe($t.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new $t(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new $t(e,t))}br(e,t){e.forEach(n=>this.removeReference(n,t))}Sr(e){const t=new ve(new et([])),n=new $t(t,e),i=new $t(t,e+1),a=[];return this.gr.forEachInRange([n,i],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ve(new et([])),n=new $t(t,e),i=new $t(t,e+1);let a=Le();return this.gr.forEachInRange([n,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new $t(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class $t{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ve.comparator(e.key,t.key)||Oe(e.Cr,t.Cr)}static pr(e,t){return Oe(e.Cr,t.Cr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Xe($t.mr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nm(a,t,n,i);this.mutationQueue.push(u);for(const c of i)this.Mr=this.Mr.add(new $t(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return W.resolve(u)}lookupMutationBatch(e,t){return W.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),a=i<0?0:i;return W.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ro:this.Fr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([n,i],u=>{const c=this.Or(u.Cr);a.push(c)}),W.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xe(Oe);return t.forEach(i=>{const a=new $t(i,0),u=new $t(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],c=>{n=n.add(c.Cr)})}),W.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;ve.isDocumentKey(a)||(a=a.child(""));const u=new $t(new ve(a),0);let c=new Xe(Oe);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!n.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.Cr)),!0)},u),W.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(n=>{const i=this.Or(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ne(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return W.forEach(t.mutations,i=>{const a=new $t(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new $t(t,0),i=this.Mr.firstAfterOrEqual(n);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.kr=e,this.docs=function(){return new lt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,u=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return W.resolve(n?n.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let n=ar();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():wt.newInvalidDocument(i))}),W.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=ar();const u=t.path,c=new ve(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Wp(M0(g),n)<=0||(i.has(g.key)||uu(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return W.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Se()}qr(e,t){return W.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new mA(this)}getSize(e){return W.resolve(this.size)}}class mA extends Qw{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)}),W.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.persistence=e,this.Qr=new xs(t=>uo(t),lu),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new lm,this.targetCount=0,this.Ur=fo.Kn()}forEachTarget(e,t){return this.Qr.forEach((n,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),W.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new fo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.zn(t),W.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.Qr.forEach((u,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),W.waitFor(a).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return W.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),W.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),W.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return W.resolve(n)}containsKey(e,t){return W.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new kn(0),this.zr=!1,this.zr=!0,this.jr=new dA,this.referenceDelegate=e(this),this.Hr=new gA(this),this.indexManager=new tA,this.remoteDocumentCache=function(i){return new pA(i)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new Fw(t),this.Yr=new cA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new fA(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){ie("MemoryPersistence","Starting transaction:",e);const i=new yA(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next(a=>this.referenceDelegate.Xr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}ei(e,t){return W.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class yA extends F0{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.ti=new lm,this.ni=null}static ri(e){return new Xh(e)}get ii(){if(this.ni)return this.ni;throw Se()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),W.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),W.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.ii.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ii,n=>{const i=ve.fromPath(n);return this.si(e,i).next(a=>{a||t.removeEntry(i,Pe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return W.or([()=>W.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Th{constructor(e,t){this.persistence=e,this.oi=new xs(n=>on(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Hw(this,t)}static ri(e,t){return new Th(e,t)}Zr(){}Xr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return W.forEach(this.oi,(n,i)=>this.ar(e,n,i).next(a=>a?W.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,u=>this.ar(e,u,t).next(c=>{c||(n++,a.removeEntry(u,Pe.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),W.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}ar(e,t,n){return W.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return W.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.serializer=e}B(e,t,n,i){const a=new Oh("createOrUpgrade",t);n<1&&i>=1&&(function(d){d.createObjectStore(ou)}(e),function(d){d.createObjectStore(Gl,{keyPath:AC}),d.createObjectStore(Nr,{keyPath:_v,autoIncrement:!0}).createIndex(no,wv,{unique:!0}),d.createObjectStore(wa)}(e),l_(e),function(d){d.createObjectStore(Yi)}(e));let u=W.resolve();return n<3&&i>=3&&(n!==0&&(function(d){d.deleteObjectStore(Ta),d.deleteObjectStore(Ea),d.deleteObjectStore(so)}(e),l_(e)),u=u.next(()=>function(d){const p=d.store(so),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return p.put(uh,g)}(a))),n<4&&i>=4&&(n!==0&&(u=u.next(()=>function(d,p){return p.store(Nr).G().next(_=>{d.deleteObjectStore(Nr),d.createObjectStore(Nr,{keyPath:_v,autoIncrement:!0}).createIndex(no,wv,{unique:!0});const T=p.store(Nr),C=_.map(x=>T.put(x));return W.waitFor(C)})}(e,a))),u=u.next(()=>{(function(d){d.createObjectStore(Ia,{keyPath:OC})})(e)})),n<5&&i>=5&&(u=u.next(()=>this._i(a))),n<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Kl)}(e),this.ai(a)))),n<7&&i>=7&&(u=u.next(()=>this.ui(a))),n<8&&i>=8&&(u=u.next(()=>this.ci(e,a))),n<9&&i>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(u=u.next(()=>this.li(a))),n<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(Lh,{keyPath:FC})})(e),function(d){d.createObjectStore(jh,{keyPath:LC})}(e)})),n<12&&i>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(Bh,{keyPath:WC});p.createIndex(dp,GC,{unique:!1}),p.createIndex(q0,KC,{unique:!1})})(e)})),n<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(lh,{keyPath:RC});p.createIndex(Qc,kC),p.createIndex(B0,PC)}(e)).next(()=>this.hi(e,a)).next(()=>e.deleteObjectStore(Yi))),n<14&&i>=14&&(u=u.next(()=>this.Pi(e,a))),n<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore(Hp,{keyPath:jC,autoIncrement:!0}).createIndex(hp,BC,{unique:!1}),d.createObjectStore(ch,{keyPath:zC}).createIndex(U0,UC,{unique:!1}),d.createObjectStore(hh,{keyPath:$C}).createIndex($0,qC,{unique:!1})}(e))),n<16&&i>=16&&(u=u.next(()=>{t.objectStore(ch).clear()}).next(()=>{t.objectStore(hh).clear()})),n<17&&i>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(Qp,{keyPath:HC})})(e)})),u}ai(e){let t=0;return e.store(Yi).Z((n,i)=>{t+=Eh(i)}).next(()=>{const n={byteSize:t};return e.store(Kl).put(cp,n)})}_i(e){const t=e.store(Gl),n=e.store(Nr);return t.G().next(i=>W.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,ro],[a.userId,a.lastAcknowledgedBatchId]);return n.G(no,u).next(c=>W.forEach(c,d=>{Ne(d.userId===a.userId);const p=Ji(this.serializer,d);return $w(e,a.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Ta),n=e.store(Yi);return e.store(so).get(uh).next(i=>{const a=[];return n.Z((u,c)=>{const d=new et(u),p=function(_){return[0,on(_)]}(d);a.push(t.get(p).next(g=>g?W.resolve():(_=>t.put({targetId:0,path:on(_),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>W.waitFor(a))})}ci(e,t){e.createObjectStore(Hl,{keyPath:MC});const n=t.store(Hl),i=new am,a=u=>{if(i.add(u)){const c=u.lastSegment(),d=u.popLast();return n.put({collectionId:c,parent:on(d)})}};return t.store(Yi).Z({Y:!0},(u,c)=>{const d=new et(u);return a(d.popLast())}).next(()=>t.store(wa).Z({Y:!0},([u,c,d],p)=>{const g=Qr(c);return a(g.popLast())}))}li(e){const t=e.store(Ea);return t.Z((n,i)=>{const a=bl(i),u=Lw(this.serializer,a);return t.put(u)})}hi(e,t){const n=t.store(Yi),i=[];return n.Z((a,u)=>{const c=t.store(lh),d=function(_){return _.document?new ve(et.fromString(_.document.name).popFirst(5)):_.noDocument?ve.fromSegments(_.noDocument.path):_.unknownDocument?ve.fromSegments(_.unknownDocument.path):Se()}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(c.put(p))}).next(()=>W.waitFor(i))}Pi(e,t){const n=t.store(Nr),i=Xw(this.serializer),a=new um(Xh.ri,this.serializer.Tt);return n.G().next(u=>{const c=new Map;return u.forEach(d=>{var p;let g=(p=c.get(d.userId))!==null&&p!==void 0?p:Le();Ji(this.serializer,d).keys().forEach(_=>g=g.add(_)),c.set(d.userId,g)}),W.forEach(c,(d,p)=>{const g=new rn(p),_=Hh.It(this.serializer,g),T=a.getIndexManager(g),C=Qh.It(g,this.serializer,T,a.referenceDelegate);return new Yw(i,C,_,T).recalculateAndSaveOverlaysForDocumentKeys(new fp(t,kn.ae),d).next()})})}}function l_(r){r.createObjectStore(Ta,{keyPath:bC}).createIndex(Kp,VC,{unique:!0}),r.createObjectStore(Ea,{keyPath:"targetId"}).createIndex(z0,DC,{unique:!0}),r.createObjectStore(so)}const ei="IndexedDbPersistence",Gf=18e5,Kf=5e3,Hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_A="main";class cm{constructor(e,t,n,i,a,u,c,d,p,g,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=a,this.window=u,this.document=c,this.Ii=p,this.Ei=g,this.di=_,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=T=>Promise.resolve(),!cm.D())throw new Te(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oA(this,i),this.gi=t+_A,this.serializer=new Fw(d),this.pi=new hi(this.gi,this.di,new vA(this.serializer)),this.jr=new Qx,this.Hr=new rA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xw(this.serializer),this.Yr=new Hx,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,g===!1&&xt(ei,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(re.FAILED_PRECONDITION,Hf);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new kn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(yi(e))return ie(ei,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(ei,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Rl(e).get(sa).next(t=>W.resolve(this.Ni(t)))}Bi(e){return Uc(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Gf)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Lt(t,Ia);return n.G().next(i=>{const a=this.qi(i,Gf),u=i.filter(c=>a.indexOf(c)===-1);return W.forEach(u,c=>n.delete(c.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?W.resolve(!0):Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Te(re.FAILED_PRECONDITION,Hf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(e).G().next(n=>this.qi(n,Kf).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,u=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||u&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ie(ei,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[ou,Ia],e=>{const t=new fp(e,kn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(n=>this.ki(n.updateTimeMs,t)&&!this.$i(n.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Uc(e).G().next(t=>this.qi(t,Gf).map(n=>n.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Qh.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nA(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hh.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){ie(ei,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=function(d){return d===17?YC:d===16?XC:d===15?Xp:d===14?K0:d===13?G0:d===12?QC:d===11?W0:void Se()}(this.di);let u;return this.pi.runTransaction(e,i,a,c=>(u=new fp(c,this.Gr?this.Gr.next():kn.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Te(re.FAILED_PRECONDITION,O0);return n(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>n(u)))).then(c=>(u.raiseOnCommittedEvent(),c))}ji(e){return Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(re.FAILED_PRECONDITION,Hf)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rl(e).put(sa,t)}static D(){return hi.D()}xi(e){const t=Rl(e);return t.get(sa).next(n=>this.Ni(n)?(ie(ei,"Releasing primary lease."),t.delete(sa)):W.resolve())}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(xt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;f0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ie(ei,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return xt(ei,"Failed to get zombied client id.",n),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){xt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rl(r){return Lt(r,ou)}function Uc(r){return Lt(r,Ia)}function Zw(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=Le(),i=Le();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hm(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return f0()?8:L0(rh())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.rs(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,t,i,n).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new wA;return this._s(e,t,u).next(c=>{if(a.result=c,this.Xi)return this.us(e,t,u,c.size)})}).next(()=>a.result)}us(e,t,n,i){return n.documentReadCount<this.es?(ca()<=We.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),W.resolve()):(ca()<=We.DEBUG&&ie("QueryEngine","Query:",ha(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(ca()<=We.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(t))):W.resolve())}rs(e,t){if(bv(t))return W.resolve(null);let n=Gn(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_p(t,null,"F"),n=Gn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const u=Le(...a);return this.ns.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const p=this.cs(t,c);return this.ls(t,p,u,d.readTime)?this.rs(e,_p(t,null,"F")):this.hs(e,p,t,d)}))})))}ss(e,t,n,i){return bv(t)||i.isEqual(Pe.min())?W.resolve(null):this.ns.getDocuments(e,n).next(a=>{const u=this.cs(t,a);return this.ls(t,u,n,i)?W.resolve(null):(ca()<=We.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.hs(e,u,t,V0(i,_a)).next(c=>c))})}cs(e,t){let n=new Xe(pw(e));return t.forEach((i,a)=>{uu(e,a)&&(n=n.add(a))}),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}_s(e,t,n){return ca()<=We.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ns.getDocumentsMatchingQuery(e,t,Kn.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="LocalStore",EA=3e8;class TA{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new lt(Oe),this.Is=new xs(a=>uo(a),lu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function eE(r,e,t,n){return new TA(r,e,t,n)}async function tE(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const u=[],c=[];let d=Le();for(const p of i){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of a){c.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:c}))})})}function IA(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,p,g){const _=p.batch,T=_.keys();let C=W.resolve();return T.forEach(x=>{C=C.next(()=>g.getEntry(d,x)).next(k=>{const V=p.docVersions.get(x);Ne(V!==null),k.version.compareTo(V)<0&&(_.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),g.addEntry(k)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,_))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=Le();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function nE(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function SA(r,e){const t=xe(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const c=[];e.targetChanges.forEach((g,_)=>{const T=i.get(_);if(!T)return;c.push(t.Hr.removeMatchingKeys(a,g.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(a,g.addedDocuments,_)));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(Nt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,n)),i=i.insert(_,C),function(k,V,B){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=EA?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(T,C,g)&&c.push(t.Hr.updateTargetData(a,C))});let d=ar(),p=Le();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),c.push(CA(a,u,e.documentUpdates).next(g=>{d=g.Vs,p=g.fs})),!n.isEqual(Pe.min())){const g=t.Hr.getLastRemoteSnapshotVersion(a).next(_=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(g)}return W.waitFor(c).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,d,p)).next(()=>d)}).then(a=>(t.Ts=i,a))}function CA(r,e,t){let n=Le(),i=Le();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let u=ar();return t.forEach((c,d)=>{const p=a.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Pe.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):ie(dm,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Vs:u,fs:i}})}function xA(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=ro),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ih(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Hr.getTargetData(n,e).next(a=>a?(i=a,W.resolve(i)):t.Hr.allocateTargetId(n).next(u=>(i=new ws(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Ra(r,e,t){const n=xe(r),i=n.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,u=>n.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!yi(u))throw u;ie(dm,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function Ap(r,e,t){const n=xe(r);let i=Pe.min(),a=Le();return n.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,g){const _=xe(d),T=_.Is.get(g);return T!==void 0?W.resolve(_.Ts.get(T)):_.Hr.getTargetData(p,g)}(n,u,Gn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(u,c.targetId).next(d=>{a=d})}).next(()=>n.Ps.getDocumentsMatchingQuery(u,e,t?i:Pe.min(),t?a:Le())).next(c=>(iE(n,fw(e),c),{documents:c,gs:a})))}function rE(r,e){const t=xe(r),n=xe(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>n.lt(a,e).next(u=>u?u.target:null))}function sE(r,e){const t=xe(r),n=t.Es.get(e)||Pe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,V0(n,_a),Number.MAX_SAFE_INTEGER)).then(i=>(iE(t,e,i),i))}function iE(r,e,t){let n=r.Es.get(e)||Pe.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.Es.set(e,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firestore_clients";function u_(r,e){return`${oE}_${r}_${e}`}const aE="firestore_mutations";function c_(r,e,t){let n=`${aE}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const lE="firestore_targets";function Qf(r,e){return`${lE}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="SharedClientState";class Sh{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static bs(e,t,n){const i=JSON.parse(n);let a,u=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return u&&i.error&&(u=typeof i.error.message=="string"&&typeof i.error.code=="string",u&&(a=new Te(i.error.code,i.error.message))),u?new Sh(e,t,i.state,a):(xt(Hr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static bs(e,t){const n=JSON.parse(t);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new Te(n.error.code,n.error.message))),a?new Bl(e,n.state,i):(xt(Hr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ch{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=em();for(let u=0;i&&u<n.activeTargetIds.length;++u)i=CC(n.activeTargetIds[u]),a=a.add(n.activeTargetIds[u]);return i?new Ch(e,a):(xt(Hr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fm{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fm(t.clientId,t.onlineState):(xt(Hr,`Failed to parse online state: ${e}`),null)}}class Np{constructor(){this.activeTargetIds=em()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xf{constructor(e,t,n,i,a){this.window=e,this.Ti=t,this.persistenceKey=n,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new lt(Oe),this.started=!1,this.Os=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ns=u_(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Np),this.Ls=new RegExp(`^${oE}_${u}_([^_]*)$`),this.ks=new RegExp(`^${aE}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${lE}_${u}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const n of e){if(n===this.Cs)continue;const i=this.getItem(u_(this.persistenceKey,n));if(i){const a=Ch.bs(n,i);a&&(this.xs=this.xs.insert(a.clientId,a))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const n=this.Us(t);n&&this.Ws(n)}for(const n of this.Os)this.Ms(n);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,n){this.zs(e,t,n),this.js(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qf(this.persistenceKey,e));if(i){const a=Bl.bs(e,i);a&&(n=a.state)}}return t&&this.Hs.Ds(e),this.Ks(),n}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Js(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.js(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie(Hr,"READ",e,t),t}setItem(e,t){ie(Hr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie(Hr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ie(Hr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const n=this.Xs(t.key);return this.eo(n,null)}{const n=this.no(t.key,t.newValue);if(n)return this.eo(n.clientId,n)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const n=this.ro(t.key,t.newValue);if(n)return this.io(n)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const n=this.so(t.key,t.newValue);if(n)return this.oo(n)}}else if(t.key===this.Qs){if(t.newValue!==null){const n=this.Us(t.newValue);if(n)return this.Ws(n)}}else if(t.key===this.Bs){const n=function(a){let u=kn.ae;if(a!=null)try{const c=JSON.parse(a);Ne(typeof c=="number"),u=c}catch(c){xt(Hr,"Failed to read sequence number from WebStorage",c)}return u}(t.newValue);n!==kn.ae&&this.sequenceNumberHandler(n)}else if(t.key===this.$s){const n=this._o(t.newValue);await Promise.all(n.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,n){const i=new Sh(this.currentUser,e,t,n),a=c_(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ss())}js(e){const t=c_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,n){const i=Qf(this.persistenceKey,e),a=new Bl(e,t,n);this.setItem(i,a.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const n=this.Xs(e);return Ch.bs(n,t)}ro(e,t){const n=this.ks.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Sh.bs(new rn(a),i,t)}so(e,t){const n=this.qs.exec(e),i=Number(n[1]);return Bl.bs(i,t)}Us(e){return fm.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ie(Hr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const n=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),a=this.Gs(n),u=[],c=[];return a.forEach(d=>{i.has(d)||u.push(d)}),i.forEach(d=>{a.has(d)||c.push(d)}),this.syncEngine.lo(u,c).then(()=>{this.xs=n})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=em();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class uE{constructor(){this.ho=new Np,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Np,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="ConnectivityMonitor";class d_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ie(h_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ie(h_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function Rp(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",NA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RA{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===dh?`project_id=${n}`:`project_id=${n}&database_id=${i}`}bo(e,t,n,i,a){const u=Rp(),c=this.So(e,t.toUriEncodedString());ie(Yf,`Sending RPC '${e}' ${u}:`,c,n);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,a),this.vo(e,c,d,n).then(p=>(ie(Yf,`Received RPC '${e}' ${u}: `,p),p),p=>{throw $l(Yf,`RPC '${e}' ${u} failed with error: `,p,"url: ",c,"request:",n),p})}Co(e,t,n,i,a,u){return this.bo(e,t,n,i,a)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}So(e,t){const n=NA[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class PA extends RA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const a=Rp();return new Promise((u,c)=>{const d=new A0;d.setWithCredentials(!0),d.listenOnce(N0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gc.NO_ERROR:const g=d.getResponseJson();ie(nn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Gc.TIMEOUT:ie(nn,`RPC '${e}' ${a} timed out`),c(new Te(re.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const _=d.getStatus();if(ie(nn,`RPC '${e}' ${a} failed with status:`,_,"response text:",d.getResponseText()),_>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const x=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(B)>=0?B:re.UNKNOWN}(C.status);c(new Te(x,C.message))}else c(new Te(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Te(re.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ie(nn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);ie(nn,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",p,n,15)})}Wo(e,t,n){const i=Rp(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=P0(),c=k0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=a.join("");ie(nn,`Creating RPC '${e}' stream ${i}: ${g}`,d);const _=u.createWebChannel(g,d);let T=!1,C=!1;const x=new kA({Fo:V=>{C?ie(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(T||(ie(nn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),T=!0),ie(nn,`RPC '${e}' stream ${i} sending:`,V),_.send(V))},Mo:()=>_.close()}),k=(V,B,Q)=>{V.listen(B,$=>{try{Q($)}catch(Z){setTimeout(()=>{throw Z},0)}})};return k(_,kl.EventType.OPEN,()=>{C||(ie(nn,`RPC '${e}' stream ${i} transport opened.`),x.Qo())}),k(_,kl.EventType.CLOSE,()=>{C||(C=!0,ie(nn,`RPC '${e}' stream ${i} transport closed`),x.Ko())}),k(_,kl.EventType.ERROR,V=>{C||(C=!0,$l(nn,`RPC '${e}' stream ${i} transport errored:`,V),x.Ko(new Te(re.UNAVAILABLE,"The operation could not be completed")))}),k(_,kl.EventType.MESSAGE,V=>{var B;if(!C){const Q=V.data[0];Ne(!!Q);const $=Q,Z=($==null?void 0:$.error)||((B=$[0])===null||B===void 0?void 0:B.error);if(Z){ie(nn,`RPC '${e}' stream ${i} received error:`,Z);const L=Z.status;let U=function(N){const D=Dt[N];if(D!==void 0)return Iw(D)}(L),R=Z.message;U===void 0&&(U=re.INTERNAL,R="Unknown error status: "+L+" with message "+Z.message),C=!0,x.Ko(new Te(U,R)),_.close()}else ie(nn,`RPC '${e}' stream ${i} received:`,Q),x.Uo(Q)}}),k(c,R0.STAT_EVENT,V=>{V.stat===lp.PROXY?ie(nn,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===lp.NOPROXY&&ie(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof window<"u"?window:null}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(r){return new Ox(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,n=1e3,i=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="PersistentStream";class fE{constructor(e,t,n,i,a,u,c,d){this.Ti=e,this.n_=n,this.r_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(xt(t.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.i_===t&&this.V_(n,i)},n=>{e(()=>{const i=new Te(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{n(()=>this.m_(i))}),this.stream.onMessage(i=>{n(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ie(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ie(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DA extends fE{constructor(e,t,n,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Bx(this.serializer,e),n=function(a){if(!("targetChange"in a))return Pe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?gn(u.readTime):Pe.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(a,u){let c;const d=u.target;if(c=ph(d)?{documents:Pw(a,d)}:{query:Dw(a,d).ht},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=Fx(a,u.resumeToken);const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}else if(u.snapshotVersion.compareTo(Pe.min())>0){c.readTime=gh(a,u.snapshotVersion.toTimestamp());const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const n=Ux(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.I_(t)}}class bA extends fE{constructor(e,t,n,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=zx(e.writeResults,e.commitTime),n=gn(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Tp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>vh(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class MA extends VA{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.bo(e,Ep(t,n),i,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(re.UNKNOWN,a.toString())})}Co(e,t,n,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,Ep(t,n),i,u,c,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(re.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class OA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(xt(t),this.N_=!1):ie("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class FA{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{n.enqueueAndForget(async()=>{yo(this)&&(ie(po,"Restarting streams for network reachability change."),await async function(d){const p=xe(d);p.W_.add(4),await fu(p),p.j_.set("Unknown"),p.W_.delete(4),await Yh(p)}(this))})}),this.j_=new OA(n,i)}}async function Yh(r){if(yo(r))for(const e of r.G_)await e(!0)}async function fu(r){for(const e of r.G_)await e(!1)}function Zh(r,e){const t=xe(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),gm(t)?mm(t):Fa(t).c_()&&pm(t,e))}function ka(r,e){const t=xe(r),n=Fa(t);t.U_.delete(e),n.c_()&&pE(t,e),t.U_.size===0&&(n.c_()?n.P_():yo(t)&&t.j_.set("Unknown"))}function pm(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(r).y_(e)}function pE(r,e){r.H_.Ne(e),Fa(r).w_(e)}function mm(r){r.H_=new Dx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Fa(r).start(),r.j_.B_()}function gm(r){return yo(r)&&!Fa(r).u_()&&r.U_.size>0}function yo(r){return xe(r).W_.size===0}function mE(r){r.H_=void 0}async function LA(r){r.j_.set("Online")}async function jA(r){r.U_.forEach((e,t)=>{pm(r,e)})}async function BA(r,e){mE(r),gm(r)?(r.j_.q_(e),mm(r)):r.j_.set("Unknown")}async function zA(r,e,t){if(r.j_.set("Online"),e instanceof Cw&&e.state===2&&e.cause)try{await async function(i,a){const u=a.cause;for(const c of a.targetIds)i.U_.has(c)&&(await i.remoteSyncer.rejectListen(c,u),i.U_.delete(c),i.H_.removeTarget(c))}(r,e)}catch(n){ie(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xh(r,n)}else if(e instanceof Jc?r.H_.We(e):e instanceof Sw?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Pe.min()))try{const n=await nE(r.localStore);t.compareTo(n)>=0&&await function(a,u){const c=a.H_.ot(u);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.U_.get(p);g&&a.U_.set(p,g.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,p)=>{const g=a.U_.get(d);if(!g)return;a.U_.set(d,g.withResumeToken(Nt.EMPTY_BYTE_STRING,g.snapshotVersion)),pE(a,d);const _=new ws(g.target,d,p,g.sequenceNumber);pm(a,_)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){ie(po,"Failed to raise snapshot:",n),await xh(r,n)}}async function xh(r,e,t){if(!yi(e))throw e;r.W_.add(1),await fu(r),r.j_.set("Offline"),t||(t=()=>nE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ie(po,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Yh(r)})}function gE(r,e){return e().catch(t=>xh(r,t,e))}async function pu(r){const e=xe(r),t=pi(e);let n=e.K_.length>0?e.K_[e.K_.length-1].batchId:ro;for(;UA(e);)try{const i=await xA(e.localStore,n);if(i===null){e.K_.length===0&&t.P_();break}n=i.batchId,$A(e,i)}catch(i){await xh(e,i)}yE(e)&&vE(e)}function UA(r){return yo(r)&&r.K_.length<10}function $A(r,e){r.K_.push(e);const t=pi(r);t.c_()&&t.b_&&t.S_(e.mutations)}function yE(r){return yo(r)&&!pi(r).u_()&&r.K_.length>0}function vE(r){pi(r).start()}async function qA(r){pi(r).C_()}async function WA(r){const e=pi(r);for(const t of r.K_)e.S_(t.mutations)}async function GA(r,e,t){const n=r.K_.shift(),i=rm.from(n,e,t);await gE(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await pu(r)}async function KA(r,e){e&&pi(r).b_&&await async function(n,i){if(function(u){return Rx(u)&&u!==re.ABORTED}(i.code)){const a=n.K_.shift();pi(n).h_(),await gE(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await pu(n)}}(r,e),yE(r)&&vE(r)}async function p_(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),ie(po,"RemoteStore received new credentials");const n=yo(t);t.W_.add(3),await fu(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yh(t)}async function kp(r,e){const t=xe(r);e?(t.W_.delete(2),await Yh(t)):e||(t.W_.add(2),await fu(t),t.j_.set("Unknown"))}function Fa(r){return r.J_||(r.J_=function(t,n,i){const a=xe(t);return a.M_(),new DA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:LA.bind(null,r),No:jA.bind(null,r),Lo:BA.bind(null,r),p_:zA.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),gm(r)?mm(r):r.j_.set("Unknown")):(await r.J_.stop(),mE(r))})),r.J_}function pi(r){return r.Y_||(r.Y_=function(t,n,i){const a=xe(t);return a.M_(),new bA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:qA.bind(null,r),Lo:KA.bind(null,r),D_:WA.bind(null,r),v_:GA.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await pu(r)):(await r.Y_.stop(),r.K_.length>0&&(ie(po,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const u=Date.now()+n,c=new ym(e,t,u,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _E(r,e){if(xt("AsyncQueue",`${e}: ${r}`),yi(r))return new Te(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ve.comparator(t.key,n.key):(t,n)=>ve.comparator(t.key,n.key),this.keyedMap=Pl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ga;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.Z_=new lt(ve.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Se():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Pa{constructor(e,t,n,i,a,u,c,d,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,i,a){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Pa(e,t,ga.emptySet(t),u,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class QA{constructor(){this.queries=g_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=xe(t),a=i.queries;i.queries=g_(),a.forEach((u,c)=>{for(const d of c.ta)d.onError(n)})})(this,new Te(re.ABORTED,"Firestore shutting down"))}}function g_(){return new xs(r=>dw(r),Wh)}async function XA(r,e){const t=xe(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.na()&&e.ra()&&(n=2):(a=new HA,n=e.ra()?0:1);try{switch(n){case 0:a.ea=await t.onListen(i,!0);break;case 1:a.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const c=_E(u,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&vm(t)}async function YA(r,e){const t=xe(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?i=e.ra()?0:1:!a.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function ZA(r,e){const t=xe(r);let n=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const c of u.ta)c.oa(i)&&(n=!0);u.ea=i}}n&&vm(t)}function JA(r,e,t){const n=xe(r),i=n.queries.get(e);if(i)for(const a of i.ta)a.onError(t);n.queries.delete(e)}function vm(r){r.ia.forEach(e=>{e.next()})}var Pp,y_;(y_=Pp||(Pp={}))._a="default",y_.Cache="cache";class eN{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Pa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.key=e}}class EE{constructor(e){this.key=e}}class tN{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=pw(e),this.wa=new ga(this.ya)}get ba(){return this.fa}Sa(e,t){const n=t?t.Da:new m_,i=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,_)=>{const T=i.get(g),C=uu(this.query,_)?_:null,x=!!T&&this.mutatedKeys.has(T.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;T&&C?T.data.isEqual(C.data)?x!==k&&(n.track({type:3,doc:C}),V=!0):this.va(T,C)||(n.track({type:2,doc:C}),V=!0,(d&&this.ya(C,d)>0||p&&this.ya(C,p)<0)&&(c=!0)):!T&&C?(n.track({type:0,doc:C}),V=!0):T&&!C&&(n.track({type:1,doc:T}),V=!0,(d||p)&&(c=!0)),V&&(C?(u=u.add(C),a=k?a.add(g):a.delete(g)):(u=u.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),a=a.delete(g.key),n.track({type:1,doc:g})}return{wa:u,Da:n,ls:c,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((g,_)=>function(C,x){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return k(C)-k(x)}(g.type,_.type)||this.ya(g.doc,_.doc)),this.Ca(n),i=i!=null&&i;const c=t&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,p=d!==this.ga;return this.ga=d,u.length!==0||p?{snapshot:new Pa(this.query,e.wa,a,u,e.mutatedKeys,d===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new m_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Le(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new EE(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new wE(n))}),t}Oa(e){this.fa=e.gs,this.pa=Le();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Pa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const La="SyncEngine";class nN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rN{constructor(e){this.key=e,this.Ba=!1}}class sN{constructor(e,t,n,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new xs(c=>dw(c),Wh),this.qa=new Map,this.Qa=new Set,this.$a=new lt(ve.comparator),this.Ka=new Map,this.Ua=new lm,this.Wa={},this.Ga=new Map,this.za=fo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function iN(r,e,t=!0){const n=Jh(r);let i;const a=n.ka.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await TE(n,e,t,!0),i}async function oN(r,e){const t=Jh(r);await TE(t,e,!0,!1)}async function TE(r,e,t,n){const i=await Ih(r.localStore,Gn(e)),a=i.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await _m(r,e,a,u==="current",i.resumeToken)),r.isPrimaryClient&&t&&Zh(r.remoteStore,i),c}async function _m(r,e,t,n,i){r.Ha=(_,T,C)=>async function(k,V,B,Q){let $=V.view.Sa(B);$.ls&&($=await Ap(k.localStore,V.query,!1).then(({documents:R})=>V.view.Sa(R,$)));const Z=Q&&Q.targetChanges.get(V.targetId),L=Q&&Q.targetMismatches.get(V.targetId)!=null,U=V.view.applyChanges($,k.isPrimaryClient,Z,L);return Dp(k,V.targetId,U.Ma),U.snapshot}(r,_,T,C);const a=await Ap(r.localStore,e,!0),u=new tN(e,a.gs),c=u.Sa(a.documents),d=du.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),p=u.applyChanges(c,r.isPrimaryClient,d);Dp(r,t,p.Ma);const g=new nN(e,t,u);return r.ka.set(e,g),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),p.snapshot}async function aN(r,e,t){const n=xe(r),i=n.ka.get(e),a=n.qa.get(i.targetId);if(a.length>1)return n.qa.set(i.targetId,a.filter(u=>!Wh(u,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ra(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&ka(n.remoteStore,i.targetId),Da(n,i.targetId)}).catch(gi)):(Da(n,i.targetId),await Ra(n.localStore,i.targetId,!0))}async function lN(r,e){const t=xe(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),ka(t.remoteStore,n.targetId))}async function IE(r,e){const t=xe(r);try{const n=await SA(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Ka.get(a);u&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Ba=!0:i.modifiedDocuments.size>0?Ne(u.Ba):i.removedDocuments.size>0&&(Ne(u.Ba),u.Ba=!1))}),await vo(t,n,e)}catch(n){await gi(n)}}function v_(r,e,t){const n=xe(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach((a,u)=>{const c=u.view.sa(e);c.snapshot&&i.push(c.snapshot)}),function(u,c){const d=xe(u);d.onlineState=c;let p=!1;d.queries.forEach((g,_)=>{for(const T of _.ta)T.sa(c)&&(p=!0)}),p&&vm(d)}(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function uN(r,e,t){const n=xe(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ka.get(e),a=i&&i.key;if(a){let u=new lt(ve.comparator);u=u.insert(a,wt.newNoDocument(a,Pe.min()));const c=Le().add(a),d=new hu(Pe.min(),new Map,new lt(Oe),u,c);await IE(n,d),n.$a=n.$a.remove(a),n.Ka.delete(e),Tm(n)}else await Ra(n.localStore,e,!1).then(()=>Da(n,e,t)).catch(gi)}async function cN(r,e){const t=xe(r),n=e.batch.batchId;try{const i=await IA(t.localStore,e);Em(t,n,null),wm(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await vo(t,i)}catch(i){await gi(i)}}async function hN(r,e,t){const n=xe(r);try{const i=await function(u,c){const d=xe(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,c).next(_=>(Ne(_!==null),g=_.keys(),d.mutationQueue.removeMutationBatch(p,_))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(n.localStore,e);Em(n,e,t),wm(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await vo(n,i)}catch(i){await gi(i)}}function wm(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function Em(r,e,t){const n=xe(r);let i=n.Wa[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function Da(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(n=>{r.Ua.containsKey(n)||SE(r,n)})}function SE(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(ka(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),Tm(r))}function Dp(r,e,t){for(const n of t)n instanceof wE?(r.Ua.addReference(n.key,e),dN(r,n)):n instanceof EE?(ie(La,"Document no longer in limbo: "+n.key),r.Ua.removeReference(n.key,e),r.Ua.containsKey(n.key)||SE(r,n.key)):Se()}function dN(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(ie(La,"New document in limbo: "+t),r.Qa.add(n),Tm(r))}function Tm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new ve(et.fromString(e)),n=r.za.next();r.Ka.set(n,new rN(t)),r.$a=r.$a.insert(t,n),Zh(r.remoteStore,new ws(Gn(qh(t.path)),n,"TargetPurposeLimboResolution",kn.ae))}}async function vo(r,e,t){const n=xe(r),i=[],a=[],u=[];n.ka.isEmpty()||(n.ka.forEach((c,d)=>{u.push(n.Ha(d,e,t).then(p=>{var g;if((p||t)&&n.isPrimaryClient){const _=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){i.push(p);const _=hm.Yi(d.targetId,p);a.push(_)}}))}),await Promise.all(u),n.La.p_(i),await async function(d,p){const g=xe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>W.forEach(p,T=>W.forEach(T.Hi,C=>g.persistence.referenceDelegate.addReference(_,T.targetId,C)).next(()=>W.forEach(T.Ji,C=>g.persistence.referenceDelegate.removeReference(_,T.targetId,C)))))}catch(_){if(!yi(_))throw _;ie(dm,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const C=g.Ts.get(T),x=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(x);g.Ts=g.Ts.insert(T,k)}}}(n.localStore,a))}async function fN(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){ie(La,"User change. New user:",e.toKey());const n=await tE(t.localStore,e);t.currentUser=e,function(a,u){a.Ga.forEach(c=>{c.forEach(d=>{d.reject(new Te(re.CANCELLED,u))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vo(t,n.Rs)}}function pN(r,e){const t=xe(r),n=t.Ka.get(e);if(n&&n.Ba)return Le().add(n.key);{let i=Le();const a=t.qa.get(e);if(!a)return i;for(const u of a){const c=t.ka.get(u);i=i.unionWith(c.view.ba)}return i}}async function mN(r,e){const t=xe(r),n=await Ap(t.localStore,e.query,!0),i=e.view.Oa(n);return t.isPrimaryClient&&Dp(t,e.targetId,i.Ma),i}async function gN(r,e){const t=xe(r);return sE(t.localStore,e).then(n=>vo(t,n))}async function yN(r,e,t,n){const i=xe(r),a=await function(c,d){const p=xe(c),g=xe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",_=>g.Ln(_,d).next(T=>T?p.localDocuments.getDocuments(_,T):W.resolve(null)))}(i.localStore,e);a!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(Em(i,e,n||null),wm(i,e),function(c,d){xe(xe(c).mutationQueue).qn(d)}(i.localStore,e)):Se(),await vo(i,a)):ie(La,"Cannot apply mutation batch with id: "+e)}async function vN(r,e){const t=xe(r);if(Jh(t),xE(t),e===!0&&t.ja!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await __(t,n.toArray());t.ja=!0,await kp(t.remoteStore,!0);for(const a of i)Zh(t.remoteStore,a)}else if(e===!1&&t.ja!==!1){const n=[];let i=Promise.resolve();t.qa.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):i=i.then(()=>(Da(t,u),Ra(t.localStore,u,!0))),ka(t.remoteStore,u)}),await i,await __(t,n),function(u){const c=xe(u);c.Ka.forEach((d,p)=>{ka(c.remoteStore,p)}),c.Ua.Dr(),c.Ka=new Map,c.$a=new lt(ve.comparator)}(t),t.ja=!1,await kp(t.remoteStore,!1)}}async function __(r,e,t){const n=xe(r),i=[],a=[];for(const u of e){let c;const d=n.qa.get(u);if(d&&d.length!==0){c=await Ih(n.localStore,Gn(d[0]));for(const p of d){const g=n.ka.get(p),_=await mN(n,g);_.snapshot&&a.push(_.snapshot)}}else{const p=await rE(n.localStore,u);c=await Ih(n.localStore,p),await _m(n,CE(p),u,!1,c.resumeToken)}i.push(c)}return n.La.p_(a),i}function CE(r){return hw(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function _N(r){return function(t){return xe(xe(t).persistence).zi()}(xe(r).localStore)}async function wN(r,e,t,n){const i=xe(r);if(i.ja)return void ie(La,"Ignoring unexpected query state notification.");const a=i.qa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await sE(i.localStore,fw(a[0])),c=hu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Nt.EMPTY_BYTE_STRING);await vo(i,u,c);break}case"rejected":await Ra(i.localStore,e,!0),Da(i,e,n);break;default:Se()}}async function EN(r,e,t){const n=Jh(r);if(n.ja){for(const i of e){if(n.qa.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){ie(La,"Adding an already active target "+i);continue}const a=await rE(n.localStore,i),u=await Ih(n.localStore,a);await _m(n,CE(a),u.targetId,!1,u.resumeToken),Zh(n.remoteStore,u)}for(const i of t)n.qa.has(i)&&await Ra(n.localStore,i,!1).then(()=>{ka(n.remoteStore,i),Da(n,i)}).catch(gi)}}function Jh(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uN.bind(null,e),e.La.p_=ZA.bind(null,e.eventManager),e.La.Ja=JA.bind(null,e.eventManager),e}function xE(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hE(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return eE(this.persistence,new Jw,e.initialUser,this.serializer)}Xa(e){return new um(Xh.ri,this.serializer)}Za(e){return new uE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class TN extends tu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ne(this.persistence.referenceDelegate instanceof Th);const n=this.persistence.referenceDelegate.garbageCollector;return new Kw(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new um(n=>Th.ri(n,t),this.serializer)}}class AE extends tu{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await xE(this.ru.syncEngine),await pu(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return eE(this.persistence,new Jw,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Kw(n,e.asyncQueue,t)}nu(e,t){const n=new SC(t,this.persistence);return new IC(e.asyncQueue,n)}Xa(e){const t=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new cm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cE(),eh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new uE}}class IN extends AE{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Xf&&(this.sharedClientState.syncEngine={uo:yN.bind(null,t),co:wN.bind(null,t),lo:EN.bind(null,t),zi:_N.bind(null,t),ao:gN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async n=>{await vN(this.ru.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Za(e){const t=cE();if(!Xf.D(t))throw new Te(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class nu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fN.bind(null,this.syncEngine),await kp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QA}()}createDatastore(e){const t=hE(e.databaseInfo.databaseId),n=function(a){return new PA(a)}(e.databaseInfo);return function(a,u,c,d){return new MA(a,u,c,d)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,u,c){return new FA(n,i,a,u,c)}(this.localStore,this.datastore,e.asyncQueue,t=>v_(this.syncEngine,t,0),function(){return d_.D()?new d_:new AA}())}createSyncEngine(e,t){return function(i,a,u,c,d,p,g){const _=new sN(i,a,u,c,d,p);return g&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=xe(i);ie(po,"RemoteStore shutting down."),a.W_.add(5),await fu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nu.provider={build:()=>new nu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="FirestoreClient";class CN{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=D0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async u=>{ie(mi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(ie(mi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_E(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zf(r,e){r.asyncQueue.verifyOperationInProgress(),ie(mi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await tE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function w_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await xN(r);ie(mi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>p_(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>p_(e.remoteStore,i)),r._onlineComponents=e}async function xN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ie(mi,"Using user provided OfflineComponentProvider");try{await Zf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await Zf(r,new tu)}}else ie(mi,"Using default OfflineComponentProvider"),await Zf(r,new TN(void 0));return r._offlineComponents}async function AN(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ie(mi,"Using user provided OnlineComponentProvider"),await w_(r,r._uninitializedComponentsProvider._online)):(ie(mi,"Using default OnlineComponentProvider"),await w_(r,new nu))),r._onlineComponents}async function NN(r){const e=await AN(r),t=e.eventManager;return t.onListen=iN.bind(null,e.syncEngine),t.onUnlisten=aN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lN.bind(null,e.syncEngine),t}function RN(r,e,t={}){const n=new ci;return r.asyncQueue.enqueueAndForget(async()=>function(a,u,c,d,p){const g=new SN({next:T=>{g.su(),u.enqueueAndForget(()=>YA(a,_));const C=T.docs.has(c);!C&&T.fromCache?p.reject(new Te(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&d&&d.source==="server"?p.reject(new Te(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new eN(qh(c.path),g,{includeMetadataChanges:!0,Ta:!0});return XA(a,_)}(await NN(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(r,e,t){if(!t)throw new Te(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function PN(r,e,t,n){if(e===!0&&n===!0)throw new Te(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function T_(r){if(!ve.isDocumentKey(r))throw new Te(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function DN(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se()}function I_(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=DN(r);throw new Te(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firestore.googleapis.com",S_=!0;class C_{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=S_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:S_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gw)throw new Te(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RE{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new pC;switch(n.type){case"firstParty":return new yC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Te(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=E_.get(t);n&&(ie("ComponentProvider","Removing Datastore"),E_.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Im(this.firestore,e,this._query)}}class Es{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Es(this.firestore,e,this._key)}}class ru extends Im{constructor(e,t,n){super(e,t,qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Es(this.firestore,null,new ve(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function VN(r,e,...t){if(r=g0(r),arguments.length===1&&(e=D0.newId()),kN("doc","path",e),r instanceof RE){const n=et.fromString(e,...t);return T_(n),new Es(r,null,new ve(n))}{if(!(r instanceof Es||r instanceof ru))throw new Te(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(et.fromString(e,...t));return T_(n),new Es(r.firestore,r instanceof ru?r.converter:null,new ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="AsyncQueue";class A_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dE(this,"async_queue_retry"),this.bu=()=>{const n=eh();n&&ie(x_,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.Su=e;const t=eh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=eh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ci;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!yi(e))throw e;ie(x_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const i=function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(n);throw xt("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.pu=!1,n))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=ym.createAndSchedule(this,e,t,n,a=>this.Fu(a));return this.fu.push(i),i}Du(){this.gu&&Se()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class kE extends RE{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new A_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A_(e),this._firestoreClient=void 0,await e}}}function MN(r,e,t){t||(t=dh);const n=w0(r,"firestore");if(n.isInitialized(t)){const i=n.getImmediate({identifier:t}),a=n.getOptions(t);if(sh(a,e))return i;throw new Te(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Te(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gw)throw new Te(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function ON(r){if(r._terminated)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FN(r),r._firestoreClient}function FN(r){var e,t,n;const i=r._freezeSettings(),a=function(c,d,p,g){return new ex(c,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,NE(g.experimentalLongPollingOptions),g.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new CN(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ah(Nt.fromBase64String(e))}catch(t){throw new Te(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ah(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}const BN=new RegExp("[~\\*/\\[\\]]");function zN(r,e,t){if(e.search(BN)>=0)throw N_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new PE(...e.split("."))._internalPath}catch{throw N_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function N_(r,e,t,n,i){let a=`Function ${e}() called with invalid data`;a+=". ";let u="";return new Te(re.INVALID_ARGUMENT,a+r+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UN extends DE{data(){return super.data()}}function bE(r,e){return typeof e=="string"?zN(r,e):e instanceof PE?e._internalPath:e._delegate._internalPath}class $N{convertValue(e,t="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return au(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[Xl].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(u=>pt(u.doubleValue));return new jN(a)}convertGeoPoint(e){return new LN(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const t=Ss(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=et.fromString(e);Ne(Ow(n));const i=new lo(n.get(1),n.get(3)),a=new ve(n.popFirst(5));return i.isEqual(t)||xt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VE extends DE{constructor(e,t,n,i,a,u){super(e,t,n,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new WN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class WN extends VE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){r=I_(r,Es);const e=I_(r.firestore,kE);return RN(ON(e),r._key).then(t=>HN(e,r,t))}class KN extends $N{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ah(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Es(this.firestore,null,t)}}function HN(r,e,t){const n=t.docs.get(e._key),i=new KN(r);return new VE(r,i,e._key,n,new qN(t.hasPendingWrites,t.fromCache),e.converter)}class QN{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=JN(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function XN(r){return new QN(r)}class YN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new AE(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class ZN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new IN(t,e==null?void 0:e.cacheSizeBytes)}}}function JN(r){return new YN(void 0)}function eR(){return new ZN}(function(e,t=!0){(function(i){Ma=i})(T0),zl(new ya("firestore",(n,{instanceIdentifier:i,options:a})=>{const u=n.getProvider("app").getImmediate(),c=new kE(new mC(n.getProvider("auth-internal")),new vC(u,n.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Te(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(p.options.projectId,g)}(u,i),u);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),li(hv,dv,e),li(hv,dv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebasestorage.googleapis.com",tR="storageBucket",nR=2*60*1e3,rR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends go{constructor(e,t,n=0){super(Jf(e),`Firebase Storage: ${t} (${Jf(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,es.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zr||(Zr={}));function Jf(r){return"storage/"+r}function sR(){const r="An unknown error occurred, please check the error payload for server response.";return new es(Zr.UNKNOWN,r)}function iR(){return new es(Zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oR(){return new es(Zr.CANCELED,"User canceled the upload/download.")}function aR(r){return new es(Zr.INVALID_URL,"Invalid URL '"+r+"'.")}function lR(r){return new es(Zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function R_(r){return new es(Zr.INVALID_ARGUMENT,r)}function OE(){return new es(Zr.APP_DELETED,"The Firebase app was deleted.")}function uR(r){return new es(Zr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=kr.makeFromUrl(e,t)}catch{return new kr(e,"")}if(n.path==="")return n;throw lR(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",c=new RegExp("^gs://"+i+u,"i"),d={bucket:1,path:3};function p(Z){Z.path_=decodeURIComponent(Z.path)}const g="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${g}/b/${i}/o${T}`,"i"),x={bucket:1,path:3},k=t===ME?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",B=new RegExp(`^https?://${k}/${i}/${V}`,"i"),$=[{regex:c,indices:d,postModify:a},{regex:C,indices:x,postModify:p},{regex:B,indices:{bucket:1,path:2},postModify:p}];for(let Z=0;Z<$.length;Z++){const L=$[Z],U=L.regex.exec(e);if(U){const R=U[L.indices.bucket];let I=U[L.indices.path];I||(I=""),n=new kr(R,I),L.postModify(n);break}}if(n==null)throw aR(e);return n}}class cR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r,e,t){let n=1,i=null,a=null,u=!1,c=0;function d(){return c===2}let p=!1;function g(...V){p||(p=!0,e.apply(null,V))}function _(V){i=setTimeout(()=>{i=null,r(C,d())},V)}function T(){a&&clearTimeout(a)}function C(V,...B){if(p){T();return}if(V){T(),g.call(null,V,...B);return}if(d()||u){T(),g.call(null,V,...B);return}n<64&&(n*=2);let $;c===1?(c=2,$=0):$=(n+Math.random())*1e3,_($)}let x=!1;function k(V){x||(x=!0,T(),!p&&(i!==null?(V||(c=2),clearTimeout(i),_(0)):V||(c=1)))}return _(0),a=setTimeout(()=>{u=!0,k(!0)},t),k}function dR(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){return r!==void 0}function k_(r,e,t,n){if(n<e)throw R_(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw R_(`Invalid value for '${r}'. Expected ${t} or less.`)}function pR(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var Nh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Nh||(Nh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,n,i,a,u,c,d,p,g,_,T=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=_,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,x)=>{this.resolve_=C,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new qc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const c=a.getErrorCode()===Nh.NO_ERROR,d=a.getStatus();if(!c||mR(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Nh.ABORT;n(!1,new qc(!1,null,g));return}const p=this.successCodes_.indexOf(d)!==-1;n(!0,new qc(p,a))})},t=(n,i)=>{const a=this.resolve_,u=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());fR(d)?a(d):a()}catch(d){u(d)}else if(c!==null){const d=sR();d.serverResponse=c.getErrorText(),this.errorCallback_?u(this.errorCallback_(c,d)):u(d)}else if(i.canceled){const d=this.appDelete_?OE():oR();u(d)}else{const d=iR();u(d)}};this.canceled_?t(!1,new qc(!1,null,!0)):this.backoffId_=hR(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function yR(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function vR(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _R(r,e){e&&(r["X-Firebase-GMPID"]=e)}function wR(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function ER(r,e,t,n,i,a,u=!0){const c=pR(r.urlParams),d=r.url+c,p=Object.assign({},r.headers);return _R(p,e),yR(p,t),vR(p,a),wR(p,n),new gR(d,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function IR(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this._service=e,t instanceof kr?this._location=t:this._location=kr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rh(e,t)}get root(){const e=new kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IR(this._location.path)}get storage(){return this._service}get parent(){const e=TR(this._location.path);if(e===null)return null;const t=new kr(this._location.bucket,e);return new Rh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw uR(e)}}function P_(r,e){const t=e==null?void 0:e[tR];return t==null?null:kr.makeFromBucketSpec(t,r)}function SR(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:X1(i,r.app.options.projectId))}class CR{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ME,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nR,this._maxUploadRetryTime=rR,this._requests=new Set,i!=null?this._bucket=kr.makeFromBucketSpec(i,this._host):this._bucket=P_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kr.makeFromBucketSpec(this._url,e):this._bucket=P_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(E0(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new cR(OE());{const u=ER(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const D_="@firebase/storage",b_="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="storage";function xR(r=eC(),e){r=g0(r);const n=w0(r,FE).getImmediate({identifier:e}),i=H1("storage");return i&&AR(n,...i),n}function AR(r,e,t,n={}){SR(r,e,t,n)}function NR(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new CR(t,n,i,e,T0)}function RR(){zl(new ya(FE,NR,"PUBLIC").setMultipleInstances(!0)),li(D_,b_,""),li(D_,b_,"esm2017")}RR();const kR={apiKey:"AIzaSyAlv8DyWdhTjJjZYPqkghZUyEupG5g8SFk",authDomain:"groove-slider.firebaseapp.com",projectId:"groove-slider",storageBucket:"groove-slider.appspot.com",messagingSenderId:"87433841566",appId:"1:87433841566:web:da11fb420a121cc700248f",measurementId:"G-X0QJM954YF"},LE=I0(kR),ep=MN(LE,{localCache:XN({tabManager:eR()})});xR(LE);function PR(r,e){return new Promise((t,n)=>{try{const i=DR();i.onmessage=a=>{a.data.type==="complete"?(t(a.data.file),i.terminate()):a.data.type==="error"&&(n(new Error(a.data.error)),i.terminate())},i.onerror=a=>{n(a),i.terminate()},i.postMessage({data:r,config:e})}catch(i){n(i)}})}function DR(){const r=`
    self.onmessage = async (event) => {
      const { data, config } = event.data;
      
      try {
        // Basic export processing
        const exportedFile = await processExport(data, config);
        
        self.postMessage({ 
          type: 'complete', 
          file: exportedFile 
        });
      } catch (error) {
        self.postMessage({ 
          type: 'error', 
          error: error.message 
        });
      }
    };
    
    async function processExport(data, config) {
      console.log('Processing export', data, config);
      return data; // Temporary return
    }
  `,e=new Blob([r],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}const bR=({value:r,onChange:e})=>{var u;const[t,n]=ae.useState(!1),i=[{value:"720x1280",label:"720p"},{value:"1080x1920",label:"1080p"},{value:"1440x2560",label:"2K"}],a=c=>{e(c),n(!1)};return E.jsxs("div",{className:"custom-resolution-dropdown",children:[E.jsxs("div",{className:"dropdown-header",onClick:()=>n(!t),children:[((u=i.find(c=>c.value===r))==null?void 0:u.label)||r,t?E.jsx(XI,{size:16}):E.jsx(GI,{size:16})]}),t&&E.jsx("div",{className:"dropdown-list",children:i.map(c=>E.jsx("div",{className:"dropdown-item",onClick:()=>a(c.value),children:c.label},c.value))})]})},VR=({isOpen:r,progress:e,message:t,onClose:n,onExport:i,isExporting:a,storyData:u})=>{const[c,d]=ae.useState("1080x1920"),[p,g]=ae.useState(!1),[_,T]=ae.useState(30),[C,x]=ae.useState(null),k=async()=>{const V={resolution:c,isExportLoopEnabled:p,exportLoopDuration:_};try{x(null);const Q=await PR({storyData:u,resolution:c,isExportLoopEnabled:p,exportLoopDuration:_},V);i(Q)}catch(B){console.error("Export failed",B),x(B.message||"Export failed. Please try again.")}};return r?E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content export-modal",children:[E.jsx("button",{className:"modal-close",onClick:n,children:E.jsx(oo,{size:20})}),a?E.jsxs("div",{className:"loading-container",children:[E.jsx("h3",{children:"Exporting Video"}),E.jsx("p",{children:t}),E.jsxs("div",{className:"progress-container",children:[E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),E.jsxs("span",{className:"progress-text",children:[Math.round(e),"%"]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"modal-title",children:"Export Settings"}),E.jsxs("div",{className:"resolution-selector",children:[E.jsx("label",{children:"Resolution:"}),E.jsx(bR,{value:c,onChange:d})]}),E.jsxs("div",{className:"export-loop-settings",children:[E.jsx("div",{className:"loop-toggle",children:E.jsxs("label",{children:[E.jsx("span",{children:"Export as Loop"}),E.jsx("input",{type:"checkbox",checked:p,onChange:()=>g(!p)})]})}),p&&E.jsxs("div",{className:"input-container",children:[E.jsx("label",{children:"Loop Duration (seconds):"}),E.jsx("input",{type:"number",min:"5",max:"300",value:_,onChange:V=>T(Number(V.target.value)),className:"loop-duration-input"})]})]}),C&&E.jsx("div",{className:"export-error-message",children:C}),E.jsxs("div",{className:"export-actions",children:[E.jsxs("button",{className:"action-button share",onClick:()=>{},children:[E.jsx(N1,{className:"button-icon"}),"Share"]}),E.jsxs("button",{className:"action-button download",onClick:k,children:[E.jsx(o0,{className:"button-icon"}),"Export"]})]})]})]})}):null},MR=({isOpen:r,onClose:e,onSave:t})=>{const[n,i]=ae.useState(""),[a,u]=ae.useState(!1),[c,d]=ae.useState(null);if(!r)return null;const p=async g=>{if(g.preventDefault(),!n.trim()){d("Please enter a session name");return}try{u(!0),d(null),await t(n),i(""),e()}catch(_){console.error("Error saving session:",_),d("Failed to save session: "+_.message)}finally{u(!1)}};return E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content save-session-modal",children:[E.jsx("button",{className:"modal-close",onClick:e,children:E.jsx(oo,{size:20})}),E.jsx("h3",{className:"modal-title",children:"Save Session"}),E.jsxs("form",{onSubmit:p,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"session-name",children:"Session Name:"}),E.jsx("input",{type:"text",id:"session-name",value:n,onChange:g=>i(g.target.value),placeholder:"Enter a name for your session",autoFocus:!0,maxLength:50,className:"session-name-input"})]}),c&&E.jsx("div",{className:"save-error",children:c}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{type:"button",className:"cancel-button",onClick:e,disabled:a,children:"Cancel"}),E.jsx("button",{type:"submit",className:"save-button",disabled:a,children:a?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"spinner small"}),"Saving..."]}):E.jsxs(E.Fragment,{children:[E.jsx(u0,{size:16}),"Save Session"]})})]})]})]})})},V_={name:"GrooveGalleryDB",version:1},ed=()=>new Promise((r,e)=>{const t=indexedDB.open(V_.name,V_.version);t.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains("sessions")){const a=i.createObjectStore("sessions",{keyPath:"id",autoIncrement:!0});a.createIndex("name","name",{unique:!1}),a.createIndex("createdAt","createdAt",{unique:!1})}i.objectStoreNames.contains("images")||i.createObjectStore("images",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1}),i.objectStoreNames.contains("music")||i.createObjectStore("music",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1})},t.onsuccess=n=>{const i=n.target.result;r(i)},t.onerror=n=>{console.error("IndexedDB error:",n.target.error),e(n.target.error)}}),OR=async r=>{try{const e=[];for(const d of r.stories)try{const g=await(await fetch(d.url)).blob();e.push({type:d.type,blob:g})}catch(p){console.error("Error processing image:",p)}let t=null;if(r.musicUrl)try{t=await(await fetch(r.musicUrl)).blob()}catch(d){console.error("Error processing music:",d)}const i=(await ed()).transaction(["sessions","images","music"],"readwrite"),a=i.objectStore("sessions"),u={name:r.name,createdAt:new Date,bpm:r.bpm,musicStartPoint:r.musicStartPoint,imageFitMode:r.imageFitMode,duration:r.duration,isLoopingEnabled:r.isLoopingEnabled,currentIndex:r.currentIndex},c=a.add(u);return new Promise((d,p)=>{c.onsuccess=async g=>{const _=g.target.result,T=i.objectStore("images");for(const C of e)T.add({sessionId:_,type:C.type,blob:C.blob});t&&i.objectStore("music").add({sessionId:_,blob:t}),i.oncomplete=()=>{console.log(`Session saved with ID: ${_}`),d(_)},i.onerror=C=>{console.error("Transaction error:",C.target.error),p(C.target.error)}},c.onerror=g=>{console.error("Error adding session:",g.target.error),p(g.target.error)}})}catch(e){throw console.error("saveSession error:",e),e}},FR=async r=>{try{const e=await ed(),t=await new Promise((c,d)=>{const _=e.transaction("sessions","readonly").objectStore("sessions").get(r);_.onsuccess=T=>{c(T.target.result)},_.onerror=T=>{d(T.target.error)}});if(!t)throw new Error(`Session with ID ${r} not found`);const i=(await new Promise((c,d)=>{const T=e.transaction("images","readonly").objectStore("images").index("sessionId").getAll(r);T.onsuccess=C=>{c(C.target.result)},T.onerror=C=>{d(C.target.error)}})).map(c=>({type:c.type,url:URL.createObjectURL(c.blob)})),a=await new Promise((c,d)=>{const T=e.transaction("music","readonly").objectStore("music").index("sessionId").get(r);T.onsuccess=C=>{c(C.target.result)},T.onerror=C=>{d(C.target.error)}});let u=null;return a&&a.blob&&(u=URL.createObjectURL(a.blob)),{...t,stories:i,musicUrl:u}}catch(e){throw console.error("loadSession error:",e),e}},LR=async()=>{try{const r=await ed();return new Promise((e,t)=>{const a=r.transaction("sessions","readonly").objectStore("sessions").getAll();a.onsuccess=u=>{e(u.target.result)},a.onerror=u=>{t(u.target.error)}})}catch(r){throw console.error("getAllSessions error:",r),r}},jR=async r=>{try{const t=(await ed()).transaction(["sessions","images","music"],"readwrite");t.objectStore("sessions").delete(r);const u=t.objectStore("images").index("sessionId").openCursor(IDBKeyRange.only(r));u.onsuccess=g=>{const _=g.target.result;_&&(_.delete(),_.continue())};const p=t.objectStore("music").index("sessionId").openCursor(IDBKeyRange.only(r));return p.onsuccess=g=>{const _=g.target.result;_&&(_.delete(),_.continue())},new Promise((g,_)=>{t.oncomplete=()=>{console.log(`Session ${r} deleted successfully`),g()},t.onerror=T=>{console.error("Error deleting session:",T.target.error),_(T.target.error)}})}catch(e){throw console.error("deleteSession error:",e),e}},BR=({onLoadSession:r,visible:e})=>{const[t,n]=ae.useState([]),[i,a]=ae.useState(!0),[u,c]=ae.useState(null);ae.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{a(!0);const _=await LR();_.sort((T,C)=>new Date(C.createdAt)-new Date(T.createdAt)),n(_),c(null)}catch(_){console.error("Error loading sessions:",_),c("Failed to load saved sessions")}finally{a(!1)}},p=async(_,T)=>{if(_.stopPropagation(),window.confirm("Are you sure you want to delete this session?"))try{await jR(T),n(t.filter(C=>C.id!==T))}catch(C){console.error("Error deleting session:",C),alert("Failed to delete session")}},g=_=>new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?E.jsxs("div",{className:"sessions-list",children:[E.jsx("h3",{className:"sessions-title",children:"Saved Sessions"}),i&&E.jsx("div",{className:"sessions-loading",children:"Loading saved sessions..."}),u&&E.jsx("div",{className:"sessions-error",children:u}),!i&&t.length===0&&E.jsxs("div",{className:"sessions-empty",children:[E.jsx("p",{children:"No saved sessions yet"}),E.jsx("p",{className:"sessions-hint",children:"Create a slideshow and click Save to add one"})]}),!i&&t.length>0&&E.jsx("ul",{className:"sessions-items",children:t.map(_=>E.jsxs("li",{className:"session-item",onClick:()=>r(_.id),children:[E.jsxs("div",{className:"session-info",children:[E.jsx("div",{className:"session-name",children:_.name}),E.jsxs("div",{className:"session-date",children:[E.jsx(i0,{size:12}),E.jsx("span",{children:g(_.createdAt)})]}),E.jsxs("div",{className:"session-details",children:[E.jsxs("span",{children:[_.bpm," BPM"]}),E.jsxs("span",{children:[_.duration.toFixed(1),"s/slide"]})]})]}),E.jsxs("div",{className:"session-actions",children:[E.jsx("button",{className:"session-delete-btn",onClick:T=>p(T,_.id),title:"Delete session",children:E.jsx(V1,{size:16})}),E.jsx(vs,{size:16,className:"session-arrow"})]})]},_.id))})]}):null},zR=({audioUrl:r,onStartPointChange:e,audioRef:t,musicStartPoint:n=0})=>{const i=ae.useRef(null),a=ae.useRef(null),[u,c]=ae.useState(null),[d,p]=ae.useState(!0),[g,_]=ae.useState(0),[T,C]=ae.useState(800),[x,k]=ae.useState(0),[V,B]=ae.useState(1),[Q,$]=ae.useState(0);ae.useEffect(()=>{if(!r)return;p(!0);const K=new(window.AudioContext||window.webkitAudioContext);fetch(r).then(b=>b.arrayBuffer()).then(b=>K.decodeAudioData(b)).then(b=>{c(b),_(b.duration),p(!1)}).catch(b=>{console.error("Error decoding audio data",b),p(!1)})},[r]),ae.useEffect(()=>{if(i.current){const K=i.current;C(K.width)}},[i.current]),ae.useEffect(()=>{const K=t==null?void 0:t.current;if(!K)return;const b=()=>{k(K.currentTime)};return K.addEventListener("timeupdate",b),()=>{K.removeEventListener("timeupdate",b)}},[t]),ae.useEffect(()=>{if(!(!u||g===0)&&V>1){const K=g/V,b=Math.max(0,Math.min(g-K,n-K/2));$(b)}},[n,V,u,g]),ae.useEffect(()=>{if(!u||!i.current)return;const K=i.current,b=K.getContext("2d"),q=K.width,ne=K.height;b.clearRect(0,0,q,ne),b.fillStyle="#222",b.fillRect(0,0,q,ne);const me=u.getChannelData(0),he=g/V,Ie=Math.max(0,Math.min(g-he,Q)),Re=Ie+he,de=me.length,Be=Math.floor(Ie/g*de),bt=Math.floor(Re/g*de)-Be,Gt=1,vn=0,je=Math.floor(q/(Gt+vn)),Hn=Math.floor(bt/je);b.fillStyle="#FFFFFF";for(let ut=0;ut<je;ut++){const _n=ut*(Gt+vn),Dn=Be+Math.floor(ut/je*bt);let cn=0;for(let nt=0;nt<Hn;nt++){const ct=Dn+nt;if(ct<me.length){const wn=Math.abs(me[ct]);wn>cn&&(cn=wn)}}const ur=Math.min(2,cn*.9)*(ne/2),hn=_n,Vr=ne/2-ur,Mr=ur*2;b.fillRect(hn,Vr,Gt,Mr)}b.fillStyle="#777",b.font="10px Arial";let un=1;V>=8?un=.1:V>=4?un=.25:V>=2&&(un=.5);for(let ut=Math.ceil(Ie/un)*un;ut<=Re;ut+=un){const _n=(ut-Ie)/he*q;b.fillStyle="rgba(100, 100, 100, 0.5)",b.fillRect(_n,0,1,ne),(un>=.5||Math.round(ut*10)%10===0)&&(b.fillStyle="#AAA",b.textAlign="center",b.fillText(Z(ut,!1),_n,ne-5))}if(x>=Ie&&x<=Re){const ut=(x-Ie)/he*q;b.fillStyle="rgba(255, 0, 0, 0.8)",b.fillRect(ut-1,0,2,ne)}if(n>=Ie&&n<=Re){const ut=(n-Ie)/he*q;b.fillStyle="rgba(255, 215, 0, 0.8)",b.fillRect(ut-1,0,2,ne),b.beginPath(),b.moveTo(ut,0),b.lineTo(ut-6,-6),b.lineTo(ut+6,-6),b.closePath(),b.fill()}const br=3;b.fillStyle="rgba(100, 100, 255, 0.5)",b.fillRect(0,ne-br,q*(he/g),br)},[u,x,V,Q,T,g,n]);const Z=(K,b=!0)=>{const q=Math.floor(K/60),ne=Math.floor(K%60);if(b){const me=Math.floor(K%1*1e3);return`${q.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}.${me.toString().padStart(3,"0")}`}else return`${q.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`},L=K=>{if(!u||!i.current)return;const b=i.current,q=b.getBoundingClientRect(),ne=K.clientX-q.left,me=g/V,Ie=Math.max(0,Math.min(g-me,Q))+ne/b.width*me,Re=Math.round(Ie*1e3)/1e3;t!=null&&t.current&&(t.current.currentTime=Re),k(Re)},U=()=>{B(K=>{const b=Math.min(32,K*2);if(u){const q=g/b,ne=Math.abs(x-n)>q?x:n,me=Math.max(0,Math.min(g-q,ne-q/2));$(me)}return b})},R=()=>{B(K=>{const b=Math.max(1,K/2);if(b===1)$(0);else if(u){const q=g/b,ne=Math.max(0,Math.min(g-q,n-q/2));$(ne)}return b})},I=()=>{if(!u)return;const K=g/V,b=Math.max(0,Math.min(g-K,n-K/2));$(b)},N=K=>{if(!u)return;K.preventDefault();const b=g/V,q=Math.max(0,g-b),ne=.1*b;K.deltaY>0?$(me=>Math.min(q,me+ne)):$(me=>Math.max(0,me-ne))},[D,M]=ae.useState(!1),[O,P]=ae.useState(0),ce=K=>{u&&(K.preventDefault(),M(!0),P(K.clientX),K.currentTarget.style.cursor="grabbing")},ye=K=>{if(!D||!u)return;const b=K.clientX-O,q=g/V,ne=T/q,me=b/ne,he=Math.max(0,g-q);$(Ie=>Math.max(0,Math.min(he,Ie-me))),P(K.clientX)},ge=K=>{M(!1),K.currentTarget.style.cursor="grab"},le=()=>{if(!(t!=null&&t.current))return;const K=Math.round(x*1e3)/1e3;if(e(K),V>1){const b=g/V,q=Q,ne=q+b;if(q>x||ne<x){const me=Math.max(0,Math.min(g-b,x-b/2));$(me)}}},X=K=>{if(!(t!=null&&t.current))return;const b=Math.max(0,Math.min(g,x+K/1e3)),q=Math.round(b*1e3)/1e3;if(t.current.currentTime=q,k(q),V>1){const ne=g/V,me=Q,he=me+ne;if(b<me||b>he){const Ie=Math.max(0,Math.min(g-ne,b-ne/2));$(Ie)}}},ee=()=>{const K=prompt("Enter time (MM:SS.mmm):",Z(x));if(K)try{const[b,q]=K.split(":");let ne=0,me=0;if(q.includes(".")){const[Re,de]=q.split(".");ne=parseInt(Re,10),me=parseInt(de,10)}else ne=parseInt(q,10);const Ie=parseInt(b,10)*60+ne+me/1e3;if(Ie>=0&&Ie<=g){if(t!=null&&t.current&&(t.current.currentTime=Ie),k(Ie),V>1){const Re=g/V,de=Math.max(0,Math.min(g-Re,Ie-Re/2));$(de)}}else alert(`Please enter a time between 0:00.000 and ${Z(g)}`)}catch{alert("Invalid time format. Please use MM:SS.mmm")}};return E.jsx("div",{className:"waveform-container",ref:a,children:d?E.jsx("div",{className:"waveform-loading",children:"Loading waveform..."}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"waveform-canvas-container",style:{position:"relative",cursor:D?"grabbing":"grab"},onWheel:N,onMouseDown:ce,onMouseMove:ye,onMouseUp:ge,onMouseLeave:ge,onClick:D?null:L,children:[E.jsx("canvas",{ref:i,width:800,height:80,className:"waveform-canvas"}),E.jsxs("div",{className:"zoom-controls",style:{position:"absolute",top:"5px",right:"5px",display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:U,style:{background:"rgba(0, 0, 0, 0.5)",color:"white",border:"none",borderRadius:"3px",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",cursor:"pointer"},children:"+"}),E.jsx("button",{onClick:R,style:{background:"rgba(0, 0, 0, 0.5)",color:"white",border:"none",borderRadius:"3px",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",cursor:"pointer"},children:"-"})]}),E.jsx("button",{onClick:I,style:{position:"absolute",top:"5px",left:"30px",background:"rgba(255, 215, 0, 0.5)",color:"white",border:"none",borderRadius:"3px",padding:"2px 6px",fontSize:"10px",cursor:"pointer"},title:"Focus view on start point",children:"Find Start"}),E.jsxs("div",{style:{position:"absolute",top:"5px",left:"5px",background:"rgba(0, 0, 0, 0.5)",color:"white",borderRadius:"3px",padding:"2px 5px",fontSize:"10px"},children:[V,"x"]})]}),E.jsxs("div",{className:"waveform-timestamps",style:{display:"flex",justifyContent:"space-between",padding:"5px 0",fontSize:"12px",fontFamily:"monospace"},children:[E.jsx("span",{className:"current-time",style:{color:"white",background:"rgba(255, 0, 0, 0.2)",borderRadius:"3px",padding:"2px 5px",cursor:"pointer"},onClick:ee,title:"Click to enter exact time",children:Z(x)}),E.jsxs("span",{className:"start-point",style:{color:"white",background:"rgba(255, 215, 0, 0.2)",borderRadius:"3px",padding:"2px 5px",cursor:"pointer"},onClick:I,title:"Click to focus on start point",children:["Start: ",Z(n)]}),E.jsxs("span",{className:"duration",style:{color:"white",background:"rgba(100, 100, 100, 0.2)",borderRadius:"3px",padding:"2px 5px"},children:["Total: ",Z(g)]})]}),E.jsxs("div",{className:"waveform-controls",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"5px 0"},children:[E.jsx("button",{className:"set-start-point-button",onClick:le,style:{background:"#FFD700",border:"none",borderRadius:"4px",padding:"8px",color:"#333",fontWeight:"bold",cursor:"pointer"},children:"Set Start Point"}),E.jsxs("div",{className:"fine-tune-controls",style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>X(-100),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"-100ms"}),E.jsx("button",{onClick:()=>X(-10),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"-10ms"}),E.jsx("button",{onClick:()=>X(-1),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"-1ms"}),E.jsx("button",{onClick:()=>X(1),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"+1ms"}),E.jsx("button",{onClick:()=>X(10),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"+10ms"}),E.jsx("button",{onClick:()=>X(100),style:{background:"#444",border:"none",borderRadius:"3px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer"},children:"+100ms"})]})]})]})})},UR=r=>(e,t)=>(r.set(e,t),t),M_=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,jE=536870912,O_=jE*2,$R=(r,e)=>t=>{const n=e.get(t);let i=n===void 0?t.size:n<O_?n+1:0;if(!t.has(i))return r(t,i);if(t.size<jE){for(;t.has(i);)i=Math.floor(Math.random()*O_);return r(t,i)}if(t.size>M_)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*M_);return r(t,i)},BE=new WeakMap,qR=UR(BE),WR=$R(qR,BE),GR=r=>typeof r.start=="function",F_=new WeakMap,KR=r=>({...r,connect:({call:e})=>async()=>{const{port1:t,port2:n}=new MessageChannel,i=await e("connect",{port:t},[t]);return F_.set(n,i),n},disconnect:({call:e})=>async t=>{const n=F_.get(t);if(n===void 0)throw new Error("The given port is not connected.");await e("disconnect",{portId:n})},isSupported:({call:e})=>()=>e("isSupported")}),tp=new WeakMap,HR=r=>{if(tp.has(r))return tp.get(r);const e=new Map;return tp.set(r,e),e},QR=r=>{const e=KR(r);return t=>{const n=HR(t);t.addEventListener("message",({data:c})=>{const{id:d}=c;if(d!==null&&n.has(d)){const{reject:p,resolve:g}=n.get(d);n.delete(d),c.error===void 0?g(c.result):p(new Error(c.error.message))}}),GR(t)&&t.start();const i=(c,d=null,p=[])=>new Promise((g,_)=>{const T=WR(n);n.set(T,{reject:_,resolve:g}),d===null?t.postMessage({id:T,method:c},p):t.postMessage({id:T,method:c,params:d},p)}),a=(c,d,p=[])=>{t.postMessage({id:null,method:c,params:d},p)};let u={};for(const[c,d]of Object.entries(e))u={...u,[c]:d({call:i,notify:a})};return{...u}}},L_=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),j_=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),bp=(r,e)=>({startTime:e,type:"setValue",value:r}),zE=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),UE=(r,e,{startTime:t,target:n,timeConstant:i})=>n+(e-n)*Math.exp((t-r)/i),ma=r=>r.type==="exponentialRampToValue",kh=r=>r.type==="linearRampToValue",ri=r=>ma(r)||kh(r),Sm=r=>r.type==="setValue",ys=r=>r.type==="setValueCurve",Ph=(r,e,t,n)=>{const i=r[e];return i===void 0?n:ri(i)||Sm(i)?i.value:ys(i)?i.values[i.values.length-1]:UE(t,Ph(r,e-1,i.startTime,n),i)},B_=(r,e,t,n,i)=>t===void 0?[n.insertTime,i]:ri(t)?[t.endTime,t.value]:Sm(t)?[t.startTime,t.value]:ys(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Ph(r,e-1,t.startTime,i)],Vp=r=>r.type==="cancelAndHold",Mp=r=>r.type==="cancelScheduledValues",ti=r=>Vp(r)||Mp(r)?r.cancelTime:ma(r)||kh(r)?r.endTime:r.startTime,z_=(r,e,t,{endTime:n,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((r-e)/(n-e)):0,U_=(r,e,t,{endTime:n,value:i})=>t+(r-e)/(n-e)*(i-t),XR=(r,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?r[t]:(1-(e-t))*r[t]+(1-(n-e))*r[n]},YR=(r,{duration:e,startTime:t,values:n})=>{const i=(r-t)/e*(n.length-1);return XR(n,i)},Wc=r=>r.type==="setTarget";class ZR{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=ti(e);if(Vp(e)||Mp(e)){const n=this._automationEvents.findIndex(a=>Mp(e)&&ys(a)?a.startTime+a.duration>=t:ti(a)>=t),i=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Vp(e)){const a=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&ri(i)){if(a!==void 0&&Wc(a))throw new Error("The internal list is malformed.");const u=a===void 0?i.insertTime:ys(a)?a.startTime+a.duration:ti(a),c=a===void 0?this._defaultValue:ys(a)?a.values[a.values.length-1]:a.value,d=ma(i)?z_(t,u,c,i):U_(t,u,c,i),p=ma(i)?L_(d,t,this._currenTime):j_(d,t,this._currenTime);this._automationEvents.push(p)}if(a!==void 0&&Wc(a)&&this._automationEvents.push(bp(this.getValue(t),t)),a!==void 0&&ys(a)&&a.startTime+a.duration>t){const u=t-a.startTime,c=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(u*c)),p=u/(d-1)*c,g=a.values.slice(0,d);if(p<1)for(let _=1;_<d;_+=1){const T=p*_%1;g[_]=a.values[_-1]*(1-T)+a.values[_]*T}this._automationEvents[this._automationEvents.length-1]=zE(g,a.startTime,u)}}}else{const n=this._automationEvents.findIndex(u=>ti(u)>t),i=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(i!==void 0&&ys(i)&&ti(i)+i.duration>t)return!1;const a=ma(e)?L_(e.value,e.endTime,this._currenTime):kh(e)?j_(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(a);else{if(ys(e)&&t+e.duration>ti(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>ti(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),i=n[0];Wc(i)&&n.unshift(bp(Ph(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>ti(u)>e),n=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[i];if(a!==void 0&&Wc(a)&&(n===void 0||!ri(n)||n.insertTime>e))return UE(e,Ph(this._automationEvents,i-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Sm(a)&&(n===void 0||!ri(n)))return a.value;if(a!==void 0&&ys(a)&&(n===void 0||!ri(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?YR(e,a):a.values[a.values.length-1];if(a!==void 0&&ri(a)&&(n===void 0||!ri(n)))return a.value;if(n!==void 0&&ma(n)){const[u,c]=B_(this._automationEvents,i,a,n,this._defaultValue);return z_(e,u,c,n)}if(n!==void 0&&kh(n)){const[u,c]=B_(this._automationEvents,i,a,n,this._defaultValue);return U_(e,u,c,n)}return this._defaultValue}}const JR=r=>({cancelTime:r,type:"cancelAndHold"}),ek=r=>({cancelTime:r,type:"cancelScheduledValues"}),tk=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),nk=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),rk=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),sk=()=>new DOMException("","AbortError"),ik=r=>(e,t,[n,i,a],u)=>{r(e[i],[t,n,a],c=>c[0]===t&&c[1]===n,u)},ok=r=>(e,t,n)=>{const i=[];for(let a=0;a<n.numberOfInputs;a+=1)i.push(new Set);r.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},ak=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},ba=new WeakSet,$E=new WeakMap,qE=new WeakMap,WE=new WeakMap,GE=new WeakMap,KE=new WeakMap,HE=new WeakMap,Op=new WeakMap,$_=new WeakMap,QE={construct(){return QE}},lk=r=>{try{const e=new Proxy(r,QE);new e}catch{return!1}return!0},q_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,W_=(r,e)=>{const t=[];let n=r.replace(/^[\s]+/,""),i=n.match(q_);for(;i!==null;){const a=i[1].slice(1,-1),u=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(u),n=n.slice(i[0].length).replace(/^[\s]+/,""),i=n.match(q_)}return[t.join(";"),n]},G_=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},K_=r=>{if(!lk(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},uk=(r,e,t,n,i,a,u,c,d,p,g,_,T)=>{let C=0;return(x,k,V={credentials:"omit"})=>{const B=g.get(x);if(B!==void 0&&B.has(k))return Promise.resolve();const Q=p.get(x);if(Q!==void 0){const L=Q.get(k);if(L!==void 0)return L}const $=a(x),Z=$.audioWorklet===void 0?i(k).then(([L,U])=>{const[R,I]=W_(L,U),N=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${I}
})})(window,'_AWGS')`;return t(N)}).then(()=>{const L=T._AWGS.pop();if(L===void 0)throw new SyntaxError;n($.currentTime,$.sampleRate,()=>L(class{},void 0,(U,R)=>{if(U.trim()==="")throw e();const I=$_.get($);if(I!==void 0){if(I.has(U))throw e();K_(R),G_(R.parameterDescriptors),I.set(U,R)}else K_(R),G_(R.parameterDescriptors),$_.set($,new Map([[U,R]]))},$.sampleRate,void 0,void 0))}):Promise.all([i(k),Promise.resolve(r(_,_))]).then(([[L,U],R])=>{const I=C+1;C=I;const[N,D]=W_(L,U),ce=`${N};((AudioWorkletProcessor,registerProcessor)=>{${D}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${I}',class extends AudioWorkletProcessor{process(){return !1}})`,ye=new Blob([ce],{type:"application/javascript; charset=utf-8"}),ge=URL.createObjectURL(ye);return $.audioWorklet.addModule(ge,V).then(()=>{if(c($))return $;const le=u($);return le.audioWorklet.addModule(ge,V).then(()=>le)}).then(le=>{if(d===null)throw new SyntaxError;try{new d(le,`__sac${I}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ge))});return Q===void 0?p.set(x,new Map([[k,Z]])):Q.set(k,Z),Z.then(()=>{const L=g.get(x);L===void 0?g.set(x,new Set([k])):L.add(k)}).finally(()=>{const L=p.get(x);L!==void 0&&L.delete(k)}),Z}},vi=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},td=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return r.delete(n),n},XE=(r,e,t,n)=>{const i=vi(r,e),a=td(i,u=>u[0]===t&&u[1]===n);return i.size===0&&r.delete(e),a},mu=r=>vi(HE,r),Va=r=>{if(ba.has(r))throw new Error("The AudioNode is already stored.");ba.add(r),mu(r).forEach(e=>e(!0))},YE=r=>"port"in r,gu=r=>{if(!ba.has(r))throw new Error("The AudioNode is not stored.");ba.delete(r),mu(r).forEach(e=>e(!1))},Fp=(r,e)=>{!YE(r)&&e.every(t=>t.size===0)&&gu(r)},ck=(r,e,t,n,i,a,u,c,d,p,g,_,T)=>{const C=new WeakMap;return(x,k,V,B,Q)=>{const{activeInputs:$,passiveInputs:Z}=a(k),{outputs:L}=a(x),U=c(x),R=I=>{const N=d(k),D=d(x);if(I){const M=XE(Z,x,V,B);r($,x,M,!1),!Q&&!_(x)&&t(D,N,V,B),T(k)&&Va(k)}else{const M=n($,x,V,B);e(Z,B,M,!1),!Q&&!_(x)&&i(D,N,V,B);const O=u(k);if(O===0)g(k)&&Fp(k,$);else{const P=C.get(k);P!==void 0&&clearTimeout(P),C.set(k,setTimeout(()=>{g(k)&&Fp(k,$)},O*1e3))}}};return p(L,[k,V,B],I=>I[0]===k&&I[1]===V&&I[2]===B,!0)?(U.add(R),g(x)?r($,x,[V,B,R],!0):e(Z,B,[x,V,R],!0),!0):!1}},hk=r=>(e,t,[n,i,a],u)=>{const c=e.get(n);c===void 0?e.set(n,new Set([[i,t,a]])):r(c,[i,t,a],d=>d[0]===i&&d[1]===t,u)},dk=r=>(e,t)=>{const n=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(n),n.disconnect()};t.addEventListener("ended",i)},fk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},pk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...fk,...d},_=n(p,g),T=a(p)?e():null;super(c,!1,_,T),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},yn=(r,e)=>r.context===e,mk=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!yn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Dh=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},_o=()=>new DOMException("","IndexSizeError"),Cm=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(n){throw n.code===12?_o():n}})(r.getChannelData)},gk={numberOfChannels:1},yk=(r,e,t,n,i,a,u,c)=>{let d=null;return class ZE{constructor(g){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:T,sampleRate:C}={...gk,...g};d===null&&(d=new i(1,1,44100));const x=n!==null&&e(a,a)?new n({length:_,numberOfChannels:T,sampleRate:C}):d.createBuffer(T,_,C);if(x.numberOfChannels===0)throw t();return typeof x.copyFromChannel!="function"?(u(x),Cm(x)):e(Dh,()=>Dh(x))||c(x),r.add(x),x}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===ZE.prototype||r.has(g)}}},ir=-34028234663852886e22,Rn=34028234663852886e22,Ts=r=>ba.has(r),vk={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},_k=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),T={...vk,...g},C=i(_,T),x=u(_),k=x?e():null;super(p,!1,C,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=T.buffer!==null,this._nativeAudioBufferSourceNode=C,this._onended=null,this._playbackRate=t(this,x,C.playbackRate,Rn,ir)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?c(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===g?p:_}get playbackRate(){return this._playbackRate}start(p=0,g=0,_){if(this._nativeAudioBufferSourceNode.start(p,g,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[p,g]:[p,g,_]),this.context.state!=="closed"){Va(this);const T=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",T),Ts(this)&&gu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",T)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},wk=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let _=t(p);const T=yn(_,g);if(!T){const C={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=e(g,C),u!==null&&_.start(...u),c!==null&&_.stop(c)}return a.set(g,_),T?await r(g,p.playbackRate,_.playbackRate):await n(g,p.playbackRate,_.playbackRate),await i(p,g,_),_};return{set start(p){u=p},set stop(p){c=p},render(p,g){const _=a.get(g);return _!==void 0?Promise.resolve(_):d(p,g)}}},Ek=r=>"playbackRate"in r,Tk=r=>"frequency"in r&&"gain"in r,Ik=r=>"offset"in r,Sk=r=>!("frequency"in r)&&"gain"in r,Ck=r=>"detune"in r&&"frequency"in r&&!("gain"in r),xk=r=>"pan"in r,Wn=r=>vi($E,r),yu=r=>vi(WE,r),Lp=(r,e)=>{const{activeInputs:t}=Wn(r);t.forEach(i=>i.forEach(([a])=>{e.includes(r)||Lp(a,[...e,r])}));const n=Ek(r)?[r.playbackRate]:YE(r)?Array.from(r.parameters.values()):Tk(r)?[r.Q,r.detune,r.frequency,r.gain]:Ik(r)?[r.offset]:Sk(r)?[r.gain]:Ck(r)?[r.detune,r.frequency]:xk(r)?[r.pan]:[];for(const i of n){const a=yu(i);a!==void 0&&a.activeInputs.forEach(([u])=>Lp(u,e))}Ts(r)&&gu(r)},Ak=r=>{Lp(r.destination,[])},Nk=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),T=u(_),C=i(_,g,T),x=T?e(c):null;super(p,!1,C,x),this._isNodeOfNativeOfflineAudioContext=T,this._nativeAudioDestinationNode=C}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Rk=r=>{const e=new WeakMap,t=async(n,i)=>{const a=i.destination;return e.set(i,a),await r(n,i,a),a};return{render(n,i){const a=e.get(i);return a!==void 0?Promise.resolve(a):t(n,i)}}},kk=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=p.listener,_=()=>{const L=new Float32Array(1),U=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=u(p);let I=!1,N=[0,0,-1,0,1,0],D=[0,0,0];const M=()=>{if(I)return;I=!0;const ye=n(p,256,9,0);ye.onaudioprocess=({inputBuffer:ge})=>{const le=[a(ge,L,0),a(ge,L,1),a(ge,L,2),a(ge,L,3),a(ge,L,4),a(ge,L,5)];le.some((ee,K)=>ee!==N[K])&&(g.setOrientation(...le),N=le);const X=[a(ge,L,6),a(ge,L,7),a(ge,L,8)];X.some((ee,K)=>ee!==D[K])&&(g.setPosition(...X),D=X)},U.connect(ye)},O=ye=>ge=>{ge!==N[ye]&&(N[ye]=ge,g.setOrientation(...N))},P=ye=>ge=>{ge!==D[ye]&&(D[ye]=ge,g.setPosition(...D))},ce=(ye,ge,le)=>{const X=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ge});X.connect(U,0,ye),X.start(),Object.defineProperty(X.offset,"defaultValue",{get(){return ge}});const ee=r({context:d},R,X.offset,Rn,ir);return c(ee,"value",K=>()=>K.call(ee),K=>b=>{try{K.call(ee,b)}catch(q){if(q.code!==9)throw q}M(),R&&le(b)}),ee.cancelAndHoldAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.cancelAndHoldAtTime),ee.cancelScheduledValues=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.cancelScheduledValues),ee.exponentialRampToValueAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.exponentialRampToValueAtTime),ee.linearRampToValueAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.linearRampToValueAtTime),ee.setTargetAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.setTargetAtTime),ee.setValueAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.setValueAtTime),ee.setValueCurveAtTime=(K=>R?()=>{throw i()}:(...b)=>{const q=K.apply(ee,b);return M(),q})(ee.setValueCurveAtTime),ee};return{forwardX:ce(0,0,O(0)),forwardY:ce(1,0,O(1)),forwardZ:ce(2,-1,O(2)),positionX:ce(6,0,P(0)),positionY:ce(7,0,P(1)),positionZ:ce(8,0,P(2)),upX:ce(3,0,O(3)),upY:ce(4,1,O(4)),upZ:ce(5,0,O(5))}},{forwardX:T,forwardY:C,forwardZ:x,positionX:k,positionY:V,positionZ:B,upX:Q,upY:$,upZ:Z}=g.forwardX===void 0?_():g;return{get forwardX(){return T},get forwardY(){return C},get forwardZ(){return x},get positionX(){return k},get positionY(){return V},get positionZ(){return B},get upX(){return Q},get upY(){return $},get upZ(){return Z}}},bh=r=>"context"in r,vu=r=>bh(r[0]),wo=(r,e,t,n)=>{for(const i of r)if(t(i)){if(n)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},H_=(r,e,[t,n],i)=>{wo(r,[e,t,n],a=>a[0]===e&&a[1]===t,i)},Q_=(r,[e,t,n],i)=>{const a=r.get(e);a===void 0?r.set(e,new Set([[t,n]])):wo(a,[t,n],u=>u[0]===t,i)},ja=r=>"inputs"in r,Vh=(r,e,t,n)=>{if(ja(e)){const i=e.inputs[n];return r.connect(i,t,0),[i,t,0]}return r.connect(e,t,n),[e,t,n]},JE=(r,e,t)=>{for(const n of r)if(n[0]===e&&n[1]===t)return r.delete(n),n;return null},Pk=(r,e,t)=>td(r,n=>n[0]===e&&n[1]===t),eT=(r,e)=>{if(!mu(r).delete(e))throw new Error("Missing the expected event listener.")},tT=(r,e,t)=>{const n=vi(r,e),i=td(n,a=>a[0]===t);return n.size===0&&r.delete(e),i},Mh=(r,e,t,n)=>{ja(e)?r.disconnect(e.inputs[n],t,0):r.disconnect(e,t,n)},vt=r=>vi(qE,r),su=r=>vi(GE,r),mo=r=>Op.has(r),th=r=>!ba.has(r),X_=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=r.createScriptProcessor(256,1,1),i=r.createGain(),a=r.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const c=r.createBufferSource();c.buffer=a,c.loop=!0,c.connect(n).connect(r.destination),c.connect(i),c.disconnect(i),n.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?t(!0):t(!1),c.stop(),n.onaudioprocess=null,c.disconnect(n),n.disconnect(r.destination)},c.start()}}),np=(r,e)=>{const t=new Map;for(const n of r)for(const i of n){const a=t.get(i);t.set(i,a===void 0?1:a+1)}t.forEach((n,i)=>e(i,n))},Y_=r=>"context"in r,Dk=r=>{const e=new Map;r.connect=(t=>(n,i=0,a=0)=>{const u=Y_(n)?t(n,i,a):t(n,i),c=e.get(n);return c===void 0?e.set(n,[{input:a,output:i}]):c.every(d=>d.input!==a||d.output!==i)&&c.push({input:a,output:i}),u})(r.connect.bind(r)),r.disconnect=(t=>(n,i,a)=>{if(t.apply(r),n===void 0)e.clear();else if(typeof n=="number")for(const[u,c]of e){const d=c.filter(p=>p.output!==n);d.length===0?e.delete(u):e.set(u,d)}else if(e.has(n))if(i===void 0)e.delete(n);else{const u=e.get(n);if(u!==void 0){const c=u.filter(d=>d.output!==i&&(d.input!==a||a===void 0));c.length===0?e.delete(n):e.set(n,c)}}for(const[u,c]of e)c.forEach(d=>{Y_(u)?r.connect(u,d.output,d.input):r.connect(u,d.output)})})(r.disconnect)},bk=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=yu(e),{outputs:u}=Wn(r),c=mu(r),d=p=>{const g=vt(r),_=su(e);if(p){const T=tT(a,r,t);H_(i,r,T,!1),!n&&!mo(r)&&g.connect(_,t)}else{const T=Pk(i,r,t);Q_(a,T,!1),!n&&!mo(r)&&g.disconnect(_,t)}};return wo(u,[e,t],p=>p[0]===e&&p[1]===t,!0)?(c.add(d),Ts(r)?H_(i,r,[t,d],!0):Q_(a,[r,t,d],!0),!0):!1},Vk=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=Wn(e),u=JE(i[n],r,t);return u===null?[XE(a,r,t,n)[2],!1]:[u[2],!0]},Mk=(r,e,t)=>{const{activeInputs:n,passiveInputs:i}=yu(e),a=JE(n,r,t);return a===null?[tT(i,r,t)[1],!1]:[a[2],!0]},xm=(r,e,t,n,i)=>{const[a,u]=Vk(r,t,n,i);if(a!==null&&(eT(r,a),u&&!e&&!mo(r)&&Mh(vt(r),vt(t),n,i)),Ts(t)){const{activeInputs:c}=Wn(t);Fp(t,c)}},Am=(r,e,t,n)=>{const[i,a]=Mk(r,t,n);i!==null&&(eT(r,i),a&&!e&&!mo(r)&&vt(r).disconnect(su(t),n))},Ok=(r,e)=>{const t=Wn(r),n=[];for(const i of t.outputs)vu(i)?xm(r,e,...i):Am(r,e,...i),n.push(i[0]);return t.outputs.clear(),n},Fk=(r,e,t)=>{const n=Wn(r),i=[];for(const a of n.outputs)a[1]===t&&(vu(a)?xm(r,e,...a):Am(r,e,...a),i.push(a[0]),n.outputs.delete(a));return i},Lk=(r,e,t,n,i)=>{const a=Wn(r);return Array.from(a.outputs).filter(u=>u[0]===t&&(n===void 0||u[1]===n)&&(i===void 0||u[2]===i)).map(u=>(vu(u)?xm(r,e,...u):Am(r,e,...u),a.outputs.delete(u),u[0]))},jk=(r,e,t,n,i,a,u,c,d,p,g,_,T,C,x,k)=>class extends p{constructor(B,Q,$,Z){super($),this._context=B,this._nativeAudioNode=$;const L=g(B);_(L)&&t(X_,()=>X_(L,k))!==!0&&Dk($),qE.set(this,$),HE.set(this,new Set),B.state!=="closed"&&Q&&Va(this),r(this,Z,$)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(B){this._nativeAudioNode.channelCount=B}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(B){this._nativeAudioNode.channelCountMode=B}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(B){this._nativeAudioNode.channelInterpretation=B}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(B,Q=0,$=0){if(Q<0||Q>=this._nativeAudioNode.numberOfOutputs)throw i();const Z=g(this._context),L=x(Z);if(T(B)||C(B))throw a();if(bh(B)){const I=vt(B);try{const D=Vh(this._nativeAudioNode,I,Q,$),M=th(this);(L||M)&&this._nativeAudioNode.disconnect(...D),this.context.state!=="closed"&&!M&&th(B)&&Va(B)}catch(D){throw D.code===12?a():D}if(e(this,B,Q,$,L)){const D=d([this],B);np(D,n(L))}return B}const U=su(B);if(U.name==="playbackRate"&&U.maxValue===1024)throw u();try{this._nativeAudioNode.connect(U,Q),(L||th(this))&&this._nativeAudioNode.disconnect(U,Q)}catch(I){throw I.code===12?a():I}if(bk(this,B,Q,L)){const I=d([this],B);np(I,n(L))}}disconnect(B,Q,$){let Z;const L=g(this._context),U=x(L);if(B===void 0)Z=Ok(this,U);else if(typeof B=="number"){if(B<0||B>=this.numberOfOutputs)throw i();Z=Fk(this,U,B)}else{if(Q!==void 0&&(Q<0||Q>=this.numberOfOutputs)||bh(B)&&$!==void 0&&($<0||$>=B.numberOfInputs))throw i();if(Z=Lk(this,U,B,Q,$),Z.length===0)throw a()}for(const R of Z){const I=d([this],R);np(I,c)}}},Bk=(r,e,t,n,i,a,u,c,d,p,g,_,T)=>(C,x,k,V=null,B=null)=>{const Q=k.value,$=new ZR(Q),Z=x?n($):null,L={get defaultValue(){return Q},get maxValue(){return V===null?k.maxValue:V},get minValue(){return B===null?k.minValue:B},get value(){return k.value},set value(U){k.value=U,L.setValueAtTime(U,C.context.currentTime)},cancelAndHoldAtTime(U){if(typeof k.cancelAndHoldAtTime=="function")Z===null&&$.flush(C.context.currentTime),$.add(i(U)),k.cancelAndHoldAtTime(U);else{const R=Array.from($).pop();Z===null&&$.flush(C.context.currentTime),$.add(i(U));const I=Array.from($).pop();k.cancelScheduledValues(U),R!==I&&I!==void 0&&(I.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(I.value,I.endTime):I.type==="linearRampToValue"?k.linearRampToValueAtTime(I.value,I.endTime):I.type==="setValue"?k.setValueAtTime(I.value,I.startTime):I.type==="setValueCurve"&&k.setValueCurveAtTime(I.values,I.startTime,I.duration))}return L},cancelScheduledValues(U){return Z===null&&$.flush(C.context.currentTime),$.add(a(U)),k.cancelScheduledValues(U),L},exponentialRampToValueAtTime(U,R){if(U===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const I=C.context.currentTime;return Z===null&&$.flush(I),Array.from($).length===0&&($.add(p(Q,I)),k.setValueAtTime(Q,I)),$.add(u(U,R)),k.exponentialRampToValueAtTime(U,R),L},linearRampToValueAtTime(U,R){const I=C.context.currentTime;return Z===null&&$.flush(I),Array.from($).length===0&&($.add(p(Q,I)),k.setValueAtTime(Q,I)),$.add(c(U,R)),k.linearRampToValueAtTime(U,R),L},setTargetAtTime(U,R,I){return Z===null&&$.flush(C.context.currentTime),$.add(d(U,R,I)),k.setTargetAtTime(U,R,I),L},setValueAtTime(U,R){return Z===null&&$.flush(C.context.currentTime),$.add(p(U,R)),k.setValueAtTime(U,R),L},setValueCurveAtTime(U,R,I){const N=U instanceof Float32Array?U:new Float32Array(U);if(_!==null&&_.name==="webkitAudioContext"){const D=R+I,M=C.context.sampleRate,O=Math.ceil(R*M),P=Math.floor(D*M),ce=P-O,ye=new Float32Array(ce);for(let le=0;le<ce;le+=1){const X=(N.length-1)/I*((O+le)/M-R),ee=Math.floor(X),K=Math.ceil(X);ye[le]=ee===K?N[ee]:(1-(X-ee))*N[ee]+(1-(K-X))*N[K]}Z===null&&$.flush(C.context.currentTime),$.add(g(ye,R,I)),k.setValueCurveAtTime(ye,R,I);const ge=P/M;ge<D&&T(L,ye[ye.length-1],ge),T(L,N[N.length-1],D)}else Z===null&&$.flush(C.context.currentTime),$.add(g(N,R,I)),k.setValueCurveAtTime(N,R,I);return L}};return t.set(L,k),e.set(L,C),r(L,Z),L},zk=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:n,value:i}=t;e.exponentialRampToValueAtTime(i,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:i}=t;e.linearRampToValueAtTime(i,n)}else if(t.type==="setTarget"){const{startTime:n,target:i,timeConstant:a}=t;e.setTargetAtTime(i,n,a)}else if(t.type==="setValue"){const{startTime:n,value:i}=t;e.setValueAtTime(i,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:i,values:a}=t;e.setValueCurveAtTime(a,i,n)}else throw new Error("Can't apply an unknown automation.")}}),Uk=(r,e,t,n,i,a,u,c,d,p,g,_,T,C,x,k,V,B,Q,$)=>class extends x{constructor(L,U){super(L,U),this._nativeContext=L,this._audioWorklet=r===void 0?void 0:{addModule:(R,I)=>r(this,R,I)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(L,U,R){return new t({length:U,numberOfChannels:L,sampleRate:R})}createBufferSource(){return new n(this)}createChannelMerger(L=6){return new a(this,{numberOfInputs:L})}createChannelSplitter(L=6){return new u(this,{numberOfOutputs:L})}createConstantSource(){return new c(this)}createConvolver(){return new d(this)}createDelay(L=1){return new g(this,{maxDelayTime:L})}createDynamicsCompressor(){return new _(this)}createGain(){return new T(this)}createIIRFilter(L,U){return new C(this,{feedback:U,feedforward:L})}createOscillator(){return new k(this)}createPanner(){return new V(this)}createPeriodicWave(L,U,R={disableNormalization:!1}){return new B(this,{...R,imag:U,real:L})}createStereoPanner(){return new Q(this)}createWaveShaper(){return new $(this)}decodeAudioData(L,U,R){return p(this._nativeContext,L).then(I=>(typeof U=="function"&&U(I),I),I=>{throw typeof R=="function"&&R(I),I})}},$k={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},qk=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),T={...$k,...g},C=i(_,T),x=u(_),k=x?t():null;super(p,!1,C,k),this._Q=e(this,x,C.Q,Rn,ir),this._detune=e(this,x,C.detune,1200*Math.log2(Rn),-1200*Math.log2(Rn)),this._frequency=e(this,x,C.frequency,p.sampleRate/2,0),this._gain=e(this,x,C.gain,40*Math.log10(Rn),ir),this._nativeBiquadFilterNode=C,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,_)}catch(T){throw T.code===11?n():T}if(p.length!==g.length||g.length!==_.length)throw n()}},Wk=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=yn(p,d);if(!g){const _={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=e(d,_)}return a.set(d,p),g?(await r(d,c.Q,p.Q),await r(d,c.detune,p.detune),await r(d,c.frequency,p.frequency),await r(d,c.gain,p.gain)):(await n(d,c.Q,p.Q),await n(d,c.detune,p.detune),await n(d,c.frequency,p.frequency),await n(d,c.gain,p.gain)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},Gk=(r,e)=>(t,n)=>{const i=e.get(t);if(i!==void 0)return i;const a=r.get(t);if(a!==void 0)return a;try{const u=n();return u instanceof Promise?(r.set(t,u),u.catch(()=>!1).then(c=>(r.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},Kk={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Hk=(r,e,t,n,i)=>class extends r{constructor(u,c){const d=n(u),p={...Kk,...c},g=t(d,p),_=i(d)?e():null;super(u,!1,g,_)}},Qk=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!yn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Xk={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Yk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=a({...Xk,...d}),_=t(p,g),T=i(p)?e():null;super(c,!1,_,T)}},Zk=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!yn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Jk=r=>(e,t,n)=>r(t,e,n),eP=r=>(e,t)=>{const n=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return n.buffer=i,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},tP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},nP=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...tP,...p},T=n(g,_),C=a(g),x=C?t():null;super(d,!1,T,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=T,this._offset=e(this,C,T.offset,Rn,ir),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?d:g}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),Ts(this)&&gu(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},rP=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let _=t(p);const T=yn(_,g);if(!T){const C={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=e(g,C),u!==null&&_.start(u),c!==null&&_.stop(c)}return a.set(g,_),T?await r(g,p.offset,_.offset):await n(g,p.offset,_.offset),await i(p,g,_),_};return{set start(p){u=p},set stop(p){c=p},render(p,g){const _=a.get(g);return _!==void 0?Promise.resolve(_):d(p,g)}}},sP=r=>e=>(r[0]=e,r[0]),iP={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},oP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g={...iP,...d},_=t(p,g),C=i(p)?e():null;super(c,!1,_,C),this._isBufferNullified=!1,this._nativeConvolverNode=_,g.buffer!==null&&a(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},aP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!yn(c,u)){const p={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},lP=(r,e)=>(t,n,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,i)}catch(a){throw a.name==="SyntaxError"?r():a}},uP=()=>new DOMException("","DataCloneError"),Z_=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const i=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>i();try{e.postMessage(r,[r])}catch{}finally{i()}})},cP=(r,e,t,n,i,a,u,c,d,p,g)=>(_,T)=>{const C=u(_)?_:a(_);if(i.has(T)){const x=t();return Promise.reject(x)}try{i.add(T)}catch{}return e(d,()=>d(C))?C.decodeAudioData(T).then(x=>(Z_(T).catch(()=>{}),e(c,()=>c(x))||g(x),r.add(x),x)):new Promise((x,k)=>{const V=async()=>{try{await Z_(T)}catch{}},B=Q=>{k(Q),V()};try{C.decodeAudioData(T,Q=>{typeof Q.copyFromChannel!="function"&&(p(Q),Cm(Q)),r.add(Q),V().then(()=>x(Q))},Q=>{B(Q===null?n():Q)})}catch(Q){B(Q)}})},hP=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=e.get(d);if(g===void 0)throw new Error("Missing the expected cycle count.");const _=a(d.context),T=c(_);if(g===p){if(e.delete(d),!T&&u(d)){const C=n(d),{outputs:x}=t(d);for(const k of x)if(vu(k)){const V=n(k[0]);r(C,V,k[1],k[2])}else{const V=i(k[0]);C.connect(V,k[1])}}}else e.set(d,g-p)},dP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},fP=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...dP,...p},T=n(g,_),C=a(g),x=C?t(_.maxDelayTime):null;super(d,!1,T,x),this._delayTime=e(this,C,T.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},pP=(r,e,t,n,i)=>a=>{const u=new WeakMap,c=async(d,p)=>{let g=t(d);const _=yn(g,p);if(!_){const T={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:a};g=e(p,T)}return u.set(p,g),_?await r(p,d.delayTime,g.delayTime):await n(p,d.delayTime,g.delayTime),await i(d,p,g),g};return{render(d,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):c(d,p)}}},mP=r=>(e,t,n,i)=>r(e[i],a=>a[0]===t&&a[1]===n),gP=r=>"delayTime"in r,yP=(r,e,t)=>function n(i,a){const u=bh(a)?a:t(r,a);if(gP(u))return[];if(i[0]===u)return[i];if(i.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(d=>n([...i,u],d[0])).reduce((d,p)=>d.concat(p),[])},vP={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},_P=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const _=a(p),T={...vP,...g},C=n(_,T),x=u(_),k=x?t():null;super(p,!1,C,k),this._attack=e(this,x,C.attack),this._knee=e(this,x,C.knee),this._nativeDynamicsCompressorNode=C,this._ratio=e(this,x,C.ratio),this._release=e(this,x,C.release),this._threshold=e(this,x,C.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},wP=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=yn(p,d);if(!g){const _={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=e(d,_)}return a.set(d,p),g?(await r(d,c.attack,p.attack),await r(d,c.knee,p.knee),await r(d,c.ratio,p.ratio),await r(d,c.release,p.release),await r(d,c.threshold,p.threshold)):(await n(d,c.attack,p.attack),await n(d,c.knee,p.knee),await n(d,c.ratio,p.ratio),await n(d,c.release,p.release),await n(d,c.threshold,p.threshold)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},EP=()=>new DOMException("","EncodingError"),TP=r=>e=>new Promise((t,n)=>{if(r===null){n(new SyntaxError);return}const i=r.document.head;if(i===null)n(new SyntaxError);else{const a=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),d=r.onerror,p=()=>{r.onerror=d,URL.revokeObjectURL(c)};r.onerror=(g,_,T,C,x)=>{if(_===c||_===r.location.href&&T===1&&C===1)return p(),n(x),!1;if(d!==null)return d(g,_,T,C,x)},a.onerror=()=>{p(),n(new SyntaxError)},a.onload=()=>{p(),t()},a.src=c,a.type="module",i.appendChild(a)}}),IP=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,i){if(n!==null){let a=this._listeners.get(n);a===void 0&&(a=r(this,n),typeof n=="function"&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,i){const a=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,i)}},SP=r=>(e,t,n)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},CP=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},xP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},AP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...xP,...d},_=n(p,g),T=a(p),C=T?t():null;super(c,!1,_,C),this._gain=e(this,T,_.gain,Rn,ir)}get gain(){return this._gain}},NP=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=yn(p,d);if(!g){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=e(d,_)}return a.set(d,p),g?await r(d,c.gain,p.gain):await n(d,c.gain,p.gain),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},RP=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},kP=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},PP=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Pn=()=>new DOMException("","InvalidStateError"),DP=r=>e=>{const t=r.get(e);if(t===void 0)throw Pn();return t},bP=(r,e)=>t=>{let n=r.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),r.set(t,n),n},VP=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},nd=()=>new DOMException("","InvalidAccessError"),MP=r=>{r.getFrequencyResponse=(e=>(t,n,i)=>{if(t.length!==n.length||n.length!==i.length)throw nd();return e.call(r,t,n,i)})(r.getFrequencyResponse)},OP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},FP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=i(p),_={...OP,...d},T=e(p,g?null:c.baseLatency,_),C=g?t(_.feedback,_.feedforward):null;super(c,!1,T,C),MP(T),this._nativeIIRFilterNode=T,a(this,1)}getFrequencyResponse(c,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(c,d,p)}},nT=(r,e,t,n,i,a,u,c,d,p,g)=>{const _=p.length;let T=c;for(let C=0;C<_;C+=1){let x=t[0]*p[C];for(let k=1;k<i;k+=1){const V=T-k&d-1;x+=t[k]*a[V],x-=r[k]*u[V]}for(let k=i;k<n;k+=1)x+=t[k]*a[T-k&d-1];for(let k=i;k<e;k+=1)x-=r[k]*u[T-k&d-1];a[T]=p[C],u[T]=x,T=T+1&d-1,g[C]=x}return T},LP=(r,e,t,n)=>{const i=t instanceof Float64Array?t:new Float64Array(t),a=n instanceof Float64Array?n:new Float64Array(n),u=i.length,c=a.length,d=Math.min(u,c);if(i[0]!==1){for(let x=0;x<u;x+=1)a[x]/=i[0];for(let x=1;x<c;x+=1)i[x]/=i[0]}const p=32,g=new Float32Array(p),_=new Float32Array(p),T=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),C=r.numberOfChannels;for(let x=0;x<C;x+=1){const k=r.getChannelData(x),V=T.getChannelData(x);g.fill(0),_.fill(0),nT(i,u,a,c,d,g,_,0,p,k,V)}return T},jP=(r,e,t,n,i)=>(a,u)=>{const c=new WeakMap;let d=null;const p=async(g,_)=>{let T=null,C=e(g);const x=yn(C,_);if(_.createIIRFilter===void 0?T=r(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(C=_.createIIRFilter(u,a)),c.set(_,T===null?C:T),T!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new t(g.context.destination.channelCount,g.context.length,_.sampleRate);d=(async()=>{await n(g,V,V.destination);const B=await i(V);return LP(B,_,a,u)})()}const k=await d;return T.buffer=k,T.start(0),T}return await n(g,_,C),C};return{render(g,_){const T=c.get(_);return T!==void 0?Promise.resolve(T):p(g,_)}}},BP=(r,e,t,n,i,a)=>u=>(c,d)=>{const p=r.get(c);if(p===void 0){if(!u&&a(c)){const g=n(c),{outputs:_}=t(c);for(const T of _)if(vu(T)){const C=n(T[0]);e(g,C,T[1],T[2])}else{const C=i(T[0]);g.disconnect(C,T[1])}}r.set(c,d)}else r.set(c,p+d)},zP=r=>e=>r!==null&&e instanceof r,UP=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,$P=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,qP=(r,e)=>t=>r(t)||e(t),WP=r=>e=>r!==null&&e instanceof r,GP=r=>r!==null&&r.isSecureContext,KP=(r,e,t,n,i,a)=>class extends t{constructor(c,d){super(c),this._nativeContext=c,KE.set(this,c),n(c)&&i.set(c,new Set),this._destination=new r(this,d),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const d=typeof c=="function"?a(this,c):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?c:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},iu=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},HP=(r,e)=>(t,n,i)=>{const a=new Set;return t.connect=(u=>(c,d=0,p=0)=>{const g=a.size===0;if(e(c))return u.call(t,c,d,p),r(a,[c,d,p],_=>_[0]===c&&_[1]===d&&_[2]===p,!0),g&&n(),c;u.call(t,c,d),r(a,[c,d],_=>_[0]===c&&_[1]===d,!0),g&&n()})(t.connect),t.disconnect=(u=>(c,d,p)=>{const g=a.size>0;if(c===void 0)u.apply(t),a.clear();else if(typeof c=="number"){u.call(t,c);for(const T of a)T[1]===c&&a.delete(T)}else{e(c)?u.call(t,c,d,p):u.call(t,c,d);for(const T of a)T[0]===c&&(d===void 0||T[1]===d)&&(p===void 0||T[2]===p)&&a.delete(T)}const _=a.size===0;g&&_&&i()})(t.disconnect),t},mt=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t]&&(r[t]=n)},Wt=(r,e)=>{mt(r,e,"channelCount"),mt(r,e,"channelCountMode"),mt(r,e,"channelInterpretation")},J_=r=>typeof r.getFloatTimeDomainData=="function",QP=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const n=Math.max(t.length,r.fftSize);for(let i=0;i<n;i+=1)e[i]=(t[i]-128)*.0078125;return e}},XP=(r,e)=>(t,n)=>{const i=t.createAnalyser();if(Wt(i,n),!(n.maxDecibels>n.minDecibels))throw e();return mt(i,n,"fftSize"),mt(i,n,"maxDecibels"),mt(i,n,"minDecibels"),mt(i,n,"smoothingTimeConstant"),r(J_,()=>J_(i))||QP(i),i},YP=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,Et=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t].value&&(r[t].value=n)},ZP=r=>{r.start=(e=>{let t=!1;return(n=0,i=0,a)=>{if(t)throw Pn();e.call(r,n,i,a),t=!0}})(r.start)},Nm=r=>{r.start=(e=>(t=0,n=0,i)=>{if(typeof i=="number"&&i<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,n,i)})(r.start)},Rm=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},JP=(r,e,t,n,i,a,u,c,d,p,g)=>(_,T)=>{const C=_.createBufferSource();return Wt(C,T),Et(C,T,"playbackRate"),mt(C,T,"buffer"),mt(C,T,"loop"),mt(C,T,"loopEnd"),mt(C,T,"loopStart"),e(t,()=>t(_))||ZP(C),e(n,()=>n(_))||d(C),e(i,()=>i(_))||p(C,_),e(a,()=>a(_))||Nm(C),e(u,()=>u(_))||g(C,_),e(c,()=>c(_))||Rm(C),r(_,C),C},e2=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,t2=(r,e)=>(t,n,i)=>{const a=t.destination;if(a.channelCount!==n)try{a.channelCount=n}catch{}i&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:n});const u=r(t,{channelCount:n,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>d=>{c.call(u,d);try{a.channelCount=d}catch(p){if(d>a.maxChannelCount)throw p}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelCountMode=d}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelInterpretation=d}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},n2=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,r2=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),rT=(r,e)=>{const t=r.createBiquadFilter();return Wt(t,e),Et(t,e,"Q"),Et(t,e,"detune"),Et(t,e,"frequency"),Et(t,e,"gain"),mt(t,e,"type"),t},s2=(r,e)=>(t,n)=>{const i=t.createChannelMerger(n.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,i),Wt(i,n),i},i2=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Pn()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Pn()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Pn()}})},km=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return Wt(t,e),i2(t),t},o2=(r,e,t,n,i)=>(a,u)=>{if(a.createConstantSource===void 0)return t(a,u);const c=a.createConstantSource();return Wt(c,u),Et(c,u,"offset"),e(n,()=>n(a))||Nm(c),e(i,()=>i(a))||Rm(c),r(a,c),c},Ba=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),a2=(r,e,t,n)=>(i,{offset:a,...u})=>{const c=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(i,{...u,gain:a}),g=c.getChannelData(0);g[0]=1,g[1]=1,d.buffer=c,d.loop=!0;const _={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(x){p.channelCount=x},get channelCountMode(){return p.channelCountMode},set channelCountMode(x){p.channelCountMode=x},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(x){p.channelInterpretation=x},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(x){d.onended=x},addEventListener(...x){return d.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return d.dispatchEvent(x[0])},removeEventListener(...x){return d.removeEventListener(x[0],x[1],x[2])},start(x=0){d.start.call(d,x)},stop(x=0){d.stop.call(d,x)}},T=()=>d.connect(p),C=()=>d.disconnect(p);return r(i,d),n(Ba(_,p),T,C)},l2=(r,e)=>(t,n)=>{const i=t.createConvolver();if(Wt(i,n),n.disableNormalization===i.normalize&&(i.normalize=!n.disableNormalization),mt(i,n,"buffer"),n.channelCount>2||(e(i,"channelCount",a=>()=>a.call(i),a=>u=>{if(u>2)throw r();return a.call(i,u)}),n.channelCountMode==="max"))throw r();return e(i,"channelCountMode",a=>()=>a.call(i),a=>u=>{if(u==="max")throw r();return a.call(i,u)}),i},sT=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return Wt(t,e),Et(t,e,"delayTime"),t},u2=r=>(e,t)=>{const n=e.createDynamicsCompressor();if(Wt(n,t),t.channelCount>2||t.channelCountMode==="max")throw r();return Et(n,t,"attack"),Et(n,t,"knee"),Et(n,t,"ratio"),Et(n,t,"release"),Et(n,t,"threshold"),n},Pr=(r,e)=>{const t=r.createGain();return Wt(t,e),Et(t,e,"gain"),t},c2=r=>(e,t,n)=>{if(e.createIIRFilter===void 0)return r(e,t,n);const i=e.createIIRFilter(n.feedforward,n.feedback);return Wt(i,n),i};function h2(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function d2(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function e0(r,e){let t=[0,0];for(let n=r.length-1;n>=0;n-=1)t=d2(t,e),t[0]+=r[n];return t}const f2=(r,e,t,n)=>(i,a,{channelCount:u,channelCountMode:c,channelInterpretation:d,feedback:p,feedforward:g})=>{const _=r2(a,i.sampleRate),T=p instanceof Float64Array?p:new Float64Array(p),C=g instanceof Float64Array?g:new Float64Array(g),x=T.length,k=C.length,V=Math.min(x,k);if(x===0||x>20)throw n();if(T[0]===0)throw e();if(k===0||k>20)throw n();if(C[0]===0)throw e();if(T[0]!==1){for(let I=0;I<k;I+=1)C[I]/=T[0];for(let I=1;I<x;I+=1)T[I]/=T[0]}const B=t(i,_,u,u);B.channelCount=u,B.channelCountMode=c,B.channelInterpretation=d;const Q=32,$=[],Z=[],L=[];for(let I=0;I<u;I+=1){$.push(0);const N=new Float32Array(Q),D=new Float32Array(Q);N.fill(0),D.fill(0),Z.push(N),L.push(D)}B.onaudioprocess=I=>{const N=I.inputBuffer,D=I.outputBuffer,M=N.numberOfChannels;for(let O=0;O<M;O+=1){const P=N.getChannelData(O),ce=D.getChannelData(O);$[O]=nT(T,x,C,k,V,Z[O],L[O],$[O],Q,P,ce)}};const U=i.sampleRate/2;return Ba({get bufferSize(){return _},get channelCount(){return B.channelCount},set channelCount(I){B.channelCount=I},get channelCountMode(){return B.channelCountMode},set channelCountMode(I){B.channelCountMode=I},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(I){B.channelInterpretation=I},get context(){return B.context},get inputs(){return[B]},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},addEventListener(...I){return B.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return B.dispatchEvent(I[0])},getFrequencyResponse(I,N,D){if(I.length!==N.length||N.length!==D.length)throw r();const M=I.length;for(let O=0;O<M;O+=1){const P=-Math.PI*(I[O]/U),ce=[Math.cos(P),Math.sin(P)],ye=e0(C,ce),ge=e0(T,ce),le=h2(ye,ge);N[O]=Math.sqrt(le[0]*le[0]+le[1]*le[1]),D[O]=Math.atan2(le[1],le[0])}},removeEventListener(...I){return B.removeEventListener(I[0],I[1],I[2])}},B)},p2=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,m2=(r,e,t,n,i,a)=>(u,c)=>{const d=u.createOscillator();return Wt(d,c),Et(d,c,"detune"),Et(d,c,"frequency"),c.periodicWave!==void 0?d.setPeriodicWave(c.periodicWave):mt(d,c,"type"),e(t,()=>t(u))||Nm(d),e(n,()=>n(u))||a(d,u),e(i,()=>i(u))||Rm(d),r(u,d),d},g2=r=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?r(e,t):(Wt(n,t),Et(n,t,"orientationX"),Et(n,t,"orientationY"),Et(n,t,"orientationZ"),Et(n,t,"positionX"),Et(n,t,"positionY"),Et(n,t,"positionZ"),mt(n,t,"coneInnerAngle"),mt(n,t,"coneOuterAngle"),mt(n,t,"coneOuterGain"),mt(n,t,"distanceModel"),mt(n,t,"maxDistance"),mt(n,t,"panningModel"),mt(n,t,"refDistance"),mt(n,t,"rolloffFactor"),n)},y2=(r,e,t,n,i,a,u,c,d,p)=>(g,{coneInnerAngle:_,coneOuterAngle:T,coneOuterGain:C,distanceModel:x,maxDistance:k,orientationX:V,orientationY:B,orientationZ:Q,panningModel:$,positionX:Z,positionY:L,positionZ:U,refDistance:R,rolloffFactor:I,...N})=>{const D=g.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw u();Wt(D,N);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=t(g,{...M,channelInterpretation:"speakers",numberOfInputs:6}),P=n(g,{...N,gain:1}),ce=n(g,{...M,gain:1}),ye=n(g,{...M,gain:0}),ge=n(g,{...M,gain:0}),le=n(g,{...M,gain:0}),X=n(g,{...M,gain:0}),ee=n(g,{...M,gain:0}),K=i(g,256,6,1),b=a(g,{...M,curve:new Float32Array([1,1]),oversample:"none"});let q=[V,B,Q],ne=[Z,L,U];const me=new Float32Array(1);K.onaudioprocess=({inputBuffer:de})=>{const Be=[d(de,me,0),d(de,me,1),d(de,me,2)];Be.some((bt,Gt)=>bt!==q[Gt])&&(D.setOrientation(...Be),q=Be);const tt=[d(de,me,3),d(de,me,4),d(de,me,5)];tt.some((bt,Gt)=>bt!==ne[Gt])&&(D.setPosition(...tt),ne=tt)},Object.defineProperty(ye.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ge.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0});const he={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(de){if(de>2)throw u();P.channelCount=de,D.channelCount=de},get channelCountMode(){return D.channelCountMode},set channelCountMode(de){if(de==="max")throw u();P.channelCountMode=de,D.channelCountMode=de},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(de){P.channelInterpretation=de,D.channelInterpretation=de},get coneInnerAngle(){return D.coneInnerAngle},set coneInnerAngle(de){D.coneInnerAngle=de},get coneOuterAngle(){return D.coneOuterAngle},set coneOuterAngle(de){D.coneOuterAngle=de},get coneOuterGain(){return D.coneOuterGain},set coneOuterGain(de){if(de<0||de>1)throw e();D.coneOuterGain=de},get context(){return D.context},get distanceModel(){return D.distanceModel},set distanceModel(de){D.distanceModel=de},get inputs(){return[P]},get maxDistance(){return D.maxDistance},set maxDistance(de){if(de<0)throw new RangeError;D.maxDistance=de},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get orientationX(){return ce.gain},get orientationY(){return ye.gain},get orientationZ(){return ge.gain},get panningModel(){return D.panningModel},set panningModel(de){D.panningModel=de},get positionX(){return le.gain},get positionY(){return X.gain},get positionZ(){return ee.gain},get refDistance(){return D.refDistance},set refDistance(de){if(de<0)throw new RangeError;D.refDistance=de},get rolloffFactor(){return D.rolloffFactor},set rolloffFactor(de){if(de<0)throw new RangeError;D.rolloffFactor=de},addEventListener(...de){return P.addEventListener(de[0],de[1],de[2])},dispatchEvent(...de){return P.dispatchEvent(de[0])},removeEventListener(...de){return P.removeEventListener(de[0],de[1],de[2])}};_!==he.coneInnerAngle&&(he.coneInnerAngle=_),T!==he.coneOuterAngle&&(he.coneOuterAngle=T),C!==he.coneOuterGain&&(he.coneOuterGain=C),x!==he.distanceModel&&(he.distanceModel=x),k!==he.maxDistance&&(he.maxDistance=k),V!==he.orientationX.value&&(he.orientationX.value=V),B!==he.orientationY.value&&(he.orientationY.value=B),Q!==he.orientationZ.value&&(he.orientationZ.value=Q),$!==he.panningModel&&(he.panningModel=$),Z!==he.positionX.value&&(he.positionX.value=Z),L!==he.positionY.value&&(he.positionY.value=L),U!==he.positionZ.value&&(he.positionZ.value=U),R!==he.refDistance&&(he.refDistance=R),I!==he.rolloffFactor&&(he.rolloffFactor=I),(q[0]!==1||q[1]!==0||q[2]!==0)&&D.setOrientation(...q),(ne[0]!==0||ne[1]!==0||ne[2]!==0)&&D.setPosition(...ne);const Ie=()=>{P.connect(D),r(P,b,0,0),b.connect(ce).connect(O,0,0),b.connect(ye).connect(O,0,1),b.connect(ge).connect(O,0,2),b.connect(le).connect(O,0,3),b.connect(X).connect(O,0,4),b.connect(ee).connect(O,0,5),O.connect(K).connect(g.destination)},Re=()=>{P.disconnect(D),c(P,b,0,0),b.disconnect(ce),ce.disconnect(O),b.disconnect(ye),ye.disconnect(O),b.disconnect(ge),ge.disconnect(O),b.disconnect(le),le.disconnect(O),b.disconnect(X),X.disconnect(O),b.disconnect(ee),ee.disconnect(O),O.disconnect(K),K.disconnect(g.destination)};return p(Ba(he,D),Ie,Re)},v2=r=>(e,{disableNormalization:t,imag:n,real:i})=>{const a=n instanceof Float32Array?n:new Float32Array(n),u=i instanceof Float32Array?i:new Float32Array(i),c=e.createPeriodicWave(u,a,{disableNormalization:t});if(Array.from(n).length<2)throw r();return c},rd=(r,e,t,n)=>r.createScriptProcessor(e,t,n),_2=(r,e)=>(t,n)=>{const i=n.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,n);const a=t.createStereoPanner();return Wt(a,n),Et(a,n,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>i,set:u=>{if(u!==i)throw e()}}),a},w2=(r,e,t,n,i,a)=>{const c=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},_=(x,k,V,B)=>{const Q=new Float32Array(16385),$=new Float32Array(16385);for(let N=0;N<16385;N+=1){const D=N/16384*d;Q[N]=Math.cos(D),$[N]=Math.sin(D)}const Z=t(x,{...p,gain:0}),L=n(x,{...g,curve:Q}),U=n(x,{...g,curve:c}),R=t(x,{...p,gain:0}),I=n(x,{...g,curve:$});return{connectGraph(){k.connect(Z),k.connect(U.inputs===void 0?U:U.inputs[0]),k.connect(R),U.connect(V),V.connect(L.inputs===void 0?L:L.inputs[0]),V.connect(I.inputs===void 0?I:I.inputs[0]),L.connect(Z.gain),I.connect(R.gain),Z.connect(B,0,0),R.connect(B,0,1)},disconnectGraph(){k.disconnect(Z),k.disconnect(U.inputs===void 0?U:U.inputs[0]),k.disconnect(R),U.disconnect(V),V.disconnect(L.inputs===void 0?L:L.inputs[0]),V.disconnect(I.inputs===void 0?I:I.inputs[0]),L.disconnect(Z.gain),I.disconnect(R.gain),Z.disconnect(B,0,0),R.disconnect(B,0,1)}}},T=(x,k,V,B)=>{const Q=new Float32Array(16385),$=new Float32Array(16385),Z=new Float32Array(16385),L=new Float32Array(16385),U=Math.floor(16385/2);for(let le=0;le<16385;le+=1)if(le>U){const X=(le-U)/(16384-U)*d;Q[le]=Math.cos(X),$[le]=Math.sin(X),Z[le]=0,L[le]=1}else{const X=le/(16384-U)*d;Q[le]=1,$[le]=0,Z[le]=Math.cos(X),L[le]=Math.sin(X)}const R=e(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),I=t(x,{...p,gain:0}),N=n(x,{...g,curve:Q}),D=t(x,{...p,gain:0}),M=n(x,{...g,curve:$}),O=n(x,{...g,curve:c}),P=t(x,{...p,gain:0}),ce=n(x,{...g,curve:Z}),ye=t(x,{...p,gain:0}),ge=n(x,{...g,curve:L});return{connectGraph(){k.connect(R),k.connect(O.inputs===void 0?O:O.inputs[0]),R.connect(I,0),R.connect(D,0),R.connect(P,1),R.connect(ye,1),O.connect(V),V.connect(N.inputs===void 0?N:N.inputs[0]),V.connect(M.inputs===void 0?M:M.inputs[0]),V.connect(ce.inputs===void 0?ce:ce.inputs[0]),V.connect(ge.inputs===void 0?ge:ge.inputs[0]),N.connect(I.gain),M.connect(D.gain),ce.connect(P.gain),ge.connect(ye.gain),I.connect(B,0,0),P.connect(B,0,0),D.connect(B,0,1),ye.connect(B,0,1)},disconnectGraph(){k.disconnect(R),k.disconnect(O.inputs===void 0?O:O.inputs[0]),R.disconnect(I,0),R.disconnect(D,0),R.disconnect(P,1),R.disconnect(ye,1),O.disconnect(V),V.disconnect(N.inputs===void 0?N:N.inputs[0]),V.disconnect(M.inputs===void 0?M:M.inputs[0]),V.disconnect(ce.inputs===void 0?ce:ce.inputs[0]),V.disconnect(ge.inputs===void 0?ge:ge.inputs[0]),N.disconnect(I.gain),M.disconnect(D.gain),ce.disconnect(P.gain),ge.disconnect(ye.gain),I.disconnect(B,0,0),P.disconnect(B,0,0),D.disconnect(B,0,1),ye.disconnect(B,0,1)}}},C=(x,k,V,B,Q)=>{if(k===1)return _(x,V,B,Q);if(k===2)return T(x,V,B,Q);throw i()};return(x,{channelCount:k,channelCountMode:V,pan:B,...Q})=>{if(V==="max")throw i();const $=r(x,{...Q,channelCount:1,channelCountMode:V,numberOfInputs:2}),Z=t(x,{...Q,channelCount:k,channelCountMode:V,gain:1}),L=t(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:B});let{connectGraph:U,disconnectGraph:R}=C(x,k,Z,L,$);Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"maxValue",{get:()=>1}),Object.defineProperty(L.gain,"minValue",{get:()=>-1});const I={get bufferSize(){},get channelCount(){return Z.channelCount},set channelCount(O){Z.channelCount!==O&&(N&&R(),{connectGraph:U,disconnectGraph:R}=C(x,O,Z,L,$),N&&U()),Z.channelCount=O},get channelCountMode(){return Z.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw i();Z.channelCountMode=O},get channelInterpretation(){return Z.channelInterpretation},set channelInterpretation(O){Z.channelInterpretation=O},get context(){return Z.context},get inputs(){return[Z]},get numberOfInputs(){return Z.numberOfInputs},get numberOfOutputs(){return Z.numberOfOutputs},get pan(){return L.gain},addEventListener(...O){return Z.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return Z.dispatchEvent(O[0])},removeEventListener(...O){return Z.removeEventListener(O[0],O[1],O[2])}};let N=!1;const D=()=>{U(),N=!0},M=()=>{R(),N=!1};return a(Ba(I,$),D,M)}},E2=(r,e,t,n,i,a,u)=>(c,d)=>{const p=c.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,d);Wt(p,d);const g=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(g!==null&&g.length<2)throw e();mt(p,{curve:g},"curve"),mt(p,d,"oversample");let _=null,T=!1;return u(p,"curve",k=>()=>k.call(p),k=>V=>(k.call(p,V),T&&(n(V)&&_===null?_=r(c,p):!n(V)&&_!==null&&(_(),_=null)),V)),i(p,()=>{T=!0,n(p.curve)&&(_=r(c,p))},()=>{T=!1,_!==null&&(_(),_=null)})},T2=(r,e,t,n,i)=>(a,{curve:u,oversample:c,...d})=>{const p=a.createWaveShaper(),g=a.createWaveShaper();Wt(p,d),Wt(g,d);const _=t(a,{...d,gain:1}),T=t(a,{...d,gain:-1}),C=t(a,{...d,gain:1}),x=t(a,{...d,gain:-1});let k=null,V=!1,B=null;const Q={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(L){_.channelCount=L,T.channelCount=L,p.channelCount=L,C.channelCount=L,g.channelCount=L,x.channelCount=L},get channelCountMode(){return p.channelCountMode},set channelCountMode(L){_.channelCountMode=L,T.channelCountMode=L,p.channelCountMode=L,C.channelCountMode=L,g.channelCountMode=L,x.channelCountMode=L},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(L){_.channelInterpretation=L,T.channelInterpretation=L,p.channelInterpretation=L,C.channelInterpretation=L,g.channelInterpretation=L,x.channelInterpretation=L},get context(){return p.context},get curve(){return B},set curve(L){if(L!==null&&L.length<2)throw e();if(L===null)p.curve=L,g.curve=L;else{const U=L.length,R=new Float32Array(U+2-U%2),I=new Float32Array(U+2-U%2);R[0]=L[0],I[0]=-L[U-1];const N=Math.ceil((U+1)/2),D=(U+1)/2-1;for(let M=1;M<N;M+=1){const O=M/N*D,P=Math.floor(O),ce=Math.ceil(O);R[M]=P===ce?L[P]:(1-(O-P))*L[P]+(1-(ce-O))*L[ce],I[M]=P===ce?-L[U-1-P]:-((1-(O-P))*L[U-1-P])-(1-(ce-O))*L[U-1-ce]}R[N]=U%2===1?L[N-1]:(L[N-2]+L[N-1])/2,p.curve=R,g.curve=I}B=L,V&&(n(B)&&k===null?k=r(a,_):k!==null&&(k(),k=null))},get inputs(){return[_]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(L){p.oversample=L,g.oversample=L},addEventListener(...L){return _.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return _.dispatchEvent(L[0])},removeEventListener(...L){return _.removeEventListener(L[0],L[1],L[2])}};u!==null&&(Q.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==Q.oversample&&(Q.oversample=c);const $=()=>{_.connect(p).connect(C),_.connect(T).connect(g).connect(x).connect(C),V=!0,n(B)&&(k=r(a,_))},Z=()=>{_.disconnect(p),p.disconnect(C),_.disconnect(T),T.disconnect(g),g.disconnect(x),x.disconnect(C),V=!1,k!==null&&(k(),k=null)};return i(Ba(Q,C),$,Z)},lr=()=>new DOMException("","NotSupportedError"),I2={numberOfChannels:1},S2=(r,e,t,n,i)=>class extends r{constructor(u,c,d){let p;if(typeof u=="number"&&c!==void 0&&d!==void 0)p={length:c,numberOfChannels:u,sampleRate:d};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:_,sampleRate:T}={...I2,...p},C=n(_,g,T);e(iu,()=>iu(C))||C.addEventListener("statechange",(()=>{let x=0;const k=V=>{this._state==="running"&&(x>0?(C.removeEventListener("statechange",k),V.stopImmediatePropagation(),this._waitForThePromiseToSettle(V)):x+=1)};return k})()),super(C,_),this._length=g,this._nativeOfflineAudioContext=C,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ak(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},C2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},x2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...C2,...p},T=t(g,_),C=a(g),x=C?n():null,k=d.sampleRate/2;super(d,!1,T,x),this._detune=e(this,C,T.detune,153600,-153600),this._frequency=e(this,C,T.frequency,k,-k),this._nativeOscillatorNode=T,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?d:g}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),Ts(this)&&gu(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},A2=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null,d=null;const p=async(g,_)=>{let T=t(g);const C=yn(T,_);if(!C){const x={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,detune:T.detune.value,frequency:T.frequency.value,periodicWave:u===null?void 0:u,type:T.type};T=e(_,x),c!==null&&T.start(c),d!==null&&T.stop(d)}return a.set(_,T),C?(await r(_,g.detune,T.detune),await r(_,g.frequency,T.frequency)):(await n(_,g.detune,T.detune),await n(_,g.frequency,T.frequency)),await i(g,_,T),T};return{set periodicWave(g){u=g},set start(g){c=g},set stop(g){d=g},render(g,_){const T=a.get(_);return T!==void 0?Promise.resolve(T):p(g,_)}}},N2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},R2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...N2,...p},T=t(g,_),C=a(g),x=C?n():null;super(d,!1,T,x),this._nativePannerNode=T,this._orientationX=e(this,C,T.orientationX,Rn,ir),this._orientationY=e(this,C,T.orientationY,Rn,ir),this._orientationZ=e(this,C,T.orientationZ,Rn,ir),this._positionX=e(this,C,T.positionX,Rn,ir),this._positionY=e(this,C,T.positionY,Rn,ir),this._positionZ=e(this,C,T.positionZ,Rn,ir),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},k2=(r,e,t,n,i,a,u,c,d,p)=>()=>{const g=new WeakMap;let _=null;const T=async(C,x)=>{let k=null,V=a(C);const B={channelCount:V.channelCount,channelCountMode:V.channelCountMode,channelInterpretation:V.channelInterpretation},Q={...B,coneInnerAngle:V.coneInnerAngle,coneOuterAngle:V.coneOuterAngle,coneOuterGain:V.coneOuterGain,distanceModel:V.distanceModel,maxDistance:V.maxDistance,panningModel:V.panningModel,refDistance:V.refDistance,rolloffFactor:V.rolloffFactor},$=yn(V,x);if("bufferSize"in V)k=n(x,{...B,gain:1});else if(!$){const Z={...Q,orientationX:V.orientationX.value,orientationY:V.orientationY.value,orientationZ:V.orientationZ.value,positionX:V.positionX.value,positionY:V.positionY.value,positionZ:V.positionZ.value};V=i(x,Z)}if(g.set(x,k===null?V:k),k!==null){if(_===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new u(6,C.context.length,x.sampleRate),O=e(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(M.destination),_=(async()=>{const P=await Promise.all([C.orientationX,C.orientationY,C.orientationZ,C.positionX,C.positionY,C.positionZ].map(async(ce,ye)=>{const ge=t(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ye===0?1:0});return await c(M,ce,ge.offset),ge}));for(let ce=0;ce<6;ce+=1)P[ce].connect(O,0,ce),P[ce].start(0);return p(M)})()}const Z=await _,L=n(x,{...B,gain:1});await d(C,x,L);const U=[];for(let M=0;M<Z.numberOfChannels;M+=1)U.push(Z.getChannelData(M));let R=[U[0][0],U[1][0],U[2][0]],I=[U[3][0],U[4][0],U[5][0]],N=n(x,{...B,gain:1}),D=i(x,{...Q,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]});L.connect(N).connect(D.inputs[0]),D.connect(k);for(let M=128;M<Z.length;M+=128){const O=[U[0][M],U[1][M],U[2][M]],P=[U[3][M],U[4][M],U[5][M]];if(O.some((ce,ye)=>ce!==R[ye])||P.some((ce,ye)=>ce!==I[ye])){R=O,I=P;const ce=M/x.sampleRate;N.gain.setValueAtTime(0,ce),N=n(x,{...B,gain:0}),D=i(x,{...Q,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]}),N.gain.setValueAtTime(1,ce),L.connect(N).connect(D.inputs[0]),D.connect(k)}}return k}return $?(await r(x,C.orientationX,V.orientationX),await r(x,C.orientationY,V.orientationY),await r(x,C.orientationZ,V.orientationZ),await r(x,C.positionX,V.positionX),await r(x,C.positionY,V.positionY),await r(x,C.positionZ,V.positionZ)):(await c(x,C.orientationX,V.orientationX),await c(x,C.orientationY,V.orientationY),await c(x,C.orientationZ,V.orientationZ),await c(x,C.positionX,V.positionX),await c(x,C.positionY,V.positionY),await c(x,C.positionZ,V.positionZ)),ja(V)?await d(C,x,V.inputs[0]):await d(C,x,V),V};return{render(C,x){const k=g.get(x);return k!==void 0?Promise.resolve(k):T(C,x)}}},P2={disableNormalization:!1},D2=(r,e,t,n)=>class iT{constructor(a,u){const c=e(a),d=n({...P2,...u}),p=r(c,d);return t.add(p),p}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===iT.prototype||t.has(a)}},b2=(r,e)=>(t,n,i)=>(r(n).replay(i),e(n,t,i)),V2=(r,e,t)=>async(n,i,a)=>{const u=r(n);await Promise.all(u.activeInputs.map((c,d)=>Array.from(c).map(async([p,g])=>{const T=await e(p).render(p,i),C=n.context.destination;!t(p)&&(n!==C||!t(n))&&T.connect(a,g,d)})).reduce((c,d)=>[...c,...d],[]))},M2=(r,e,t)=>async(n,i,a)=>{const u=e(n);await Promise.all(Array.from(u.activeInputs).map(async([c,d])=>{const g=await r(c).render(c,i);t(c)||g.connect(a,d)}))},O2=(r,e,t,n)=>i=>r(iu,()=>iu(i))?Promise.resolve(r(n,n)).then(a=>{if(!a){const u=t(i,512,0,1);i.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>i.currentTime,u.connect(i.destination)}return i.startRendering()}):new Promise(a=>{const u=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=c=>{u.disconnect(),a(c.renderedBuffer)},u.connect(i.destination),i.startRendering()}),F2=r=>(e,t)=>r.set(e,t),L2=(r,e,t,n,i,a,u,c)=>(d,p)=>t(d).render(d,p).then(()=>Promise.all(Array.from(n(p)).map(g=>t(g).render(g,p)))).then(()=>i(p)).then(g=>(typeof g.copyFromChannel!="function"?(u(g),Cm(g)):e(a,()=>a(g))||c(g),r.add(g),g)),j2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},B2=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...j2,...d},_=t(p,g),T=a(p),C=T?n():null;super(c,!1,_,C),this._pan=e(this,T,_.pan)}get pan(){return this._pan}},z2=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=yn(p,d);if(!g){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=e(d,_)}return a.set(d,p),g?await r(d,c.pan,p.pan):await n(d,c.pan,p.pan),ja(p)?await i(c,d,p.inputs[0]):await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},U2=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},$2=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),i=URL.createObjectURL(t);let a=!1,u=!1;try{await n.audioWorklet.addModule(i);const c=new r(n,"a",{numberOfOutputs:0}),d=n.createOscillator();c.port.onmessage=()=>a=!0,c.onprocessorerror=()=>u=!0,d.connect(c),d.start(0),await n.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(i)}return a&&!u},q2=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{n.disconnect(),i(t.currentTime!==0)},t.startRendering()})},W2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},G2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),_={...W2,...p},T=t(g,_),x=a(g)?n():null;super(d,!0,T,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=T,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},K2=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!yn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},H2=()=>typeof window>"u"?null:window,Q2=(r,e)=>t=>{t.copyFromChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let _=u<0?-u:0;_+u<d&&_<g;_+=1)n[_]=p[_+u]},t.copyToChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let _=u<0?-u:0;_+u<d&&_<g;_+=1)p[_+u]=n[_]}},X2=r=>e=>{e.copyFromChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyToChannel)},Y2=r=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),r(e,"buffer",i=>()=>{const a=i.call(e);return a===n?null:a},i=>a=>i.call(e,a===null?n:a))},Z2=(r,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const i=t.createBufferSource();e(n,()=>{const c=n.numberOfInputs;for(let d=0;d<c;d+=1)i.connect(n,0,d)},()=>i.disconnect(n))},oT=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),aT=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},_u=(r,e,t,n)=>{let i=r;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:a,set:u}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(r,e,{get:t(a),set:n(u)})},J2=r=>({...r,channelCount:r.numberOfOutputs}),eD=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},lT=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;lT(r,e,t+1e-7)}},tD=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},nD=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},rD=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Pm=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},uT=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Dm=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},sD=r=>{r.start=(e=>(t=0,n=0,i)=>{const a=r.buffer,u=a===null?n:Math.min(a.duration,n);a!==null&&u>a.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,u,i)})(r.start)},cT=(r,e)=>{const t=e.createGain();r.connect(t);const n=(i=>()=>{i.call(r,t),r.removeEventListener("ended",n)})(r.disconnect);r.addEventListener("ended",n),Ba(r,t),r.stop=(i=>{let a=!1;return(u=0)=>{if(a)try{i.call(r,u)}catch{t.gain.setValueAtTime(0,u)}else i.call(r,u),a=!0}})(r.stop)},wu=(r,e)=>t=>{const n={value:r};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},iD=ik(wo),oD=hk(wo),aD=mP(td),hT=new WeakMap,lD=kP(hT),Dr=Gk(new Map,new WeakMap),Jr=H2(),dT=XP(Dr,_o),bm=RP(Wn),an=V2(Wn,bm,mo),uD=mk(dT,vt,an),Rt=DP(KE),_i=p2(Jr),Tt=WP(_i),fT=new WeakMap,pT=IP(wu),sd=e2(Jr),mT=zP(sd),gT=UP(Jr),cD=$P(Jr),jp=n2(Jr),ln=jk(ok($E),ck(iD,oD,Vh,aD,Mh,Wn,lD,mu,vt,wo,Ts,mo,th),Dr,BP(Op,Mh,Wn,vt,su,Ts),_o,nd,lr,hP(Vh,Op,Wn,vt,su,Rt,Ts,Tt),yP(fT,Wn,vi),pT,Rt,mT,gT,cD,Tt,jp),hD=pk(ln,uD,_o,dT,Rt,Tt),Vm=new WeakSet,t0=YP(Jr),yT=sP(new Uint32Array(1)),Mm=Q2(yT,_o),Om=X2(yT),dD=yk(Vm,Dr,lr,t0,_i,U2(t0),Mm,Om),id=dk(Pr),vT=M2(bm,yu,mo),As=Jk(vT),Eu=JP(id,Dr,tD,nD,rD,Pm,uT,Dm,sD,Y2(_u),cT),Ns=b2(PP(yu),vT),fD=wk(As,Eu,vt,Ns,an),ts=Bk(ak(WE),fT,GE,zk,JR,ek,tk,nk,rk,bp,zE,sd,lT),pD=_k(ln,fD,ts,Pn,Eu,Rt,Tt,wu),mD=Nk(ln,Rk,_o,Pn,t2(Pr,_u),Rt,Tt,an),gD=Wk(As,rT,vt,Ns,an),Eo=F2(hT),yD=qk(ln,ts,gD,nd,rT,Rt,Tt,Eo),za=HP(wo,gT),vD=Z2(Pn,za),Ua=s2(sd,vD),_D=Qk(Ua,vt,an),wD=Hk(ln,_D,Ua,Rt,Tt),ED=Zk(km,vt,an),TD=Yk(ln,ED,km,Rt,Tt,J2),ID=a2(id,Eu,Pr,za),od=o2(id,Dr,ID,Pm,Dm),SD=rP(As,od,vt,Ns,an),CD=nP(ln,ts,SD,od,Rt,Tt,wu),_T=l2(lr,_u),xD=aP(_T,vt,an),AD=oP(ln,xD,_T,Rt,Tt,Eo),ND=pP(As,sT,vt,Ns,an),RD=fP(ln,ts,ND,sT,Rt,Tt,Eo),wT=u2(lr),kD=wP(As,wT,vt,Ns,an),PD=_P(ln,ts,kD,wT,lr,Rt,Tt,Eo),DD=NP(As,Pr,vt,Ns,an),bD=AP(ln,ts,DD,Pr,Rt,Tt),VD=f2(nd,Pn,rd,lr),Fm=O2(Dr,Pr,rd,q2(Pr,_i)),MD=jP(Eu,vt,_i,an,Fm),OD=c2(VD),FD=FP(ln,OD,MD,Rt,Tt,Eo),LD=kk(ts,Ua,od,rd,lr,oT,Tt,_u),ET=new WeakMap,jD=KP(mD,LD,pT,Tt,ET,wu),TT=m2(id,Dr,Pm,uT,Dm,cT),BD=A2(As,TT,vt,Ns,an),zD=x2(ln,ts,TT,BD,Rt,Tt,wu),IT=eP(Eu),UD=T2(IT,Pn,Pr,aT,za),ad=E2(IT,Pn,UD,aT,za,sd,_u),$D=y2(Vh,Pn,Ua,Pr,rd,ad,lr,Mh,oT,za),ST=g2($D),qD=k2(As,Ua,od,Pr,ST,vt,_i,Ns,an,Fm),WD=R2(ln,ts,ST,qD,Rt,Tt,Eo),GD=v2(_o),KD=D2(GD,Rt,new WeakSet,eD),HD=w2(Ua,km,Pr,ad,lr,za),CT=_2(HD,lr),QD=z2(As,CT,vt,Ns,an),XD=B2(ln,ts,CT,QD,Rt,Tt),YD=K2(ad,vt,an),ZD=G2(ln,Pn,ad,YD,Rt,Tt,Eo),JD=GP(Jr),eb=SP(Jr),tb=new WeakMap,nb=bP(tb,_i),rb=JD?uk(Dr,lr,TP(Jr),eb,CP(sk),Rt,nb,Tt,jp,new WeakMap,new WeakMap,$2(jp,_i),Jr):void 0,sb=qP(mT,Tt),ib=cP(Vm,Dr,uP,EP,new WeakSet,Rt,sb,Dh,iu,Mm,Om),ob=Uk(rb,hD,dD,pD,yD,wD,TD,CD,AD,ib,RD,PD,bD,FD,jD,zD,WD,KD,XD,ZD),ab=VP(ET),lb=lP(lr,_i),ub=L2(Vm,Dr,bm,ab,Fm,Dh,Mm,Om),cb=S2(ob,Dr,Pn,lb,ub),n0=(r,e,t)=>{const n=new cb(r.numberOfChannels,Math.round(t*r.sampleRate),r.sampleRate),i=n.createBiquadFilter(),a=n.createBufferSource();return i.frequency.value=240,i.type="lowpass",a.buffer=r,a.connect(i).connect(n.destination),a.start(0,e,t),n.startRendering().then(u=>{const c=u.getChannelData(0),d=u.sampleRate;return{channelData:c,sampleRate:d}})},hb=QR({analyze:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await n0(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("analyze",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])},guess:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await n0(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("guess",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])}}),db=r=>{const e=new Worker(r);return hb(e)},fb=(r,e)=>{let t=null;return()=>{if(t!==null)return t;const n=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return t=r(i),setTimeout(()=>URL.revokeObjectURL(i)),t}},pb=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:c}})=>{const u=r[i];try{if(void 0===u)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const c=new Map,u=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(c);return c.set(o,(()=>{n(),t.close(),c.delete(o)})),{result:o}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=u(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},h=(e,t,r)=>{const n=e.length,o=[];let s=!1;for(let a=0;a<n;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=r/4-1);return s&&o.push(n-1),o},d=(e,t,r)=>{const n=(e=>{let t=0;const r=e.length;for(let n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t})(e),o=.3*n;let s=[],a=n-.05*n;if(n>.25)for(;s.length<30&&a>=o;)s=h(e,a,t),a-=.05*n;const i=(e=>{const t=[];return e.forEach(((r,n)=>{const o=Math.min(e.length-n,10);for(let s=1;s<o;s+=1){const o=e[n+s]-r;t.some((e=>e.interval===o&&(e.peaks.push(r),!0)))||t.push({interval:o,peaks:[r]})}})),t})(s),c=((e,t,r={})=>{var n,o;const s=Math.max(0,null!==(n=r.maxTempo)&&void 0!==n?n:180),a=Math.max(0,null!==(o=r.minTempo)&&void 0!==o?o:90),i=[];return e.forEach((e=>{let r=60/(e.interval/t);for(;r<a;)r*=2;for(;r>s;)r/=2;if(r<a)return;let n=!1,o=e.peaks.length;i.forEach((t=>{if(t.tempo===r&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],n=!0),t.tempo>r-.5&&t.tempo<r+.5){const n=2*Math.abs(t.tempo-r);o+=(1-n)*t.peaks.length,t.score+=(1-n)*e.peaks.length}})),n||i.push({peaks:e.peaks,score:o,tempo:r})})),i})(i,t,r);return c.sort(((e,t)=>t.score-e.score)),c},p=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo},f=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:o,tempo:s}=n[0],a=Math.round(s),i=60/a;o.sort(((e,t)=>e-t));let c=o[0]/t;for(;c>i;)c-=i;return{bpm:a,offset:c,tempo:s}};l(self,{analyze:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:p(e,t,r)}),guess:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:f(e,t,r)})})})()})();`,mb=fb(db,pb),gb=(...r)=>mb().analyze(...r),$n=new kI({log:!0,corePath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.js",wasmPath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.wasm"}),r0=async()=>{try{console.log("Starting FFmpeg load..."),await $n.load({corePath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.js",wasmPath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.wasm"}),console.log("FFmpeg loaded successfully")}catch(r){throw console.error("FFmpeg load error:",r),r instanceof Error&&console.error({message:r.message,name:r.name,stack:r.stack,cause:r.cause}),alert("Failed to load FFmpeg. Please check your internet connection."),r}},yb=({onCreateSlideshow:r,onLoadSession:e,onClose:t})=>{const[n,i]=ae.useState(!0),[a,u]=ae.useState(!1);return E.jsx("div",{className:"landing-wrapper",children:E.jsxs("div",{className:"landing-container",children:[E.jsxs("div",{className:"landing-header",children:[E.jsx("button",{className:"info-button",onClick:()=>u(!0),children:E.jsx("span",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid white",fontSize:"16px"},children:"i"})}),E.jsx("h1",{className:"app-title",children:"Groove Slider"}),E.jsx("button",{className:"close-landing-button",onClick:t,children:E.jsx(oo,{size:24})})]}),E.jsxs("div",{className:"retro-background",children:[E.jsx("div",{className:"wave-pattern top"}),E.jsx("div",{className:"wave-pattern bottom"}),E.jsxs("div",{className:"project-management",children:[E.jsx("button",{className:"create-button",onClick:r,children:"Create Slideshow"}),E.jsx("button",{className:"sessions-toggle-button",onClick:()=>i(!n),children:n?"Hide Saved Projects":"Show Saved Projects"}),n&&E.jsx("div",{className:"landing-sessions-container",children:E.jsx(BR,{visible:!0,onLoadSession:e})})]})]}),E.jsx("div",{className:"featured-section",children:E.jsxs("button",{className:"use-style-button",children:[E.jsx(zp,{size:18}),E.jsx("span",{children:"Follow Us "})]})}),a&&E.jsx(Sb,{isOpen:a,onClose:()=>u(!1)})]})})},vb=({onBPMChange:r,isAnalyzing:e})=>{const[t,n]=ae.useState([]),[i,a]=ae.useState(0),u=()=>{if(n(newTaps),newTaps.length>1){const c=[];for(let g=1;g<newTaps.length;g++)c.push(newTaps[g]-newTaps[g-1]);const d=c.reduce((g,_)=>g+_)/c.length,p=Math.round(6e4/d);p>=60&&p<=180&&(a(p),r(p))}};return ae.useEffect(()=>{const c=setTimeout(()=>{t.length>0&&Date.now()-t[t.length-1]>2e3&&n([])},2e3);return()=>clearTimeout(c)},[t]),E.jsxs("div",{className:"tap-tempo",children:[E.jsxs("button",{onClick:u,className:"tap-button",children:["Tap Tempo",E.jsx("span",{className:"bpm-text",children:i>0?`${i} BPM`:""})]}),e&&E.jsxs("div",{className:"bpm-analyzer",children:[E.jsx("div",{className:"spinner"}),E.jsx("span",{children:"Analyzing beat..."})]})]})},_b=({onUpload:r,onBPMChange:e,currentBPM:t,onStartPointChange:n,audioRef:i,musicUrl:a,musicStartPoint:u})=>{const[c,d]=ae.useState(0),[p,g]=ae.useState(!1),[_,T]=ae.useState(1),[C,x]=ae.useState(0),k=ae.useRef(null),[V,B]=ae.useState(""),[Q,$]=ae.useState(!1),[Z,L]=ae.useState(!1),[U,R]=ae.useState(null),I=ae.useRef(null),N=ae.useRef(null);ae.useEffect(()=>{if(!U){const X=new(window.AudioContext||window.webkitAudioContext);R(X)}return()=>{U&&U.close()}},[]);const D=async X=>{try{console.log("Starting BPM detection..."),$(!0);const ee=new(window.AudioContext||window.webkitAudioContext),b=await(await fetch(X)).arrayBuffer();console.log("Audio data fetched, decoding...");const q=await ee.decodeAudioData(b);console.log("Audio decoded, analyzing tempo...");const ne=await gb(q);console.log(`Raw detected tempo: ${ne}`);let me=ne;ne>140&&(me=ne/2);const he=Math.round(me);return console.log(`Final detected BPM: ${he}`),he}catch(ee){return console.error("BPM detection failed:",ee),120}finally{$(!1)}},M=()=>{if(!k.current)return;const X=k.current.currentTime;if(d(X),p&&N.current!==null){const ee=Math.abs(X-N.current);ee>.005&&X<N.current+.5?(console.log(`Correcting drift of ${ee.toFixed(6)}s`),k.current.currentTime=N.current,i.current&&(i.current.currentTime=N.current)):X>N.current+.5&&(N.current=null)}};ae.useEffect(()=>{if(k.current&&i.current){k.current.addEventListener("timeupdate",M);const X=()=>{i.current.currentTime=k.current.currentTime};return k.current.addEventListener("timeupdate",X),k.current.addEventListener("seeking",()=>{I.current&&clearInterval(I.current),I.current=setInterval(()=>{M()},10)}),k.current.addEventListener("seeked",()=>{I.current&&(clearInterval(I.current),I.current=null)}),k.current.addEventListener("loadedmetadata",()=>{x(k.current.duration)}),()=>{k.current&&(k.current.removeEventListener("timeupdate",M),k.current.removeEventListener("timeupdate",X),k.current.removeEventListener("seeking",()=>{}),k.current.removeEventListener("seeked",()=>{})),I.current&&clearInterval(I.current)}}},[i,k,p]);const O=async()=>{if(k.current)if(p)k.current.pause(),g(!1);else try{const X=k.current.currentTime;N.current=X,k.current.currentTime=X,U&&U.state==="suspended"&&await U.resume(),await k.current.play(),setTimeout(()=>{Math.abs(k.current.currentTime-X)>.005&&(console.log(`Forced correction: ${k.current.currentTime} -> ${X}`),k.current.currentTime=X)},10),g(!0)}catch(X){console.error("Playback error:",X),N.current=null}},P=X=>{const ee=Math.floor(X/60),K=Math.floor(X%60),b=Math.floor(X%1*1e3);return`${ee}:${K.toString().padStart(2,"0")}.${b.toString().padStart(3,"0")}`},ce=X=>{if(!k.current)return;const ee=Math.max(0,Math.min(C,c+X));k.current.currentTime=ee,N.current=ee,n(ee),d(ee)},ye=X=>{X.preventDefault();const ee=prompt("Enter time (mm:ss.ms):",P(c));if(ee)try{const[K,b]=ee.split(":"),[q,ne]=b.split("."),me=parseInt(K,10)||0,he=parseInt(q,10)||0,Ie=parseInt(ne,10)||0,Re=me*60+he+Ie/1e3;Re>=0&&Re<=C?k.current&&(k.current.currentTime=Re,N.current=Re,n(Re),d(Re)):alert(`Please enter a time between 0:00.000 and ${P(C)}`)}catch{alert("Invalid time format. Please use mm:ss.ms")}},ge=()=>{L(!0),p&&k.current&&k.current.pause()},le=()=>{L(!1),p&&k.current&&(N.current=k.current.currentTime,k.current.play().catch(X=>console.error("Resume error:",X)))};return E.jsx("div",{className:"music-panel",children:E.jsxs("div",{className:"music-controls",children:[E.jsx("div",{className:"music-upload",children:E.jsxs("label",{className:"upload-button",children:[E.jsx(zp,{className:"icon"}),E.jsx("span",{children:"Upload Music"}),E.jsx("input",{type:"file",accept:"audio/*",onChange:async X=>{const ee=X.target.files[0];if(ee){const K=URL.createObjectURL(ee);B(ee.name),$(!0);try{const b=await D(K);console.log(`Final detected BPM: ${b}`),e(b)}catch(b){console.error("BPM detection failed:",b),e(120)}finally{$(!1)}r(K),n(0),k.current&&(k.current.src=K,k.current.currentTime=0)}},className:"hidden-input"})]})}),E.jsxs("div",{className:"bpm-control",children:[E.jsx(vb,{onBPMChange:e,isAnalyzing:Q}),Q&&E.jsxs("div",{className:"bpm-analyzer",children:[E.jsx(p1,{className:"spinner",size:18}),E.jsx("span",{children:"Analyzing beat..."})]}),E.jsxs("div",{className:"manual-bpm",children:[E.jsxs("label",{children:[E.jsx("span",{children:"AUTO-BPM"}),E.jsx("span",{children:"DETECTION:"})]}),E.jsx("input",{type:"number",min:"60",max:"180",value:t,onChange:X=>e(parseInt(X.target.value)),className:"bpm-input"})]})]}),E.jsxs("div",{className:"music-player",children:[E.jsx("audio",{ref:k,src:a,onTimeUpdate:M,preload:"auto"}),a&&E.jsx("div",{className:"music-info",children:E.jsx("span",{children:V||"Track Title"})}),E.jsx("button",{className:"audio-control-button",onClick:O,children:p?E.jsx(a0,{size:32}):E.jsx(l0,{size:32})}),a&&E.jsx(zR,{audioUrl:a,audioRef:i,onStartPointChange:X=>{const ee=Math.round(X*1e3)/1e3;N.current=ee,n(ee),k.current&&(k.current.currentTime=ee)},musicStartPoint:u}),E.jsx("div",{className:"current-time-indicator",children:P(c)}),E.jsxs("div",{className:"audio-progress",children:[E.jsxs("div",{className:"time-display",children:[E.jsx("span",{onClick:ye,style:{cursor:"pointer"},title:"Click to enter exact time",children:P(c)}),E.jsx("span",{children:P(C)})]}),E.jsx("input",{type:"range",min:"0",max:C||100,step:"0.001",value:c,onMouseDown:ge,onMouseUp:le,onTouchStart:ge,onTouchEnd:le,onChange:X=>{const ee=parseFloat(X.target.value);k.current&&(k.current.currentTime=ee,N.current=ee,Z&&n(ee),d(ee))},className:"progress-slider",style:{background:`linear-gradient(to right, #4682B4 ${c/C*100}%, #e5e5e5 ${c/C*100}%)`}})]}),E.jsx("button",{className:"direct-time-input",onClick:ye,children:"Enter Exact Time"}),E.jsxs("div",{className:"fine-tune-controls",children:[E.jsxs("div",{className:"btn-group-negative",children:[E.jsx("button",{onClick:()=>ce(-.001),className:"fine-tune-button",title:"Back 1 millisecond",children:"-1ms"}),E.jsx("button",{onClick:()=>ce(-.01),className:"fine-tune-button",title:"Back 10 milliseconds",children:"-10ms"}),E.jsx("button",{onClick:()=>ce(-.1),className:"fine-tune-button",title:"Back 100 milliseconds",children:"-100ms"})]}),E.jsxs("div",{className:"btn-group-positive",children:[E.jsx("button",{onClick:()=>ce(.001),className:"fine-tune-button",title:"Forward 1 millisecond",children:"+1ms"}),E.jsx("button",{onClick:()=>ce(.01),className:"fine-tune-button",title:"Forward 10 milliseconds",children:"+10ms"}),E.jsx("button",{onClick:()=>ce(.1),className:"fine-tune-button",title:"Forward 100 milliseconds",children:"+100ms"})]})]}),E.jsxs("div",{className:"frame-navigation",children:[E.jsxs("button",{onClick:()=>ce(-.033),className:"frame-button",title:"Previous frame (1/30 second)",children:[E.jsx(ni,{size:16}),"Frame"]}),E.jsxs("button",{onClick:()=>ce(.033),className:"frame-button",title:"Next frame (1/30 second)",children:["Frame",E.jsx(vs,{size:16})]})]}),E.jsxs("div",{className:"volume-control",children:[E.jsx(O1,{size:20}),E.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:_,onChange:X=>{const ee=parseFloat(X.target.value);k.current&&(k.current.volume=ee),T(ee)},className:"volume-slider"})]})]})]})})},wb=({currentIndex:r,totalSlides:e,onProgressClick:t})=>(console.log("Rendering ProgressBar",{currentIndex:r,totalSlides:e,bars:[...Array(e)].map((n,i)=>({index:i,isActive:i===r}))}),E.jsx("div",{className:"progress-container",children:[...Array(e)].map((n,i)=>E.jsx("div",{className:`progress-bar ${i===r?"active":""}`,style:{backgroundColor:i===r?"white":"rgba(255,255,255,0.3)"},onClick:()=>t(i)},i))})),Eb=({onPrevious:r,onNext:e,isFirstSlide:t,isLastSlide:n})=>E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:r,className:"nav-button prev",disabled:t,children:E.jsx(ni,{})}),E.jsx("button",{onClick:e,className:"nav-button next",disabled:n,children:E.jsx(vs,{})})]}),Tb=({onFileUpload:r})=>E.jsx("div",{className:"empty-state",children:E.jsxs("label",{htmlFor:"file-upload",className:"file-upload-label",children:[E.jsx(ZI,{size:48}),E.jsx("span",{children:"Add Images"}),E.jsx("input",{type:"file",id:"file-upload",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]})}),Ib=({isOpen:r,progress:e,message:t})=>r?E.jsx("div",{className:"modal-overlay",children:E.jsx("div",{className:"modal-content export-progress",children:E.jsxs("div",{className:"loading-container",children:[E.jsx("h3",{className:"progress-title",children:t}),E.jsx("div",{className:"progress-bar-container",children:E.jsx("div",{className:"progress-bar-fill",style:{width:`${e||0}%`,transition:"width 0.3s ease-in-out"}})}),E.jsxs("div",{className:"progress-percentage",children:[Math.round(e||0),"%"]})]})})}):null,Sb=({isOpen:r,onClose:e})=>{const[t,n]=ae.useState(null),[i,a]=ae.useState(""),[u,c]=ae.useState(!0);ae.useEffect(()=>{r&&(async()=>{try{if(console.group(" License Fetch Debugging"),console.log("Firestore DB:",ep),console.log("Modal Open:",r),!ep){console.error(" Firestore DB not initialized");return}const T=VN(ep,"content","license");console.log(" Document Reference:",T);try{const C=await GN(T);if(console.log(" Document Exists:",C.exists()),C.exists()){const x=C.data();console.log(" License Data:",x),x&&x.text?(console.log(" License Text Found"),a(x.text)):(console.warn(" No text field in license document"),a("No license text found."))}else console.warn(" No such document in Firestore"),a("License document does not exist.")}catch(C){if(console.error(" Snapshot Error:",C),C.code==="unavailable"){console.log(" Offline mode: Attempting to use cached data");const x=await getDocFromCache(T);if(x.exists()){const k=x.data();a(k.text||"Cached license text")}else a("License unavailable offline")}else a(`Error loading license: ${C.message}`)}}catch(T){console.error(" Detailed Firebase Error:",T),a(`Error loading license: ${T.message}`)}finally{console.groupEnd(),c(!1)}})()},[r]);const d=_=>{n(_)},p=()=>{n(null)},g=()=>{switch(t){case"credits":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"Credits"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"credits-content",children:[E.jsxs("div",{className:"developer-profile",children:[E.jsx("div",{className:"developer-avatar",children:E.jsx(qI,{size:64})}),E.jsx("h3",{children:"Ben Hayes"}),E.jsx("p",{className:"developer-title",children:"Creator & Developer"})]}),E.jsxs("div",{className:"company-info",children:[E.jsx("h4",{children:"Hayzer Apps"}),E.jsx("p",{children:"Groove Slider was designed, developed, and maintained by Ben Hayes as the sole developer."})]}),E.jsxs("div",{className:"developer-note",children:[E.jsx("p",{children:"From concept to implementation, every aspect of this app was crafted to provide an elegant way to create musical slideshows of your favorite moments."}),E.jsx("p",{children:"I hope you enjoy using Groove Slider as much as I enjoyed creating it."})]}),E.jsxs("div",{className:"contact-section",children:[E.jsx("h4",{children:"Connect"}),E.jsx("p",{children:"Have feedback or suggestions? I'd love to hear from you!"}),E.jsx("p",{children:"Email: contact@hayzerapps.com"})]})]})})]});case"feedback":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"Feedback"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"feedback-form",children:[E.jsx("p",{children:"We'd love to hear your thoughts on Groove Slider!"}),E.jsx("textarea",{placeholder:"Share your feedback here...",className:"feedback-textarea",rows:6}),E.jsx("button",{className:"submit-button",children:"Submit Feedback"})]})})]});case"restore":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"Restore Purchase"})]}),E.jsxs("div",{className:"section-body",children:[E.jsx("p",{children:"Tap the button below to restore your previous purchases."}),E.jsx("button",{className:"restore-button",children:"Restore Purchases"})]})]});case"unsubscribe":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"How to Unsubscribe"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"unsubscribe-info",children:[E.jsx("p",{children:"For information on how to manage or cancel your subscription, please visit Google's official support page:"}),E.jsx("button",{className:"external-link-button",onClick:()=>window.open("https://support.google.com/googleplay/answer/7018481?hl=en&co=GENIE.Platform%3DAndroid","_blank"),children:"Google Play Subscription Help"})]})})]});case"privacy":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"Privacy Policy"})]}),E.jsx("div",{className:"section-body",children:E.jsxs("div",{className:"privacy-content",children:[E.jsx("h3",{children:"Privacy Policy for Groove Slider"}),E.jsx("p",{children:"Last Updated: March 2, 2025"}),E.jsx("h4",{children:"Introduction"}),E.jsx("p",{children:"Welcome to Groove Slider. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we handle your data when you use our application and tell you about your privacy rights."}),E.jsx("h4",{children:"What Data We Collect"}),E.jsx("p",{children:"Groove Slider requires access to the following on your device:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Image files (photos, pictures) that you select to include in your slideshows"}),E.jsx("li",{children:"Audio files (music, sounds) that you select to add to your slideshows"})]}),E.jsx("h4",{children:"How We Use Your Data"}),E.jsx("p",{children:"We use your data for the following purposes:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"To create slideshows with your selected images"}),E.jsx("li",{children:"To add your selected music to your slideshows"}),E.jsx("li",{children:"To export these slideshows as MP4 video files to your device"})]}),E.jsx("h4",{children:"Data Processing"}),E.jsx("p",{children:"All data processing happens locally on your device. Your images and music:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Are not uploaded to our servers"}),E.jsx("li",{children:"Are not shared with third parties"}),E.jsx("li",{children:"Are only accessed when you explicitly grant permission"}),E.jsx("li",{children:"Are only used for the purpose of creating and exporting your slideshows"})]}),E.jsx("h4",{children:"Storage"}),E.jsx("p",{children:"The app stores:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Temporary copies of your selected images and music while processing"}),E.jsx("li",{children:"Your slideshow settings and preferences"}),E.jsx("li",{children:"Completed MP4 video files that are saved to your device storage"})]}),E.jsx("h4",{children:"Third-Party Services"}),E.jsx("p",{children:"Our app does not integrate with third-party analytics or advertising services."}),E.jsx("h4",{children:"Your Rights"}),E.jsx("p",{children:"You have the right to:"}),E.jsxs("ul",{children:[E.jsx("li",{children:"Delete your saved slideshows and preferences by uninstalling the app"}),E.jsx("li",{children:"Control what files you share with the app through your device permissions"})]}),E.jsx("h4",{children:"Children's Privacy"}),E.jsx("p",{children:"Our service is not directed to anyone under the age of 13. We do not knowingly collect personal information from children."}),E.jsx("h4",{children:"Changes to This Privacy Policy"}),E.jsx("p",{children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'}),E.jsx("h4",{children:"Contact Us"}),E.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us at: contact@grooveslider.app"})]})})]});case"license":return E.jsxs("div",{className:"section-content",children:[E.jsxs("header",{className:"section-header",children:[E.jsx("button",{className:"back-button",onClick:p,children:E.jsx(ni,{size:24})}),E.jsx("h2",{children:"License Agreement"})]}),E.jsx("div",{className:"section-body",children:E.jsx("div",{className:"license-content",children:u?E.jsx("p",{children:"Loading license..."}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{children:"End User License Agreement"}),E.jsx("p",{children:"Last Updated: March 2, 2025"}),E.jsx("div",{className:"license-text",children:i||"No license text available."})]})})})]});default:return null}};return E.jsx("div",{className:"modal-overlay",children:E.jsx("div",{className:"info-modal",children:t?g():E.jsxs(E.Fragment,{children:[E.jsxs("header",{className:"info-header",children:[E.jsx("h2",{children:"Settings"}),E.jsx("button",{className:"close-button",onClick:e,children:E.jsx(oo,{size:24})})]}),E.jsxs("div",{className:"info-content",children:[E.jsxs("div",{className:"pro-banner",children:[E.jsxs("div",{className:"pro-text",children:[E.jsxs("h3",{children:["Groove Slider ",E.jsx("span",{className:"pro-badge",children:"Pro"})]}),E.jsx("p",{children:"Unlock All Features"})]}),E.jsx("div",{className:"pro-image",children:E.jsx("div",{style:{width:80,height:80,background:"rgba(255,255,255,0.2)",borderRadius:"8px"}})})]}),E.jsxs("div",{className:"info-item-group",children:[E.jsxs("div",{className:"info-item",onClick:()=>d("credits"),children:[E.jsx(c1,{className:"info-icon"}),E.jsxs("div",{className:"info-text",children:[E.jsx("h4",{children:"Credits"}),E.jsx("p",{children:"About"})]}),E.jsx(vs,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>d("feedback"),children:[E.jsx(v1,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Feedback"})}),E.jsx(vs,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>d("restore"),children:[E.jsx(k1,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Restore Purchase"})}),E.jsx(vs,{})]})]}),E.jsxs("div",{className:"info-item-group",children:[E.jsxs("div",{className:"info-item",onClick:()=>d("unsubscribe"),children:[E.jsx(e1,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"How to unsubscribe"})}),E.jsx(vs,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>d("privacy"),children:[E.jsx(g1,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"Privacy Policy"})}),E.jsx(vs,{})]}),E.jsxs("div",{className:"info-item",onClick:()=>d("license"),children:[E.jsx(o1,{className:"info-icon"}),E.jsx("div",{className:"info-text",children:E.jsx("h4",{children:"License"})}),E.jsx(vs,{})]}),E.jsxs("div",{className:"info-item",children:[E.jsx(l1,{className:"info-icon"}),E.jsxs("div",{className:"info-text",children:[E.jsx("h4",{children:"Version"}),E.jsx("p",{children:"Version 0.9.0 (Beta)"})]})]})]})]})]})})})},Cb=({isVisible:r,onClose:e})=>r?E.jsx("div",{className:"share-notification",children:E.jsxs("div",{className:"share-content",children:[E.jsx("h3",{children:"Export Complete! "}),E.jsx("p",{children:"Share your creation:"}),E.jsxs("div",{className:"share-buttons",children:[E.jsx("button",{onClick:()=>window.open("https://instagram.com","_blank"),className:"share-button instagram",children:"Share to Instagram"}),E.jsx("button",{onClick:()=>window.open("https://tiktok.com","_blank"),className:"share-button tiktok",children:"Share to TikTok"})]}),E.jsx("button",{onClick:e,className:"close-notification",children:E.jsx(oo,{size:20})})]})}):null,xT=({stories:r,onClose:e,onReorder:t,onDelete:n})=>{const[i,a]=ae.useState(r.map((V,B)=>B+1)),[u,c]=ae.useState(null),[d,p]=ae.useState(null),[g,_]=ae.useState(!1),T=V=>{c(u===V?null:V)},C=(V,B)=>{u===B&&(_(!0),V.currentTarget.style.cursor="grabbing")},x=(V,B)=>{V.preventDefault(),g&&u!==null&&u!==B&&p(B)},k=V=>{if(u!==null&&u!==V){const B=[...r],[Q]=B.splice(u,1);B.splice(V,0,Q);const $=B.map((Z,L)=>L+1);a($),t(B),c(null),p(null),_(!1)}};return E.jsxs("div",{className:"edit-panel",children:[E.jsxs("div",{className:"edit-panel-header",children:[E.jsx("h3",{children:"Re-order (tap, drap, drop)"}),E.jsx("button",{className:"edit-panel-close",onClick:e,children:E.jsx(oo,{size:20})})]}),E.jsx("div",{className:"thumbnails-container",children:r.map((V,B)=>E.jsx("div",{className:`thumbnail ${u===B?"selected":""}
${d===B?"drag-over":""}`,onClick:()=>T(B),onMouseDown:Q=>C(Q,B),onTouchStart:Q=>C(Q,B),onDragOver:Q=>x(Q,B),onMouseOver:Q=>g&&x(Q,B),onTouchMove:Q=>{const $=Q.touches[0],L=document.elementFromPoint($.clientX,$.clientY).closest(".thumbnail");if(L){const U=Array.from(L.parentNode.children).indexOf(L);x(Q,U)}},onMouseUp:()=>k(B),onTouchEnd:()=>d!==null&&k(d),draggable:u===B,children:E.jsxs("div",{className:"thumbnail-content",children:[E.jsx("button",{className:"delete-button",onClick:Q=>{Q.stopPropagation(),n(B)},children:E.jsx(oo,{size:16})}),E.jsxs("div",{className:"image-thumbnail",children:[E.jsx("img",{src:V.url,alt:`Slide ${B+1}`}),u===B&&E.jsx("div",{className:"selection-dot"})]})]})},B))})]})},xb=({onFileUpload:r,onSaveSession:e,onExportSession:t,onPlayPause:n,isPlaying:i,duration:a,onDurationChange:u,onEdit:c,onMusicUpload:d,onBPMChange:p,musicUrl:g,bpm:_,onStartPointChange:T,musicStartPoint:C,audioRef:x,isLoopingEnabled:k,setIsLoopingEnabled:V,showEditPanel:B,setShowEditPanel:Q,stories:$,setStories:Z,handleDelete:L,handleReorder:U})=>{const[R,I]=ae.useState(!1),[N,D]=ae.useState(!1),[M,O]=ae.useState(1);ae.useEffect(()=>{const X=[.125,.25,.5,1,2,4,8,16].find(ee=>Math.abs(a*_/(4*60)-ee)<.01);X&&O(X)},[a,_]);const P=(le,X)=>le*4*60/X,ce=()=>{I(!R),N&&D(!1),B&&Q(!1)},ye=()=>{D(!N),R&&I(!1),B&&Q(!1)},ge=()=>{Q(!B),R&&I(!1),N&&D(!1)};return E.jsxs("div",{className:"bottom-menu w-full flex flex-col items-stretch",children:[R&&E.jsx("div",{className:"duration-panel",children:E.jsxs("div",{className:"duration-controls",children:[E.jsx("h3",{children:"Bar-Based Slide Transitions"}),E.jsx("div",{className:"bar-options",children:[{value:.125,label:" Bar"},{value:.25,label:" Bar"},{value:.5,label:" Bar"},{value:1,label:"1 Bar"},{value:2,label:"2 Bars"},{value:4,label:"4 Bars"},{value:8,label:"8 Bars"},{value:16,label:"16 Bars"}].map(le=>E.jsx("button",{className:`bar-option ${M===le.value?"selected":""}`,onClick:()=>{const X=P(le.value,_);O(le.value),u(X)},children:le.label},le.value))}),E.jsxs("div",{className:"duration-info",children:[E.jsx("span",{children:"Slide Change Speed:"}),E.jsxs("span",{className:"time-info",children:[a.toFixed(2),"s /",_," BPM"]})]})]})}),N&&E.jsx(_b,{audioRef:x,onUpload:d,onBPMChange:p,currentBPM:_,onStartPointChange:T,musicStartPoint:C,musicUrl:g}),B&&E.jsx(xT,{stories:$,onClose:()=>Q(!1),onReorder:le=>{Z(le),U(le)},onDelete:L}),E.jsxs("div",{className:"bottom-menu-buttons",children:[E.jsxs("button",{className:`bottom-menu-button ${k?"active":""}`,onClick:()=>V(!k),"data-loop":"true",children:[E.jsx(C1,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Loop"})]}),E.jsxs("button",{className:`bottom-menu-button ${R?"active":""}`,onClick:ce,children:[E.jsx(i0,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Speed"})]}),E.jsxs("button",{className:`bottom-menu-button ${N?"active":""}`,onClick:ye,children:[E.jsx(zp,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Music"})]}),E.jsxs("button",{className:`bottom-menu-button ${i?"active":""}`,onClick:n,children:[i?E.jsx(a0,{className:"bottom-menu-icon"}):E.jsx(l0,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:i?"Pause":"Play"})]}),E.jsxs("div",{className:"bottom-menu-right-group",children:[E.jsxs("button",{className:`bottom-menu-button ${B?"active":""}`,onClick:ge,children:[E.jsx(D1,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Edit"})]}),E.jsxs("label",{className:"bottom-menu-button",children:[E.jsx(d1,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Add"}),E.jsx("input",{type:"file",id:"file-upload-bottom",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]}),E.jsxs("button",{className:"bottom-menu-button",onClick:e,children:[E.jsx(u0,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Save"})]}),E.jsxs("button",{className:"bottom-menu-button",onClick:t,children:[E.jsx(o0,{className:"bottom-menu-icon"}),E.jsx("span",{className:"bottom-menu-text",children:"Export"})]})]})]})]})},Ab=()=>{const[r,e]=ae.useState(!0),[t,n]=ae.useState(0),[i,a]=ae.useState([]),[u,c]=ae.useState(!1),[d,p]=ae.useState(2),[g,_]=ae.useState(!1),[T,C]=ae.useState(!1),[x,k]=ae.useState(!1),[V,B]=ae.useState(null),[Q,$]=ae.useState(!1),[Z,L]=ae.useState(!1),[U,R]=ae.useState(!1),[I,N]=ae.useState("cover"),[D,M]=ae.useState(!1),[O,P]=ae.useState(!1),[ce,ye]=ae.useState(null),[ge,le]=ae.useState(""),[X,ee]=ae.useState(!1),[K,b]=ae.useState(null),[q,ne]=ae.useState(120),[me,he]=ae.useState(0),[Ie,Re]=ae.useState(!0),[de,Be]=ae.useState({}),[tt,bt]=ae.useState(null),[Gt,vn]=ae.useState(null),je=ae.useRef(null),Hn=ae.useRef(null),un=()=>{i.length>0?window.confirm("Start a new project? Any unsaved changes will be lost.")&&(br(),e(!1)):e(!1)},br=()=>{a([]),n(0),b(null),je.current&&(je.current.pause(),je.current.src=""),c(!1),ne(120),he(0),p(2),Re(!1)},ut=ke=>new Promise((Ve,He)=>{const rt=new Image;rt.onload=()=>Ve(ke),rt.onerror=He,rt.src=ke});ae.useEffect(()=>{const ke=async()=>{const Ve=[t-1,t,t+1].filter(He=>He>=0&&He<i.length);for(const He of Ve)if(!de[i[He].url])try{await ut(i[He].url),Be(rt=>({...rt,[i[He].url]:!0}))}catch(rt){console.error("Failed to preload image:",rt)}};i.length>0&&ke()},[t,i]),ae.useEffect(()=>{r0().catch(console.error)},[]);const _n=ke=>{const Ve=Array.from(ke.target.files).filter(rt=>rt.type.startsWith("image/"));if(Ve.length===0){alert("Please select image files only.");return}const He=Ve.map(rt=>({type:"image",url:URL.createObjectURL(rt)}));a(rt=>[...rt,...He]),ke.target.value=""},Dn=ke=>{b(ke),he(0),je.current&&(je.current.src=ke,je.current.currentTime=0)},cn=ke=>{ne(ke);const rt=([.125,.25,.5,1,2,4,8,16].find(hr=>Math.abs(d*ke/(4*60)-hr)<.01)||1)*4*60/ke;p(rt)},ur=()=>{Hn.current=setInterval(()=>{n(ke=>!Ie&&ke>=i.length-1?(hn(),c(!1),je.current&&je.current.pause(),ke):(ke+1)%i.length)},d*1e3)},hn=()=>{Hn.current&&clearInterval(Hn.current)},Vr=async()=>{if(u)hn(),je.current&&je.current.pause(),c(!1);else{if(t===i.length-1&&n(0),ur(),je.current&&K){const ke=me;je.current.currentTime=ke;try{await je.current.play(),setTimeout(()=>{Math.abs(je.current.currentTime-ke)>.01&&(console.log("Correcting audio timing drift on play"),je.current.currentTime=ke)},10)}catch(Ve){console.log("Play error:",Ve)}}c(!0)}};ae.useEffect(()=>()=>hn(),[]),ae.useEffect(()=>{u&&(hn(),ur())},[d]);const Mr=()=>{t<i.length-1&&n(t+1)},nt=()=>{t>0&&n(t-1)},ct=ke=>bt(ke.touches[0].clientX),wn=ke=>vn(ke.touches[0].clientX),wi=()=>{if(!tt||!Gt)return;const ke=tt-Gt,Ve=ke>50,He=ke<-50;Ve&&t<i.length-1&&Mr(),He&&t>0&&nt(),bt(null),vn(null)},cr=ke=>{u&&(hn(),c(!1),je.current&&je.current.pause()),n(0),a(ke)},Or=ke=>{const Ve=i.filter((He,rt)=>rt!==ke);a(Ve),t>=ke&&n(Math.max(0,t-1))},ns=(ke,Ve,He)=>He!=="cover"?`scale=${ke}:${Ve}:force_original_aspect_ratio=1,pad=${ke}:${Ve}:(ow-iw)/2:(oh-ih)/2:black`:`scale=iw*max(${ke}/iw\\,${Ve}/ih):ih*max(${ke}/iw\\,${Ve}/ih),crop=${ke}:${Ve}`,Ei=async ke=>{try{u&&(hn(),je.current&&je.current.pause(),c(!1));const Ve=await FR(ke);a(Ve.stories),ne(Ve.bpm),p(Ve.duration),Re(Ve.isLoopingEnabled),n(Ve.currentIndex),N(Ve.imageFitMode||"cover"),Ve.musicUrl&&(b(Ve.musicUrl),he(Ve.musicStartPoint),je.current&&(je.current.src=Ve.musicUrl,je.current.currentTime=Ve.musicStartPoint)),r&&e(!1),alert("Session loaded successfully!")}catch(Ve){console.error("Error loading session:",Ve),alert("Failed to load session: "+Ve.message)}},Ti=async ke=>{const Ve={...ke},{resolution:He="1080x1920",isExportLoopEnabled:rt=!1,exportLoopDuration:hr=0}=Ve;try{let Vt,bn="untitled.mp4";if("showSaveFilePicker"in window)Vt=await window.showSaveFilePicker({suggestedName:bn,types:[{description:"MP4 Video",accept:{"video/mp4":[".mp4"]}}]});else{const It=document.createElement("a");It.download=bn,Vt={createWritable:async()=>({write:async St=>{const Qn=URL.createObjectURL(new Blob([St],{type:"video/mp4"}));It.href=Qn,It.click(),URL.revokeObjectURL(Qn)},close:async()=>{}})}}P(!0),ee(!0),le("Preparing to export video..."),ye(0),$n.loaded||await r0();let dr=[];const Vn=[],[Si,rs]=He.split("x").map(Number),Ci=i.length*d,Mn=rt&&hr>0?Math.ceil(hr/Ci):1;for(let It=0;It<Mn;It++)for(let St=0;St<i.length;St++){const Qn=i[St];le(`Processing image ${St+1}/${i.length} (Loop ${It+1}/${Mn})`);const fr=`input_${It}_${St}.png`,Fr=`processed_${It}_${St}.mp4`;await $n.writeFile(fr,await qy(Qn.url)),dr.push(fr),await $n.exec(["-loop","1","-i",fr,"-c:v","libx264","-t",`${d}`,"-pix_fmt","yuv420p","-vf",ns(Si,rs,I),"-r","30","-preset","ultrafast",Fr]),dr.push(Fr),Vn.push({name:Fr}),ye((It*i.length+St+1)/(Mn*i.length)*75)}if(await $n.writeFile("list.txt",Vn.map(It=>`file '${It.name}'`).join(`
`)),dr.push("list.txt"),le("Creating final video..."),ye(85),await $n.exec(["-f","concat","-safe","0","-i","list.txt","-c:v","copy","temp_output.mp4"]),dr.push("temp_output.mp4"),K){le("Adding background music...");try{await $n.writeFile("background.mp3",await qy(K)),await $n.exec(["-i","temp_output.mp4","-ss",String(me),"-i","background.mp3","-shortest","-map","0:v","-map","1:a","-c:v","copy","-c:a","aac","-b:a","192k","final_output.mp4"]),await $n.deleteFile("background.mp3"),await $n.deleteFile("temp_output.mp4")}catch(It){console.error("Music error:",It),await $n.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"])}}else await $n.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"]);le("Preparing download..."),ye(95);const xi=await $n.readFile("final_output.mp4");ye(100);const ht=await Vt.createWritable();await ht.write(new Blob([xi.buffer],{type:"video/mp4"})),await ht.close(),ee(!1),P(!1),M(!0)}catch(Vt){console.error("Export error:",Vt),ee(!1),P(!1),alert(`Export failed: ${Vt.message}`)}},Ii=async ke=>{try{ee(!0),le("Saving session..."),ye(10);const Ve={name:ke,stories:i,musicUrl:K,bpm:q,musicStartPoint:me,imageFitMode:I,duration:d,isLoopingEnabled:Ie,currentIndex:t};ye(40),await OR(Ve),ye(100),le("Session saved successfully!"),setTimeout(()=>{ee(!1),alert("Session saved successfully!")},1e3)}catch(Ve){console.error("Error saving session to database:",Ve),ee(!1),alert(`Failed to save session: ${Ve.message}`)}};return E.jsx(E.Fragment,{children:r?E.jsx(yb,{onCreateSlideshow:un,onLoadSession:Ei,onClose:()=>e(!1)}):E.jsx("div",{className:"app-container",children:E.jsx("div",{className:"app-content",children:E.jsxs("div",{className:"slider-container",children:[E.jsxs("div",{className:"title-bar",children:[E.jsx("h1",{className:"slider-title",children:"Groove Slider"}),E.jsx("button",{onClick:()=>e(!0),className:"projects-button",children:"back"})]}),E.jsx("audio",{ref:je,src:K,loop:!0}),i.length===0?E.jsx(Tb,{onFileUpload:_n}):E.jsxs("div",{className:"story-container",onTouchStart:ct,onTouchMove:wn,onTouchEnd:wi,children:[E.jsx("div",{className:"story-slide",children:E.jsx("div",{className:"media-wrapper",children:E.jsxs("div",{className:"image-container",style:{position:"relative",width:"100%",height:"100%"},children:[E.jsx("button",{className:"image-fit-toggle",onClick:ke=>{ke.preventDefault(),console.log("Image fit button clicked"),N(Ve=>{const He=Ve==="cover"?"contain":"cover";return console.log("New image fit mode:",He),He})},children:I==="cover"?E.jsx(w1,{}):E.jsx(s1,{})}),i[t]&&i[t].url?E.jsx("img",{src:i[t].url,alt:`Slide ${t+1}`,className:"media-content",style:{objectFit:I,width:"100%",height:"100%",display:"block"},loading:"eager"}):E.jsx("div",{className:"empty-image-placeholder",style:{backgroundColor:"#f5f5f5",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#333"},children:"Select an image to display"})]})})}),E.jsx(Eb,{onPrevious:nt,onNext:Mr,isFirstSlide:t===0,isLastSlide:t===i.length-1}),E.jsx(wb,{currentIndex:t,totalSlides:i.length,onProgressClick:ke=>{console.log("Current Index:",t),console.log("Clicked Index:",ke),console.log("Total Stories:",i.length),n(ke)}})]}),E.jsx(xb,{audioRef:je,onFileUpload:_n,onSaveSession:()=>$(!0),onExportSession:()=>k(!0),onPlayPause:Vr,isPlaying:u,duration:d,onDurationChange:p,onEdit:()=>C(!T),onMusicUpload:Dn,onBPMChange:cn,musicUrl:K,bpm:q,onStartPointChange:he,musicStartPoint:me,onMusicPanelToggle:()=>setShowMusicPanel(!showMusicPanel),isLoopingEnabled:Ie,setIsLoopingEnabled:Re,showEditPanel:T,setShowEditPanel:C,stories:i,setStories:a,handleDelete:Or,handleReorder:cr}),T&&E.jsx(xT,{stories:i,onClose:()=>C(!T),onReorder:cr,onDelete:Or}),E.jsx(VR,{isOpen:x,progress:ce,message:ge,onClose:()=>k(!1),onExport:Ti,isExporting:O}),E.jsx(MR,{isOpen:Q,onClose:()=>$(!1),onSave:Ii}),E.jsx(Ib,{isOpen:X,progress:ce,message:ge}),E.jsx(Cb,{isVisible:D,onClose:()=>M(!1)})]})})})})};function Nb({installPrompt:r,onInstallClick:e}){return E.jsxs("div",{className:"app-container",children:[r&&E.jsx("button",{onClick:e,style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Install App"}),E.jsx(Ab,{})]})}function Rb(){const[r,e]=ae.useState(null);ae.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{console.log("Attempting to register service worker"),console.log("Current origin:",window.location.origin),console.log("Current pathname:",window.location.pathname);const a=await navigator.serviceWorker.register("/groove-slider-img/sw.js",{scope:"/groove-slider-img/",type:"classic"});console.log("Service Worker registered successfully:",a),console.log("Registration scope:",a.scope)}catch(a){console.error("Service Worker registration failed:",a),console.error("Full error:",JSON.stringify(a,Object.getOwnPropertyNames(a)))}});const n=a=>{a.preventDefault(),e(a)},i=a=>{console.log("App was successfully installed")};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",i)}},[]);const t=async()=>{if(r){r.prompt();const{outcome:n}=await r.userChoice;console.log(n==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null)}};return E.jsx(ae.StrictMode,{children:E.jsx(Nb,{installPrompt:r,onInstallClick:t})})}jI.createRoot(document.getElementById("root")).render(E.jsx(Rb,{}));
