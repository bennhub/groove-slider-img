import{F as PI,f as qy}from"./ffmpeg.C6phY-E3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Mf={exports:{}},Sl={},Of={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function kI(){if(Wy)return Fe;Wy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,V={};function M(L,Y,ge){this.props=L,this.context=Y,this.refs=V,this.updater=ge||C}M.prototype.isReactComponent={},M.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function B(){}B.prototype=M.prototype;function K(L,Y,ge){this.props=L,this.context=Y,this.refs=V,this.updater=ge||C}var q=K.prototype=new B;q.constructor=K,A(q,M.prototype),q.isPureReactComponent=!0;var X=Array.isArray,F=Object.prototype.hasOwnProperty,z={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(L,Y,ge){var Re,pe={},Ve=null,Oe=null;if(Y!=null)for(Re in Y.ref!==void 0&&(Oe=Y.ref),Y.key!==void 0&&(Ve=""+Y.key),Y)F.call(Y,Re)&&!R.hasOwnProperty(Re)&&(pe[Re]=Y[Re]);var he=arguments.length-2;if(he===1)pe.children=ge;else if(1<he){for(var qe=Array(he),Ze=0;Ze<he;Ze++)qe[Ze]=arguments[Ze+2];pe.children=qe}if(L&&L.defaultProps)for(Re in he=L.defaultProps,he)pe[Re]===void 0&&(pe[Re]=he[Re]);return{$$typeof:r,type:L,key:Ve,ref:Oe,props:pe,_owner:z.current}}function N(L,Y){return{$$typeof:r,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function b(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function k(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ge){return Y[ge]})}var D=/\/+/g;function P(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):Y.toString(36)}function ae(L,Y,ge,Re,pe){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(Ve){case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case r:case e:Oe=!0}}if(Oe)return Oe=L,pe=pe(Oe),L=Re===""?"."+P(Oe,0):Re,X(pe)?(ge="",L!=null&&(ge=L.replace(D,"$&/")+"/"),ae(pe,Y,ge,"",function(Ze){return Ze})):pe!=null&&(b(pe)&&(pe=N(pe,ge+(!pe.key||Oe&&Oe.key===pe.key?"":(""+pe.key).replace(D,"$&/")+"/")+L)),Y.push(pe)),1;if(Oe=0,Re=Re===""?".":Re+":",X(L))for(var he=0;he<L.length;he++){Ve=L[he];var qe=Re+P(Ve,he);Oe+=ae(Ve,Y,ge,qe,pe)}else if(qe=E(L),typeof qe=="function")for(L=qe.call(L),he=0;!(Ve=L.next()).done;)Ve=Ve.value,qe=Re+P(Ve,he++),Oe+=ae(Ve,Y,ge,qe,pe);else if(Ve==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Oe}function fe(L,Y,ge){if(L==null)return L;var Re=[],pe=0;return ae(L,Re,"","",function(Ve){return Y.call(ge,Ve,pe++)}),Re}function me(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(ge){(L._status===0||L._status===-1)&&(L._status=1,L._result=ge)},function(ge){(L._status===0||L._status===-1)&&(L._status=2,L._result=ge)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var le={current:null},J={transition:null},te={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:J,ReactCurrentOwner:z};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:fe,forEach:function(L,Y,ge){fe(L,function(){Y.apply(this,arguments)},ge)},count:function(L){var Y=0;return fe(L,function(){Y++}),Y},toArray:function(L){return fe(L,function(Y){return Y})||[]},only:function(L){if(!b(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Fe.Component=M,Fe.Fragment=t,Fe.Profiler=i,Fe.PureComponent=K,Fe.StrictMode=n,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Fe.act=ee,Fe.cloneElement=function(L,Y,ge){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Re=A({},L.props),pe=L.key,Ve=L.ref,Oe=L._owner;if(Y!=null){if(Y.ref!==void 0&&(Ve=Y.ref,Oe=z.current),Y.key!==void 0&&(pe=""+Y.key),L.type&&L.type.defaultProps)var he=L.type.defaultProps;for(qe in Y)F.call(Y,qe)&&!R.hasOwnProperty(qe)&&(Re[qe]=Y[qe]===void 0&&he!==void 0?he[qe]:Y[qe])}var qe=arguments.length-2;if(qe===1)Re.children=ge;else if(1<qe){he=Array(qe);for(var Ze=0;Ze<qe;Ze++)he[Ze]=arguments[Ze+2];Re.children=he}return{$$typeof:r,type:L.type,key:pe,ref:Ve,props:Re,_owner:Oe}},Fe.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Fe.createElement=I,Fe.createFactory=function(L){var Y=I.bind(null,L);return Y.type=L,Y},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(L){return{$$typeof:c,render:L}},Fe.isValidElement=b,Fe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:me}},Fe.memo=function(L,Y){return{$$typeof:p,type:L,compare:Y===void 0?null:Y}},Fe.startTransition=function(L){var Y=J.transition;J.transition={};try{L()}finally{J.transition=Y}},Fe.unstable_act=ee,Fe.useCallback=function(L,Y){return le.current.useCallback(L,Y)},Fe.useContext=function(L){return le.current.useContext(L)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(L){return le.current.useDeferredValue(L)},Fe.useEffect=function(L,Y){return le.current.useEffect(L,Y)},Fe.useId=function(){return le.current.useId()},Fe.useImperativeHandle=function(L,Y,ge){return le.current.useImperativeHandle(L,Y,ge)},Fe.useInsertionEffect=function(L,Y){return le.current.useInsertionEffect(L,Y)},Fe.useLayoutEffect=function(L,Y){return le.current.useLayoutEffect(L,Y)},Fe.useMemo=function(L,Y){return le.current.useMemo(L,Y)},Fe.useReducer=function(L,Y,ge){return le.current.useReducer(L,Y,ge)},Fe.useRef=function(L){return le.current.useRef(L)},Fe.useState=function(L){return le.current.useState(L)},Fe.useSyncExternalStore=function(L,Y,ge){return le.current.useSyncExternalStore(L,Y,ge)},Fe.useTransition=function(){return le.current.useTransition()},Fe.version="18.3.1",Fe}var Gy;function Bp(){return Gy||(Gy=1,Of.exports=kI()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function DI(){if(Ky)return Sl;Ky=1;var r=Bp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var g,v={},E=null,C=null;p!==void 0&&(E=""+p),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(C=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:c,key:E,ref:C,props:v,_owner:i.current}}return Sl.Fragment=t,Sl.jsx=u,Sl.jsxs=u,Sl}var Hy;function bI(){return Hy||(Hy=1,Mf.exports=DI()),Mf.exports}var T=bI(),ce=Bp(),Oc={},Ff={exports:{}},Tn={},Lf={exports:{}},jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function VI(){return Qy||(Qy=1,function(r){function e(J,te){var ee=J.length;J.push(te);e:for(;0<ee;){var L=ee-1>>>1,Y=J[L];if(0<i(Y,te))J[L]=te,J[ee]=Y,ee=L;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var te=J[0],ee=J.pop();if(ee!==te){J[0]=ee;e:for(var L=0,Y=J.length,ge=Y>>>1;L<ge;){var Re=2*(L+1)-1,pe=J[Re],Ve=Re+1,Oe=J[Ve];if(0>i(pe,ee))Ve<Y&&0>i(Oe,pe)?(J[L]=Oe,J[Ve]=ee,L=Ve):(J[L]=pe,J[Re]=ee,L=Re);else if(Ve<Y&&0>i(Oe,ee))J[L]=Oe,J[Ve]=ee,L=Ve;else break e}}return te}function i(J,te){var ee=J.sortIndex-te.sortIndex;return ee!==0?ee:J.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],g=1,v=null,E=3,C=!1,A=!1,V=!1,M=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(J){for(var te=t(p);te!==null;){if(te.callback===null)n(p);else if(te.startTime<=J)n(p),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(p)}}function X(J){if(V=!1,q(J),!A)if(t(d)!==null)A=!0,me(F);else{var te=t(p);te!==null&&le(X,te.startTime-J)}}function F(J,te){A=!1,V&&(V=!1,B(I),I=-1),C=!0;var ee=E;try{for(q(te),v=t(d);v!==null&&(!(v.expirationTime>te)||J&&!k());){var L=v.callback;if(typeof L=="function"){v.callback=null,E=v.priorityLevel;var Y=L(v.expirationTime<=te);te=r.unstable_now(),typeof Y=="function"?v.callback=Y:v===t(d)&&n(d),q(te)}else n(d);v=t(d)}if(v!==null)var ge=!0;else{var Re=t(p);Re!==null&&le(X,Re.startTime-te),ge=!1}return ge}finally{v=null,E=ee,C=!1}}var z=!1,R=null,I=-1,N=5,b=-1;function k(){return!(r.unstable_now()-b<N)}function D(){if(R!==null){var J=r.unstable_now();b=J;var te=!0;try{te=R(!0,J)}finally{te?P():(z=!1,R=null)}}else z=!1}var P;if(typeof K=="function")P=function(){K(D)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,fe=ae.port2;ae.port1.onmessage=D,P=function(){fe.postMessage(null)}}else P=function(){M(D,0)};function me(J){R=J,z||(z=!0,P())}function le(J,te){I=M(function(){J(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){A||C||(A=!0,me(F))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(J){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var ee=E;E=te;try{return J()}finally{E=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,te){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=E;E=J;try{return te()}finally{E=ee}},r.unstable_scheduleCallback=function(J,te,ee){var L=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?L+ee:L):ee=L,J){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,J={id:g++,callback:te,priorityLevel:J,startTime:ee,expirationTime:Y,sortIndex:-1},ee>L?(J.sortIndex=ee,e(p,J),t(d)===null&&J===t(p)&&(V?(B(I),I=-1):V=!0,le(X,ee-L))):(J.sortIndex=Y,e(d,J),A||C||(A=!0,me(F))),J},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(J){var te=E;return function(){var ee=E;E=te;try{return J.apply(this,arguments)}finally{E=ee}}}}(jf)),jf}var Xy;function MI(){return Xy||(Xy=1,Lf.exports=VI()),Lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function OI(){if(Yy)return Tn;Yy=1;var r=Bp(),e=MI();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){u(s,o),u(s+"Capture",o)}function u(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function E(s){return d.call(v,s)?!0:d.call(g,s)?!1:p.test(s)?v[s]=!0:(g[s]=!0,!1)}function C(s,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function A(s,o,l,f){if(o===null||typeof o>"u"||C(s,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function V(s,o,l,f,m,_,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=S}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){M[s]=new V(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];M[o]=new V(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){M[s]=new V(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){M[s]=new V(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){M[s]=new V(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){M[s]=new V(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){M[s]=new V(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){M[s]=new V(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){M[s]=new V(s,5,!1,s.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function K(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(B,K);M[o]=new V(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(B,K);M[o]=new V(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(B,K);M[o]=new V(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){M[s]=new V(s,1,!1,s.toLowerCase(),null,!1,!1)}),M.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){M[s]=new V(s,1,!1,s.toLowerCase(),null,!0,!0)});function q(s,o,l,f){var m=M.hasOwnProperty(o)?M[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(A(o,l,m,f)&&(l=null),f||m===null?E(o)&&(l===null?s.removeAttribute(o):s.setAttribute(o,""+l)):m.mustUseProperty?s[m.propertyName]=l===null?m.type===3?!1:"":l:(o=m.attributeName,f=m.attributeNamespace,l===null?s.removeAttribute(o):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?s.setAttributeNS(f,o,l):s.setAttribute(o,l))))}var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),J=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Object.assign,L;function Y(s){if(L===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);L=o&&o[1]||""}return`
`+L+s}var ge=!1;function Re(s,o){if(!s||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var f=Q}Reflect.construct(s,[],o)}else{try{o.call()}catch(Q){f=Q}s.call(o.prototype)}else{try{throw Error()}catch(Q){f=Q}s()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var m=Q.stack.split(`
`),_=f.stack.split(`
`),S=m.length-1,O=_.length-1;1<=S&&0<=O&&m[S]!==_[O];)O--;for(;1<=S&&0<=O;S--,O--)if(m[S]!==_[O]){if(S!==1||O!==1)do if(S--,O--,0>O||m[S]!==_[O]){var j=`
`+m[S].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=S&&0<=O);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Y(s):""}function pe(s){switch(s.tag){case 5:return Y(s.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return s=Re(s.type,!1),s;case 11:return s=Re(s.type.render,!1),s;case 1:return s=Re(s.type,!0),s;default:return""}}function Ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case z:return"Portal";case N:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case ae:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case k:return(s.displayName||"Context")+".Consumer";case b:return(s._context.displayName||"Context")+".Provider";case D:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case fe:return o=s.displayName||null,o!==null?o:Ve(s.type)||"Memo";case me:o=s._payload,s=s._init;try{return Ve(s(o))}catch{}}return null}function Oe(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function he(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function qe(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ze(s){var o=qe(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,_=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Ft(s){s._valueTracker||(s._valueTracker=Ze(s))}function an(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return s&&(f=qe(s)?s.checked?"true":"false":s.value),s=f,s!==l?(o.setValue(s),!0):!1}function ln(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function We(s,o){var l=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function An(s,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=he(o.value!=null?o.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function gi(s,o){o=o.checked,o!=null&&q(s,"checked",o,!1)}function yi(s,o){gi(s,o);var l=he(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Qr(s,o.type,l):o.hasOwnProperty("defaultValue")&&Qr(s,o.type,he(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Eo(s,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,l||o===s.value||(s.value=o),s.defaultValue=o}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function Qr(s,o,l){(o!=="number"||ln(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var rr=Array.isArray;function sr(s,o,l,f){if(s=s.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=o.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&f&&(s[l].defaultSelected=!0)}else{for(l=""+he(l),o=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function Ts(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Nn(s,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}s._wrapperState={initialValue:he(l)}}function Is(s,o){var l=he(o.value),f=he(o.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),o.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function Ss(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function gt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?gt(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ir,_i=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,l,f,m)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ir.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function or(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xr=["Webkit","ms","Moz","O"];Object.keys(Rr).forEach(function(s){Xr.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Rr[o]=Rr[s]})});function vi(s,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Rr.hasOwnProperty(s)&&Rr[s]?(""+o).trim():o+"px"}function wi(s,o){s=s.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=vi(l,o[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,m):s[l]=m}}var Ei=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(s,o){if(o){if(Ei[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function De(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function nt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ar=null,Dt=null,xn=null;function lr(s){if(s=ul(s)){if(typeof ar!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Yu(o),ar(s.stateNode,s.type,o))}}function Rn(s){Dt?xn?xn.push(s):xn=[s]:Dt=s}function Ti(){if(Dt){var s=Dt,o=xn;if(xn=Dt=null,lr(s),o)for(s=0;s<o.length;s++)lr(o[s])}}function Yr(s,o){return s(o)}function Ii(){}var Pn=!1;function Si(s,o,l){if(Pn)return s(o,l);Pn=!0;try{return Yr(s,o,l)}finally{Pn=!1,(Dt!==null||xn!==null)&&(Ii(),Ti())}}function lt(s,o){var l=s.stateNode;if(l===null)return null;var f=Yu(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Tt=!1;if(c)try{var It={};Object.defineProperty(It,"passive",{get:function(){Tt=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{Tt=!1}function $n(s,o,l,f,m,_,S,O,j){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(l,Q)}catch(ie){this.onError(ie)}}var ur=!1,Pr=null,cr=!1,$a=null,ld={onError:function(s){ur=!0,Pr=s}};function To(s,o,l,f,m,_,S,O,j){ur=!1,Pr=null,$n.apply(ld,arguments)}function Tu(s,o,l,f,m,_,S,O,j){if(To.apply(this,arguments),ur){if(ur){var Q=Pr;ur=!1,Pr=null}else throw Error(t(198));cr||(cr=!0,$a=Q)}}function hr(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function Ci(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function dr(s){if(hr(s)!==s)throw Error(t(188))}function Iu(s){var o=s.alternate;if(!o){if(o=hr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var l=s,f=o;;){var m=l.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===l)return dr(m),s;if(_===f)return dr(m),o;_=_.sibling}throw Error(t(188))}if(l.return!==f.return)l=m,f=_;else{for(var S=!1,O=m.child;O;){if(O===l){S=!0,l=m,f=_;break}if(O===f){S=!0,f=m,l=_;break}O=O.sibling}if(!S){for(O=_.child;O;){if(O===l){S=!0,l=_,f=m;break}if(O===f){S=!0,f=_,l=m;break}O=O.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:o}function qa(s){return s=Iu(s),s!==null?Io(s):null}function Io(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Io(s);if(o!==null)return o;s=s.sibling}return null}var So=e.unstable_scheduleCallback,Wa=e.unstable_cancelCallback,Su=e.unstable_shouldYield,ud=e.unstable_requestPaint,rt=e.unstable_now,Cu=e.unstable_getCurrentPriorityLevel,Ai=e.unstable_ImmediatePriority,Cs=e.unstable_UserBlockingPriority,qn=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,Au=e.unstable_IdlePriority,Ni=null,kn=null;function Nu(s){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Ni,s,void 0,(s.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:Ru,Ka=Math.log,xu=Math.LN2;function Ru(s){return s>>>=0,s===0?32:31-(Ka(s)/xu|0)|0}var Co=64,Ao=4194304;function As(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function xi(s,o){var l=s.pendingLanes;if(l===0)return 0;var f=0,m=s.suspendedLanes,_=s.pingedLanes,S=l&268435455;if(S!==0){var O=S&~m;O!==0?f=As(O):(_&=S,_!==0&&(f=As(_)))}else S=l&~m,S!==0?f=As(S):_!==0&&(f=As(_));if(f===0)return 0;if(o!==0&&o!==f&&!(o&m)&&(m=f&-f,_=o&-o,m>=_||m===16&&(_&4194240)!==0))return o;if(f&4&&(f|=l&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)l=31-un(o),m=1<<l,f|=s[l],o&=~m;return f}function cd(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(s,o){for(var l=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,_=s.pendingLanes;0<_;){var S=31-un(_),O=1<<S,j=m[S];j===-1?(!(O&l)||O&f)&&(m[S]=cd(O,o)):j<=o&&(s.expiredLanes|=O),_&=~O}}function Dn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ri(){var s=Co;return Co<<=1,!(Co&4194240)&&(Co=64),s}function Ns(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function xs(s,o,l){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-un(o),s[o]=l}function Je(s,o){var l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var m=31-un(l),_=1<<m;o[m]=0,f[m]=-1,s[m]=-1,l&=~_}}function Rs(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var f=31-un(l),m=1<<f;m&o|s[f]&o&&(s[f]|=o),l&=~m}}var je=0;function Ps(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Pu,No,ku,Du,bu,Ha=!1,kr=[],Wt=null,fr=null,pr=null,ks=new Map,Wn=new Map,Dr=[],hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(s,o){switch(s){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":ks.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(o.pointerId)}}function mn(s,o,l,f,m,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},o!==null&&(o=ul(o),o!==null&&No(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function dd(s,o,l,f,m){switch(o){case"focusin":return Wt=mn(Wt,s,o,l,f,m),!0;case"dragenter":return fr=mn(fr,s,o,l,f,m),!0;case"mouseover":return pr=mn(pr,s,o,l,f,m),!0;case"pointerover":var _=m.pointerId;return ks.set(_,mn(ks.get(_)||null,s,o,l,f,m)),!0;case"gotpointercapture":return _=m.pointerId,Wn.set(_,mn(Wn.get(_)||null,s,o,l,f,m)),!0}return!1}function Mu(s){var o=Vi(s.target);if(o!==null){var l=hr(o);if(l!==null){if(o=l.tag,o===13){if(o=Ci(l),o!==null){s.blockedOn=o,bu(s.priority,function(){ku(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=xo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);He=f,l.target.dispatchEvent(f),He=null}else return o=ul(l),o!==null&&No(o),s.blockedOn=l,!1;o.shift()}return!0}function Pi(s,o,l){Jr(s)&&l.delete(o)}function Ou(){Ha=!1,Wt!==null&&Jr(Wt)&&(Wt=null),fr!==null&&Jr(fr)&&(fr=null),pr!==null&&Jr(pr)&&(pr=null),ks.forEach(Pi),Wn.forEach(Pi)}function mr(s,o){s.blockedOn===o&&(s.blockedOn=null,Ha||(Ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ou)))}function gr(s){function o(m){return mr(m,s)}if(0<kr.length){mr(kr[0],s);for(var l=1;l<kr.length;l++){var f=kr[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Wt!==null&&mr(Wt,s),fr!==null&&mr(fr,s),pr!==null&&mr(pr,s),ks.forEach(o),Wn.forEach(o),l=0;l<Dr.length;l++)f=Dr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<Dr.length&&(l=Dr[0],l.blockedOn===null);)Mu(l),l.blockedOn===null&&Dr.shift()}var es=X.ReactCurrentBatchConfig,Ds=!0;function ut(s,o,l,f){var m=je,_=es.transition;es.transition=null;try{je=1,Qa(s,o,l,f)}finally{je=m,es.transition=_}}function fd(s,o,l,f){var m=je,_=es.transition;es.transition=null;try{je=4,Qa(s,o,l,f)}finally{je=m,es.transition=_}}function Qa(s,o,l,f){if(Ds){var m=xo(s,o,l,f);if(m===null)Sd(s,o,f,ki,l),Vu(s,f);else if(dd(m,s,o,l,f))f.stopPropagation();else if(Vu(s,f),o&4&&-1<hd.indexOf(s)){for(;m!==null;){var _=ul(m);if(_!==null&&Pu(_),_=xo(s,o,l,f),_===null&&Sd(s,o,f,ki,l),_===m)break;m=_}m!==null&&f.stopPropagation()}else Sd(s,o,f,null,l)}}var ki=null;function xo(s,o,l,f){if(ki=null,s=nt(f),s=Vi(s),s!==null)if(o=hr(s),o===null)s=null;else if(l=o.tag,l===13){if(s=Ci(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return ki=s,null}function Xa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cu()){case Ai:return 1;case Cs:return 4;case qn:case Ga:return 16;case Au:return 536870912;default:return 16}default:return 16}}var bn=null,Ro=null,gn=null;function Ya(){if(gn)return gn;var s,o=Ro,l=o.length,f,m="value"in bn?bn.value:bn.textContent,_=m.length;for(s=0;s<l&&o[s]===m[s];s++);var S=l-s;for(f=1;f<=S&&o[l-f]===m[_-f];f++);return gn=m.slice(s,1<f?1-f:void 0)}function Po(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function Za(){return!1}function Gt(s){function o(l,f,m,_,S){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(l=s[O],this[O]=l?l(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?br:Za,this.isPropagationStopped=Za,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),o}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Gt(yr),Vr=ee({},yr,{view:0,detail:0}),pd=Gt(Vr),Do,ts,bs,Di=ee({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bs&&(bs&&s.type==="mousemove"?(Do=s.screenX-bs.screenX,ts=s.screenY-bs.screenY):ts=Do=0,bs=s),Do)},movementY:function(s){return"movementY"in s?s.movementY:ts}}),bo=Gt(Di),Ja=ee({},Di,{dataTransfer:0}),Fu=Gt(Ja),Vo=ee({},Vr,{relatedTarget:0}),Mo=Gt(Vo),Lu=ee({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),ns=Gt(Lu),ju=ee({},yr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bu=Gt(ju),Uu=ee({},yr,{data:0}),el=Gt(Uu),Oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=zu[s])?!!o[s]:!1}function Mr(){return $u}var h=ee({},Vr,{key:function(s){if(s.key){var o=Oo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Po(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(s){return s.type==="keypress"?Po(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Po(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Gt(h),w=ee({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=Gt(w),W=ee({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Z=Gt(W),de=ee({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Gt(de),bt=ee({},Di,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Gt(bt),Lt=[9,13,27,32],Rt=c&&"CompositionEvent"in window,Gn=null;c&&"documentMode"in document&&(Gn=document.documentMode);var Vn=c&&"TextEvent"in window&&!Gn,bi=c&&(!Rt||Gn&&8<Gn&&11>=Gn),Fo=" ",Lm=!1;function jm(s,o){switch(s){case"keyup":return Lt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function NT(s,o){switch(s){case"compositionend":return Bm(o);case"keypress":return o.which!==32?null:(Lm=!0,Fo);case"textInput":return s=o.data,s===Fo&&Lm?null:s;default:return null}}function xT(s,o){if(Lo)return s==="compositionend"||!Rt&&jm(s,o)?(s=Ya(),gn=Ro=bn=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bi&&o.locale!=="ko"?null:o.data;default:return null}}var RT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!RT[s.type]:o==="textarea"}function zm(s,o,l,f){Rn(f),o=Hu(o,"onChange"),0<o.length&&(l=new ko("onChange","change",null,l,f),s.push({event:l,listeners:o}))}var tl=null,nl=null;function PT(s){og(s,0)}function qu(s){var o=$o(s);if(an(o))return s}function kT(s,o){if(s==="change")return o}var $m=!1;if(c){var md;if(c){var gd="oninput"in document;if(!gd){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),gd=typeof qm.oninput=="function"}md=gd}else md=!1;$m=md&&(!document.documentMode||9<document.documentMode)}function Wm(){tl&&(tl.detachEvent("onpropertychange",Gm),nl=tl=null)}function Gm(s){if(s.propertyName==="value"&&qu(nl)){var o=[];zm(o,nl,s,nt(s)),Si(PT,o)}}function DT(s,o,l){s==="focusin"?(Wm(),tl=o,nl=l,tl.attachEvent("onpropertychange",Gm)):s==="focusout"&&Wm()}function bT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(nl)}function VT(s,o){if(s==="click")return qu(o)}function MT(s,o){if(s==="input"||s==="change")return qu(o)}function OT(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var _r=typeof Object.is=="function"?Object.is:OT;function rl(s,o){if(_r(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!d.call(o,m)||!_r(s[m],o[m]))return!1}return!0}function Km(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hm(s,o){var l=Km(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=o&&f>=o)return{node:l,offset:o-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Km(l)}}function Qm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Qm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Xm(){for(var s=window,o=ln();o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=ln(s.document)}return o}function yd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function FT(s){var o=Xm(),l=s.focusedElem,f=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&Qm(l.ownerDocument.documentElement,l)){if(f!==null&&yd(l)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(s,l.value.length);else if(s=(o=l.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=l.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!s.extend&&_>f&&(m=f,f=_,_=m),m=Hm(l,_);var S=Hm(l,f);m&&S&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),_>f?(s.addRange(o),s.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),s.addRange(o)))}}for(o=[],s=l;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)s=o[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var LT=c&&"documentMode"in document&&11>=document.documentMode,jo=null,_d=null,sl=null,vd=!1;function Ym(s,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vd||jo==null||jo!==ln(f)||(f=jo,"selectionStart"in f&&yd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sl&&rl(sl,f)||(sl=f,f=Hu(_d,"onSelect"),0<f.length&&(o=new ko("onSelect","select",null,o,l),s.push({event:o,listeners:f}),o.target=jo)))}function Wu(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Bo={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},wd={},Zm={};c&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Gu(s){if(wd[s])return wd[s];if(!Bo[s])return s;var o=Bo[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in Zm)return wd[s]=o[l];return s}var Jm=Gu("animationend"),eg=Gu("animationiteration"),tg=Gu("animationstart"),ng=Gu("transitionend"),rg=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(s,o){rg.set(s,o),a(o,[s])}for(var Ed=0;Ed<sg.length;Ed++){var Td=sg[Ed],jT=Td.toLowerCase(),BT=Td[0].toUpperCase()+Td.slice(1);Vs(jT,"on"+BT)}Vs(Jm,"onAnimationEnd"),Vs(eg,"onAnimationIteration"),Vs(tg,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(ng,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UT=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function ig(s,o,l){var f=s.type||"unknown-event";s.currentTarget=l,Tu(f,o,void 0,s),s.currentTarget=null}function og(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],m=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var O=f[S],j=O.instance,Q=O.currentTarget;if(O=O.listener,j!==_&&m.isPropagationStopped())break e;ig(m,O,Q),_=j}else for(S=0;S<f.length;S++){if(O=f[S],j=O.instance,Q=O.currentTarget,O=O.listener,j!==_&&m.isPropagationStopped())break e;ig(m,O,Q),_=j}}}if(cr)throw s=$a,cr=!1,$a=null,s}function it(s,o){var l=o[Pd];l===void 0&&(l=o[Pd]=new Set);var f=s+"__bubble";l.has(f)||(ag(o,s,2,!1),l.add(f))}function Id(s,o,l){var f=0;o&&(f|=4),ag(l,s,f,o)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function ol(s){if(!s[Ku]){s[Ku]=!0,n.forEach(function(l){l!=="selectionchange"&&(UT.has(l)||Id(l,!1,s),Id(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ku]||(o[Ku]=!0,Id("selectionchange",!1,o))}}function ag(s,o,l,f){switch(Xa(o)){case 1:var m=ut;break;case 4:m=fd;break;default:m=Qa}l=m.bind(null,o,l,s),m=void 0,!Tt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,l,{capture:!0,passive:m}):s.addEventListener(o,l,!0):m!==void 0?s.addEventListener(o,l,{passive:m}):s.addEventListener(o,l,!1)}function Sd(s,o,l,f,m){var _=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var O=f.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;S=S.return}for(;O!==null;){if(S=Vi(O),S===null)return;if(j=S.tag,j===5||j===6){f=_=S;continue e}O=O.parentNode}}f=f.return}Si(function(){var Q=_,ie=nt(l),oe=[];e:{var re=rg.get(s);if(re!==void 0){var _e=ko,we=s;switch(s){case"keypress":if(Po(l)===0)break e;case"keydown":case"keyup":_e=y;break;case"focusin":we="focus",_e=Mo;break;case"focusout":we="blur",_e=Mo;break;case"beforeblur":case"afterblur":_e=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Z;break;case Jm:case eg:case tg:_e=ns;break;case ng:_e=Qe;break;case"scroll":_e=pd;break;case"wheel":_e=Ue;break;case"copy":case"cut":case"paste":_e=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=x}var Ie=(o&4)!==0,St=!Ie&&s==="scroll",G=Ie?re!==null?re+"Capture":null:re;Ie=[];for(var U=Q,H;U!==null;){H=U;var ue=H.stateNode;if(H.tag===5&&ue!==null&&(H=ue,G!==null&&(ue=lt(U,G),ue!=null&&Ie.push(al(U,ue,H)))),St)break;U=U.return}0<Ie.length&&(re=new _e(re,we,null,l,ie),oe.push({event:re,listeners:Ie}))}}if(!(o&7)){e:{if(re=s==="mouseover"||s==="pointerover",_e=s==="mouseout"||s==="pointerout",re&&l!==He&&(we=l.relatedTarget||l.fromElement)&&(Vi(we)||we[rs]))break e;if((_e||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,_e?(we=l.relatedTarget||l.toElement,_e=Q,we=we?Vi(we):null,we!==null&&(St=hr(we),we!==St||we.tag!==5&&we.tag!==6)&&(we=null)):(_e=null,we=Q),_e!==we)){if(Ie=bo,ue="onMouseLeave",G="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Ie=x,ue="onPointerLeave",G="onPointerEnter",U="pointer"),St=_e==null?re:$o(_e),H=we==null?re:$o(we),re=new Ie(ue,U+"leave",_e,l,ie),re.target=St,re.relatedTarget=H,ue=null,Vi(ie)===Q&&(Ie=new Ie(G,U+"enter",we,l,ie),Ie.target=H,Ie.relatedTarget=St,ue=Ie),St=ue,_e&&we)t:{for(Ie=_e,G=we,U=0,H=Ie;H;H=Uo(H))U++;for(H=0,ue=G;ue;ue=Uo(ue))H++;for(;0<U-H;)Ie=Uo(Ie),U--;for(;0<H-U;)G=Uo(G),H--;for(;U--;){if(Ie===G||G!==null&&Ie===G.alternate)break t;Ie=Uo(Ie),G=Uo(G)}Ie=null}else Ie=null;_e!==null&&lg(oe,re,_e,Ie,!1),we!==null&&St!==null&&lg(oe,St,we,Ie,!0)}}e:{if(re=Q?$o(Q):window,_e=re.nodeName&&re.nodeName.toLowerCase(),_e==="select"||_e==="input"&&re.type==="file")var Ce=kT;else if(Um(re))if($m)Ce=MT;else{Ce=bT;var Pe=DT}else(_e=re.nodeName)&&_e.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ce=VT);if(Ce&&(Ce=Ce(s,Q))){zm(oe,Ce,l,ie);break e}Pe&&Pe(s,re,Q),s==="focusout"&&(Pe=re._wrapperState)&&Pe.controlled&&re.type==="number"&&Qr(re,"number",re.value)}switch(Pe=Q?$o(Q):window,s){case"focusin":(Um(Pe)||Pe.contentEditable==="true")&&(jo=Pe,_d=Q,sl=null);break;case"focusout":sl=_d=jo=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,Ym(oe,l,ie);break;case"selectionchange":if(LT)break;case"keydown":case"keyup":Ym(oe,l,ie)}var ke;if(Rt)e:{switch(s){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Lo?jm(s,l)&&(be="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(bi&&l.locale!=="ko"&&(Lo||be!=="onCompositionStart"?be==="onCompositionEnd"&&Lo&&(ke=Ya()):(bn=ie,Ro="value"in bn?bn.value:bn.textContent,Lo=!0)),Pe=Hu(Q,be),0<Pe.length&&(be=new el(be,s,null,l,ie),oe.push({event:be,listeners:Pe}),ke?be.data=ke:(ke=Bm(l),ke!==null&&(be.data=ke)))),(ke=Vn?NT(s,l):xT(s,l))&&(Q=Hu(Q,"onBeforeInput"),0<Q.length&&(ie=new el("onBeforeInput","beforeinput",null,l,ie),oe.push({event:ie,listeners:Q}),ie.data=ke))}og(oe,o)})}function al(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Hu(s,o){for(var l=o+"Capture",f=[];s!==null;){var m=s,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=lt(s,l),_!=null&&f.unshift(al(s,_,m)),_=lt(s,o),_!=null&&f.push(al(s,_,m))),s=s.return}return f}function Uo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function lg(s,o,l,f,m){for(var _=o._reactName,S=[];l!==null&&l!==f;){var O=l,j=O.alternate,Q=O.stateNode;if(j!==null&&j===f)break;O.tag===5&&Q!==null&&(O=Q,m?(j=lt(l,_),j!=null&&S.unshift(al(l,j,O))):m||(j=lt(l,_),j!=null&&S.push(al(l,j,O)))),l=l.return}S.length!==0&&s.push({event:o,listeners:S})}var zT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function ug(s){return(typeof s=="string"?s:""+s).replace(zT,`
`).replace($T,"")}function Qu(s,o,l){if(o=ug(o),ug(s)!==o&&l)throw Error(t(425))}function Xu(){}var Cd=null,Ad=null;function Nd(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(s){return cg.resolve(null).then(s).catch(GT)}:xd;function GT(s){setTimeout(function(){throw s})}function Rd(s,o){var l=o,f=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){s.removeChild(m),gr(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);gr(o)}function Ms(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function hg(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Or="__reactFiber$"+zo,ll="__reactProps$"+zo,rs="__reactContainer$"+zo,Pd="__reactEvents$"+zo,KT="__reactListeners$"+zo,HT="__reactHandles$"+zo;function Vi(s){var o=s[Or];if(o)return o;for(var l=s.parentNode;l;){if(o=l[rs]||l[Or]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=hg(s);s!==null;){if(l=s[Or])return l;s=hg(s)}return o}s=l,l=s.parentNode}return null}function ul(s){return s=s[Or]||s[rs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $o(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Yu(s){return s[ll]||null}var kd=[],qo=-1;function Os(s){return{current:s}}function ot(s){0>qo||(s.current=kd[qo],kd[qo]=null,qo--)}function st(s,o){qo++,kd[qo]=s.current,s.current=o}var Fs={},Xt=Os(Fs),yn=Os(!1),Mi=Fs;function Wo(s,o){var l=s.type.contextTypes;if(!l)return Fs;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in l)m[_]=o[_];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function _n(s){return s=s.childContextTypes,s!=null}function Zu(){ot(yn),ot(Xt)}function dg(s,o,l){if(Xt.current!==Fs)throw Error(t(168));st(Xt,o),st(yn,l)}function fg(s,o,l){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(t(108,Oe(s)||"Unknown",m));return ee({},l,f)}function Ju(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fs,Mi=Xt.current,st(Xt,s),st(yn,yn.current),!0}function pg(s,o,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=fg(s,o,Mi),f.__reactInternalMemoizedMergedChildContext=s,ot(yn),ot(Xt),st(Xt,s)):ot(yn),st(yn,l)}var ss=null,ec=!1,Dd=!1;function mg(s){ss===null?ss=[s]:ss.push(s)}function QT(s){ec=!0,mg(s)}function Ls(){if(!Dd&&ss!==null){Dd=!0;var s=0,o=je;try{var l=ss;for(je=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}ss=null,ec=!1}catch(m){throw ss!==null&&(ss=ss.slice(s+1)),So(Ai,Ls),m}finally{je=o,Dd=!1}}return null}var Go=[],Ko=0,tc=null,nc=0,Kn=[],Hn=0,Oi=null,is=1,os="";function Fi(s,o){Go[Ko++]=nc,Go[Ko++]=tc,tc=s,nc=o}function gg(s,o,l){Kn[Hn++]=is,Kn[Hn++]=os,Kn[Hn++]=Oi,Oi=s;var f=is;s=os;var m=32-un(f)-1;f&=~(1<<m),l+=1;var _=32-un(o)+m;if(30<_){var S=m-m%5;_=(f&(1<<S)-1).toString(32),f>>=S,m-=S,is=1<<32-un(o)+m|l<<m|f,os=_+s}else is=1<<_|l<<m|f,os=s}function bd(s){s.return!==null&&(Fi(s,1),gg(s,1,0))}function Vd(s){for(;s===tc;)tc=Go[--Ko],Go[Ko]=null,nc=Go[--Ko],Go[Ko]=null;for(;s===Oi;)Oi=Kn[--Hn],Kn[Hn]=null,os=Kn[--Hn],Kn[Hn]=null,is=Kn[--Hn],Kn[Hn]=null}var Mn=null,On=null,ct=!1,vr=null;function yg(s,o){var l=Zn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=s,o=s.deletions,o===null?(s.deletions=[l],s.flags|=16):o.push(l)}function _g(s,o){switch(s.tag){case 5:var l=s.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Mn=s,On=Ms(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Mn=s,On=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Oi!==null?{id:is,overflow:os}:null,s.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Zn(18,null,null,0),l.stateNode=o,l.return=s,s.child=l,Mn=s,On=null,!0):!1;default:return!1}}function Md(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(ct){var o=On;if(o){var l=o;if(!_g(s,o)){if(Md(s))throw Error(t(418));o=Ms(l.nextSibling);var f=Mn;o&&_g(s,o)?yg(f,l):(s.flags=s.flags&-4097|2,ct=!1,Mn=s)}}else{if(Md(s))throw Error(t(418));s.flags=s.flags&-4097|2,ct=!1,Mn=s}}}function vg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Mn=s}function rc(s){if(s!==Mn)return!1;if(!ct)return vg(s),ct=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Nd(s.type,s.memoizedProps)),o&&(o=On)){if(Md(s))throw wg(),Error(t(418));for(;o;)yg(s,o),o=Ms(o.nextSibling)}if(vg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(o===0){On=Ms(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}s=s.nextSibling}On=null}}else On=Mn?Ms(s.stateNode.nextSibling):null;return!0}function wg(){for(var s=On;s;)s=Ms(s.nextSibling)}function Ho(){On=Mn=null,ct=!1}function Fd(s){vr===null?vr=[s]:vr.push(s)}var XT=X.ReactCurrentBatchConfig;function cl(s,o,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var m=f,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(S){var O=m.refs;S===null?delete O[_]:O[_]=S},o._stringRef=_,o)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function sc(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Eg(s){var o=s._init;return o(s._payload)}function Tg(s){function o(G,U){if(s){var H=G.deletions;H===null?(G.deletions=[U],G.flags|=16):H.push(U)}}function l(G,U){if(!s)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function f(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function m(G,U){return G=Gs(G,U),G.index=0,G.sibling=null,G}function _(G,U,H){return G.index=H,s?(H=G.alternate,H!==null?(H=H.index,H<U?(G.flags|=2,U):H):(G.flags|=2,U)):(G.flags|=1048576,U)}function S(G){return s&&G.alternate===null&&(G.flags|=2),G}function O(G,U,H,ue){return U===null||U.tag!==6?(U=Rf(H,G.mode,ue),U.return=G,U):(U=m(U,H),U.return=G,U)}function j(G,U,H,ue){var Ce=H.type;return Ce===R?ie(G,U,H.props.children,ue,H.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===me&&Eg(Ce)===U.type)?(ue=m(U,H.props),ue.ref=cl(G,U,H),ue.return=G,ue):(ue=xc(H.type,H.key,H.props,null,G.mode,ue),ue.ref=cl(G,U,H),ue.return=G,ue)}function Q(G,U,H,ue){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Pf(H,G.mode,ue),U.return=G,U):(U=m(U,H.children||[]),U.return=G,U)}function ie(G,U,H,ue,Ce){return U===null||U.tag!==7?(U=Wi(H,G.mode,ue,Ce),U.return=G,U):(U=m(U,H),U.return=G,U)}function oe(G,U,H){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Rf(""+U,G.mode,H),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case F:return H=xc(U.type,U.key,U.props,null,G.mode,H),H.ref=cl(G,null,U),H.return=G,H;case z:return U=Pf(U,G.mode,H),U.return=G,U;case me:var ue=U._init;return oe(G,ue(U._payload),H)}if(rr(U)||te(U))return U=Wi(U,G.mode,H,null),U.return=G,U;sc(G,U)}return null}function re(G,U,H,ue){var Ce=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ce!==null?null:O(G,U,""+H,ue);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case F:return H.key===Ce?j(G,U,H,ue):null;case z:return H.key===Ce?Q(G,U,H,ue):null;case me:return Ce=H._init,re(G,U,Ce(H._payload),ue)}if(rr(H)||te(H))return Ce!==null?null:ie(G,U,H,ue,null);sc(G,H)}return null}function _e(G,U,H,ue,Ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return G=G.get(H)||null,O(U,G,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case F:return G=G.get(ue.key===null?H:ue.key)||null,j(U,G,ue,Ce);case z:return G=G.get(ue.key===null?H:ue.key)||null,Q(U,G,ue,Ce);case me:var Pe=ue._init;return _e(G,U,H,Pe(ue._payload),Ce)}if(rr(ue)||te(ue))return G=G.get(H)||null,ie(U,G,ue,Ce,null);sc(U,ue)}return null}function we(G,U,H,ue){for(var Ce=null,Pe=null,ke=U,be=U=0,Ut=null;ke!==null&&be<H.length;be++){ke.index>be?(Ut=ke,ke=null):Ut=ke.sibling;var Ke=re(G,ke,H[be],ue);if(Ke===null){ke===null&&(ke=Ut);break}s&&ke&&Ke.alternate===null&&o(G,ke),U=_(Ke,U,be),Pe===null?Ce=Ke:Pe.sibling=Ke,Pe=Ke,ke=Ut}if(be===H.length)return l(G,ke),ct&&Fi(G,be),Ce;if(ke===null){for(;be<H.length;be++)ke=oe(G,H[be],ue),ke!==null&&(U=_(ke,U,be),Pe===null?Ce=ke:Pe.sibling=ke,Pe=ke);return ct&&Fi(G,be),Ce}for(ke=f(G,ke);be<H.length;be++)Ut=_e(ke,G,be,H[be],ue),Ut!==null&&(s&&Ut.alternate!==null&&ke.delete(Ut.key===null?be:Ut.key),U=_(Ut,U,be),Pe===null?Ce=Ut:Pe.sibling=Ut,Pe=Ut);return s&&ke.forEach(function(Ks){return o(G,Ks)}),ct&&Fi(G,be),Ce}function Ie(G,U,H,ue){var Ce=te(H);if(typeof Ce!="function")throw Error(t(150));if(H=Ce.call(H),H==null)throw Error(t(151));for(var Pe=Ce=null,ke=U,be=U=0,Ut=null,Ke=H.next();ke!==null&&!Ke.done;be++,Ke=H.next()){ke.index>be?(Ut=ke,ke=null):Ut=ke.sibling;var Ks=re(G,ke,Ke.value,ue);if(Ks===null){ke===null&&(ke=Ut);break}s&&ke&&Ks.alternate===null&&o(G,ke),U=_(Ks,U,be),Pe===null?Ce=Ks:Pe.sibling=Ks,Pe=Ks,ke=Ut}if(Ke.done)return l(G,ke),ct&&Fi(G,be),Ce;if(ke===null){for(;!Ke.done;be++,Ke=H.next())Ke=oe(G,Ke.value,ue),Ke!==null&&(U=_(Ke,U,be),Pe===null?Ce=Ke:Pe.sibling=Ke,Pe=Ke);return ct&&Fi(G,be),Ce}for(ke=f(G,ke);!Ke.done;be++,Ke=H.next())Ke=_e(ke,G,be,Ke.value,ue),Ke!==null&&(s&&Ke.alternate!==null&&ke.delete(Ke.key===null?be:Ke.key),U=_(Ke,U,be),Pe===null?Ce=Ke:Pe.sibling=Ke,Pe=Ke);return s&&ke.forEach(function(RI){return o(G,RI)}),ct&&Fi(G,be),Ce}function St(G,U,H,ue){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case F:e:{for(var Ce=H.key,Pe=U;Pe!==null;){if(Pe.key===Ce){if(Ce=H.type,Ce===R){if(Pe.tag===7){l(G,Pe.sibling),U=m(Pe,H.props.children),U.return=G,G=U;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===me&&Eg(Ce)===Pe.type){l(G,Pe.sibling),U=m(Pe,H.props),U.ref=cl(G,Pe,H),U.return=G,G=U;break e}l(G,Pe);break}else o(G,Pe);Pe=Pe.sibling}H.type===R?(U=Wi(H.props.children,G.mode,ue,H.key),U.return=G,G=U):(ue=xc(H.type,H.key,H.props,null,G.mode,ue),ue.ref=cl(G,U,H),ue.return=G,G=ue)}return S(G);case z:e:{for(Pe=H.key;U!==null;){if(U.key===Pe)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){l(G,U.sibling),U=m(U,H.children||[]),U.return=G,G=U;break e}else{l(G,U);break}else o(G,U);U=U.sibling}U=Pf(H,G.mode,ue),U.return=G,G=U}return S(G);case me:return Pe=H._init,St(G,U,Pe(H._payload),ue)}if(rr(H))return we(G,U,H,ue);if(te(H))return Ie(G,U,H,ue);sc(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,U!==null&&U.tag===6?(l(G,U.sibling),U=m(U,H),U.return=G,G=U):(l(G,U),U=Rf(H,G.mode,ue),U.return=G,G=U),S(G)):l(G,U)}return St}var Qo=Tg(!0),Ig=Tg(!1),ic=Os(null),oc=null,Xo=null,Ld=null;function jd(){Ld=Xo=oc=null}function Bd(s){var o=ic.current;ot(ic),s._currentValue=o}function Ud(s,o,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===l)break;s=s.return}}function Yo(s,o){oc=s,Ld=Xo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(vn=!0),s.firstContext=null)}function Qn(s){var o=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:o,next:null},Xo===null){if(oc===null)throw Error(t(308));Xo=s,oc.dependencies={lanes:0,firstContext:s}}else Xo=Xo.next=s;return o}var Li=null;function zd(s){Li===null?Li=[s]:Li.push(s)}function Sg(s,o,l,f){var m=o.interleaved;return m===null?(l.next=l,zd(o)):(l.next=m.next,m.next=l),o.interleaved=l,as(s,f)}function as(s,o){s.lanes|=o;var l=s.alternate;for(l!==null&&(l.lanes|=o),l=s,s=s.return;s!==null;)s.childLanes|=o,l=s.alternate,l!==null&&(l.childLanes|=o),l=s,s=s.return;return l.tag===3?l.stateNode:null}var js=!1;function $d(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ls(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Bs(s,o,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,Ge&2){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,as(s,l)}return m=f.interleaved,m===null?(o.next=o,zd(f)):(o.next=m.next,m.next=o),f.interleaved=o,as(s,l)}function ac(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,Rs(s,l)}}function Ag(s,o){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};_===null?m=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?m=_=o:_=_.next=o}else m=_=o;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}function lc(s,o,l,f){var m=s.updateQueue;js=!1;var _=m.firstBaseUpdate,S=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var j=O,Q=j.next;j.next=null,S===null?_=Q:S.next=Q,S=j;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==S&&(O===null?ie.firstBaseUpdate=Q:O.next=Q,ie.lastBaseUpdate=j))}if(_!==null){var oe=m.baseState;S=0,ie=Q=j=null,O=_;do{var re=O.lane,_e=O.eventTime;if((f&re)===re){ie!==null&&(ie=ie.next={eventTime:_e,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var we=s,Ie=O;switch(re=o,_e=l,Ie.tag){case 1:if(we=Ie.payload,typeof we=="function"){oe=we.call(_e,oe,re);break e}oe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ie.payload,re=typeof we=="function"?we.call(_e,oe,re):we,re==null)break e;oe=ee({},oe,re);break e;case 2:js=!0}}O.callback!==null&&O.lane!==0&&(s.flags|=64,re=m.effects,re===null?m.effects=[O]:re.push(O))}else _e={eventTime:_e,lane:re,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(Q=ie=_e,j=oe):ie=ie.next=_e,S|=re;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;re=O,O=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);if(ie===null&&(j=oe),m.baseState=j,m.firstBaseUpdate=Q,m.lastBaseUpdate=ie,o=m.shared.interleaved,o!==null){m=o;do S|=m.lane,m=m.next;while(m!==o)}else _===null&&(m.shared.lanes=0);Ui|=S,s.lanes=S,s.memoizedState=oe}}function Ng(s,o,l){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var hl={},Fr=Os(hl),dl=Os(hl),fl=Os(hl);function ji(s){if(s===hl)throw Error(t(174));return s}function qd(s,o){switch(st(fl,o),st(dl,s),st(Fr,hl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Et(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Et(o,s)}ot(Fr),st(Fr,o)}function Zo(){ot(Fr),ot(dl),ot(fl)}function xg(s){ji(fl.current);var o=ji(Fr.current),l=Et(o,s.type);o!==l&&(st(dl,s),st(Fr,l))}function Wd(s){dl.current===s&&(ot(Fr),ot(dl))}var ft=Os(0);function uc(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Gd=[];function Kd(){for(var s=0;s<Gd.length;s++)Gd[s]._workInProgressVersionPrimary=null;Gd.length=0}var cc=X.ReactCurrentDispatcher,Hd=X.ReactCurrentBatchConfig,Bi=0,pt=null,Vt=null,jt=null,hc=!1,pl=!1,ml=0,YT=0;function Yt(){throw Error(t(321))}function Qd(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!_r(s[l],o[l]))return!1;return!0}function Xd(s,o,l,f,m,_){if(Bi=_,pt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,cc.current=s===null||s.memoizedState===null?tI:nI,s=l(f,m),pl){_=0;do{if(pl=!1,ml=0,25<=_)throw Error(t(301));_+=1,jt=Vt=null,o.updateQueue=null,cc.current=rI,s=l(f,m)}while(pl)}if(cc.current=pc,o=Vt!==null&&Vt.next!==null,Bi=0,jt=Vt=pt=null,hc=!1,o)throw Error(t(300));return s}function Yd(){var s=ml!==0;return ml=0,s}function Lr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?pt.memoizedState=jt=s:jt=jt.next=s,jt}function Xn(){if(Vt===null){var s=pt.alternate;s=s!==null?s.memoizedState:null}else s=Vt.next;var o=jt===null?pt.memoizedState:jt.next;if(o!==null)jt=o,Vt=s;else{if(s===null)throw Error(t(310));Vt=s,s={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},jt===null?pt.memoizedState=jt=s:jt=jt.next=s}return jt}function gl(s,o){return typeof o=="function"?o(s):o}function Zd(s){var o=Xn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=Vt,m=f.baseQueue,_=l.pending;if(_!==null){if(m!==null){var S=m.next;m.next=_.next,_.next=S}f.baseQueue=m=_,l.pending=null}if(m!==null){_=m.next,f=f.baseState;var O=S=null,j=null,Q=_;do{var ie=Q.lane;if((Bi&ie)===ie)j!==null&&(j=j.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:s(f,Q.action);else{var oe={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};j===null?(O=j=oe,S=f):j=j.next=oe,pt.lanes|=ie,Ui|=ie}Q=Q.next}while(Q!==null&&Q!==_);j===null?S=f:j.next=O,_r(f,o.memoizedState)||(vn=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=j,l.lastRenderedState=f}if(s=l.interleaved,s!==null){m=s;do _=m.lane,pt.lanes|=_,Ui|=_,m=m.next;while(m!==s)}else m===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Jd(s){var o=Xn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,m=l.pending,_=o.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do _=s(_,S.action),S=S.next;while(S!==m);_r(_,o.memoizedState)||(vn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,f]}function Rg(){}function Pg(s,o){var l=pt,f=Xn(),m=o(),_=!_r(f.memoizedState,m);if(_&&(f.memoizedState=m,vn=!0),f=f.queue,ef(bg.bind(null,l,f,s),[s]),f.getSnapshot!==o||_||jt!==null&&jt.memoizedState.tag&1){if(l.flags|=2048,yl(9,Dg.bind(null,l,f,m,o),void 0,null),Bt===null)throw Error(t(349));Bi&30||kg(l,o,m)}return m}function kg(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=pt.updateQueue,o===null?(o={lastEffect:null,stores:null},pt.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Dg(s,o,l,f){o.value=l,o.getSnapshot=f,Vg(o)&&Mg(s)}function bg(s,o,l){return l(function(){Vg(o)&&Mg(s)})}function Vg(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!_r(s,l)}catch{return!0}}function Mg(s){var o=as(s,1);o!==null&&Ir(o,s,1,-1)}function Og(s){var o=Lr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:s},o.queue=s,s=s.dispatch=eI.bind(null,pt,s),[o.memoizedState,s]}function yl(s,o,l,f){return s={tag:s,create:o,destroy:l,deps:f,next:null},o=pt.updateQueue,o===null?(o={lastEffect:null,stores:null},pt.updateQueue=o,o.lastEffect=s.next=s):(l=o.lastEffect,l===null?o.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,o.lastEffect=s)),s}function Fg(){return Xn().memoizedState}function dc(s,o,l,f){var m=Lr();pt.flags|=s,m.memoizedState=yl(1|o,l,void 0,f===void 0?null:f)}function fc(s,o,l,f){var m=Xn();f=f===void 0?null:f;var _=void 0;if(Vt!==null){var S=Vt.memoizedState;if(_=S.destroy,f!==null&&Qd(f,S.deps)){m.memoizedState=yl(o,l,_,f);return}}pt.flags|=s,m.memoizedState=yl(1|o,l,_,f)}function Lg(s,o){return dc(8390656,8,s,o)}function ef(s,o){return fc(2048,8,s,o)}function jg(s,o){return fc(4,2,s,o)}function Bg(s,o){return fc(4,4,s,o)}function Ug(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function zg(s,o,l){return l=l!=null?l.concat([s]):null,fc(4,4,Ug.bind(null,o,s),l)}function tf(){}function $g(s,o){var l=Xn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(l.memoizedState=[s,o],s)}function qg(s,o){var l=Xn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Qd(o,f[1])?f[0]:(s=s(),l.memoizedState=[s,o],s)}function Wg(s,o,l){return Bi&21?(_r(l,o)||(l=Ri(),pt.lanes|=l,Ui|=l,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,vn=!0),s.memoizedState=l)}function ZT(s,o){var l=je;je=l!==0&&4>l?l:4,s(!0);var f=Hd.transition;Hd.transition={};try{s(!1),o()}finally{je=l,Hd.transition=f}}function Gg(){return Xn().memoizedState}function JT(s,o,l){var f=qs(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},Kg(s))Hg(o,l);else if(l=Sg(s,o,l,f),l!==null){var m=dn();Ir(l,s,f,m),Qg(l,o,f)}}function eI(s,o,l){var f=qs(s),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kg(s))Hg(o,m);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,O=_(S,l);if(m.hasEagerState=!0,m.eagerState=O,_r(O,S)){var j=o.interleaved;j===null?(m.next=m,zd(o)):(m.next=j.next,j.next=m),o.interleaved=m;return}}catch{}finally{}l=Sg(s,o,m,f),l!==null&&(m=dn(),Ir(l,s,f,m),Qg(l,o,f))}}function Kg(s){var o=s.alternate;return s===pt||o!==null&&o===pt}function Hg(s,o){pl=hc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function Qg(s,o,l){if(l&4194240){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,Rs(s,l)}}var pc={readContext:Qn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},tI={readContext:Qn,useCallback:function(s,o){return Lr().memoizedState=[s,o===void 0?null:o],s},useContext:Qn,useEffect:Lg,useImperativeHandle:function(s,o,l){return l=l!=null?l.concat([s]):null,dc(4194308,4,Ug.bind(null,o,s),l)},useLayoutEffect:function(s,o){return dc(4194308,4,s,o)},useInsertionEffect:function(s,o){return dc(4,2,s,o)},useMemo:function(s,o){var l=Lr();return o=o===void 0?null:o,s=s(),l.memoizedState=[s,o],s},useReducer:function(s,o,l){var f=Lr();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=JT.bind(null,pt,s),[f.memoizedState,s]},useRef:function(s){var o=Lr();return s={current:s},o.memoizedState=s},useState:Og,useDebugValue:tf,useDeferredValue:function(s){return Lr().memoizedState=s},useTransition:function(){var s=Og(!1),o=s[0];return s=ZT.bind(null,s[1]),Lr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,l){var f=pt,m=Lr();if(ct){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Bt===null)throw Error(t(349));Bi&30||kg(f,o,l)}m.memoizedState=l;var _={value:l,getSnapshot:o};return m.queue=_,Lg(bg.bind(null,f,_,s),[s]),f.flags|=2048,yl(9,Dg.bind(null,f,_,l,o),void 0,null),l},useId:function(){var s=Lr(),o=Bt.identifierPrefix;if(ct){var l=os,f=is;l=(f&~(1<<32-un(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=ml++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=YT++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},nI={readContext:Qn,useCallback:$g,useContext:Qn,useEffect:ef,useImperativeHandle:zg,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Zd,useRef:Fg,useState:function(){return Zd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=Xn();return Wg(o,Vt.memoizedState,s)},useTransition:function(){var s=Zd(gl)[0],o=Xn().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:Pg,useId:Gg,unstable_isNewReconciler:!1},rI={readContext:Qn,useCallback:$g,useContext:Qn,useEffect:ef,useImperativeHandle:zg,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:qg,useReducer:Jd,useRef:Fg,useState:function(){return Jd(gl)},useDebugValue:tf,useDeferredValue:function(s){var o=Xn();return Vt===null?o.memoizedState=s:Wg(o,Vt.memoizedState,s)},useTransition:function(){var s=Jd(gl)[0],o=Xn().memoizedState;return[s,o]},useMutableSource:Rg,useSyncExternalStore:Pg,useId:Gg,unstable_isNewReconciler:!1};function wr(s,o){if(s&&s.defaultProps){o=ee({},o),s=s.defaultProps;for(var l in s)o[l]===void 0&&(o[l]=s[l]);return o}return o}function nf(s,o,l,f){o=s.memoizedState,l=l(f,o),l=l==null?o:ee({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var mc={isMounted:function(s){return(s=s._reactInternals)?hr(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var f=dn(),m=qs(s),_=ls(f,m);_.payload=o,l!=null&&(_.callback=l),o=Bs(s,_,m),o!==null&&(Ir(o,s,m,f),ac(o,s,m))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var f=dn(),m=qs(s),_=ls(f,m);_.tag=1,_.payload=o,l!=null&&(_.callback=l),o=Bs(s,_,m),o!==null&&(Ir(o,s,m,f),ac(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=dn(),f=qs(s),m=ls(l,f);m.tag=2,o!=null&&(m.callback=o),o=Bs(s,m,f),o!==null&&(Ir(o,s,f,l),ac(o,s,f))}};function Xg(s,o,l,f,m,_,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!rl(l,f)||!rl(m,_):!0}function Yg(s,o,l){var f=!1,m=Fs,_=o.contextType;return typeof _=="object"&&_!==null?_=Qn(_):(m=_n(o)?Mi:Xt.current,f=o.contextTypes,_=(f=f!=null)?Wo(s,m):Fs),o=new o(l,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=_),o}function Zg(s,o,l,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==s&&mc.enqueueReplaceState(o,o.state,null)}function rf(s,o,l,f){var m=s.stateNode;m.props=l,m.state=s.memoizedState,m.refs={},$d(s);var _=o.contextType;typeof _=="object"&&_!==null?m.context=Qn(_):(_=_n(o)?Mi:Xt.current,m.context=Wo(s,_)),m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(nf(s,o,_,l),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&mc.enqueueReplaceState(m,m.state,null),lc(s,l,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Jo(s,o){try{var l="",f=o;do l+=pe(f),f=f.return;while(f);var m=l}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:m,digest:null}}function sf(s,o,l){return{value:s,source:null,stack:l??null,digest:o??null}}function of(s,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var sI=typeof WeakMap=="function"?WeakMap:Map;function Jg(s,o,l){l=ls(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){Tc||(Tc=!0,Ef=f),of(s,o)},l}function ey(s,o,l){l=ls(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;l.payload=function(){return f(m)},l.callback=function(){of(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(l.callback=function(){of(s,o),typeof f!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function ty(s,o,l){var f=s.pingCache;if(f===null){f=s.pingCache=new sI;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(l)||(m.add(l),s=_I.bind(null,s,o,l),o.then(s,s))}function ny(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function ry(s,o,l,f,m){return s.mode&1?(s.flags|=65536,s.lanes=m,s):(s===o?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ls(-1,1),o.tag=2,Bs(l,o,1))),l.lanes|=1),s)}var iI=X.ReactCurrentOwner,vn=!1;function hn(s,o,l,f){o.child=s===null?Ig(o,null,l,f):Qo(o,s.child,l,f)}function sy(s,o,l,f,m){l=l.render;var _=o.ref;return Yo(o,m),f=Xd(s,o,l,f,_,m),l=Yd(),s!==null&&!vn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,us(s,o,m)):(ct&&l&&bd(o),o.flags|=1,hn(s,o,f,m),o.child)}function iy(s,o,l,f,m){if(s===null){var _=l.type;return typeof _=="function"&&!xf(_)&&_.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=_,oy(s,o,_,f,m)):(s=xc(l.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!(s.lanes&m)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(S,f)&&s.ref===o.ref)return us(s,o,m)}return o.flags|=1,s=Gs(_,f),s.ref=o.ref,s.return=o,o.child=s}function oy(s,o,l,f,m){if(s!==null){var _=s.memoizedProps;if(rl(_,f)&&s.ref===o.ref)if(vn=!1,o.pendingProps=f=_,(s.lanes&m)!==0)s.flags&131072&&(vn=!0);else return o.lanes=s.lanes,us(s,o,m)}return af(s,o,l,f,m)}function ay(s,o,l){var f=o.pendingProps,m=f.children,_=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(ta,Fn),Fn|=l;else{if(!(l&1073741824))return s=_!==null?_.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,st(ta,Fn),Fn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:l,st(ta,Fn),Fn|=f}else _!==null?(f=_.baseLanes|l,o.memoizedState=null):f=l,st(ta,Fn),Fn|=f;return hn(s,o,m,l),o.child}function ly(s,o){var l=o.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function af(s,o,l,f,m){var _=_n(l)?Mi:Xt.current;return _=Wo(o,_),Yo(o,m),l=Xd(s,o,l,f,_,m),f=Yd(),s!==null&&!vn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,us(s,o,m)):(ct&&f&&bd(o),o.flags|=1,hn(s,o,l,m),o.child)}function uy(s,o,l,f,m){if(_n(l)){var _=!0;Ju(o)}else _=!1;if(Yo(o,m),o.stateNode===null)yc(s,o),Yg(o,l,f),rf(o,l,f,m),f=!0;else if(s===null){var S=o.stateNode,O=o.memoizedProps;S.props=O;var j=S.context,Q=l.contextType;typeof Q=="object"&&Q!==null?Q=Qn(Q):(Q=_n(l)?Mi:Xt.current,Q=Wo(o,Q));var ie=l.getDerivedStateFromProps,oe=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function";oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==f||j!==Q)&&Zg(o,S,f,Q),js=!1;var re=o.memoizedState;S.state=re,lc(o,f,S,m),j=o.memoizedState,O!==f||re!==j||yn.current||js?(typeof ie=="function"&&(nf(o,l,ie,f),j=o.memoizedState),(O=js||Xg(o,l,O,f,re,j,Q))?(oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=j),S.props=f,S.state=j,S.context=Q,f=O):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,Cg(s,o),O=o.memoizedProps,Q=o.type===o.elementType?O:wr(o.type,O),S.props=Q,oe=o.pendingProps,re=S.context,j=l.contextType,typeof j=="object"&&j!==null?j=Qn(j):(j=_n(l)?Mi:Xt.current,j=Wo(o,j));var _e=l.getDerivedStateFromProps;(ie=typeof _e=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==oe||re!==j)&&Zg(o,S,f,j),js=!1,re=o.memoizedState,S.state=re,lc(o,f,S,m);var we=o.memoizedState;O!==oe||re!==we||yn.current||js?(typeof _e=="function"&&(nf(o,l,_e,f),we=o.memoizedState),(Q=js||Xg(o,l,Q,f,re,we,j)||!1)?(ie||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,we,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,we,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=we),S.props=f,S.state=we,S.context=j,f=Q):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),f=!1)}return lf(s,o,l,f,_,m)}function lf(s,o,l,f,m,_){ly(s,o);var S=(o.flags&128)!==0;if(!f&&!S)return m&&pg(o,l,!1),us(s,o,_);f=o.stateNode,iI.current=o;var O=S&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&S?(o.child=Qo(o,s.child,null,_),o.child=Qo(o,null,O,_)):hn(s,o,O,_),o.memoizedState=f.state,m&&pg(o,l,!0),o.child}function cy(s){var o=s.stateNode;o.pendingContext?dg(s,o.pendingContext,o.pendingContext!==o.context):o.context&&dg(s,o.context,!1),qd(s,o.containerInfo)}function hy(s,o,l,f,m){return Ho(),Fd(m),o.flags|=256,hn(s,o,l,f),o.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(s){return{baseLanes:s,cachePool:null,transitions:null}}function dy(s,o,l){var f=o.pendingProps,m=ft.current,_=!1,S=(o.flags&128)!==0,O;if((O=S)||(O=s!==null&&s.memoizedState===null?!1:(m&2)!==0),O?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),st(ft,m&1),s===null)return Od(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(S=f.children,s=f.fallback,_?(f=o.mode,_=o.child,S={mode:"hidden",children:S},!(f&1)&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Rc(S,f,0,null),s=Wi(s,f,l,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=cf(l),o.memoizedState=uf,s):hf(o,S));if(m=s.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return oI(s,o,S,f,O,m,l);if(_){_=f.fallback,S=o.mode,m=s.child,O=m.sibling;var j={mode:"hidden",children:f.children};return!(S&1)&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=j,o.deletions=null):(f=Gs(m,j),f.subtreeFlags=m.subtreeFlags&14680064),O!==null?_=Gs(O,_):(_=Wi(_,S,l,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,S=s.child.memoizedState,S=S===null?cf(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=s.childLanes&~l,o.memoizedState=uf,f}return _=s.child,s=_.sibling,f=Gs(_,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,s!==null&&(l=o.deletions,l===null?(o.deletions=[s],o.flags|=16):l.push(s)),o.child=f,o.memoizedState=null,f}function hf(s,o){return o=Rc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function gc(s,o,l,f){return f!==null&&Fd(f),Qo(o,s.child,null,l),s=hf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function oI(s,o,l,f,m,_,S){if(l)return o.flags&256?(o.flags&=-257,f=sf(Error(t(422))),gc(s,o,S,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=f.fallback,m=o.mode,f=Rc({mode:"visible",children:f.children},m,0,null),_=Wi(_,m,S,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,o.mode&1&&Qo(o,s.child,null,S),o.child.memoizedState=cf(S),o.memoizedState=uf,_);if(!(o.mode&1))return gc(s,o,S,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var O=f.dgst;return f=O,_=Error(t(419)),f=sf(_,f,void 0),gc(s,o,S,f)}if(O=(S&s.childLanes)!==0,vn||O){if(f=Bt,f!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|S)?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,as(s,m),Ir(f,s,m,-1))}return Nf(),f=sf(Error(t(421))),gc(s,o,S,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=vI.bind(null,s),m._reactRetry=o,null):(s=_.treeContext,On=Ms(m.nextSibling),Mn=o,ct=!0,vr=null,s!==null&&(Kn[Hn++]=is,Kn[Hn++]=os,Kn[Hn++]=Oi,is=s.id,os=s.overflow,Oi=o),o=hf(o,f.children),o.flags|=4096,o)}function fy(s,o,l){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Ud(s.return,o,l)}function df(s,o,l,f,m){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=l,_.tailMode=m)}function py(s,o,l){var f=o.pendingProps,m=f.revealOrder,_=f.tail;if(hn(s,o,f.children,l),f=ft.current,f&2)f=f&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fy(s,l,o);else if(s.tag===19)fy(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(st(ft,f),!(o.mode&1))o.memoizedState=null;else switch(m){case"forwards":for(l=o.child,m=null;l!==null;)s=l.alternate,s!==null&&uc(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),df(o,!1,m,l,_);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&uc(s)===null){o.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}df(o,!0,l,null,_);break;case"together":df(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yc(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function us(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Ui|=o.lanes,!(l&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,l=Gs(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Gs(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function aI(s,o,l){switch(o.tag){case 3:cy(o),Ho();break;case 5:xg(o);break;case 1:_n(o.type)&&Ju(o);break;case 4:qd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;st(ic,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(st(ft,ft.current&1),o.flags|=128,null):l&o.child.childLanes?dy(s,o,l):(st(ft,ft.current&1),s=us(s,o,l),s!==null?s.sibling:null);st(ft,ft.current&1);break;case 19:if(f=(l&o.childLanes)!==0,s.flags&128){if(f)return py(s,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),st(ft,ft.current),f)break;return null;case 22:case 23:return o.lanes=0,ay(s,o,l)}return us(s,o,l)}var my,ff,gy,yy;my=function(s,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ff=function(){},gy=function(s,o,l,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,ji(Fr.current);var _=null;switch(l){case"input":m=We(s,m),f=We(s,f),_=[];break;case"select":m=ee({},m,{value:void 0}),f=ee({},f,{value:void 0}),_=[];break;case"textarea":m=Ts(s,m),f=Ts(s,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Xu)}Ne(l,f);var S;l=null;for(Q in m)if(!f.hasOwnProperty(Q)&&m.hasOwnProperty(Q)&&m[Q]!=null)if(Q==="style"){var O=m[Q];for(S in O)O.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in f){var j=f[Q];if(O=m!=null?m[Q]:void 0,f.hasOwnProperty(Q)&&j!==O&&(j!=null||O!=null))if(Q==="style")if(O){for(S in O)!O.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in j)j.hasOwnProperty(S)&&O[S]!==j[S]&&(l||(l={}),l[S]=j[S])}else l||(_||(_=[]),_.push(Q,l)),l=j;else Q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,O=O?O.__html:void 0,j!=null&&O!==j&&(_=_||[]).push(Q,j)):Q==="children"?typeof j!="string"&&typeof j!="number"||(_=_||[]).push(Q,""+j):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(j!=null&&Q==="onScroll"&&it("scroll",s),_||O===j||(_=[])):(_=_||[]).push(Q,j))}l&&(_=_||[]).push("style",l);var Q=_;(o.updateQueue=Q)&&(o.flags|=4)}},yy=function(s,o,l,f){l!==f&&(o.flags|=4)};function _l(s,o){if(!ct)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Zt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(o)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=l,o}function lI(s,o,l){var f=o.pendingProps;switch(Vd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(o),null;case 1:return _n(o.type)&&Zu(),Zt(o),null;case 3:return f=o.stateNode,Zo(),ot(yn),ot(Xt),Kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(rc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,vr!==null&&(Sf(vr),vr=null))),ff(s,o),Zt(o),null;case 5:Wd(o);var m=ji(fl.current);if(l=o.type,s!==null&&o.stateNode!=null)gy(s,o,l,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Zt(o),null}if(s=ji(Fr.current),rc(o)){f=o.stateNode,l=o.type;var _=o.memoizedProps;switch(f[Or]=o,f[ll]=_,s=(o.mode&1)!==0,l){case"dialog":it("cancel",f),it("close",f);break;case"iframe":case"object":case"embed":it("load",f);break;case"video":case"audio":for(m=0;m<il.length;m++)it(il[m],f);break;case"source":it("error",f);break;case"img":case"image":case"link":it("error",f),it("load",f);break;case"details":it("toggle",f);break;case"input":An(f,_),it("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},it("invalid",f);break;case"textarea":Nn(f,_),it("invalid",f)}Ne(l,_),m=null;for(var S in _)if(_.hasOwnProperty(S)){var O=_[S];S==="children"?typeof O=="string"?f.textContent!==O&&(_.suppressHydrationWarning!==!0&&Qu(f.textContent,O,s),m=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&Qu(f.textContent,O,s),m=["children",""+O]):i.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&it("scroll",f)}switch(l){case"input":Ft(f),Eo(f,_,!0);break;case"textarea":Ft(f),Ss(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Xu)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=gt(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=S.createElement(l,{is:f.is}):(s=S.createElement(l),l==="select"&&(S=s,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):s=S.createElementNS(s,l),s[Or]=o,s[ll]=f,my(s,o,!1,!1),o.stateNode=s;e:{switch(S=De(l,f),l){case"dialog":it("cancel",s),it("close",s),m=f;break;case"iframe":case"object":case"embed":it("load",s),m=f;break;case"video":case"audio":for(m=0;m<il.length;m++)it(il[m],s);m=f;break;case"source":it("error",s),m=f;break;case"img":case"image":case"link":it("error",s),it("load",s),m=f;break;case"details":it("toggle",s),m=f;break;case"input":An(s,f),m=We(s,f),it("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ee({},f,{value:void 0}),it("invalid",s);break;case"textarea":Nn(s,f),m=Ts(s,f),it("invalid",s);break;default:m=f}Ne(l,m),O=m;for(_ in O)if(O.hasOwnProperty(_)){var j=O[_];_==="style"?wi(s,j):_==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&_i(s,j)):_==="children"?typeof j=="string"?(l!=="textarea"||j!=="")&&or(s,j):typeof j=="number"&&or(s,""+j):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?j!=null&&_==="onScroll"&&it("scroll",s):j!=null&&q(s,_,j,S))}switch(l){case"input":Ft(s),Eo(s,f,!1);break;case"textarea":Ft(s),Ss(s);break;case"option":f.value!=null&&s.setAttribute("value",""+he(f.value));break;case"select":s.multiple=!!f.multiple,_=f.value,_!=null?sr(s,!!f.multiple,_,!1):f.defaultValue!=null&&sr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Xu)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Zt(o),null;case 6:if(s&&o.stateNode!=null)yy(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(l=ji(fl.current),ji(Fr.current),rc(o)){if(f=o.stateNode,l=o.memoizedProps,f[Or]=o,(_=f.nodeValue!==l)&&(s=Mn,s!==null))switch(s.tag){case 3:Qu(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qu(f.nodeValue,l,(s.mode&1)!==0)}_&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Or]=o,o.stateNode=f}return Zt(o),null;case 13:if(ot(ft),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ct&&On!==null&&o.mode&1&&!(o.flags&128))wg(),Ho(),o.flags|=98560,_=!1;else if(_=rc(o),f!==null&&f.dehydrated!==null){if(s===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Or]=o}else Ho(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Zt(o),_=!1}else vr!==null&&(Sf(vr),vr=null),_=!0;if(!_)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(s===null||ft.current&1?Mt===0&&(Mt=3):Nf())),o.updateQueue!==null&&(o.flags|=4),Zt(o),null);case 4:return Zo(),ff(s,o),s===null&&ol(o.stateNode.containerInfo),Zt(o),null;case 10:return Bd(o.type._context),Zt(o),null;case 17:return _n(o.type)&&Zu(),Zt(o),null;case 19:if(ot(ft),_=o.memoizedState,_===null)return Zt(o),null;if(f=(o.flags&128)!==0,S=_.rendering,S===null)if(f)_l(_,!1);else{if(Mt!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(S=uc(s),S!==null){for(o.flags|=128,_l(_,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)_=l,s=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,s=S.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return st(ft,ft.current&1|2),o.child}s=s.sibling}_.tail!==null&&rt()>na&&(o.flags|=128,f=!0,_l(_,!1),o.lanes=4194304)}else{if(!f)if(s=uc(S),s!==null){if(o.flags|=128,f=!0,l=s.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),_l(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!ct)return Zt(o),null}else 2*rt()-_.renderingStartTime>na&&l!==1073741824&&(o.flags|=128,f=!0,_l(_,!1),o.lanes=4194304);_.isBackwards?(S.sibling=o.child,o.child=S):(l=_.last,l!==null?l.sibling=S:o.child=S,_.last=S)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=rt(),o.sibling=null,l=ft.current,st(ft,f?l&1|2:l&1),o):(Zt(o),null);case 22:case 23:return Af(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?Fn&1073741824&&(Zt(o),o.subtreeFlags&6&&(o.flags|=8192)):Zt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function uI(s,o){switch(Vd(o),o.tag){case 1:return _n(o.type)&&Zu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Zo(),ot(yn),ot(Xt),Kd(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Wd(o),null;case 13:if(ot(ft),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ho()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ot(ft),null;case 4:return Zo(),null;case 10:return Bd(o.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var _c=!1,Jt=!1,cI=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ea(s,o){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){yt(s,o,f)}else l.current=null}function pf(s,o,l){try{l()}catch(f){yt(s,o,f)}}var _y=!1;function hI(s,o){if(Cd=Ds,s=Xm(),yd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,O=-1,j=-1,Q=0,ie=0,oe=s,re=null;t:for(;;){for(var _e;oe!==l||m!==0&&oe.nodeType!==3||(O=S+m),oe!==_||f!==0&&oe.nodeType!==3||(j=S+f),oe.nodeType===3&&(S+=oe.nodeValue.length),(_e=oe.firstChild)!==null;)re=oe,oe=_e;for(;;){if(oe===s)break t;if(re===l&&++Q===m&&(O=S),re===_&&++ie===f&&(j=S),(_e=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=_e}l=O===-1||j===-1?null:{start:O,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ad={focusedElem:s,selectionRange:l},Ds=!1,ve=o;ve!==null;)if(o=ve,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ve=s;else for(;ve!==null;){o=ve;try{var we=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ie=we.memoizedProps,St=we.memoizedState,G=o.stateNode,U=G.getSnapshotBeforeUpdate(o.elementType===o.type?Ie:wr(o.type,Ie),St);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){yt(o,o.return,ue)}if(s=o.sibling,s!==null){s.return=o.return,ve=s;break}ve=o.return}return we=_y,_y=!1,we}function vl(s,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var _=m.destroy;m.destroy=void 0,_!==void 0&&pf(o,l,_)}m=m.next}while(m!==f)}}function vc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function mf(s){var o=s.ref;if(o!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof o=="function"?o(s):o.current=s}}function vy(s){var o=s.alternate;o!==null&&(s.alternate=null,vy(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Or],delete o[ll],delete o[Pd],delete o[KT],delete o[HT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function wy(s){return s.tag===5||s.tag===3||s.tag===4}function Ey(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Xu));else if(f!==4&&(s=s.child,s!==null))for(gf(s,o,l),s=s.sibling;s!==null;)gf(s,o,l),s=s.sibling}function yf(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(yf(s,o,l),s=s.sibling;s!==null;)yf(s,o,l),s=s.sibling}var Kt=null,Er=!1;function Us(s,o,l){for(l=l.child;l!==null;)Ty(s,o,l),l=l.sibling}function Ty(s,o,l){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Ni,l)}catch{}switch(l.tag){case 5:Jt||ea(l,o);case 6:var f=Kt,m=Er;Kt=null,Us(s,o,l),Kt=f,Er=m,Kt!==null&&(Er?(s=Kt,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Kt.removeChild(l.stateNode));break;case 18:Kt!==null&&(Er?(s=Kt,l=l.stateNode,s.nodeType===8?Rd(s.parentNode,l):s.nodeType===1&&Rd(s,l),gr(s)):Rd(Kt,l.stateNode));break;case 4:f=Kt,m=Er,Kt=l.stateNode.containerInfo,Er=!0,Us(s,o,l),Kt=f,Er=m;break;case 0:case 11:case 14:case 15:if(!Jt&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,S=_.destroy;_=_.tag,S!==void 0&&(_&2||_&4)&&pf(l,o,S),m=m.next}while(m!==f)}Us(s,o,l);break;case 1:if(!Jt&&(ea(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(O){yt(l,o,O)}Us(s,o,l);break;case 21:Us(s,o,l);break;case 22:l.mode&1?(Jt=(f=Jt)||l.memoizedState!==null,Us(s,o,l),Jt=f):Us(s,o,l);break;default:Us(s,o,l)}}function Iy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new cI),o.forEach(function(f){var m=wI.bind(null,s,f);l.has(f)||(l.add(f),f.then(m,m))})}}function Tr(s,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var _=s,S=o,O=S;e:for(;O!==null;){switch(O.tag){case 5:Kt=O.stateNode,Er=!1;break e;case 3:Kt=O.stateNode.containerInfo,Er=!0;break e;case 4:Kt=O.stateNode.containerInfo,Er=!0;break e}O=O.return}if(Kt===null)throw Error(t(160));Ty(_,S,m),Kt=null,Er=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(Q){yt(m,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sy(o,s),o=o.sibling}function Sy(s,o){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Tr(o,s),jr(s),f&4){try{vl(3,s,s.return),vc(3,s)}catch(Ie){yt(s,s.return,Ie)}try{vl(5,s,s.return)}catch(Ie){yt(s,s.return,Ie)}}break;case 1:Tr(o,s),jr(s),f&512&&l!==null&&ea(l,l.return);break;case 5:if(Tr(o,s),jr(s),f&512&&l!==null&&ea(l,l.return),s.flags&32){var m=s.stateNode;try{or(m,"")}catch(Ie){yt(s,s.return,Ie)}}if(f&4&&(m=s.stateNode,m!=null)){var _=s.memoizedProps,S=l!==null?l.memoizedProps:_,O=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&gi(m,_),De(O,S);var Q=De(O,_);for(S=0;S<j.length;S+=2){var ie=j[S],oe=j[S+1];ie==="style"?wi(m,oe):ie==="dangerouslySetInnerHTML"?_i(m,oe):ie==="children"?or(m,oe):q(m,ie,oe,Q)}switch(O){case"input":yi(m,_);break;case"textarea":Is(m,_);break;case"select":var re=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var _e=_.value;_e!=null?sr(m,!!_.multiple,_e,!1):re!==!!_.multiple&&(_.defaultValue!=null?sr(m,!!_.multiple,_.defaultValue,!0):sr(m,!!_.multiple,_.multiple?[]:"",!1))}m[ll]=_}catch(Ie){yt(s,s.return,Ie)}}break;case 6:if(Tr(o,s),jr(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,_=s.memoizedProps;try{m.nodeValue=_}catch(Ie){yt(s,s.return,Ie)}}break;case 3:if(Tr(o,s),jr(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{gr(o.containerInfo)}catch(Ie){yt(s,s.return,Ie)}break;case 4:Tr(o,s),jr(s);break;case 13:Tr(o,s),jr(s),m=s.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(wf=rt())),f&4&&Iy(s);break;case 22:if(ie=l!==null&&l.memoizedState!==null,s.mode&1?(Jt=(Q=Jt)||ie,Tr(o,s),Jt=Q):Tr(o,s),jr(s),f&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!ie&&s.mode&1)for(ve=s,ie=s.child;ie!==null;){for(oe=ve=ie;ve!==null;){switch(re=ve,_e=re.child,re.tag){case 0:case 11:case 14:case 15:vl(4,re,re.return);break;case 1:ea(re,re.return);var we=re.stateNode;if(typeof we.componentWillUnmount=="function"){f=re,l=re.return;try{o=f,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(Ie){yt(f,l,Ie)}}break;case 5:ea(re,re.return);break;case 22:if(re.memoizedState!==null){Ny(oe);continue}}_e!==null?(_e.return=re,ve=_e):Ny(oe)}ie=ie.sibling}e:for(ie=null,oe=s;;){if(oe.tag===5){if(ie===null){ie=oe;try{m=oe.stateNode,Q?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=oe.stateNode,j=oe.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,O.style.display=vi("display",S))}catch(Ie){yt(s,s.return,Ie)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(Ie){yt(s,s.return,Ie)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===s)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===s)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===s)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:Tr(o,s),jr(s),f&4&&Iy(s);break;case 21:break;default:Tr(o,s),jr(s)}}function jr(s){var o=s.flags;if(o&2){try{e:{for(var l=s.return;l!==null;){if(wy(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(or(m,""),f.flags&=-33);var _=Ey(s);yf(s,_,m);break;case 3:case 4:var S=f.stateNode.containerInfo,O=Ey(s);gf(s,O,S);break;default:throw Error(t(161))}}catch(j){yt(s,s.return,j)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function dI(s,o,l){ve=s,Cy(s)}function Cy(s,o,l){for(var f=(s.mode&1)!==0;ve!==null;){var m=ve,_=m.child;if(m.tag===22&&f){var S=m.memoizedState!==null||_c;if(!S){var O=m.alternate,j=O!==null&&O.memoizedState!==null||Jt;O=_c;var Q=Jt;if(_c=S,(Jt=j)&&!Q)for(ve=m;ve!==null;)S=ve,j=S.child,S.tag===22&&S.memoizedState!==null?xy(m):j!==null?(j.return=S,ve=j):xy(m);for(;_!==null;)ve=_,Cy(_),_=_.sibling;ve=m,_c=O,Jt=Q}Ay(s)}else m.subtreeFlags&8772&&_!==null?(_.return=m,ve=_):Ay(s)}}function Ay(s){for(;ve!==null;){var o=ve;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Jt||vc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Jt)if(l===null)f.componentDidMount();else{var m=o.elementType===o.type?l.memoizedProps:wr(o.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&Ng(o,_,f);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Ng(o,S,l)}break;case 5:var O=o.stateNode;if(l===null&&o.flags&4){l=O;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&l.focus();break;case"img":j.src&&(l.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&gr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||o.flags&512&&mf(o)}catch(re){yt(o,o.return,re)}}if(o===s){ve=null;break}if(l=o.sibling,l!==null){l.return=o.return,ve=l;break}ve=o.return}}function Ny(s){for(;ve!==null;){var o=ve;if(o===s){ve=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ve=l;break}ve=o.return}}function xy(s){for(;ve!==null;){var o=ve;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{vc(4,o)}catch(j){yt(o,l,j)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(j){yt(o,m,j)}}var _=o.return;try{mf(o)}catch(j){yt(o,_,j)}break;case 5:var S=o.return;try{mf(o)}catch(j){yt(o,S,j)}}}catch(j){yt(o,o.return,j)}if(o===s){ve=null;break}var O=o.sibling;if(O!==null){O.return=o.return,ve=O;break}ve=o.return}}var fI=Math.ceil,wc=X.ReactCurrentDispatcher,_f=X.ReactCurrentOwner,Yn=X.ReactCurrentBatchConfig,Ge=0,Bt=null,Pt=null,Ht=0,Fn=0,ta=Os(0),Mt=0,wl=null,Ui=0,Ec=0,vf=0,El=null,wn=null,wf=0,na=1/0,cs=null,Tc=!1,Ef=null,zs=null,Ic=!1,$s=null,Sc=0,Tl=0,Tf=null,Cc=-1,Ac=0;function dn(){return Ge&6?rt():Cc!==-1?Cc:Cc=rt()}function qs(s){return s.mode&1?Ge&2&&Ht!==0?Ht&-Ht:XT.transition!==null?(Ac===0&&(Ac=Ri()),Ac):(s=je,s!==0||(s=window.event,s=s===void 0?16:Xa(s.type)),s):1}function Ir(s,o,l,f){if(50<Tl)throw Tl=0,Tf=null,Error(t(185));xs(s,l,f),(!(Ge&2)||s!==Bt)&&(s===Bt&&(!(Ge&2)&&(Ec|=l),Mt===4&&Ws(s,Ht)),En(s,f),l===1&&Ge===0&&!(o.mode&1)&&(na=rt()+500,ec&&Ls()))}function En(s,o){var l=s.callbackNode;Zr(s,o);var f=xi(s,s===Bt?Ht:0);if(f===0)l!==null&&Wa(l),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(l!=null&&Wa(l),o===1)s.tag===0?QT(Py.bind(null,s)):mg(Py.bind(null,s)),WT(function(){!(Ge&6)&&Ls()}),l=null;else{switch(Ps(f)){case 1:l=Ai;break;case 4:l=Cs;break;case 16:l=qn;break;case 536870912:l=Au;break;default:l=qn}l=Ly(l,Ry.bind(null,s))}s.callbackPriority=o,s.callbackNode=l}}function Ry(s,o){if(Cc=-1,Ac=0,Ge&6)throw Error(t(327));var l=s.callbackNode;if(ra()&&s.callbackNode!==l)return null;var f=xi(s,s===Bt?Ht:0);if(f===0)return null;if(f&30||f&s.expiredLanes||o)o=Nc(s,f);else{o=f;var m=Ge;Ge|=2;var _=Dy();(Bt!==s||Ht!==o)&&(cs=null,na=rt()+500,$i(s,o));do try{gI();break}catch(O){ky(s,O)}while(!0);jd(),wc.current=_,Ge=m,Pt!==null?o=0:(Bt=null,Ht=0,o=Mt)}if(o!==0){if(o===2&&(m=Dn(s),m!==0&&(f=m,o=If(s,m))),o===1)throw l=wl,$i(s,0),Ws(s,f),En(s,rt()),l;if(o===6)Ws(s,f);else{if(m=s.current.alternate,!(f&30)&&!pI(m)&&(o=Nc(s,f),o===2&&(_=Dn(s),_!==0&&(f=_,o=If(s,_))),o===1))throw l=wl,$i(s,0),Ws(s,f),En(s,rt()),l;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:qi(s,wn,cs);break;case 3:if(Ws(s,f),(f&130023424)===f&&(o=wf+500-rt(),10<o)){if(xi(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){dn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=xd(qi.bind(null,s,wn,cs),o);break}qi(s,wn,cs);break;case 4:if(Ws(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var S=31-un(f);_=1<<S,S=o[S],S>m&&(m=S),f&=~_}if(f=m,f=rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*fI(f/1960))-f,10<f){s.timeoutHandle=xd(qi.bind(null,s,wn,cs),f);break}qi(s,wn,cs);break;case 5:qi(s,wn,cs);break;default:throw Error(t(329))}}}return En(s,rt()),s.callbackNode===l?Ry.bind(null,s):null}function If(s,o){var l=El;return s.current.memoizedState.isDehydrated&&($i(s,o).flags|=256),s=Nc(s,o),s!==2&&(o=wn,wn=l,o!==null&&Sf(o)),s}function Sf(s){wn===null?wn=s:wn.push.apply(wn,s)}function pI(s){for(var o=s;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],_=m.getSnapshot;m=m.value;try{if(!_r(_(),m))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ws(s,o){for(o&=~vf,o&=~Ec,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var l=31-un(o),f=1<<l;s[l]=-1,o&=~f}}function Py(s){if(Ge&6)throw Error(t(327));ra();var o=xi(s,0);if(!(o&1))return En(s,rt()),null;var l=Nc(s,o);if(s.tag!==0&&l===2){var f=Dn(s);f!==0&&(o=f,l=If(s,f))}if(l===1)throw l=wl,$i(s,0),Ws(s,o),En(s,rt()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,qi(s,wn,cs),En(s,rt()),null}function Cf(s,o){var l=Ge;Ge|=1;try{return s(o)}finally{Ge=l,Ge===0&&(na=rt()+500,ec&&Ls())}}function zi(s){$s!==null&&$s.tag===0&&!(Ge&6)&&ra();var o=Ge;Ge|=1;var l=Yn.transition,f=je;try{if(Yn.transition=null,je=1,s)return s()}finally{je=f,Yn.transition=l,Ge=o,!(Ge&6)&&Ls()}}function Af(){Fn=ta.current,ot(ta)}function $i(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,qT(l)),Pt!==null)for(l=Pt.return;l!==null;){var f=l;switch(Vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Zu();break;case 3:Zo(),ot(yn),ot(Xt),Kd();break;case 5:Wd(f);break;case 4:Zo();break;case 13:ot(ft);break;case 19:ot(ft);break;case 10:Bd(f.type._context);break;case 22:case 23:Af()}l=l.return}if(Bt=s,Pt=s=Gs(s.current,null),Ht=Fn=o,Mt=0,wl=null,vf=Ec=Ui=0,wn=El=null,Li!==null){for(o=0;o<Li.length;o++)if(l=Li[o],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,_=l.pending;if(_!==null){var S=_.next;_.next=m,f.next=S}l.pending=f}Li=null}return s}function ky(s,o){do{var l=Pt;try{if(jd(),cc.current=pc,hc){for(var f=pt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}hc=!1}if(Bi=0,jt=Vt=pt=null,pl=!1,ml=0,_f.current=null,l===null||l.return===null){Mt=1,wl=o,Pt=null;break}e:{var _=s,S=l.return,O=l,j=o;if(o=Ht,O.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=j,ie=O,oe=ie.tag;if(!(ie.mode&1)&&(oe===0||oe===11||oe===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var _e=ny(S);if(_e!==null){_e.flags&=-257,ry(_e,S,O,_,o),_e.mode&1&&ty(_,Q,o),o=_e,j=Q;var we=o.updateQueue;if(we===null){var Ie=new Set;Ie.add(j),o.updateQueue=Ie}else we.add(j);break e}else{if(!(o&1)){ty(_,Q,o),Nf();break e}j=Error(t(426))}}else if(ct&&O.mode&1){var St=ny(S);if(St!==null){!(St.flags&65536)&&(St.flags|=256),ry(St,S,O,_,o),Fd(Jo(j,O));break e}}_=j=Jo(j,O),Mt!==4&&(Mt=2),El===null?El=[_]:El.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=Jg(_,j,o);Ag(_,G);break e;case 1:O=j;var U=_.type,H=_.stateNode;if(!(_.flags&128)&&(typeof U.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(zs===null||!zs.has(H)))){_.flags|=65536,o&=-o,_.lanes|=o;var ue=ey(_,O,o);Ag(_,ue);break e}}_=_.return}while(_!==null)}Vy(l)}catch(Ce){o=Ce,Pt===l&&l!==null&&(Pt=l=l.return);continue}break}while(!0)}function Dy(){var s=wc.current;return wc.current=pc,s===null?pc:s}function Nf(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(Ui&268435455)&&!(Ec&268435455)||Ws(Bt,Ht)}function Nc(s,o){var l=Ge;Ge|=2;var f=Dy();(Bt!==s||Ht!==o)&&(cs=null,$i(s,o));do try{mI();break}catch(m){ky(s,m)}while(!0);if(jd(),Ge=l,wc.current=f,Pt!==null)throw Error(t(261));return Bt=null,Ht=0,Mt}function mI(){for(;Pt!==null;)by(Pt)}function gI(){for(;Pt!==null&&!Su();)by(Pt)}function by(s){var o=Fy(s.alternate,s,Fn);s.memoizedProps=s.pendingProps,o===null?Vy(s):Pt=o,_f.current=null}function Vy(s){var o=s;do{var l=o.alternate;if(s=o.return,o.flags&32768){if(l=uI(l,o),l!==null){l.flags&=32767,Pt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Mt=6,Pt=null;return}}else if(l=lI(l,o,Fn),l!==null){Pt=l;return}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=s}while(o!==null);Mt===0&&(Mt=5)}function qi(s,o,l){var f=je,m=Yn.transition;try{Yn.transition=null,je=1,yI(s,o,l,f)}finally{Yn.transition=m,je=f}return null}function yI(s,o,l,f){do ra();while($s!==null);if(Ge&6)throw Error(t(327));l=s.finishedWork;var m=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var _=l.lanes|l.childLanes;if(Je(s,_),s===Bt&&(Pt=Bt=null,Ht=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Ic||(Ic=!0,Ly(qn,function(){return ra(),null})),_=(l.flags&15990)!==0,l.subtreeFlags&15990||_){_=Yn.transition,Yn.transition=null;var S=je;je=1;var O=Ge;Ge|=4,_f.current=null,hI(s,l),Sy(l,s),FT(Ad),Ds=!!Cd,Ad=Cd=null,s.current=l,dI(l),ud(),Ge=O,je=S,Yn.transition=_}else s.current=l;if(Ic&&(Ic=!1,$s=s,Sc=m),_=s.pendingLanes,_===0&&(zs=null),Nu(l.stateNode),En(s,rt()),o!==null)for(f=s.onRecoverableError,l=0;l<o.length;l++)m=o[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(Tc)throw Tc=!1,s=Ef,Ef=null,s;return Sc&1&&s.tag!==0&&ra(),_=s.pendingLanes,_&1?s===Tf?Tl++:(Tl=0,Tf=s):Tl=0,Ls(),null}function ra(){if($s!==null){var s=Ps(Sc),o=Yn.transition,l=je;try{if(Yn.transition=null,je=16>s?16:s,$s===null)var f=!1;else{if(s=$s,$s=null,Sc=0,Ge&6)throw Error(t(331));var m=Ge;for(Ge|=4,ve=s.current;ve!==null;){var _=ve,S=_.child;if(ve.flags&16){var O=_.deletions;if(O!==null){for(var j=0;j<O.length;j++){var Q=O[j];for(ve=Q;ve!==null;){var ie=ve;switch(ie.tag){case 0:case 11:case 15:vl(8,ie,_)}var oe=ie.child;if(oe!==null)oe.return=ie,ve=oe;else for(;ve!==null;){ie=ve;var re=ie.sibling,_e=ie.return;if(vy(ie),ie===Q){ve=null;break}if(re!==null){re.return=_e,ve=re;break}ve=_e}}}var we=_.alternate;if(we!==null){var Ie=we.child;if(Ie!==null){we.child=null;do{var St=Ie.sibling;Ie.sibling=null,Ie=St}while(Ie!==null)}}ve=_}}if(_.subtreeFlags&2064&&S!==null)S.return=_,ve=S;else e:for(;ve!==null;){if(_=ve,_.flags&2048)switch(_.tag){case 0:case 11:case 15:vl(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,ve=G;break e}ve=_.return}}var U=s.current;for(ve=U;ve!==null;){S=ve;var H=S.child;if(S.subtreeFlags&2064&&H!==null)H.return=S,ve=H;else e:for(S=U;ve!==null;){if(O=ve,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:vc(9,O)}}catch(Ce){yt(O,O.return,Ce)}if(O===S){ve=null;break e}var ue=O.sibling;if(ue!==null){ue.return=O.return,ve=ue;break e}ve=O.return}}if(Ge=m,Ls(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Ni,s)}catch{}f=!0}return f}finally{je=l,Yn.transition=o}}return!1}function My(s,o,l){o=Jo(l,o),o=Jg(s,o,1),s=Bs(s,o,1),o=dn(),s!==null&&(xs(s,1,o),En(s,o))}function yt(s,o,l){if(s.tag===3)My(s,s,l);else for(;o!==null;){if(o.tag===3){My(o,s,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(zs===null||!zs.has(f))){s=Jo(l,s),s=ey(o,s,1),o=Bs(o,s,1),s=dn(),o!==null&&(xs(o,1,s),En(o,s));break}}o=o.return}}function _I(s,o,l){var f=s.pingCache;f!==null&&f.delete(o),o=dn(),s.pingedLanes|=s.suspendedLanes&l,Bt===s&&(Ht&l)===l&&(Mt===4||Mt===3&&(Ht&130023424)===Ht&&500>rt()-wf?$i(s,0):vf|=l),En(s,o)}function Oy(s,o){o===0&&(s.mode&1?(o=Ao,Ao<<=1,!(Ao&130023424)&&(Ao=4194304)):o=1);var l=dn();s=as(s,o),s!==null&&(xs(s,o,l),En(s,l))}function vI(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),Oy(s,l)}function wI(s,o){var l=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Oy(s,l)}var Fy;Fy=function(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps||yn.current)vn=!0;else{if(!(s.lanes&l)&&!(o.flags&128))return vn=!1,aI(s,o,l);vn=!!(s.flags&131072)}else vn=!1,ct&&o.flags&1048576&&gg(o,nc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;yc(s,o),s=o.pendingProps;var m=Wo(o,Xt.current);Yo(o,l),m=Xd(null,o,f,s,m,l);var _=Yd();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,_n(f)?(_=!0,Ju(o)):_=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,$d(o),m.updater=mc,o.stateNode=m,m._reactInternals=o,rf(o,f,s,l),o=lf(null,o,f,!0,_,l)):(o.tag=0,ct&&_&&bd(o),hn(null,o,m,l),o=o.child),o;case 16:f=o.elementType;e:{switch(yc(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=TI(f),s=wr(f,s),m){case 0:o=af(null,o,f,s,l);break e;case 1:o=uy(null,o,f,s,l);break e;case 11:o=sy(null,o,f,s,l);break e;case 14:o=iy(null,o,f,wr(f.type,s),l);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:wr(f,m),af(s,o,f,m,l);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:wr(f,m),uy(s,o,f,m,l);case 3:e:{if(cy(o),s===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,m=_.element,Cg(s,o),lc(o,f,null,l);var S=o.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){m=Jo(Error(t(423)),o),o=hy(s,o,f,l,m);break e}else if(f!==m){m=Jo(Error(t(424)),o),o=hy(s,o,f,l,m);break e}else for(On=Ms(o.stateNode.containerInfo.firstChild),Mn=o,ct=!0,vr=null,l=Ig(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ho(),f===m){o=us(s,o,l);break e}hn(s,o,f,l)}o=o.child}return o;case 5:return xg(o),s===null&&Od(o),f=o.type,m=o.pendingProps,_=s!==null?s.memoizedProps:null,S=m.children,Nd(f,m)?S=null:_!==null&&Nd(f,_)&&(o.flags|=32),ly(s,o),hn(s,o,S,l),o.child;case 6:return s===null&&Od(o),null;case 13:return dy(s,o,l);case 4:return qd(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Qo(o,null,f,l):hn(s,o,f,l),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:wr(f,m),sy(s,o,f,m,l);case 7:return hn(s,o,o.pendingProps,l),o.child;case 8:return hn(s,o,o.pendingProps.children,l),o.child;case 12:return hn(s,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,_=o.memoizedProps,S=m.value,st(ic,f._currentValue),f._currentValue=S,_!==null)if(_r(_.value,S)){if(_.children===m.children&&!yn.current){o=us(s,o,l);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var O=_.dependencies;if(O!==null){S=_.child;for(var j=O.firstContext;j!==null;){if(j.context===f){if(_.tag===1){j=ls(-1,l&-l),j.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?j.next=j:(j.next=ie.next,ie.next=j),Q.pending=j}}_.lanes|=l,j=_.alternate,j!==null&&(j.lanes|=l),Ud(_.return,l,o),O.lanes|=l;break}j=j.next}}else if(_.tag===10)S=_.type===o.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=l,O=S.alternate,O!==null&&(O.lanes|=l),Ud(S,l,o),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===o){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}hn(s,o,m.children,l),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Yo(o,l),m=Qn(m),f=f(m),o.flags|=1,hn(s,o,f,l),o.child;case 14:return f=o.type,m=wr(f,o.pendingProps),m=wr(f.type,m),iy(s,o,f,m,l);case 15:return oy(s,o,o.type,o.pendingProps,l);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:wr(f,m),yc(s,o),o.tag=1,_n(f)?(s=!0,Ju(o)):s=!1,Yo(o,l),Yg(o,f,m),rf(o,f,m,l),lf(null,o,f,!0,s,l);case 19:return py(s,o,l);case 22:return ay(s,o,l)}throw Error(t(156,o.tag))};function Ly(s,o){return So(s,o)}function EI(s,o,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,o,l,f){return new EI(s,o,l,f)}function xf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function TI(s){if(typeof s=="function")return xf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===D)return 11;if(s===fe)return 14}return 2}function Gs(s,o){var l=s.alternate;return l===null?(l=Zn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function xc(s,o,l,f,m,_){var S=2;if(f=s,typeof s=="function")xf(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case R:return Wi(l.children,m,_,o);case I:S=8,m|=8;break;case N:return s=Zn(12,l,o,m|2),s.elementType=N,s.lanes=_,s;case P:return s=Zn(13,l,o,m),s.elementType=P,s.lanes=_,s;case ae:return s=Zn(19,l,o,m),s.elementType=ae,s.lanes=_,s;case le:return Rc(l,m,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b:S=10;break e;case k:S=9;break e;case D:S=11;break e;case fe:S=14;break e;case me:S=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Zn(S,l,o,m),o.elementType=s,o.type=f,o.lanes=_,o}function Wi(s,o,l,f){return s=Zn(7,s,f,o),s.lanes=l,s}function Rc(s,o,l,f){return s=Zn(22,s,f,o),s.elementType=le,s.lanes=l,s.stateNode={isHidden:!1},s}function Rf(s,o,l){return s=Zn(6,s,null,o),s.lanes=l,s}function Pf(s,o,l){return o=Zn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function II(s,o,l,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ns(0),this.expirationTimes=Ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ns(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function kf(s,o,l,f,m,_,S,O,j){return s=new II(s,o,l,O,j),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Zn(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},$d(_),s}function SI(s,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:f==null?null:""+f,children:s,containerInfo:o,implementation:l}}function jy(s){if(!s)return Fs;s=s._reactInternals;e:{if(hr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(_n(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(_n(l))return fg(s,l,o)}return o}function By(s,o,l,f,m,_,S,O,j){return s=kf(l,f,!0,s,m,_,S,O,j),s.context=jy(null),l=s.current,f=dn(),m=qs(l),_=ls(f,m),_.callback=o??null,Bs(l,_,m),s.current.lanes=m,xs(s,m,f),En(s,f),s}function Pc(s,o,l,f){var m=o.current,_=dn(),S=qs(m);return l=jy(l),o.context===null?o.context=l:o.pendingContext=l,o=ls(_,S),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Bs(m,o,S),s!==null&&(Ir(s,m,S,_),ac(s,m,S)),S}function kc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Uy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Df(s,o){Uy(s,o),(s=s.alternate)&&Uy(s,o)}function CI(){return null}var zy=typeof reportError=="function"?reportError:function(s){console.error(s)};function bf(s){this._internalRoot=s}Dc.prototype.render=bf.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Pc(s,o,null,null)},Dc.prototype.unmount=bf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;zi(function(){Pc(null,s,null,null)}),o[rs]=null}};function Dc(s){this._internalRoot=s}Dc.prototype.unstable_scheduleHydration=function(s){if(s){var o=Du();s={blockedOn:null,target:s,priority:o};for(var l=0;l<Dr.length&&o!==0&&o<Dr[l].priority;l++);Dr.splice(l,0,s),l===0&&Mu(s)}};function Vf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function $y(){}function AI(s,o,l,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var Q=kc(S);_.call(Q)}}var S=By(o,f,s,0,null,!1,!1,"",$y);return s._reactRootContainer=S,s[rs]=S.current,ol(s.nodeType===8?s.parentNode:s),zi(),S}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var O=f;f=function(){var Q=kc(j);O.call(Q)}}var j=kf(s,0,!1,null,null,!1,!1,"",$y);return s._reactRootContainer=j,s[rs]=j.current,ol(s.nodeType===8?s.parentNode:s),zi(function(){Pc(o,j,l,f)}),j}function Vc(s,o,l,f,m){var _=l._reactRootContainer;if(_){var S=_;if(typeof m=="function"){var O=m;m=function(){var j=kc(S);O.call(j)}}Pc(o,S,s,m)}else S=AI(l,o,s,m,f);return kc(S)}Pu=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var l=As(o.pendingLanes);l!==0&&(Rs(o,l|1),En(o,rt()),!(Ge&6)&&(na=rt()+500,Ls()))}break;case 13:zi(function(){var f=as(s,1);if(f!==null){var m=dn();Ir(f,s,1,m)}}),Df(s,1)}},No=function(s){if(s.tag===13){var o=as(s,134217728);if(o!==null){var l=dn();Ir(o,s,134217728,l)}Df(s,134217728)}},ku=function(s){if(s.tag===13){var o=qs(s),l=as(s,o);if(l!==null){var f=dn();Ir(l,s,o,f)}Df(s,o)}},Du=function(){return je},bu=function(s,o){var l=je;try{return je=s,o()}finally{je=l}},ar=function(s,o,l){switch(o){case"input":if(yi(s,l),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==s&&f.form===s.form){var m=Yu(f);if(!m)throw Error(t(90));an(f),yi(f,m)}}}break;case"textarea":Is(s,l);break;case"select":o=l.value,o!=null&&sr(s,!!l.multiple,o,!1)}},Yr=Cf,Ii=zi;var NI={usingClientEntryPoint:!1,Events:[ul,$o,Yu,Rn,Ti,Cf]},Il={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xI={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qa(s),s===null?null:s.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||CI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Ni=Mc.inject(xI),kn=Mc}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI,Tn.createPortal=function(s,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(o))throw Error(t(200));return SI(s,o,null,l)},Tn.createRoot=function(s,o){if(!Vf(s))throw Error(t(299));var l=!1,f="",m=zy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=kf(s,1,!1,null,null,l,!1,f,m),s[rs]=o.current,ol(s.nodeType===8?s.parentNode:s),new bf(o)},Tn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qa(o),s=s===null?null:s.stateNode,s},Tn.flushSync=function(s){return zi(s)},Tn.hydrate=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!0,l)},Tn.hydrateRoot=function(s,o,l){if(!Vf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,m=!1,_="",S=zy;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=By(o,null,s,1,l??null,m,!1,_,S),s[rs]=o.current,ol(s),f)for(s=0;s<f.length;s++)l=f[s],m=l._getVersion,m=m(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,m]:o.mutableSourceEagerHydrationData.push(l,m);return new Dc(o)},Tn.render=function(s,o,l){if(!bc(o))throw Error(t(200));return Vc(null,s,o,!1,l)},Tn.unmountComponentAtNode=function(s){if(!bc(s))throw Error(t(40));return s._reactRootContainer?(zi(function(){Vc(null,null,s,!1,function(){s._reactRootContainer=null,s[rs]=null})}),!0):!1},Tn.unstable_batchedUpdates=Cf,Tn.unstable_renderSubtreeIntoContainer=function(s,o,l,f){if(!bc(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vc(s,o,l,!1,f)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var Zy;function FI(){if(Zy)return Ff.exports;Zy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ff.exports=OI(),Ff.exports}var Jy;function LI(){if(Jy)return Oc;Jy=1;var r=FI();return Oc.createRoot=r.createRoot,Oc.hydrateRoot=r.hydrateRoot,Oc}var jI=LI();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sw=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ce.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:u,...c},d)=>ce.createElement("svg",{ref:d,...UI,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:sw("lucide",i),...c},[...u.map(([p,g])=>ce.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(r,e)=>{const t=ce.forwardRef(({className:n,...i},a)=>ce.createElement(zI,{ref:a,iconNode:e,className:sw(`lucide-${BI(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],qI=tt("Award",$I);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ki=tt("ChevronLeft",WI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zs=tt("ChevronRight",GI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],HI=tt("CirclePlus",KI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],XI=tt("CircleSlash",QI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],iw=tt("Clock",YI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ow=tt("Download",ZI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16.2V21h-4.8",key:"1hrera"}],["path",{d:"M21 7.8V3h-4.8",key:"ul1q53"}],["path",{d:"M3 16.2V21h4.8",key:"1x04uo"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 7.8V3h4.8",key:"1ijppm"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],eS=tt("Expand",JI);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nS=tt("FileText",tS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],sS=tt("GitCommitHorizontal",rS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oS=tt("Globe",iS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],lS=tt("ImagePlus",aS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],cS=tt("Loader",uS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dS=tt("Lock",hS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],pS=tt("MessageSquare",fS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],gS=tt("Minimize",mS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Up=tt("Music",yS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],aw=tt("Pause",_S);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],lw=tt("Play",vS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],ES=tt("RotateCw",wS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],uw=tt("Save",TS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],SS=tt("Share",IS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],AS=tt("ShoppingBag",CS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xS=tt("SquarePen",NS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],PS=tt("Trash2",RS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]],DS=tt("Volume",kS);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],io=tt("X",bS),VS=()=>{};var e_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},MS=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],u=r[t++],c=r[t++],d=((i&7)<<18|(a&63)<<12|(u&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=r[t++],u=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],u=i+1<r.length,c=u?r[i+1]:0,d=i+2<r.length,p=d?r[i+2]:0,g=a>>2,v=(a&3)<<4|c>>4;let E=(c&15)<<2|p>>6,C=p&63;d||(C=64,u||(E=64)),n.push(t[g],t[v],t[E],t[C])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(cw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const p=i<r.length?t[r.charAt(i)]:64;++i;const v=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||p==null||v==null)throw new OS;const E=a<<2|c>>4;if(n.push(E),p!==64){const C=c<<4&240|p>>2;if(n.push(C),v!==64){const A=p<<6&192|v;n.push(A)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FS=function(r){const e=cw(r);return hw.encodeByteArray(e,!0)},nh=function(r){return FS(r).replace(/\./g,"")},LS=function(r){try{return hw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=()=>jS().__FIREBASE_DEFAULTS__,US=()=>{if(typeof process>"u"||typeof e_>"u")return;const r=e_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&LS(r[1]);return e&&JSON.parse(e)},zp=()=>{try{return VS()||BS()||US()||zS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$S=r=>{var e,t;return(t=(e=zp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},qS=r=>{const e=$S(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},dw=()=>{var r;return(r=zp())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[nh(JSON.stringify(t)),nh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KS(){var r;const e=(r=zp())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fw(){return!KS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pw(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="FirebaseError";class mo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=QS,Object.setPrototypeOf(this,mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mw.prototype.create)}}class mw{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?XS(a,n):"Error",c=`${this.serviceName}: ${u} (${i}).`;return new mo(i,c,n)}}function XS(r,e){return r.replace(YS,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const YS=/\{\$([^}]+)}/g;function sh(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],u=e[i];if(t_(a)&&t_(u)){if(!sh(a,u))return!1}else if(a!==u)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function t_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r){return r&&r._delegate?r._delegate:r}class ya{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new WS;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e1(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&u.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JS(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JS(r){return r===Hi?void 0:r}function e1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const n1={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},r1=$e.INFO,s1={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},i1=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=s1[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yw{constructor(e){this.name=e,this._logLevel=r1,this._logHandler=i1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const o1=(r,e)=>e.some(t=>r instanceof t);let n_,r_;function a1(){return n_||(n_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l1(){return r_||(r_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _w=new WeakMap,rp=new WeakMap,vw=new WeakMap,Bf=new WeakMap,$p=new WeakMap;function u1(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(ni(r.result)),i()},u=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&_w.set(t,r)}).catch(()=>{}),$p.set(e,r),e}function c1(r){if(rp.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});rp.set(r,e)}let sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return rp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||vw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ni(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function h1(r){sp=r(sp)}function d1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Uf(this),e,...t);return vw.set(n,e.sort?e.sort():[e]),ni(n)}:l1().includes(r)?function(...e){return r.apply(Uf(this),e),ni(_w.get(this))}:function(...e){return ni(r.apply(Uf(this),e))}}function f1(r){return typeof r=="function"?d1(r):(r instanceof IDBTransaction&&c1(r),o1(r,a1())?new Proxy(r,sp):r)}function ni(r){if(r instanceof IDBRequest)return u1(r);if(Bf.has(r))return Bf.get(r);const e=f1(r);return e!==r&&(Bf.set(r,e),$p.set(e,r)),e}const Uf=r=>$p.get(r);function p1(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const u=indexedDB.open(r,e),c=ni(u);return n&&u.addEventListener("upgradeneeded",d=>{n(ni(u.result),d.oldVersion,d.newVersion,ni(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const m1=["get","getKey","getAll","getAllKeys","count"],g1=["put","add","delete","clear"],zf=new Map;function s_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zf.get(e))return zf.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=g1.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||m1.includes(t)))return;const a=async function(u,...c){const d=this.transaction(u,i?"readwrite":"readonly");let p=d.store;return n&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&d.done]))[0]};return zf.set(e,a),a}h1(r=>({...r,get:(e,t,n)=>s_(e,t)||r.get(e,t,n),has:(e,t)=>!!s_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_1(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function _1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",i_="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new yw("@firebase/app"),v1="@firebase/app-compat",w1="@firebase/analytics-compat",E1="@firebase/analytics",T1="@firebase/app-check-compat",I1="@firebase/app-check",S1="@firebase/auth",C1="@firebase/auth-compat",A1="@firebase/database",N1="@firebase/data-connect",x1="@firebase/database-compat",R1="@firebase/functions",P1="@firebase/functions-compat",k1="@firebase/installations",D1="@firebase/installations-compat",b1="@firebase/messaging",V1="@firebase/messaging-compat",M1="@firebase/performance",O1="@firebase/performance-compat",F1="@firebase/remote-config",L1="@firebase/remote-config-compat",j1="@firebase/storage",B1="@firebase/storage-compat",U1="@firebase/firestore",z1="@firebase/vertexai",$1="@firebase/firestore-compat",q1="firebase",W1="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",G1={[ip]:"fire-core",[v1]:"fire-core-compat",[E1]:"fire-analytics",[w1]:"fire-analytics-compat",[I1]:"fire-app-check",[T1]:"fire-app-check-compat",[S1]:"fire-auth",[C1]:"fire-auth-compat",[A1]:"fire-rtdb",[N1]:"fire-data-connect",[x1]:"fire-rtdb-compat",[R1]:"fire-fn",[P1]:"fire-fn-compat",[k1]:"fire-iid",[D1]:"fire-iid-compat",[b1]:"fire-fcm",[V1]:"fire-fcm-compat",[M1]:"fire-perf",[O1]:"fire-perf-compat",[F1]:"fire-rc",[L1]:"fire-rc-compat",[j1]:"fire-gcs",[B1]:"fire-gcs-compat",[U1]:"fire-fst",[$1]:"fire-fst-compat",[z1]:"fire-vertex","fire-js":"fire-js",[q1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,K1=new Map,ap=new Map;function o_(r,e){try{r.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ul(r){const e=r.name;if(ap.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,r);for(const t of ih.values())o_(t,r);for(const t of K1.values())o_(t,r);return!0}function ww(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ew(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new mw("app","Firebase",H1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=W1;function Iw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(t||(t=dw()),!t)throw ri.create("no-options");const a=ih.get(i);if(a){if(sh(t,a.options)&&sh(n,a.config))return a;throw ri.create("duplicate-app",{appName:i})}const u=new t1(i);for(const d of ap.values())u.addComponent(d);const c=new Q1(t,n,u);return ih.set(i,c),c}function X1(r=op){const e=ih.get(r);if(!e&&r===op&&dw())return Iw();if(!e)throw ri.create("no-app",{appName:r});return e}function si(r,e,t){var n;let i=(n=G1[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(c.join(" "));return}Ul(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firebase-heartbeat-database",Z1=1,zl="firebase-heartbeat-store";let $f=null;function Sw(){return $f||($f=p1(Y1,Z1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(zl)}catch(t){console.warn(t)}}}}).catch(r=>{throw ri.create("idb-open",{originalErrorMessage:r.message})})),$f}async function J1(r){try{const t=(await Sw()).transaction(zl),n=await t.objectStore(zl).get(Cw(r));return await t.done,n}catch(e){if(e instanceof mo)gs.warn(e.message);else{const t=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function a_(r,e){try{const n=(await Sw()).transaction(zl,"readwrite");await n.objectStore(zl).put(e,Cw(r)),await n.done}catch(t){if(t instanceof mo)gs.warn(t.message);else{const n=ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(n.message)}}}function Cw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=1024,tC=30;class nC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sC(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=l_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>tC){const u=iC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){gs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=l_(),{heartbeatsToSend:n,unsentEntries:i}=rC(this._heartbeatsCache.heartbeats),a=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return gs.warn(t),""}}}function l_(){return new Date().toISOString().substring(0,10)}function rC(r,e=eC){const t=[];let n=r.slice();for(const i of r){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),u_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),u_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class sC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pw()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await J1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return a_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return a_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u_(r){return nh(JSON.stringify({version:2,heartbeats:r})).length}function iC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){Ul(new ya("platform-logger",e=>new y1(e),"PRIVATE")),Ul(new ya("heartbeat",e=>new nC(e),"PRIVATE")),si(ip,i_,r),si(ip,i_,"esm2017"),si("fire-js","")}oC("");var aC="firebase",lC="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(aC,lC,"app");var c_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ii,Aw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(b,k,D){for(var P=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)P[ae-2]=arguments[ae];return I.prototype[k].apply(b,P)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,N){N||(N=0);var b=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)b[k]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(k=0;16>k;++k)b[k]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],k=R.g[2];var D=R.g[3],P=I+(D^N&(k^D))+b[0]+3614090360&4294967295;I=N+(P<<7&4294967295|P>>>25),P=D+(k^I&(N^k))+b[1]+3905402710&4294967295,D=I+(P<<12&4294967295|P>>>20),P=k+(N^D&(I^N))+b[2]+606105819&4294967295,k=D+(P<<17&4294967295|P>>>15),P=N+(I^k&(D^I))+b[3]+3250441966&4294967295,N=k+(P<<22&4294967295|P>>>10),P=I+(D^N&(k^D))+b[4]+4118548399&4294967295,I=N+(P<<7&4294967295|P>>>25),P=D+(k^I&(N^k))+b[5]+1200080426&4294967295,D=I+(P<<12&4294967295|P>>>20),P=k+(N^D&(I^N))+b[6]+2821735955&4294967295,k=D+(P<<17&4294967295|P>>>15),P=N+(I^k&(D^I))+b[7]+4249261313&4294967295,N=k+(P<<22&4294967295|P>>>10),P=I+(D^N&(k^D))+b[8]+1770035416&4294967295,I=N+(P<<7&4294967295|P>>>25),P=D+(k^I&(N^k))+b[9]+2336552879&4294967295,D=I+(P<<12&4294967295|P>>>20),P=k+(N^D&(I^N))+b[10]+4294925233&4294967295,k=D+(P<<17&4294967295|P>>>15),P=N+(I^k&(D^I))+b[11]+2304563134&4294967295,N=k+(P<<22&4294967295|P>>>10),P=I+(D^N&(k^D))+b[12]+1804603682&4294967295,I=N+(P<<7&4294967295|P>>>25),P=D+(k^I&(N^k))+b[13]+4254626195&4294967295,D=I+(P<<12&4294967295|P>>>20),P=k+(N^D&(I^N))+b[14]+2792965006&4294967295,k=D+(P<<17&4294967295|P>>>15),P=N+(I^k&(D^I))+b[15]+1236535329&4294967295,N=k+(P<<22&4294967295|P>>>10),P=I+(k^D&(N^k))+b[1]+4129170786&4294967295,I=N+(P<<5&4294967295|P>>>27),P=D+(N^k&(I^N))+b[6]+3225465664&4294967295,D=I+(P<<9&4294967295|P>>>23),P=k+(I^N&(D^I))+b[11]+643717713&4294967295,k=D+(P<<14&4294967295|P>>>18),P=N+(D^I&(k^D))+b[0]+3921069994&4294967295,N=k+(P<<20&4294967295|P>>>12),P=I+(k^D&(N^k))+b[5]+3593408605&4294967295,I=N+(P<<5&4294967295|P>>>27),P=D+(N^k&(I^N))+b[10]+38016083&4294967295,D=I+(P<<9&4294967295|P>>>23),P=k+(I^N&(D^I))+b[15]+3634488961&4294967295,k=D+(P<<14&4294967295|P>>>18),P=N+(D^I&(k^D))+b[4]+3889429448&4294967295,N=k+(P<<20&4294967295|P>>>12),P=I+(k^D&(N^k))+b[9]+568446438&4294967295,I=N+(P<<5&4294967295|P>>>27),P=D+(N^k&(I^N))+b[14]+3275163606&4294967295,D=I+(P<<9&4294967295|P>>>23),P=k+(I^N&(D^I))+b[3]+4107603335&4294967295,k=D+(P<<14&4294967295|P>>>18),P=N+(D^I&(k^D))+b[8]+1163531501&4294967295,N=k+(P<<20&4294967295|P>>>12),P=I+(k^D&(N^k))+b[13]+2850285829&4294967295,I=N+(P<<5&4294967295|P>>>27),P=D+(N^k&(I^N))+b[2]+4243563512&4294967295,D=I+(P<<9&4294967295|P>>>23),P=k+(I^N&(D^I))+b[7]+1735328473&4294967295,k=D+(P<<14&4294967295|P>>>18),P=N+(D^I&(k^D))+b[12]+2368359562&4294967295,N=k+(P<<20&4294967295|P>>>12),P=I+(N^k^D)+b[5]+4294588738&4294967295,I=N+(P<<4&4294967295|P>>>28),P=D+(I^N^k)+b[8]+2272392833&4294967295,D=I+(P<<11&4294967295|P>>>21),P=k+(D^I^N)+b[11]+1839030562&4294967295,k=D+(P<<16&4294967295|P>>>16),P=N+(k^D^I)+b[14]+4259657740&4294967295,N=k+(P<<23&4294967295|P>>>9),P=I+(N^k^D)+b[1]+2763975236&4294967295,I=N+(P<<4&4294967295|P>>>28),P=D+(I^N^k)+b[4]+1272893353&4294967295,D=I+(P<<11&4294967295|P>>>21),P=k+(D^I^N)+b[7]+4139469664&4294967295,k=D+(P<<16&4294967295|P>>>16),P=N+(k^D^I)+b[10]+3200236656&4294967295,N=k+(P<<23&4294967295|P>>>9),P=I+(N^k^D)+b[13]+681279174&4294967295,I=N+(P<<4&4294967295|P>>>28),P=D+(I^N^k)+b[0]+3936430074&4294967295,D=I+(P<<11&4294967295|P>>>21),P=k+(D^I^N)+b[3]+3572445317&4294967295,k=D+(P<<16&4294967295|P>>>16),P=N+(k^D^I)+b[6]+76029189&4294967295,N=k+(P<<23&4294967295|P>>>9),P=I+(N^k^D)+b[9]+3654602809&4294967295,I=N+(P<<4&4294967295|P>>>28),P=D+(I^N^k)+b[12]+3873151461&4294967295,D=I+(P<<11&4294967295|P>>>21),P=k+(D^I^N)+b[15]+530742520&4294967295,k=D+(P<<16&4294967295|P>>>16),P=N+(k^D^I)+b[2]+3299628645&4294967295,N=k+(P<<23&4294967295|P>>>9),P=I+(k^(N|~D))+b[0]+4096336452&4294967295,I=N+(P<<6&4294967295|P>>>26),P=D+(N^(I|~k))+b[7]+1126891415&4294967295,D=I+(P<<10&4294967295|P>>>22),P=k+(I^(D|~N))+b[14]+2878612391&4294967295,k=D+(P<<15&4294967295|P>>>17),P=N+(D^(k|~I))+b[5]+4237533241&4294967295,N=k+(P<<21&4294967295|P>>>11),P=I+(k^(N|~D))+b[12]+1700485571&4294967295,I=N+(P<<6&4294967295|P>>>26),P=D+(N^(I|~k))+b[3]+2399980690&4294967295,D=I+(P<<10&4294967295|P>>>22),P=k+(I^(D|~N))+b[10]+4293915773&4294967295,k=D+(P<<15&4294967295|P>>>17),P=N+(D^(k|~I))+b[1]+2240044497&4294967295,N=k+(P<<21&4294967295|P>>>11),P=I+(k^(N|~D))+b[8]+1873313359&4294967295,I=N+(P<<6&4294967295|P>>>26),P=D+(N^(I|~k))+b[15]+4264355552&4294967295,D=I+(P<<10&4294967295|P>>>22),P=k+(I^(D|~N))+b[6]+2734768916&4294967295,k=D+(P<<15&4294967295|P>>>17),P=N+(D^(k|~I))+b[13]+1309151649&4294967295,N=k+(P<<21&4294967295|P>>>11),P=I+(k^(N|~D))+b[4]+4149444226&4294967295,I=N+(P<<6&4294967295|P>>>26),P=D+(N^(I|~k))+b[11]+3174756917&4294967295,D=I+(P<<10&4294967295|P>>>22),P=k+(I^(D|~N))+b[2]+718787259&4294967295,k=D+(P<<15&4294967295|P>>>17),P=N+(D^(k|~I))+b[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+D&4294967295}n.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,b=this.B,k=this.h,D=0;D<I;){if(k==0)for(;D<=N;)i(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<I;)if(b[k++]=R.charCodeAt(D++),k==this.blockSize){i(this,b),k=0;break}}else for(;D<I;)if(b[k++]=R[D++],k==this.blockSize){i(this,b),k=0;break}}this.h=k,this.o+=I},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var b=0;32>b;b+=8)R[N++]=this.g[I]>>>b&255;return R};function a(R,I){var N=c;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function u(R,I){this.h=I;for(var N=[],b=!0,k=R.length-1;0<=k;k--){var D=R[k]|0;b&&D==I||(N[k]=D,b=!1)}this.g=N}var c={};function d(R){return-128<=R&&128>R?a(R,function(I){return new u([I|0],0>I?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return M(p(-R));for(var I=[],N=1,b=0;R>=N;b++)I[b]=R/N|0,N*=4294967296;return new u(I,0)}function g(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return M(g(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(I,8)),b=v,k=0;k<R.length;k+=8){var D=Math.min(8,R.length-k),P=parseInt(R.substring(k,k+D),I);8>D?(D=p(Math.pow(I,D)),b=b.j(D).add(p(P))):(b=b.j(N),b=b.add(p(P)))}return b}var v=d(0),E=d(1),C=d(16777216);r=u.prototype,r.m=function(){if(V(this))return-M(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var b=this.i(N);R+=(0<=b?b:4294967296+b)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(V(this))return"-"+M(this).toString(R);for(var I=p(Math.pow(R,6)),N=this,b="";;){var k=X(N,I).g;N=B(N,k.j(I));var D=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=k,A(N))return D+b;for(;6>D.length;)D="0"+D;b=D+b}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function V(R){return R.h==-1}r.l=function(R){return R=B(this,R),V(R)?-1:A(R)?0:1};function M(R){for(var I=R.g.length,N=[],b=0;b<I;b++)N[b]=~R.g[b];return new u(N,~R.h).add(E)}r.abs=function(){return V(this)?M(this):this},r.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],b=0,k=0;k<=I;k++){var D=b+(this.i(k)&65535)+(R.i(k)&65535),P=(D>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);b=P>>>16,D&=65535,P&=65535,N[k]=P<<16|D}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(R,I){return R.add(M(I))}r.j=function(R){if(A(this)||A(R))return v;if(V(this))return V(R)?M(this).j(M(R)):M(M(this).j(R));if(V(R))return M(this.j(M(R)));if(0>this.l(C)&&0>R.l(C))return p(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],b=0;b<2*I;b++)N[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<R.g.length;k++){var D=this.i(b)>>>16,P=this.i(b)&65535,ae=R.i(k)>>>16,fe=R.i(k)&65535;N[2*b+2*k]+=P*fe,K(N,2*b+2*k),N[2*b+2*k+1]+=D*fe,K(N,2*b+2*k+1),N[2*b+2*k+1]+=P*ae,K(N,2*b+2*k+1),N[2*b+2*k+2]+=D*ae,K(N,2*b+2*k+2)}for(b=0;b<I;b++)N[b]=N[2*b+1]<<16|N[2*b];for(b=I;b<2*I;b++)N[b]=0;return new u(N,0)};function K(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function q(R,I){this.g=R,this.h=I}function X(R,I){if(A(I))throw Error("division by zero");if(A(R))return new q(v,v);if(V(R))return I=X(M(R),I),new q(M(I.g),M(I.h));if(V(I))return I=X(R,M(I)),new q(M(I.g),I.h);if(30<R.g.length){if(V(R)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var N=E,b=I;0>=b.l(R);)N=F(N),b=F(b);var k=z(N,1),D=z(b,1);for(b=z(b,2),N=z(N,2);!A(b);){var P=D.add(b);0>=P.l(R)&&(k=k.add(N),D=P),b=z(b,1),N=z(N,1)}return I=B(R,k.j(I)),new q(k,I)}for(k=v;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),b=Math.ceil(Math.log(N)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),D=p(N),P=D.j(I);V(P)||0<P.l(R);)N-=b,D=p(N),P=D.j(I);A(D)&&(D=E),k=k.add(D),R=B(R,P)}return new q(k,R)}r.A=function(R){return X(this,R).h},r.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],b=0;b<I;b++)N[b]=this.i(b)&R.i(b);return new u(N,this.h&R.h)},r.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],b=0;b<I;b++)N[b]=this.i(b)|R.i(b);return new u(N,this.h|R.h)},r.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],b=0;b<I;b++)N[b]=this.i(b)^R.i(b);return new u(N,this.h^R.h)};function F(R){for(var I=R.g.length+1,N=[],b=0;b<I;b++)N[b]=R.i(b)<<1|R.i(b-1)>>>31;return new u(N,R.h)}function z(R,I){var N=I>>5;I%=32;for(var b=R.g.length-N,k=[],D=0;D<b;D++)k[D]=0<I?R.i(D+N)>>>I|R.i(D+N+1)<<32-I:R.i(D+N);return new u(k,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Aw=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,ii=u}).apply(typeof c_<"u"?c_:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nw,Pl,xw,Gc,lp,Rw,Pw,kw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,w){return h==Array.prototype||h==Object.prototype||(h[y]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=t(this);function i(h,y){if(y)e:{var w=n;h=h.split(".");for(var x=0;x<h.length-1;x++){var W=h[x];if(!(W in w))break e;w=w[W]}h=h[h.length-1],x=w[h],y=y(x),y!=x&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var w=0,x=!1,W={next:function(){if(!x&&w<h.length){var Z=w++;return{value:y(Z,h[Z]),done:!1}}return x=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(h){return h||function(){return a(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function v(h,y,w){if(!h)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,x),h.apply(y,W)}}return function(){return h.apply(y,arguments)}}function E(h,y,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,E.apply(null,arguments)}function C(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function A(h,y){function w(){}w.prototype=y.prototype,h.aa=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(x,W,Z){for(var de=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)de[Qe-2]=arguments[Qe];return y.prototype[W].apply(x,de)}}function V(h){const y=h.length;if(0<y){const w=Array(y);for(let x=0;x<y;x++)w[x]=h[x];return w}return[]}function M(h,y){for(let w=1;w<arguments.length;w++){const x=arguments[w];if(d(x)){const W=h.length||0,Z=x.length||0;h.length=W+Z;for(let de=0;de<Z;de++)h[W+de]=x[de]}else h.push(x)}}class B{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function K(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function X(h){return X[" "](h),h}X[" "]=function(){};var F=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function z(h,y,w){for(const x in h)y.call(w,h[x],x,h)}function R(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function I(h){const y={};for(const w in h)y[w]=h[w];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(h,y){let w,x;for(let W=1;W<arguments.length;W++){x=arguments[W];for(w in x)h[w]=x[w];for(let Z=0;Z<N.length;Z++)w=N[Z],Object.prototype.hasOwnProperty.call(x,w)&&(h[w]=x[w])}}function k(h){var y=1;h=h.split(":");const w=[];for(;0<y&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function D(h){c.setTimeout(()=>{throw h},0)}function P(){var h=te;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,w){const x=fe.get();x.set(y,w),this.h?this.h.next=x:this.g=x,this.h=x}}var fe=new B(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let le,J=!1,te=new ae,ee=()=>{const h=c.Promise.resolve(void 0);le=()=>{h.then(L)}};var L=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(w){D(w)}var y=fe;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}J=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h}();function pe(h,y){if(ge.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(F){e:{try{X(y.nodeName);var W=!0;break e}catch{}W=!1}W||(y=null)}}else w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pe.aa.h.call(this)}}A(pe,ge);var Ve={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),he=0;function qe(h,y,w,x,W){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!x,this.ha=W,this.key=++he,this.da=this.fa=!1}function Ze(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ft(h){this.src=h,this.g={},this.h=0}Ft.prototype.add=function(h,y,w,x,W){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var de=ln(h,y,x,W);return-1<de?(y=h[de],w||(y.fa=!1)):(y=new qe(y,this.src,Z,!!x,W),y.fa=w,h.push(y)),y};function an(h,y){var w=y.type;if(w in h.g){var x=h.g[w],W=Array.prototype.indexOf.call(x,y,void 0),Z;(Z=0<=W)&&Array.prototype.splice.call(x,W,1),Z&&(Ze(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ln(h,y,w,x){for(var W=0;W<h.length;++W){var Z=h[W];if(!Z.da&&Z.listener==y&&Z.capture==!!w&&Z.ha==x)return W}return-1}var We="closure_lm_"+(1e6*Math.random()|0),An={};function gi(h,y,w,x,W){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)gi(h,y[Z],w,x,W);return null}return w=Ss(w),h&&h[Oe]?h.K(y,w,p(x)?!!x.capture:!1,W):yi(h,y,w,!1,x,W)}function yi(h,y,w,x,W,Z){if(!y)throw Error("Invalid event type");var de=p(W)?!!W.capture:!!W,Qe=Nn(h);if(Qe||(h[We]=Qe=new Ft(h)),w=Qe.add(y,w,x,de,Z),w.proxy)return w;if(x=Eo(),w.proxy=x,x.src=h,x.listener=w,h.addEventListener)Re||(W=de),W===void 0&&(W=!1),h.addEventListener(y.toString(),x,W);else if(h.attachEvent)h.attachEvent(sr(y.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Eo(){function h(w){return y.call(h.src,h.listener,w)}const y=Ts;return h}function Qr(h,y,w,x,W){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Qr(h,y[Z],w,x,W);else x=p(x)?!!x.capture:!!x,w=Ss(w),h&&h[Oe]?(h=h.i,y=String(y).toString(),y in h.g&&(Z=h.g[y],w=ln(Z,w,x,W),-1<w&&(Ze(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete h.g[y],h.h--)))):h&&(h=Nn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ln(y,w,x,W)),(w=-1<h?y[h]:null)&&rr(w))}function rr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Oe])an(y.i,h);else{var w=h.type,x=h.proxy;y.removeEventListener?y.removeEventListener(w,x,h.capture):y.detachEvent?y.detachEvent(sr(w),x):y.addListener&&y.removeListener&&y.removeListener(x),(w=Nn(y))?(an(w,h),w.h==0&&(w.src=null,y[We]=null)):Ze(h)}}}function sr(h){return h in An?An[h]:An[h]="on"+h}function Ts(h,y){if(h.da)h=!0;else{y=new pe(y,this);var w=h.listener,x=h.ha||h.src;h.fa&&rr(h),h=w.call(x,y)}return h}function Nn(h){return h=h[We],h instanceof Ft?h:null}var Is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ss(h){return typeof h=="function"?h:(h[Is]||(h[Is]=function(y){return h.handleEvent(y)}),h[Is])}function gt(){Y.call(this),this.i=new Ft(this),this.M=this,this.F=null}A(gt,Y),gt.prototype[Oe]=!0,gt.prototype.removeEventListener=function(h,y,w,x){Qr(this,h,y,w,x)};function Et(h,y){var w,x=h.F;if(x)for(w=[];x;x=x.F)w.push(x);if(h=h.M,x=y.type||y,typeof y=="string")y=new ge(y,h);else if(y instanceof ge)y.target=y.target||h;else{var W=y;y=new ge(x,h),b(y,W)}if(W=!0,w)for(var Z=w.length-1;0<=Z;Z--){var de=y.g=w[Z];W=ir(de,x,!0,y)&&W}if(de=y.g=h,W=ir(de,x,!0,y)&&W,W=ir(de,x,!1,y)&&W,w)for(Z=0;Z<w.length;Z++)de=y.g=w[Z],W=ir(de,x,!1,y)&&W}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var w=h.g[y],x=0;x<w.length;x++)Ze(w[x]);delete h.g[y],h.h--}}this.F=null},gt.prototype.K=function(h,y,w,x){return this.i.add(String(h),y,!1,w,x)},gt.prototype.L=function(h,y,w,x){return this.i.add(String(h),y,!0,w,x)};function ir(h,y,w,x){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var W=!0,Z=0;Z<y.length;++Z){var de=y[Z];if(de&&!de.da&&de.capture==w){var Qe=de.listener,bt=de.ha||de.src;de.fa&&an(h.i,de),W=Qe.call(bt,x)!==!1&&W}}return W&&!x.defaultPrevented}function _i(h,y,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(h,y||0)}function or(h){h.g=_i(()=>{h.g=null,h.i&&(h.i=!1,or(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Rr extends Y{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:or(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(h){Y.call(this),this.h=h,this.g={}}A(Xr,Y);var vi=[];function wi(h){z(h.g,function(y,w){this.g.hasOwnProperty(w)&&rr(y)},h),h.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),wi(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=c.JSON.stringify,Ne=c.JSON.parse,De=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function He(){}He.prototype.h=null;function nt(h){return h.h||(h.h=h.i())}function ar(){}var Dt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){ge.call(this,"d")}A(xn,ge);function lr(){ge.call(this,"c")}A(lr,ge);var Rn={},Ti=null;function Yr(){return Ti=Ti||new gt}Rn.La="serverreachability";function Ii(h){ge.call(this,Rn.La,h)}A(Ii,ge);function Pn(h){const y=Yr();Et(y,new Ii(y))}Rn.STAT_EVENT="statevent";function Si(h,y){ge.call(this,Rn.STAT_EVENT,h),this.stat=y}A(Si,ge);function lt(h){const y=Yr();Et(y,new Si(y,h))}Rn.Ma="timingevent";function Tt(h,y){ge.call(this,Rn.Ma,h),this.size=y}A(Tt,ge);function It(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function ur(h,y,w,x,W,Z){h.info(function(){if(h.g)if(Z)for(var de="",Qe=Z.split("&"),bt=0;bt<Qe.length;bt++){var Ue=Qe[bt].split("=");if(1<Ue.length){var Lt=Ue[0];Ue=Ue[1];var Rt=Lt.split("_");de=2<=Rt.length&&Rt[1]=="type"?de+(Lt+"="+Ue+"&"):de+(Lt+"=redacted&")}}else de=null;else de=Z;return"XMLHTTP REQ ("+x+") [attempt "+W+"]: "+y+`
`+w+`
`+de})}function Pr(h,y,w,x,W,Z,de){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+W+"]: "+y+`
`+w+`
`+Z+" "+de})}function cr(h,y,w,x){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ld(h,w)+(x?" "+x:"")})}function $a(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function ld(h,y){if(!h.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var x=w[h];if(!(2>x.length)){var W=x[1];if(Array.isArray(W)&&!(1>W.length)){var Z=W[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return Ei(w)}catch{return y}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hr;function Ci(){}A(Ci,He),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},hr=new Ci;function dr(h,y,w,x){this.j=h,this.i=y,this.l=w,this.R=x||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iu}function Iu(){this.i=null,this.g="",this.h=!1}var qa={},Io={};function So(h,y,w){h.L=1,h.v=Rs(Dn(y)),h.m=w,h.P=!0,Wa(h,null)}function Wa(h,y){h.F=Date.now(),rt(h),h.A=Dn(h.v);var w=h.A,x=h.R;Array.isArray(x)||(x=[String(x)]),ks(w.i,"t",x),h.C=0,w=h.j.J,h.h=new Iu,h.g=Uu(h.j,w?y:null,!h.m),0<h.O&&(h.M=new Rr(E(h.Y,h,h.g),h.O)),y=h.U,w=h.g,x=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(vi[0]=W.toString()),W=vi);for(var Z=0;Z<W.length;Z++){var de=gi(w,W[Z],x||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Pn(),ur(h.i,h.u,h.A,h.l,h.R,h.m)}dr.prototype.ca=function(h){h=h.target;const y=this.M;y&&gn(h)==3?y.j():this.Y(h)},dr.prototype.Y=function(h){try{if(h==this.g)e:{const Rt=gn(this.g);var y=this.g.Ba();const Gn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Ya(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=Gn?Pn(3):Pn(2)),Ai(this);var w=this.g.Z();this.X=w;t:if(Su(this)){var x=Ya(this.g);h="";var W=x.length,Z=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Cs(this);var de="";break t}this.h.i=new c.TextDecoder}for(y=0;y<W;y++)this.h.h=!0,h+=this.h.i.decode(x[y],{stream:!(Z&&y==W-1)});x.length=0,this.h.g+=h,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=w==200,Pr(this.i,this.u,this.A,this.l,this.R,Rt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,bt=this.g;if((Qe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Qe)){var Ue=Qe;break t}}Ue=null}if(w=Ue)cr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,w);else{this.o=!1,this.s=3,lt(12),qn(this),Cs(this);break e}}if(this.P){w=!0;let Vn;for(;!this.J&&this.C<de.length;)if(Vn=ud(this,de),Vn==Io){Rt==4&&(this.s=4,lt(14),w=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==qa){this.s=4,lt(15),cr(this.i,this.l,de,"[Invalid Chunk]"),w=!1;break}else cr(this.i,this.l,Vn,null),Ga(this,Vn);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||de.length!=0||this.h.h||(this.s=1,lt(16),w=!1),this.o=this.o&&w,!w)cr(this.i,this.l,de,"[Invalid Chunked Response]"),qn(this),Cs(this);else if(0<de.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ja(Lt),Lt.M=!0,lt(11))}}else cr(this.i,this.l,de,null),Ga(this,de);Rt==4&&qn(this),this.o&&!this.J&&(Rt==4?Mo(this.j,this):(this.o=!1,rt(this)))}else Po(this.g),w==400&&0<de.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),qn(this),Cs(this)}}}catch{}finally{}};function Su(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ud(h,y){var w=h.C,x=y.indexOf(`
`,w);return x==-1?Io:(w=Number(y.substring(w,x)),isNaN(w)?qa:(x+=1,x+w>y.length?Io:(y=y.slice(x,x+w),h.C=x+w,y)))}dr.prototype.cancel=function(){this.J=!0,qn(this)};function rt(h){h.S=Date.now()+h.I,Cu(h,h.I)}function Cu(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=It(E(h.ba,h),y)}function Ai(h){h.B&&(c.clearTimeout(h.B),h.B=null)}dr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($a(this.i,this.A),this.L!=2&&(Pn(),lt(17)),qn(this),this.s=2,Cs(this)):Cu(this,this.S-h)};function Cs(h){h.j.G==0||h.J||Mo(h.j,h)}function qn(h){Ai(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,wi(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ga(h,y){try{var w=h.j;if(w.G!=0&&(w.g==h||un(w.h,h))){if(!h.K&&un(w.h,h)&&w.G==3){try{var x=w.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var W=x;if(W[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Vo(w),yr(w);else break e;bo(w),lt(18)}}else w.za=W[1],0<w.za-w.T&&37500>W[2]&&w.F&&w.v==0&&!w.C&&(w.C=It(E(w.Za,w),6e3));if(1>=Nu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ns(w,11)}else if((h.K||w.g==h)&&Vo(w),!K(y))for(W=w.Da.g.parse(y),y=0;y<W.length;y++){let Ue=W[y];if(w.T=Ue[0],Ue=Ue[1],w.G==2)if(Ue[0]=="c"){w.K=Ue[1],w.ia=Ue[2];const Lt=Ue[3];Lt!=null&&(w.la=Lt,w.j.info("VER="+w.la));const Rt=Ue[4];Rt!=null&&(w.Aa=Rt,w.j.info("SVER="+w.Aa));const Gn=Ue[5];Gn!=null&&typeof Gn=="number"&&0<Gn&&(x=1.5*Gn,w.L=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const Vn=h.g;if(Vn){const bi=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bi){var Z=x.h;Z.g||bi.indexOf("spdy")==-1&&bi.indexOf("quic")==-1&&bi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ka(Z,Z.h),Z.h=null))}if(x.D){const Fo=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(x.ya=Fo,Je(x.I,x.D,Fo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),x=w;var de=h;if(x.qa=Bu(x,x.J?x.ia:null,x.W),de.K){xu(x.h,de);var Qe=de,bt=x.L;bt&&(Qe.I=bt),Qe.B&&(Ai(Qe),rt(Qe)),x.g=de}else Di(x);0<w.i.length&&Vr(w)}else Ue[0]!="stop"&&Ue[0]!="close"||ns(w,7);else w.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ns(w,7):Gt(w):Ue[0]!="noop"&&w.l&&w.l.ta(Ue),w.v=0)}}Pn(4)}catch{}}var Au=class{constructor(h,y){this.g=h,this.map=y}};function Ni(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nu(h){return h.h?1:h.g?h.g.size:0}function un(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ka(h,y){h.g?h.g.add(y):h.h=y}function xu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ni.prototype.cancel=function(){if(this.i=Ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ru(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.D);return y}return V(h.i)}function Co(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var y=[],w=h.length,x=0;x<w;x++)y.push(h[x]);return y}y=[],w=0;for(x in h)y[w++]=h[x];return y}function Ao(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var y=[];h=h.length;for(var w=0;w<h;w++)y.push(w);return y}y=[],w=0;for(const x in h)y[w++]=x;return y}}}function As(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var w=Ao(h),x=Co(h),W=x.length,Z=0;Z<W;Z++)y.call(void 0,x[Z],w&&w[Z],h)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(h,y){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var x=h[w].indexOf("="),W=null;if(0<=x){var Z=h[w].substring(0,x);W=h[w].substring(x+1)}else Z=h[w];y(Z,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Zr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Zr){this.h=h.h,Ri(this,h.j),this.o=h.o,this.g=h.g,Ns(this,h.s),this.l=h.l;var y=h.i,w=new kr;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),xs(this,w),this.m=h.m}else h&&(y=String(h).match(xi))?(this.h=!1,Ri(this,y[1]||"",!0),this.o=je(y[2]||""),this.g=je(y[3]||"",!0),Ns(this,y[4]),this.l=je(y[5]||"",!0),xs(this,y[6]||"",!0),this.m=je(y[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}Zr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Ps(y,No,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ps(y,No,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ps(w,w.charAt(0)=="/"?Du:ku,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ps(w,Ha)),h.join("")};function Dn(h){return new Zr(h)}function Ri(h,y,w){h.j=w?je(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ns(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function xs(h,y,w){y instanceof kr?(h.i=y,Dr(h.i,h.h)):(w||(y=Ps(y,bu)),h.i=new kr(y,h.h))}function Je(h,y,w){h.i.set(y,w)}function Rs(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function je(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,Pu),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var No=/[#\/\?@]/g,ku=/[#\?:]/g,Du=/[#\?]/g,bu=/[#\?@]/g,Ha=/#/g;function kr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&cd(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=kr.prototype,r.add=function(h,y){Wt(this),this.i=null,h=Wn(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function fr(h,y){Wt(h),y=Wn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function pr(h,y){return Wt(h),y=Wn(h,y),h.g.has(y)}r.forEach=function(h,y){Wt(this),this.g.forEach(function(w,x){w.forEach(function(W){h.call(y,W,x,this)},this)},this)},r.na=function(){Wt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let x=0;x<y.length;x++){const W=h[x];for(let Z=0;Z<W.length;Z++)w.push(y[x])}return w},r.V=function(h){Wt(this);let y=[];if(typeof h=="string")pr(this,h)&&(y=y.concat(this.g.get(Wn(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)y=y.concat(h[w])}return y},r.set=function(h,y){return Wt(this),this.i=null,h=Wn(this,h),pr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function ks(h,y,w){fr(h,y),0<w.length&&(h.i=null,h.g.set(Wn(h,y),V(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var x=y[w];const Z=encodeURIComponent(String(x)),de=this.V(x);for(x=0;x<de.length;x++){var W=Z;de[x]!==""&&(W+="="+encodeURIComponent(String(de[x]))),h.push(W)}}return this.i=h.join("&")};function Wn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Dr(h,y){y&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(w,x){var W=x.toLowerCase();x!=W&&(fr(this,x),ks(this,W,w))},h)),h.j=y}function hd(h,y){const w=new $n;if(c.Image){const x=new Image;x.onload=C(mn,w,"TestLoadImage: loaded",!0,y,x),x.onerror=C(mn,w,"TestLoadImage: error",!1,y,x),x.onabort=C(mn,w,"TestLoadImage: abort",!1,y,x),x.ontimeout=C(mn,w,"TestLoadImage: timeout",!1,y,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else y(!1)}function Vu(h,y){const w=new $n,x=new AbortController,W=setTimeout(()=>{x.abort(),mn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:x.signal}).then(Z=>{clearTimeout(W),Z.ok?mn(w,"TestPingServer: ok",!0,y):mn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),mn(w,"TestPingServer: error",!1,y)})}function mn(h,y,w,x,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),x(w)}catch{}}function dd(){this.g=new De}function Mu(h,y,w){const x=w||"";try{As(h,function(W,Z){let de=W;p(W)&&(de=Ei(W)),y.push(x+Z+"="+encodeURIComponent(de))})}catch(W){throw y.push(x+"type="+encodeURIComponent("_badmap")),W}}function Jr(h){this.l=h.Ub||null,this.j=h.eb||!1}A(Jr,He),Jr.prototype.g=function(){return new Pi(this.l,this.j)},Jr.prototype.i=function(h){return function(){return h}}({});function Pi(h,y){gt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Pi,gt),r=Pi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,gr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ou(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ou(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?mr(this):gr(this),this.readyState==3&&Ou(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,mr(this))},r.Qa=function(h){this.g&&(this.response=h,mr(this))},r.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,gr(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function gr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function es(h){let y="";return z(h,function(w,x){y+=x,y+=":",y+=w,y+=`\r
`}),y}function Ds(h,y,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=es(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):Je(h,y,w))}function ut(h){gt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ut,gt);var fd=/^https?$/i,Qa=["POST","PUT"];r=ut.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hr.g(),this.v=this.o?nt(this.o):nt(hr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){ki(this,Z);return}if(h=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var W in x)w.set(W,x[W]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Z of x.keys())w.set(Z,x.get(Z));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),W=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qa,y,void 0))||x||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of w)this.g.setRequestHeader(Z,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){ki(this,Z)}};function ki(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,xo(h),bn(h)}function xo(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),bn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bn(this,!0)),ut.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Xa(this):this.bb())},r.bb=function(){Xa(this)};function Xa(h){if(h.h&&typeof u<"u"&&(!h.v[1]||gn(h)!=4||h.Z()!=2)){if(h.u&&gn(h)==4)_i(h.Ea,0,h);else if(Et(h,"readystatechange"),gn(h)==4){h.h=!1;try{const de=h.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var x;if(x=de===0){var W=String(h.D).match(xi)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),x=!fd.test(W?W.toLowerCase():"")}w=x}if(w)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var Z=2<gn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",xo(h)}}finally{bn(h)}}}}function bn(h,y){if(h.g){Ro(h);const w=h.g,x=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Et(h,"ready");try{w.onreadystatechange=x}catch{}}}function Ro(h){h.I&&(c.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function gn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ne(y)}};function Ya(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Po(h){const y={};h=(h.g&&2<=gn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(K(h[x]))continue;var w=k(h[x]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=y[W]||[];y[W]=Z,Z.push(w)}R(y,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Za(h){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,h),this.cb=br("retryDelaySeedMs",1e4,h),this.Wa=br("forwardChannelMaxRetries",2,h),this.wa=br("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(h&&h.concurrentRequestLimit),this.Da=new dd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Za.prototype,r.la=8,r.G=1,r.connect=function(h,y,w,x){lt(0),this.W=h,this.H=y||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.I=Bu(this,null,this.W),Vr(this)};function Gt(h){if(ko(h),h.G==3){var y=h.U++,w=Dn(h.I);if(Je(w,"SID",h.K),Je(w,"RID",y),Je(w,"TYPE","terminate"),ts(h,w),y=new dr(h,h.j,y),y.L=2,y.v=Rs(Dn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.v,w=!0),w||(y.g=Uu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),rt(y)}ju(h)}function yr(h){h.g&&(Ja(h),h.g.cancel(),h.g=null)}function ko(h){yr(h),h.u&&(c.clearTimeout(h.u),h.u=null),Vo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Vr(h){if(!kn(h.h)&&!h.s){h.s=!0;var y=h.Ga;le||ee(),J||(le(),J=!0),te.add(y,h),h.B=0}}function pd(h,y){return Nu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=It(E(h.Ga,h,y),Lu(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new dr(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=I(Z),b(Z,this.S)):Z=this.S),this.m!==null||this.O||(W.H=Z,Z=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=bs(this,W,y),w=Dn(this.I),Je(w,"RID",h),Je(w,"CVER",22),this.D&&Je(w,"X-HTTP-Session-Id",this.D),ts(this,w),Z&&(this.O?y="headers="+encodeURIComponent(String(es(Z)))+"&"+y:this.m&&Ds(w,this.m,Z)),Ka(this.h,W),this.Ua&&Je(w,"TYPE","init"),this.P?(Je(w,"$req",y),Je(w,"SID","null"),W.T=!0,So(W,w,null)):So(W,w,y),this.G=2}}else this.G==3&&(h?Do(this,h):this.i.length==0||kn(this.h)||Do(this))};function Do(h,y){var w;y?w=y.l:w=h.U++;const x=Dn(h.I);Je(x,"SID",h.K),Je(x,"RID",w),Je(x,"AID",h.T),ts(h,x),h.m&&h.o&&Ds(x,h.m,h.o),w=new dr(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),y&&(h.i=y.D.concat(h.i)),y=bs(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,w),So(w,x,y)}function ts(h,y){h.H&&z(h.H,function(w,x){Je(y,x,w)}),h.l&&As({},function(w,x){Je(y,x,w)})}function bs(h,y,w){w=Math.min(h.i.length,w);var x=h.l?E(h.l.Na,h.l,h):null;e:{var W=h.i;let Z=-1;for(;;){const de=["count="+w];Z==-1?0<w?(Z=W[0].g,de.push("ofs="+Z)):Z=0:de.push("ofs="+Z);let Qe=!0;for(let bt=0;bt<w;bt++){let Ue=W[bt].g;const Lt=W[bt].map;if(Ue-=Z,0>Ue)Z=Math.max(0,W[bt].g-100),Qe=!1;else try{Mu(Lt,de,"req"+Ue+"_")}catch{x&&x(Lt)}}if(Qe){x=de.join("&");break e}}}return h=h.i.splice(0,w),y.D=h,x}function Di(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;le||ee(),J||(le(),J=!0),te.add(y,h),h.v=0}}function bo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=It(E(h.Fa,h),Lu(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=It(E(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),yr(this),Fu(this))};function Ja(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function Fu(h){h.g=new dr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Dn(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),ts(h,y),h.m&&h.o&&Ds(y,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Rs(Dn(y)),w.m=null,w.P=!0,Wa(w,h)}r.Za=function(){this.C!=null&&(this.C=null,yr(this),bo(this),lt(19))};function Vo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mo(h,y){var w=null;if(h.g==y){Vo(h),Ja(h),h.g=null;var x=2}else if(un(h.h,y))w=y.D,xu(h.h,y),x=1;else return;if(h.G!=0){if(y.o)if(x==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var W=h.B;x=Yr(),Et(x,new Tt(x,w)),Vr(h)}else Di(h);else if(W=y.s,W==3||W==0&&0<y.X||!(x==1&&pd(h,y)||x==2&&bo(h)))switch(w&&0<w.length&&(y=h.h,y.i=y.i.concat(w)),W){case 1:ns(h,5);break;case 4:ns(h,10);break;case 3:ns(h,6);break;default:ns(h,2)}}}function Lu(h,y){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*y}function ns(h,y){if(h.j.info("Error code "+y),y==2){var w=E(h.fb,h),x=h.Xa;const W=!x;x=new Zr(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ri(x,"https"),Rs(x),W?hd(x.toString(),w):Vu(x.toString(),w)}else lt(2);h.G=0,h.l&&h.l.sa(y),ju(h),ko(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function ju(h){if(h.G=0,h.ka=[],h.l){const y=Ru(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ka,y),M(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function Bu(h,y,w){var x=w instanceof Zr?Dn(w):new Zr(w);if(x.g!="")y&&(x.g=y+"."+x.g),Ns(x,x.s);else{var W=c.location;x=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;var Z=new Zr(null);x&&Ri(Z,x),y&&(Z.g=y),W&&Ns(Z,W),w&&(Z.l=w),x=Z}return w=h.D,y=h.ya,w&&y&&Je(x,w,y),Je(x,"VER",h.la),ts(h,x),x}function Uu(h,y,w){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new ut(new Jr({eb:w})):new ut(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}r=el.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Oo(){}Oo.prototype.g=function(h,y){return new cn(h,y)};function cn(h,y){gt.call(this),this.g=new Za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!K(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!K(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}A(cn,gt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Gt(this.g)},cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Ei(h),h=w);y.i.push(new Au(y.Ya++,h)),y.G==3&&Vr(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,cn.aa.N.call(this)};function zu(h){xn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}A(zu,xn);function $u(){lr.call(this),this.status=1}A($u,lr);function Mr(h){this.g=h}A(Mr,el),Mr.prototype.ua=function(){Et(this.g,"a")},Mr.prototype.ta=function(h){Et(this.g,new zu(h))},Mr.prototype.sa=function(h){Et(this.g,new $u)},Mr.prototype.ra=function(){Et(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,kw=function(){return new Oo},Pw=function(){return Yr()},Rw=Rn,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,Gc=To,Tu.COMPLETE="complete",xw=Tu,ar.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Pl=ar,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,Nw=ut}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const h_="@firebase/firestore",d_="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new yw("@firebase/firestore");function ca(){return oo.logLevel}function se(r,...e){if(oo.logLevel<=$e.DEBUG){const t=e.map(qp);oo.debug(`Firestore (${Ma}): ${r}`,...t)}}function Ct(r,...e){if(oo.logLevel<=$e.ERROR){const t=e.map(qp);oo.error(`Firestore (${Ma}): ${r}`,...t)}}function $l(r,...e){if(oo.logLevel<=$e.WARN){const t=e.map(qp);oo.warn(`Firestore (${Ma}): ${r}`,...t)}}function qp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+r;throw Ct(e),new Error(e)}function Ae(r,e){r||Te()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends mo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tn.UNAUTHENTICATED))}shutdown(){}}class hC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new oi,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new oi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ae(typeof n.accessToken=="string"),new uC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new tn(e)}}class dC{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class fC{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new dC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pC{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ew(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0);const n=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,se("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new f_(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new f_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=mC(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function Me(r,e){return r<e?-1:r>e?1:0}function _a(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function bw(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-62135596800,m_=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*m_);return new $t(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<p_)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m_}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-p_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new $t(0,0))}static max(){return new xe(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__name__";class Br{constructor(e,t,n){t===void 0?t=0:t>e.length&&Te(),n===void 0?n=e.length-t:n>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Br.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Br.isNumericId(e),i=Br.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Br.extractNumericId(e).compare(Br.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ii.fromString(e.substring(4,e.length-2))}}class et extends Br{construct(e,t,n){return new et(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new et(t)}static emptyPath(){return new et([])}}const gC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Br{construct(e,t,n){return new At(e,t,n)}static isValidIdentifier(e){return gC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g_}static keyField(){return new At([g_])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ee(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(u=!u,i++):c!=="."||u?(n+=c,i++):(a(),i++)}if(a(),u)throw new Ee(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=-1;class oh{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function up(r){return r.fields.find(e=>e.kind===2)}function Qi(r){return r.fields.filter(e=>e.kind!==2)}oh.UNKNOWN_ID=-1;class Kc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ql{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ql(0,zn.min())}}function Vw(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(n===1e9?new $t(t+1,0):new $t(t,n));return new zn(i,ye.empty(),e)}function Mw(r){return new zn(r.readTime,r.key,va)}class zn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new zn(xe.min(),ye.empty(),va)}static max(){return new zn(xe.max(),ye.empty(),va)}}function Wp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==Ow)throw r;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,n)=>{t(e)})}static reject(e){return new $((t,n)=>{n(e)})}static waitFor(e){return new $((t,n)=>{let i=0,a=0,u=!1;e.forEach(c=>{++i,c.next(()=>{++a,u&&a===i&&t()},d=>n(d))}),u=!0,a===i&&t()})}static or(e){let t=$.resolve(!1);for(const n of e)t=t.next(i=>i?$.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new $((n,i)=>{const a=e.length,u=new Array(a);let c=0;for(let d=0;d<a;d++){const p=d;t(e[p]).next(g=>{u[p]=g,++c,c===a&&n(u)},g=>i(g))}})}static doWhile(e,t){return new $((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class Oh{static open(e,t,n,i){try{return new Oh(t,e.transaction(i,n))}catch(a){throw new Vl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new oi,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Vl(e,t.error)):this.m.resolve()},this.transaction.onerror=n=>{const i=Gp(n.target.error);this.m.reject(new Vl(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _C(t)}}class ai{static delete(e){return se(jn,"Removing database:",e),Yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pw())return!1;if(ai.v())return!0;const e=rh(),t=ai.C(e),n=0<t&&t<10,i=Lw(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,ai.C(rh())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(jn,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const u=a.target.result;t(u)},i.onblocked=()=>{n(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new Ee(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new Ee(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Vl(e,u))},i.onupgradeneeded=a=>{se(jn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.O.B(u,i.transaction,a.oldVersion,this.version).next(()=>{se(jn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const c=Oh.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next(p=>(c.S(),p)).catch(p=>(c.abort(p),$.reject(p))).toPromise();return d.catch(()=>{}),await c.p,d}catch(c){const d=c,p=d.name!=="FirebaseError"&&u<3;if(se(jn,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Lw(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class yC{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return Yi(this.q.delete())}}class Vl extends Ee{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fi(r){return r.name==="IndexedDbTransactionError"}class _C{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(se(jn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(se(jn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yi(n)}add(e){return se(jn,"ADD",this.store.name,e,e),Yi(this.store.add(e))}get(e){return Yi(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(jn,"GET",this.store.name,e,t),t))}delete(e){return se(jn,"DELETE",this.store.name,e),Yi(this.store.delete(e))}count(){return se(jn,"COUNT",this.store.name),Yi(this.store.count())}G(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new $((u,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{u(d.target.result)}})}{const a=this.cursor(n),u=[];return this.j(a,(c,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new $((i,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{i(u.target.result)}})}J(e,t){se(jn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.j(i,(a,u,c)=>c.delete())}Z(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.j(i,t)}X(e){const t=this.cursor({});return new $((n,i)=>{t.onerror=a=>{const u=Gp(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(c=>{c?u.continue():n()}):n()}})}j(e,t){const n=[];return new $((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const c=u.target.result;if(!c)return void i();const d=new yC(c),p=t(c.primaryKey,c.value,d);if(p instanceof $){const g=p.catch(v=>(d.done(),$.reject(v)));n.push(g)}d.isDone?i():d.U===null?c.continue():c.continue(d.U)}}).next(()=>$.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yi(r){return new $((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=Gp(n.target.error);t(i)}})}let y_=!1;function Gp(r){const e=ai.C(rh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return y_||(y_=!0,setTimeout(()=>{throw n},0)),n}}return r}const Ml="IndexBackfiller";class vC{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(Ml,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(Ml,`Documents written: ${t}`)}catch(t){fi(t)?se(Ml,"Ignoring IndexedDB error during index backfill: ",t):await di(t)}await this.te(6e4)})}}class wC{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const n=new Set;let i=t,a=!0;return $.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!n.has(u))return se(Ml,`Processing collection: ${u}`),this.ie(e,u,i).next(c=>{i-=c,n.add(u)});a=!1})).next(()=>t-i)}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(i,a)).next(c=>(se(Ml,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>u.size)}))}se(e,t){let n=e;return t.changes.forEach((i,a)=>{const u=Mw(a);Wp(u,n)>0&&(n=u)}),new zn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Sn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=-1;function Fh(r){return r==null}function Wl(r){return r===0&&1/r==-1/0}function EC(r){return typeof r=="number"&&Number.isInteger(r)&&!Wl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="";function rn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=__(e)),e=TC(r.get(t),e);return __(e)}function TC(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case ah:t+="";break;default:t+=a}}return t}function __(r){return r+ah+""}function zr(r){const e=r.length;if(Ae(e>=2),e===2)return Ae(r.charAt(0)===ah&&r.charAt(1)===""),et.emptyPath();const t=e-2,n=[];let i="";for(let a=0;a<e;){const u=r.indexOf(ah,a);switch((u<0||u>t)&&Te(),r.charAt(u+1)){case"":const c=r.substring(a,u);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=r.substring(a,u),i+="\0";break;case"":i+=r.substring(a,u+1);break;default:Te()}a=u+2}return new et(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="remoteDocuments",ou="owner",sa="owner",Gl="mutationQueues",IC="userId",Sr="mutations",v_="batchId",to="userMutationsIndex",w_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r,e){return[r,rn(e)]}function jw(r,e,t){return[r,rn(e),t]}const SC={},wa="documentMutations",lh="remoteDocumentsV14",CC=["prefixPath","collectionGroup","readTime","documentId"],Qc="documentKeyIndex",AC=["prefixPath","collectionGroup","documentId"],Bw="collectionGroupIndex",NC=["collectionGroup","readTime","prefixPath","documentId"],Kl="remoteDocumentGlobal",cp="remoteDocumentGlobalKey",Ea="targets",Uw="queryTargetsIndex",xC=["canonicalId","targetId"],Ta="targetDocuments",RC=["targetId","path"],Kp="documentTargetsIndex",PC=["path","targetId"],uh="targetGlobalKey",ro="targetGlobal",Hl="collectionParents",kC=["collectionId","parent"],Ia="clientMetadata",DC="clientId",Lh="bundles",bC="bundleId",jh="namedQueries",VC="name",Hp="indexConfiguration",MC="indexId",hp="collectionGroupIndex",OC="collectionGroup",ch="indexState",FC=["indexId","uid"],zw="sequenceNumberIndex",LC=["uid","sequenceNumber"],hh="indexEntries",jC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$w="documentKeyIndex",BC=["indexId","uid","orderedDocumentKey"],Bh="documentOverlays",UC=["userId","collectionPath","documentId"],dp="collectionPathOverlayIndex",zC=["userId","collectionPath","largestBatchId"],qw="collectionGroupOverlayIndex",$C=["userId","collectionGroup","largestBatchId"],Qp="globals",qC="name",Ww=[Gl,Sr,wa,Xi,Ea,ou,ro,Ta,Ia,Kl,Hl,Lh,jh],WC=[...Ww,Bh],Gw=[Gl,Sr,wa,lh,Ea,ou,ro,Ta,Ia,Kl,Hl,Lh,jh,Bh],Kw=Gw,Xp=[...Kw,Hp,ch,hh],GC=Xp,KC=[...Xp,Qp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends Fw{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Ot(r,e){const t=Se(r);return ai.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function au(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function HC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Qt.RED,this.left=i??Qt.EMPTY,this.right=a??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Qt(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,n,i,a){return this}insert(e,t,n){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new T_(this.data.getIterator())}getIteratorFrom(e){return new T_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class T_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ia(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new ds([])}unionWith(e){let t=new Xe(At.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Hw("Invalid base64 string: "+a):a}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(r){if(Ae(!!r),typeof r=="string"){let e=0;const t=QC.exec(r);if(Ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function _s(r){return typeof r=="string"?Nt.fromBase64String(r):Nt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="server_timestamp",Xw="__type__",Yw="__previous_value__",Zw="__local_write_time__";function Yp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xw])===null||t===void 0?void 0:t.stringValue)===Qw}function Uh(r){const e=r.mapValue.fields[Yw];return Yp(e)?Uh(e):e}function Ql(r){const e=ys(r.mapValue.fields[Zw].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,n,i,a,u,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}const dh="(default)";class ao{constructor(e,t){this.projectId=e,this.database=t||dh}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="__type__",e0="__max__",ti={mapValue:{fields:{__type__:{stringValue:e0}}}},t0="__vector__",Xl="value",Xc={nullValue:"NULL_VALUE"};function li(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yp(r)?4:n0(r)?9007199254740991:zh(r)?10:11:Te()}function qr(r,e){if(r===e)return!0;const t=li(r);if(t!==li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ql(r).isEqual(Ql(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=ys(i.timestampValue),c=ys(a.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return _s(i.bytesValue).isEqual(_s(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return ht(i.geoPointValue.latitude)===ht(a.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ht(i.integerValue)===ht(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=ht(i.doubleValue),c=ht(a.doubleValue);return u===c?Wl(u)===Wl(c):isNaN(u)&&isNaN(c)}return!1}(r,e);case 9:return _a(r.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(i,a){const u=i.mapValue.fields||{},c=a.mapValue.fields||{};if(E_(u)!==E_(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!qr(u[d],c[d])))return!1;return!0}(r,e);default:return Te()}}function Yl(r,e){return(r.values||[]).find(t=>qr(t,e))!==void 0}function ui(r,e){if(r===e)return 0;const t=li(r),n=li(e);if(t!==n)return Me(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return function(a,u){const c=ht(a.integerValue||a.doubleValue),d=ht(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(r,e);case 3:return I_(r.timestampValue,e.timestampValue);case 4:return I_(Ql(r),Ql(e));case 5:return Me(r.stringValue,e.stringValue);case 6:return function(a,u){const c=_s(a),d=_s(u);return c.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(a,u){const c=a.split("/"),d=u.split("/");for(let p=0;p<c.length&&p<d.length;p++){const g=Me(c[p],d[p]);if(g!==0)return g}return Me(c.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,u){const c=Me(ht(a.latitude),ht(u.latitude));return c!==0?c:Me(ht(a.longitude),ht(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return S_(r.arrayValue,e.arrayValue);case 10:return function(a,u){var c,d,p,g;const v=a.fields||{},E=u.fields||{},C=(c=v[Xl])===null||c===void 0?void 0:c.arrayValue,A=(d=E[Xl])===null||d===void 0?void 0:d.arrayValue,V=Me(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((g=A==null?void 0:A.values)===null||g===void 0?void 0:g.length)||0);return V!==0?V:S_(C,A)}(r.mapValue,e.mapValue);case 11:return function(a,u){if(a===ti.mapValue&&u===ti.mapValue)return 0;if(a===ti.mapValue)return 1;if(u===ti.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),p=u.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const E=Me(d[v],g[v]);if(E!==0)return E;const C=ui(c[d[v]],p[g[v]]);if(C!==0)return C}return Me(d.length,g.length)}(r.mapValue,e.mapValue);default:throw Te()}}function I_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=ys(r),n=ys(e),i=Me(t.seconds,n.seconds);return i!==0?i:Me(t.nanos,n.nanos)}function S_(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=ui(t[i],n[i]);if(a)return a}return Me(t.length,n.length)}function Sa(r){return pp(r)}function pp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=ys(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return _s(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=pp(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of n)a?a=!1:i+=",",i+=`${u}:${pp(t.fields[u])}`;return i+"}"}(r.mapValue):Te()}function Yc(r){switch(li(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(r);return e?16+Yc(e):16;case 5:return 2*r.stringValue.length;case 6:return _s(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Yc(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return au(n.fields,(a,u)=>{i+=a.length+Yc(u)}),i}(r.mapValue);default:throw Te()}}function Zp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function mp(r){return!!r&&"integerValue"in r}function Zl(r){return!!r&&"arrayValue"in r}function C_(r){return!!r&&"nullValue"in r}function A_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qf(r){return!!r&&"mapValue"in r}function zh(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jw])===null||t===void 0?void 0:t.stringValue)===t0}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return au(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ol(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(r.arrayValue.values[t]);return e}return Object.assign({},r)}function n0(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===e0}const r0={mapValue:{fields:{[Jw]:{stringValue:t0},[Xl]:{arrayValue:{}}}}};function YC(r){return"nullValue"in r?Xc:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Zp(ao.empty(),ye.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?zh(r)?r0:{mapValue:{}}:Te()}function ZC(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Zp(ao.empty(),ye.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?r0:"mapValue"in r?zh(r)?{mapValue:{}}:ti:Te()}function N_(r,e){const t=ui(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function x_(r,e){const t=ui(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.value=e}static empty(){return new er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=At.emptyPath(),n={},i=[];e.forEach((u,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}u?n[c.lastSegment()]=Ol(u):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){au(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new er(Ol(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t,n,i,a,u,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=u,this.documentState=c}static newInvalidDocument(e){return new _t(e,0,xe.min(),xe.min(),xe.min(),er.empty(),0)}static newFoundDocument(e,t,n,i){return new _t(e,1,t,xe.min(),n,i,0)}static newNoDocument(e,t){return new _t(e,2,t,xe.min(),xe.min(),er.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,xe.min(),xe.min(),er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.position=e,this.inclusive=t}}function R_(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],u=r.position[i];if(a.field.isKeyField()?n=ye.comparator(ye.fromName(u.referenceValue),t.key):n=ui(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function P_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function JC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{}class Be extends s0{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new eA(e,t,n):t==="array-contains"?new rA(e,n):t==="in"?new c0(e,n):t==="not-in"?new sA(e,n):t==="array-contains-any"?new iA(e,n):new Be(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new tA(e,n):new nA(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ui(t,this.value)):t!==null&&li(this.value)===li(t)&&this.matchesComparison(ui(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends s0{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ye(e,t)}matches(e){return Aa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Aa(r){return r.op==="and"}function gp(r){return r.op==="or"}function Jp(r){return i0(r)&&Aa(r)}function i0(r){for(const e of r.filters)if(e instanceof Ye)return!1;return!0}function yp(r){if(r instanceof Be)return r.field.canonicalString()+r.op.toString()+Sa(r.value);if(Jp(r))return r.filters.map(e=>yp(e)).join(",");{const e=r.filters.map(t=>yp(t)).join(",");return`${r.op}(${e})`}}function o0(r,e){return r instanceof Be?function(n,i){return i instanceof Be&&n.op===i.op&&n.field.isEqual(i.field)&&qr(n.value,i.value)}(r,e):r instanceof Ye?function(n,i){return i instanceof Ye&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,u,c)=>a&&o0(u,i.filters[c]),!0):!1}(r,e):void Te()}function a0(r,e){const t=r.filters.concat(e);return Ye.create(t,r.op)}function l0(r){return r instanceof Be?function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`}(r):r instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(l0).join(" ,")+"}"}(r):"Filter"}class eA extends Be{constructor(e,t,n){super(e,t,n),this.key=ye.fromName(n.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class tA extends Be{constructor(e,t){super(e,"in",t),this.keys=u0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nA extends Be{constructor(e,t){super(e,"not-in",t),this.keys=u0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function u0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ye.fromName(n.referenceValue))}class rA extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zl(t)&&Yl(t.arrayValue,this.value)}}class c0 extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yl(this.value.arrayValue,t)}}class sA extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Yl(this.value.arrayValue,t)}}class iA extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Yl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t=null,n=[],i=[],a=null,u=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=u,this.endAt=c,this.le=null}}function _p(r,e=null,t=[],n=[],i=null,a=null,u=null){return new oA(r,e,t,n,i,a,u)}function lo(r){const e=Se(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>yp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Sa(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Sa(n)).join(",")),e.le=t}return e.le}function lu(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!JC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!o0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!P_(r.startAt,e.startAt)&&P_(r.endAt,e.endAt)}function ph(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function mh(r,e){return r.filters.filter(t=>t instanceof Be&&t.field.isEqual(e))}function k_(r,e,t){let n=Xc,i=!0;for(const a of mh(r,e)){let u=Xc,c=!0;switch(a.op){case"<":case"<=":u=YC(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,c=!1;break;case"!=":case"not-in":u=Xc}N_({value:n,inclusive:i},{value:u,inclusive:c})<0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];N_({value:n,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}function D_(r,e,t){let n=ti,i=!0;for(const a of mh(r,e)){let u=ti,c=!0;switch(a.op){case">=":case">":u=ZC(a.value),c=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,c=!1;break;case"!=":case"not-in":u=ti}x_({value:n,inclusive:i},{value:u,inclusive:c})>0&&(n=u,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];x_({value:n,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(n=u,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t=null,n=[],i=[],a=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=u,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function h0(r,e,t,n,i,a,u,c){return new $h(r,e,t,n,i,a,u,c)}function qh(r){return new $h(r)}function b_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function aA(r){return r.collectionGroup!==null}function Fl(r){const e=Se(r);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Xe(At.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new fh(a,n))}),t.has(At.keyField().canonicalString())||e.he.push(new fh(At.keyField(),n))}return e.he}function Un(r){const e=Se(r);return e.Pe||(e.Pe=lA(e,Fl(r))),e.Pe}function lA(r,e){if(r.limitType==="F")return _p(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new fh(i.field,a)});const t=r.endAt?new Ca(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Ca(r.startAt.position,r.startAt.inclusive):null;return _p(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function vp(r,e,t){return new $h(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wh(r,e){return lu(Un(r),Un(e))&&r.limitType===e.limitType}function d0(r){return`${lo(Un(r))}|lt:${r.limitType}`}function ha(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>l0(i)).join(", ")}]`),Fh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Sa(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Sa(i)).join(",")),`Target(${n})`}(Un(r))}; limitType=${r.limitType})`}function uu(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ye.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of Fl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(u,c,d){const p=R_(u,c,d);return u.inclusive?p<=0:p<0}(n.startAt,Fl(n),i)||n.endAt&&!function(u,c,d){const p=R_(u,c,d);return u.inclusive?p>=0:p>0}(n.endAt,Fl(n),i))}(r,e)}function f0(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function p0(r){return(e,t)=>{let n=!1;for(const i of Fl(r)){const a=uA(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function uA(r,e,t){const n=r.field.isKeyField()?ye.comparator(e.key,t.key):function(a,u,c){const d=u.data.field(a),p=c.data.field(a);return d!==null&&p!==null?ui(d,p):Te()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new at(ye.comparator);function tr(){return cA}const m0=new at(ye.comparator);function kl(...r){let e=m0;for(const t of r)e=e.insert(t.key,t);return e}function hA(r){let e=m0;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function $r(){return Ll()}function g0(){return Ll()}function Ll(){return new vs(r=>r.toString(),(r,e)=>r.isEqual(e))}const dA=new at(ye.comparator),fA=new Xe(ye.comparator);function Le(...r){let e=fA;for(const t of r)e=e.add(t);return e}const pA=new Xe(Me);function em(){return pA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function gA(r){return{integerValue:""+r}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function yA(r,e,t){return r instanceof Jl?function(i,a){const u={fields:{[Xw]:{stringValue:Qw},[Zw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Yp(a)&&(a=Uh(a)),a&&(u.fields[Yw]=a),{mapValue:u}}(t,e):r instanceof Na?y0(r,e):r instanceof xa?_0(r,e):function(i,a){const u=vA(i,a),c=V_(u)+V_(i.Ie);return mp(u)&&mp(i.Ie)?gA(c):mA(i.serializer,c)}(r,e)}function _A(r,e,t){return r instanceof Na?y0(r,e):r instanceof xa?_0(r,e):t}function vA(r,e){return r instanceof eu?function(n){return mp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Jl extends Gh{}class Na extends Gh{constructor(e){super(),this.elements=e}}function y0(r,e){const t=v0(e);for(const n of r.elements)t.some(i=>qr(i,n))||t.push(n);return{arrayValue:{values:t}}}class xa extends Gh{constructor(e){super(),this.elements=e}}function _0(r,e){let t=v0(e);for(const n of r.elements)t=t.filter(i=>!qr(i,n));return{arrayValue:{values:t}}}class eu extends Gh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function V_(r){return ht(r.integerValue||r.doubleValue)}function v0(r){return Zl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.field=e,this.transform=t}}function EA(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof Na&&i instanceof Na||n instanceof xa&&i instanceof xa?_a(n.elements,i.elements,qr):n instanceof eu&&i instanceof eu?qr(n.Ie,i.Ie):n instanceof Jl&&i instanceof Jl}(r.transform,e.transform)}class TA{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kh{}function w0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tm(r.key,Cr.none()):new cu(r.key,r.data,Cr.none());{const t=r.data,n=er.empty();let i=new Xe(At.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),i=i.add(a)}return new Oa(r.key,n,new ds(i.toArray()),Cr.none())}}function IA(r,e,t){r instanceof cu?function(i,a,u){const c=i.value.clone(),d=O_(i.fieldTransforms,a,u.transformResults);c.setAll(d),a.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(r,e,t):r instanceof Oa?function(i,a,u){if(!Zc(i.precondition,a))return void a.convertToUnknownDocument(u.version);const c=O_(i.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(E0(i)),d.setAll(c),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(r,e,t):function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function jl(r,e,t,n){return r instanceof cu?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=a.value.clone(),g=F_(a.fieldTransforms,d,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(r,e,t,n):r instanceof Oa?function(a,u,c,d){if(!Zc(a.precondition,u))return c;const p=F_(a.fieldTransforms,d,u),g=u.data;return g.setAll(E0(a)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(r,e,t,n):function(a,u,c){return Zc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(r,e,t)}function M_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&_a(n,i,(a,u)=>EA(a,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class cu extends Kh{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oa extends Kh{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function E0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function O_(r,e,t){const n=new Map;Ae(r.length===t.length);for(let i=0;i<t.length;i++){const a=r[i],u=a.transform,c=e.data.field(a.field);n.set(a.field,_A(u,c,t[i]))}return n}function F_(r,e,t){const n=new Map;for(const i of r){const a=i.transform,u=t.data.field(i.field);n.set(i.field,yA(a,u,e))}return n}class tm extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T0 extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&IA(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=g0();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let c=this.applyToLocalView(u,a.mutatedFields);c=t.has(i.key)?null:c;const d=w0(u,c);d!==null&&n.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(xe.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(t,n)=>M_(t,n))&&_a(this.baseMutations,e.baseMutations,(t,n)=>M_(t,n))}}class rm{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Ae(e.mutations.length===n.length);let i=function(){return dA}();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,n[u].version);return new rm(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ze;function CA(r){switch(r){case ne.OK:return Te();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Te()}}function I0(r){if(r===void 0)return Ct("GRPC error has no .code"),ne.UNKNOWN;switch(r){case kt.OK:return ne.OK;case kt.CANCELLED:return ne.CANCELLED;case kt.UNKNOWN:return ne.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ne.INTERNAL;case kt.UNAVAILABLE:return ne.UNAVAILABLE;case kt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case kt.NOT_FOUND:return ne.NOT_FOUND;case kt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case kt.ABORTED:return ne.ABORTED;case kt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case kt.DATA_LOSS:return ne.DATA_LOSS;default:return Te()}}(ze=kt||(kt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new ii([4294967295,4294967295],0);function L_(r){const e=AA().encode(r),t=new Aw;return t.update(e),new Uint8Array(t.digest())}function j_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ii([t,n],0),new ii([i,a],0)]}class im{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(n<0)throw new Dl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ii.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(ii.fromNumber(n)));return i.compare(NA)===1&&(i=new ii([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=L_(e),[n,i]=j_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);if(!this.Re(u))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new im(a,i,t);return n.forEach(c=>u.insert(c)),u}insert(e){if(this.Ee===0)return;const t=L_(e),[n,i]=j_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(n,i,a);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hu(xe.min(),i,new at(Me),tr(),Le())}}class du{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new du(n,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,n,i){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=i}}class S0{constructor(e,t){this.targetId=e,this.ge=t}}class C0{constructor(e,t,n=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class B_{constructor(){this.pe=0,this.ye=U_(),this.we=Nt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Le(),t=Le(),n=Le();return this.ye.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Te()}}),new du(this.we,this.be,e,t,n)}Me(){this.Se=!1,this.ye=U_()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ae(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class xA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=tr(),this.$e=jc(),this.Ke=jc(),this.Ue=new at(Me)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,n=e.ge.count,i=this.Xe(t);if(i){const a=i.target;if(ph(a))if(n===0){const u=new ye(a.path);this.ze(t,u,_t.newNoDocument(u,xe.min()))}else Ae(n===1);else{const u=this.et(t);if(u!==n){const c=this.tt(e),d=c?this.nt(c,e,u):1;if(d!==0){this.Ye(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let u,c;try{u=_s(n).toUint8Array()}catch(d){if(d instanceof Hw)return $l("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new im(u,i,a)}catch(d){return $l(d instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const u=this.ke.it(),c=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,a,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((a,u)=>{const c=this.Xe(u);if(c){if(a.current&&ph(c.target)){const d=new ye(c.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,_t.newNoDocument(d,e))}a.ve&&(t.set(u,a.Fe()),a.Me())}});let n=Le();this.Ke.forEach((a,u)=>{let c=!0;u.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const i=new hu(e,t,this.Ue,this.Qe,n);return this.Qe=tr(),this.$e=jc(),this.Ke=jc(),this.Ue=new at(Me),i}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new B_,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Xe(Me),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Xe(Me),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new B_),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function jc(){return new at(ye.comparator)}function U_(){return new at(ye.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},PA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kA={and:"AND",or:"OR"};class DA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wp(r,e){return r.useProto3Json||Fh(e)?e:{value:e}}function gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function VA(r,e){return gh(r,e.toTimestamp())}function fn(r){return Ae(!!r),xe.fromTimestamp(function(t){const n=ys(t);return new $t(n.seconds,n.nanos)}(r))}function A0(r,e){return Ep(r,e).canonicalString()}function Ep(r,e){const t=function(i){return new et(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function N0(r){const e=et.fromString(r);return Ae(O0(e)),e}function yh(r,e){return A0(r.databaseId,e.path)}function so(r,e){const t=N0(e);if(t.get(1)!==r.databaseId.projectId)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(P0(t))}function x0(r,e){return A0(r.databaseId,e)}function R0(r){const e=N0(r);return e.length===4?et.emptyPath():P0(e)}function Tp(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function P0(r){return Ae(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function z_(r,e,t){return{name:yh(r,e),fields:t.value.mapValue.fields}}function MA(r,e,t){const n=so(r,e.name),i=fn(e.updateTime),a=e.createTime?fn(e.createTime):xe.min(),u=new er({mapValue:{fields:e.fields}}),c=_t.newFoundDocument(n,i,a,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function OA(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(Ae(g===void 0||typeof g=="string"),Nt.fromBase64String(g||"")):(Ae(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Nt.fromUint8Array(g||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(p){const g=p.code===void 0?ne.UNKNOWN:I0(p.code);return new Ee(g,p.message||"")}(u);t=new C0(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=so(r,n.document.name),a=fn(n.document.updateTime),u=n.document.createTime?fn(n.document.createTime):xe.min(),c=new er({mapValue:{fields:n.document.fields}}),d=_t.newFoundDocument(i,a,u,c),p=n.targetIds||[],g=n.removedTargetIds||[];t=new Jc(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=so(r,n.document),a=n.readTime?fn(n.readTime):xe.min(),u=_t.newNoDocument(i,a),c=n.removedTargetIds||[];t=new Jc([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=so(r,n.document),a=n.removedTargetIds||[];t=new Jc([],a,i,null)}else{if(!("filter"in e))return Te();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,u=new SA(i,a),c=n.targetId;t=new S0(c,u)}}return t}function _h(r,e){let t;if(e instanceof cu)t={update:z_(r,e.key,e.value)};else if(e instanceof tm)t={delete:yh(r,e.key)};else if(e instanceof Oa)t={update:z_(r,e.key,e.data),updateMask:zA(e.fieldMask)};else{if(!(e instanceof T0))return Te();t={verify:yh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,u){const c=u.transform;if(c instanceof Jl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Na)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof eu)return{fieldPath:u.field.canonicalString(),increment:c.Ie};throw Te()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:VA(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te()}(r,e.precondition)),t}function Ip(r,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?Cr.updateTime(fn(a.updateTime)):a.exists!==void 0?Cr.exists(a.exists):Cr.none()}(e.currentDocument):Cr.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let d=null;if("setToServerValue"in c)Ae(c.setToServerValue==="REQUEST_TIME"),d=new Jl;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];d=new Na(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];d=new xa(g)}else"increment"in c?d=new eu(u,c.increment):Te();const p=At.fromServerFormat(c.fieldPath);return new wA(p,d)}(r,i)):[];if(e.update){e.update.name;const i=so(r,e.update.name),a=new er({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new ds(p.map(g=>At.fromServerFormat(g)))}(e.updateMask);return new Oa(i,a,u,t,n)}return new cu(i,a,t,n)}if(e.delete){const i=so(r,e.delete);return new tm(i,t)}if(e.verify){const i=so(r,e.verify);return new T0(i,t)}return Te()}function FA(r,e){return r&&r.length>0?(Ae(e!==void 0),r.map(t=>function(i,a){let u=i.updateTime?fn(i.updateTime):fn(a);return u.isEqual(xe.min())&&(u=fn(a)),new TA(u,i.transformResults||[])}(t,e))):[]}function k0(r,e){return{documents:[x0(r,e.path)]}}function D0(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=x0(r,i);const a=function(p){if(p.length!==0)return M0(Ye.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:da(E.field),direction:jA(E.dir)}}(g))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=wp(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:i}}function b0(r){let e=R0(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Ae(n===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(v){const E=V0(v);return E instanceof Ye&&Jp(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(E=>function(A){return new fh(fa(A.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(v){let E;return E=typeof v=="object"?v.value:v,Fh(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(v){const E=!!v.before,C=v.values||[];return new Ca(C,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,C=v.values||[];return new Ca(C,E)}(t.endAt)),h0(e,i,u,a,c,"F",d,p)}function LA(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function V0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=fa(t.unaryFilter.field);return Be.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=fa(t.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(t.unaryFilter.field);return Be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return Be.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(r):r.fieldFilter!==void 0?function(t){return Be.create(fa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ye.create(t.compositeFilter.filters.map(n=>V0(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(r):Te()}function jA(r){return RA[r]}function BA(r){return PA[r]}function UA(r){return kA[r]}function da(r){return{fieldPath:r.canonicalString()}}function fa(r){return At.fromServerFormat(r.fieldPath)}function M0(r){return r instanceof Be?function(t){if(t.op==="=="){if(A_(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(C_(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(A_(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(C_(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:BA(t.op),value:t.value}}}(r):r instanceof Ye?function(t){const n=t.getFilters().map(i=>M0(i));return n.length===1?n[0]:{compositeFilter:{op:UA(t.op),filters:n}}}(r):Te()}function zA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function O0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,n,i,a=xe.min(),u=xe.min(),c=Nt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.Tt=e}}function $A(r,e){let t;if(e.document)t=MA(r.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ye.fromSegments(e.noDocument.path),i=co(e.noDocument.readTime);t=_t.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const n=ye.fromSegments(e.unknownDocument.path),i=co(e.unknownDocument.version);t=_t.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(i){const a=new $t(i[0],i[1]);return xe.fromTimestamp(a)}(e.readTime)),t}function $_(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(a,u){return{name:yh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:gh(a,u.version.toTimestamp()),createTime:gh(a,u.createTime.toTimestamp())}}(r.Tt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:uo(e.version)};else{if(!e.isUnknownDocument())return Te();n.unknownDocument={path:t.path.toArray(),version:uo(e.version)}}return n}function vh(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function uo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function co(r){const e=new $t(r.seconds,r.nanoseconds);return xe.fromTimestamp(e)}function Zi(r,e){const t=(e.baseMutations||[]).map(a=>Ip(r.Tt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];u.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map(a=>Ip(r.Tt,a)),i=$t.fromMillis(e.localWriteTimeMs);return new nm(e.batchId,i,t,n)}function bl(r){const e=co(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?co(r.lastLimboFreeSnapshotVersion):xe.min();let n;return n=function(a){return a.documents!==void 0}(r.query)?function(a){return Ae(a.documents.length===1),Un(qh(R0(a.documents[0])))}(r.query):function(a){return Un(b0(a))}(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Nt.fromBase64String(r.resumeToken))}function L0(r,e){const t=uo(e.snapshotVersion),n=uo(e.lastLimboFreeSnapshotVersion);let i;i=ph(e.target)?k0(r.Tt,e.target):D0(r.Tt,e.target).ht;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function j0(r){const e=b0({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?vp(e,e.limit,"L"):e}function Wf(r,e){return new sm(e.largestBatchId,Ip(r.Tt,e.overlayMutation))}function q_(r,e){const t=e.path.lastSegment();return[r,rn(e.path.popLast()),t]}function W_(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:uo(n.readTime),documentKey:rn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{getBundleMetadata(e,t){return G_(e).get(t).next(n=>{if(n)return function(a){return{id:a.bundleId,createTime:co(a.createTime),version:a.version}}(n)})}saveBundleMetadata(e,t){return G_(e).put(function(i){return{bundleId:i.id,createTime:uo(fn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return K_(e).get(t).next(n=>{if(n)return function(a){return{name:a.name,query:j0(a.bundledQuery),readTime:co(a.readTime)}}(n)})}saveNamedQuery(e,t){return K_(e).put(function(i){return{name:i.name,readTime:uo(fn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function G_(r){return Ot(r,Lh)}function K_(r){return Ot(r,jh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Hh(e,n)}getOverlay(e,t){return Cl(e).get(q_(this.userId,t)).next(n=>n?Wf(this.serializer,n):null)}getOverlays(e,t){const n=$r();return $.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){const i=[];return n.forEach((a,u)=>{const c=new sm(t,u);i.push(this.Et(e,c))}),$.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(u=>i.add(rn(u.getCollectionPath())));const a=[];return i.forEach(u=>{const c=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(Cl(e).J(dp,c))}),$.waitFor(a)}getOverlaysForCollection(e,t,n){const i=$r(),a=rn(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cl(e).G(dp,u).next(c=>{for(const d of c){const p=Wf(this.serializer,d);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const a=$r();let u;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cl(e).Z({index:qw,range:c},(d,p,g)=>{const v=Wf(this.serializer,p);a.size()<i||v.largestBatchId===u?(a.set(v.getKey(),v),u=v.largestBatchId):g.done()}).next(()=>a)}Et(e,t){return Cl(e).put(function(i,a,u){const[c,d,p]=q_(a,u.mutation.key);return{userId:a,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:_h(i.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Cl(r){return Ot(r,Bh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{dt(e){return Ot(e,Qp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?Nt.fromUint8Array(n):Nt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ht(e.integerValue));else if("doubleValue"in e){const n=ht(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Wl(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),typeof n=="string"&&(n=ys(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(_s(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?n0(e)?this.ft(t,Number.MAX_SAFE_INTEGER):zh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Te()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const i of Object.keys(n))this.wt(i,t),this.Rt(n[i],t)}vt(e,t){var n,i;const a=e.fields||{};this.ft(t,53);const u=Xl,c=((i=(n=a[u].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(ht(c)),this.wt(u,t),this.Rt(a[u],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const i of n)this.Rt(i,t)}Dt(e,t){this.ft(t,37),ye.fromName(e).path.forEach(n=>{this.ft(t,60),this.Mt(n,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Ji.xt=new Ji;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=255;function GA(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function H_(r){const e=64-function(n){let i=0;for(let a=0;a<8;++a){const u=GA(255&n[a]);if(i+=u,u!==8)break}return i}(r);return Math.ceil(e/8)}class KA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Nt(n);else if(n<2048)this.Nt(960|n>>>6),this.Nt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|n>>>12),this.Nt(128|63&n>>>6),this.Nt(128|63&n);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.kt(n);else if(n<2048)this.kt(960|n>>>6),this.kt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|n>>>12),this.kt(128|63&n>>>6),this.kt(128|63&n);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){const t=this.Ut(e),n=H_(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Ut(e),n=H_(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(oa),this.jt(255)}Ht(){this.Jt(oa),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===oa?(this.jt(oa),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===oa?(this.Jt(oa),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class HA{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class QA{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Al{constructor(){this.Zt=new KA,this.Xt=new HA(this.Zt),this.en=new QA(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new eo(this.indexId,this.documentKey,this.arrayValue,n)}}function Hs(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Q_(r.arrayValue,e.arrayValue),t!==0?t:(t=Q_(r.directionalValue,e.directionalValue),t!==0?t:ye.comparator(r.documentKey,e.documentKey)))}function Q_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.rn=new Xe((t,n)=>At.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const n=t;n.isInequality()?this.rn=this.rn.add(n):this._n.push(n)}}get an(){return this.rn.size>1}un(e){if(Ae(e.collectionGroup===this.collectionId),this.an)return!1;const t=up(e);if(t!==void 0&&!this.cn(t))return!1;const n=Qi(e);let i=new Set,a=0,u=0;for(;a<n.length&&this.cn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.ln(c,d)||!this.hn(this.sn[u++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(u>=this.sn.length||!this.hn(this.sn[u++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new Xe(At.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Kc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Kc(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Kc(n.field,n.dir==="asc"?0:1)));return new oh(oh.UNKNOWN_ID,this.collectionId,t,ql.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r){var e,t;if(Ae(r instanceof Be||r instanceof Ye),r instanceof Be){if(r instanceof c0){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Be.create(r.field,"==",a)))||[];return Ye.create(i,"or")}return r}const n=r.filters.map(i=>B0(i));return Ye.create(n,r.op)}function XA(r){if(r.getFilters().length===0)return[];const e=Ap(B0(r));return Ae(U0(e)),Sp(e)||Cp(e)?[e]:e.getFilters()}function Sp(r){return r instanceof Be}function Cp(r){return r instanceof Ye&&Jp(r)}function U0(r){return Sp(r)||Cp(r)||function(t){if(t instanceof Ye&&gp(t)){for(const n of t.getFilters())if(!Sp(n)&&!Cp(n))return!1;return!0}return!1}(r)}function Ap(r){if(Ae(r instanceof Be||r instanceof Ye),r instanceof Be)return r;if(r.filters.length===1)return Ap(r.filters[0]);const e=r.filters.map(n=>Ap(n));let t=Ye.create(e,r.op);return t=wh(t),U0(t)?t:(Ae(t instanceof Ye),Ae(Aa(t)),Ae(t.filters.length>1),t.filters.reduce((n,i)=>om(n,i)))}function om(r,e){let t;return Ae(r instanceof Be||r instanceof Ye),Ae(e instanceof Be||e instanceof Ye),t=r instanceof Be?e instanceof Be?function(i,a){return Ye.create([i,a],"and")}(r,e):Y_(r,e):e instanceof Be?Y_(e,r):function(i,a){if(Ae(i.filters.length>0&&a.filters.length>0),Aa(i)&&Aa(a))return a0(i,a.getFilters());const u=gp(i)?i:a,c=gp(i)?a:i,d=u.filters.map(p=>om(p,c));return Ye.create(d,"or")}(r,e),wh(t)}function Y_(r,e){if(Aa(e))return a0(e,r.getFilters());{const t=e.filters.map(n=>om(r,n));return Ye.create(t,"or")}}function wh(r){if(Ae(r instanceof Be||r instanceof Ye),r instanceof Be)return r;const e=r.getFilters();if(e.length===1)return wh(e[0]);if(i0(r))return r;const t=e.map(i=>wh(i)),n=[];return t.forEach(i=>{i instanceof Be?n.push(i):i instanceof Ye&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:Ye.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.Tn=new am}addToCollectionParentIndex(e,t){return this.Tn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(zn.min())}updateCollectionGroup(e,t,n){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class am{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Xe(et.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Xe(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="IndexedDbIndexManager",Bc=new Uint8Array(0);class ZA{constructor(e,t){this.databaseId=t,this.In=new am,this.En=new vs(n=>lo(n),(n,i)=>lu(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const a={collectionId:n,parent:rn(i)};return J_(e).put(a)}return $.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[bw(t),""],!1,!0);return J_(e).G(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;n.push(zr(u.parent))}return n})}addFieldIndex(e,t){const n=Nl(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const a=n.add(i);if(t.indexState){const u=la(e);return a.next(c=>{u.put(W_(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const n=Nl(e),i=la(e),a=aa(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Nl(e),n=aa(e),i=la(e);return t.J().next(()=>n.J()).next(()=>i.J())}createTargetIndexes(e,t){return $.forEach(this.dn(t),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const a=new X_(n).Pn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const n=aa(e);let i=!0;const a=new Map;return $.forEach(this.dn(t),u=>this.An(e,u).next(c=>{i&&(i=!!c),a.set(u,c)})).next(()=>{if(i){let u=Le();const c=[];return $.forEach(a,(d,p)=>{se(Z_,`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(d)} to execute ${lo(t)}`);const g=function(q,X){const F=up(X);if(F===void 0)return null;for(const z of mh(q,F.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(p,d),v=function(q,X){const F=new Map;for(const z of Qi(X))for(const R of mh(q,z.fieldPath))switch(R.op){case"==":case"in":F.set(z.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return F.set(z.fieldPath.canonicalString(),R.value),Array.from(F.values())}return null}(p,d),E=function(q,X){const F=[];let z=!0;for(const R of Qi(X)){const I=R.kind===0?k_(q,R.fieldPath,q.startAt):D_(q,R.fieldPath,q.startAt);F.push(I.value),z&&(z=I.inclusive)}return new Ca(F,z)}(p,d),C=function(q,X){const F=[];let z=!0;for(const R of Qi(X)){const I=R.kind===0?D_(q,R.fieldPath,q.endAt):k_(q,R.fieldPath,q.endAt);F.push(I.value),z&&(z=I.inclusive)}return new Ca(F,z)}(p,d),A=this.Rn(d,p,E),V=this.Rn(d,p,C),M=this.Vn(d,p,v),B=this.mn(d.indexId,g,A,E.inclusive,V,C.inclusive,M);return $.forEach(B,K=>n.H(K,t.limit).next(q=>{q.forEach(X=>{const F=ye.fromSegments(X.documentKey);u.has(F)||(u=u.add(F),c.push(F))})}))}).next(()=>c)}return $.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=XA(Ye.create(e.filters,"and")).map(n=>_p(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,n,i,a,u,c){const d=(t!=null?t.length:1)*Math.max(n.length,a.length),p=d/(t!=null?t.length:1),g=[];for(let v=0;v<d;++v){const E=t?this.fn(t[v/p]):Bc,C=this.gn(e,E,n[v%p],i),A=this.pn(e,E,a[v%p],u),V=c.map(M=>this.gn(e,E,M,!0));g.push(...this.createRange(C,A,V))}return g}gn(e,t,n,i){const a=new eo(e,ye.empty(),t,n);return i?a:a.nn()}pn(e,t,n,i){const a=new eo(e,ye.empty(),t,n);return i?a.nn():a}An(e,t){const n=new X_(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const c of a)n.un(c)&&(!u||c.fields.length>u.fields.length)&&(u=c);return u})}getIndexType(e,t){let n=2;const i=this.dn(t);return $.forEach(i,a=>this.An(e,a).next(u=>{u?n!==0&&u.fields.length<function(d){let p=new Xe(At.comparator),g=!1;for(const v of d.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?g=!0:p=p.add(E.field));for(const v of d.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(g?1:0)}(a)&&(n=1):n=0})).next(()=>function(u){return u.limit!==null}(t)&&i.length>1&&n===2?1:n)}yn(e,t){const n=new Al;for(const i of Qi(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const u=n.tn(i.kind);Ji.xt.At(a,u)}return n.Yt()}fn(e){const t=new Al;return Ji.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new Al;return Ji.xt.At(Zp(this.databaseId,t),n.tn(function(a){const u=Qi(a);return u.length===0?0:u[u.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(n===null)return[];let i=[];i.push(new Al);let a=0;for(const u of Qi(e)){const c=n[a++];for(const d of i)if(this.bn(t,u.fieldPath)&&Zl(c))i=this.Sn(i,u,c);else{const p=d.tn(u.kind);Ji.xt.At(c,p)}}return this.Dn(i)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}Sn(e,t,n){const i=[...e],a=[];for(const u of n.arrayValue.values||[])for(const c of i){const d=new Al;d.seed(c.Yt()),Ji.xt.At(u,d.tn(t.kind)),a.push(d)}return a}bn(e,t){return!!e.filters.find(n=>n instanceof Be&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=Nl(e),i=la(e);return(t?n.G(hp,IDBKeyRange.bound(t,t)):n.G()).next(a=>{const u=[];return $.forEach(a,c=>i.get([c.indexId,this.uid]).next(d=>{u.push(function(g,v){const E=v?new ql(v.sequenceNumber,new zn(co(v.readTime),new ye(zr(v.documentKey)),v.largestBatchId)):ql.empty(),C=g.fields.map(([A,V])=>new Kc(At.fromServerFormat(A),V));return new oh(g.indexId,g.collectionGroup,C,E)}(c,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Me(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=Nl(e),a=la(e);return this.vn(e).next(u=>i.G(hp,IDBKeyRange.bound(t,t)).next(c=>$.forEach(c,d=>a.put(W_(d.indexId,this.uid,u,n)))))}updateIndexEntries(e,t){const n=new Map;return $.forEach(t,(i,a)=>{const u=n.get(i.collectionGroup);return(u?$.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(n.set(i.collectionGroup,c),$.forEach(c,d=>this.Cn(e,i,d).next(p=>{const g=this.Fn(a,d);return p.isEqual(g)?$.resolve():this.Mn(e,a,d,p,g)}))))})}xn(e,t,n,i){return aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,i){return aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const i=aa(e);let a=new Xe(Hs);return i.Z({index:$w,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},(u,c)=>{a=a.add(new eo(n.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>a)}Fn(e,t){let n=new Xe(Hs);const i=this.yn(t,e);if(i==null)return n;const a=up(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Zl(u))for(const c of u.arrayValue.values||[])n=n.add(new eo(t.indexId,e.key,this.fn(c),i))}else n=n.add(new eo(t.indexId,e.key,Bc,i));return n}Mn(e,t,n,i,a){se(Z_,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,g,v,E){const C=d.getIterator(),A=p.getIterator();let V=ia(C),M=ia(A);for(;V||M;){let B=!1,K=!1;if(V&&M){const q=g(V,M);q<0?K=!0:q>0&&(B=!0)}else V!=null?K=!0:B=!0;B?(v(M),M=ia(A)):K?(E(V),V=ia(C)):(V=ia(C),M=ia(A))}}(i,a,Hs,c=>{u.push(this.xn(e,t,n,c))},c=>{u.push(this.On(e,t,n,c))}),$.waitFor(u)}vn(e){let t=1;return la(e).Z({index:zw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((u,c)=>Hs(u,c)).filter((u,c,d)=>!c||Hs(u,d[c-1])!==0);const i=[];i.push(e);for(const u of n){const c=Hs(u,e),d=Hs(u,t);if(c===0)i[0]=e.nn();else if(c>0&&d<0)i.push(u),i.push(u.nn());else if(d>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.Nn(i[u],i[u+1]))return[];const c=[i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Bc,[]],d=[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Bc,[]];a.push(IDBKeyRange.bound(c,d))}return a}Nn(e,t){return Hs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ev)}getMinOffset(e,t){return $.mapArray(this.dn(t),n=>this.An(e,n).next(i=>i||Te())).next(ev)}}function J_(r){return Ot(r,Hl)}function aa(r){return Ot(r,hh)}function Nl(r){return Ot(r,Hp)}function la(r){return Ot(r,ch)}function ev(r){Ae(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;Wp(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new zn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z0=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(r,e,t){const n=r.store(Sr),i=r.store(wa),a=[],u=IDBKeyRange.only(t.batchId);let c=0;const d=n.Z({range:u},(g,v,E)=>(c++,E.delete()));a.push(d.next(()=>{Ae(c===1)}));const p=[];for(const g of t.mutations){const v=jw(e,g.key.path,t.batchId);a.push(i.delete(v)),p.push(g.key)}return $.waitFor(a).next(()=>p)}function Eh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Te();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(z0,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Qh{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Bn={}}static It(e,t,n,i){Ae(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Qh(a,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).Z({index:to,range:n},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const a=pa(e),u=Qs(e);return u.add({}).next(c=>{Ae(typeof c=="number");const d=new nm(c,t,n,i),p=function(C,A,V){const M=V.baseMutations.map(K=>_h(C.Tt,K)),B=V.mutations.map(K=>_h(C.Tt,K));return{userId:A,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,d),g=[];let v=new Xe((E,C)=>Me(E.canonicalString(),C.canonicalString()));for(const E of i){const C=jw(this.userId,E.key.path,c);v=v.add(E.key.path.popLast()),g.push(u.put(p)),g.push(a.put(C,SC))}return v.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Bn[c]=d.keys()}),$.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return Qs(e).get(t).next(n=>n?(Ae(n.userId===this.userId),Zi(this.serializer,n)):null)}Ln(e,t){return this.Bn[t]?$.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Qs(e).Z({index:to,range:i},(u,c,d)=>{c.userId===this.userId&&(Ae(c.batchId>=n),a=Zi(this.serializer,c)),d.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=no;return Qs(e).Z({index:to,range:t,reverse:!0},(i,a,u)=>{n=a.batchId,u.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,no],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).G(to,t).next(n=>n.map(i=>Zi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Hc(this.userId,t.path),i=IDBKeyRange.lowerBound(n),a=[];return pa(e).Z({range:i},(u,c,d)=>{const[p,g,v]=u,E=zr(g);if(p===this.userId&&t.path.isEqual(E))return Qs(e).get(v).next(C=>{if(!C)throw Te();Ae(C.userId===this.userId),a.push(Zi(this.serializer,C))});d.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xe(Me);const i=[];return t.forEach(a=>{const u=Hc(this.userId,a.path),c=IDBKeyRange.lowerBound(u),d=pa(e).Z({range:c},(p,g,v)=>{const[E,C,A]=p,V=zr(C);E===this.userId&&a.path.isEqual(V)?n=n.add(A):v.done()});i.push(d)}),$.waitFor(i).next(()=>this.kn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,a=Hc(this.userId,n),u=IDBKeyRange.lowerBound(a);let c=new Xe(Me);return pa(e).Z({range:u},(d,p,g)=>{const[v,E,C]=d,A=zr(E);v===this.userId&&n.isPrefixOf(A)?A.length===i&&(c=c.add(C)):g.done()}).next(()=>this.kn(e,c))}kn(e,t){const n=[],i=[];return t.forEach(a=>{i.push(Qs(e).get(a).next(u=>{if(u===null)throw Te();Ae(u.userId===this.userId),n.push(Zi(this.serializer,u))}))}),$.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return $0(e.ue,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),$.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $.resolve();const n=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),i=[];return pa(e).Z({range:n},(a,u,c)=>{if(a[0]===this.userId){const d=zr(a[1]);i.push(d)}else c.done()}).next(()=>{Ae(i.length===0)})})}containsKey(e,t){return q0(e,this.userId,t)}Qn(e){return W0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:no,lastStreamToken:""})}}function q0(r,e,t){const n=Hc(e,t.path),i=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return pa(r).Z({range:a,Y:!0},(c,d,p)=>{const[g,v,E]=c;g===e&&v===i&&(u=!0),p.done()}).next(()=>u)}function Qs(r){return Ot(r,Sr)}function pa(r){return Ot(r,wa)}function W0(r){return Ot(r,Gl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new ho(0)}static Un(){return new ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const n=new ho(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>xe.fromTimestamp(new $t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.Wn(e)).next(n=>(Ae(n.targetCount>0),n.targetCount-=1,this.Gn(e,n)))}removeTargets(e,t,n){let i=0;const a=[];return ua(e).Z((u,c)=>{const d=bl(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))}).next(()=>$.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ua(e).Z((n,i)=>{const a=bl(i);t(a)})}Wn(e){return nv(e).get(uh).next(t=>(Ae(t!==null),t))}Gn(e,t){return nv(e).put(uh,t)}zn(e,t){return ua(e).put(L0(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=lo(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return ua(e).Z({range:i,index:Uw},(u,c,d)=>{const p=bl(c);lu(t,p.target)&&(a=p,d.done())}).next(()=>a)}addMatchingKeys(e,t,n){const i=[],a=ei(e);return t.forEach(u=>{const c=rn(u.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,u))}),$.waitFor(i)}removeMatchingKeys(e,t,n){const i=ei(e);return $.forEach(t,a=>{const u=rn(a.path);return $.waitFor([i.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])})}removeMatchingKeysForTargetId(e,t){const n=ei(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=ei(e);let a=Le();return i.Z({range:n,Y:!0},(u,c,d)=>{const p=zr(u[1]),g=new ye(p);a=a.add(g)}).next(()=>a)}containsKey(e,t){const n=rn(t.path),i=IDBKeyRange.bound([n],[bw(n)],!1,!0);let a=0;return ei(e).Z({index:Kp,Y:!0,range:i},([u,c],d,p)=>{u!==0&&(a++,p.done())}).next(()=>a>0)}lt(e,t){return ua(e).get(t).next(n=>n?bl(n):null)}}function ua(r){return Ot(r,Ea)}function nv(r){return Ot(r,ro)}function ei(r){return Ot(r,Ta)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="LruGarbageCollector",G0=1048576;function sv([r,e],[t,n]){const i=Me(r,t);return i===0?Me(e,n):i}class eN{constructor(e){this.Hn=e,this.buffer=new Xe(sv),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();sv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class K0{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(rv,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fi(t)?se(rv,"Ignoring IndexedDB error during garbage collection: ",t):await di(t)}await this.er(3e5)})}}class tN{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Sn.ae);const n=new eN(t);return this.tr.forEachTarget(e,i=>n.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>n.Zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(tv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tv):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,i,a,u,c,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,u=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(n=v,c=Date.now(),this.removeTargets(e,n,t))).next(v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,n))).next(v=>(p=Date.now(),ca()<=$e.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${i} in `+(c-u)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v})))}}function H0(r,e){return new tN(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.db=e,this.garbageCollector=H0(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(n,i)=>t(i))}addReference(e,t,n){return Uc(e,n)}removeReference(e,t,n){return Uc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Uc(e,t)}ar(e,t){return function(i,a){let u=!1;return W0(i).X(c=>q0(i,c,a).next(d=>(d&&(u=!0),$.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._r(e,(u,c)=>{if(c<=t){const d=this.ar(e,u).next(p=>{if(!p)return a++,n.getEntry(e,u).next(()=>(n.removeEntry(u,xe.min()),ei(e).delete(function(v){return[0,rn(v.path)]}(u))))});i.push(d)}}).next(()=>$.waitFor(i)).next(()=>n.apply(e)).next(()=>a)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Uc(e,t)}_r(e,t){const n=ei(e);let i,a=Sn.ae;return n.Z({index:Kp},([u,c],{path:d,sequenceNumber:p})=>{u===0?(a!==Sn.ae&&t(new ye(zr(i)),a),a=p,i=d):a=Sn.ae}).next(()=>{a!==Sn.ae&&t(new ye(zr(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uc(r,e){return ei(r).put(function(n,i){return{targetId:0,path:rn(n.path),sequenceNumber:i}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.changes=new vs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?$.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Gi(e).put(n)}removeEntry(e,t,n){return Gi(e).delete(function(a,u){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vh(u),c[c.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.ur(e,n)))}getEntry(e,t){let n=_t.newInvalidDocument(t);return Gi(e).Z({index:Qc,range:IDBKeyRange.only(xl(t))},(i,a)=>{n=this.cr(t,a)}).next(()=>n)}lr(e,t){let n={size:0,document:_t.newInvalidDocument(t)};return Gi(e).Z({index:Qc,range:IDBKeyRange.only(xl(t))},(i,a)=>{n={document:this.cr(t,a),size:Eh(a)}}).next(()=>n)}getEntries(e,t){let n=tr();return this.hr(e,t,(i,a)=>{const u=this.cr(i,a);n=n.insert(i,u)}).next(()=>n)}Pr(e,t){let n=tr(),i=new at(ye.comparator);return this.hr(e,t,(a,u)=>{const c=this.cr(a,u);n=n.insert(a,c),i=i.insert(a,Eh(u))}).next(()=>({documents:n,Tr:i}))}hr(e,t,n){if(t.isEmpty())return $.resolve();let i=new Xe(av);t.forEach(d=>i=i.add(d));const a=IDBKeyRange.bound(xl(i.first()),xl(i.last())),u=i.getIterator();let c=u.getNext();return Gi(e).Z({index:Qc,range:a},(d,p,g)=>{const v=ye.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&av(c,v)<0;)n(c,null),c=u.getNext();c&&c.isEqual(v)&&(n(c,p),c=u.hasNext()?u.getNext():null),c?g.W(xl(c)):g.done()}).next(()=>{for(;c;)n(c,null),c=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,n,i,a){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),vh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gi(e).G(IDBKeyRange.bound(c,d,!0)).next(p=>{a==null||a.incrementDocumentReadCount(p.length);let g=tr();for(const v of p){const E=this.cr(ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(uu(t,E)||i.has(E.key))&&(g=g.insert(E.key,E))}return g})}getAllFromCollectionGroup(e,t,n,i){let a=tr();const u=ov(t,n),c=ov(t,zn.max());return Gi(e).Z({index:Bw,range:IDBKeyRange.bound(u,c,!0)},(d,p,g)=>{const v=this.cr(ye.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(v.key,v),a.size===i&&g.done()}).next(()=>a)}newChangeBuffer(e){return new sN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iv(e).get(cp).next(t=>(Ae(!!t),t))}ur(e,t){return iv(e).put(cp,t)}cr(e,t){if(t){const n=$A(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(xe.min())))return n}return _t.newInvalidDocument(e)}}function X0(r){return new rN(r)}class sN extends Q0{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new vs(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new Xe((a,u)=>Me(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const c=this.Er.get(a);if(t.push(this.Ir.removeEntry(e,a,c.readTime)),u.isValidDocument()){const d=$_(this.Ir.serializer,u);i=i.add(a.path.popLast());const p=Eh(d);n+=p-c.size,t.push(this.Ir.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=$_(this.Ir.serializer,u.convertToNoDocument(xe.min()));t.push(this.Ir.addEntry(e,a,d))}}),i.forEach(a=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Ir.updateMetadata(e,n)),$.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(n=>(this.Er.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:n,Tr:i})=>(i.forEach((a,u)=>{this.Er.set(a,{size:u,readTime:n.get(a).readTime})}),n))}}function iv(r){return Ot(r,Kl)}function Gi(r){return Ot(r,lh)}function xl(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ov(r,e){const t=e.documentKey.path.toArray();return[r,vh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function av(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(i=Me(t[a],n[a]),i)return i;return i=Me(t.length,n.length),i||(i=Me(t[t.length-2],n[n.length-2]),i||Me(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&jl(n.mutation,i,ds.empty(),$t.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Le()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Le()){const i=$r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let u=kl();return a.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=$r();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Le()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,c)=>{t.set(u,c)})})}computeViews(e,t,n,i){let a=tr();const u=Ll(),c=function(){return Ll()}();return t.forEach((d,p)=>{const g=n.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Oa)?a=a.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),jl(g.mutation,p,g.mutation.getFieldMask(),$t.now())):u.set(p.key,ds.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((p,g)=>u.set(p,g)),t.forEach((p,g)=>{var v;return c.set(p,new iN(g,(v=u.get(p))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){const n=Ll();let i=new at((u,c)=>u-c),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const c of u)c.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let g=n.get(d)||ds.empty();g=c.applyToLocalView(p,g),n.set(d,g);const v=(i.get(c.batchId)||Le()).add(d);i=i.insert(c.batchId,v)})}).next(()=>{const u=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,g=d.value,v=g0();g.forEach(E=>{if(!a.has(E)){const C=w0(t.get(E),n.get(E));C!==null&&v.set(E,C),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return $.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):$.resolve($r());let c=va,d=a;return u.next(p=>$.forEach(p,(g,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),a.get(g)?$.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,d,p,Le())).next(g=>({batchId:c,changes:hA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(n=>{let i=kl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let u=kl();return this.indexManager.getCollectionParents(e,a).next(c=>$.forEach(c,d=>{const p=function(v,E){return new $h(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,n,i).next(g=>{g.forEach((v,E)=>{u=u.insert(v,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(u=>{a.forEach((d,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,_t.newInvalidDocument(g)))});let c=kl();return u.forEach((d,p)=>{const g=a.get(d);g!==void 0&&jl(g.mutation,p,ds.empty(),$t.now()),uu(t,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return $.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:j0(i.bundledQuery),readTime:fn(i.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.overlays=new at(ye.comparator),this.Rr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$r();return $.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.Et(e,t,a)}),$.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Rr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(n)),$.resolve()}getOverlaysForCollection(e,t,n){const i=$r(),a=t.length+1,u=new ye(t.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new at((p,g)=>p-g);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let g=a.get(p.largestBatchId);g===null&&(g=$r(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=$r(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=i)););return $.resolve(c)}Et(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const u=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new sm(t,n));let a=this.Rr.get(t);a===void 0&&(a=Le(),this.Rr.set(t,a)),this.Rr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.Vr=new Xe(zt.mr),this.gr=new Xe(zt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new zt(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new zt(e,t))}br(e,t){e.forEach(n=>this.removeReference(n,t))}Sr(e){const t=new ye(new et([])),n=new zt(t,e),i=new zt(t,e+1),a=[];return this.gr.forEachInRange([n,i],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new et([])),n=new zt(t,e),i=new zt(t,e+1);let a=Le();return this.gr.forEachInRange([n,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new zt(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class zt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||Me(e.Cr,t.Cr)}static pr(e,t){return Me(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Xe(zt.mr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nm(a,t,n,i);this.mutationQueue.push(u);for(const c of i)this.Mr=this.Mr.add(new zt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(u)}lookupMutationBatch(e,t){return $.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Nr(n),a=i<0?0:i;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?no:this.Fr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new zt(t,0),i=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([n,i],u=>{const c=this.Or(u.Cr);a.push(c)}),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xe(Me);return t.forEach(i=>{const a=new zt(i,0),u=new zt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],c=>{n=n.add(c.Cr)})}),$.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;ye.isDocumentKey(a)||(a=a.child(""));const u=new zt(new ye(a),0);let c=new Xe(Me);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!n.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.Cr)),!0)},u),$.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(n=>{const i=this.Or(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return $.forEach(t.mutations,i=>{const a=new zt(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new zt(t,0),i=this.Mr.firstAfterOrEqual(n);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.kr=e,this.docs=function(){return new at(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,u=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $.resolve(n?n.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let n=tr();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():_t.newInvalidDocument(i))}),$.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=tr();const u=t.path,c=new ye(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Wp(Mw(g),n)<=0||(i.has(g.key)||uu(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Te()}qr(e,t){return $.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new hN(this)}getSize(e){return $.resolve(this.size)}}class hN extends Q0{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(n)}),$.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.persistence=e,this.Qr=new vs(t=>lo(t),lu),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new lm,this.targetCount=0,this.Ur=ho.Kn()}forEachTarget(e,t){return this.Qr.forEach((n,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),$.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new ho(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.zn(t),$.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.Qr.forEach((u,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),$.waitFor(a).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return $.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),$.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return $.resolve(n)}containsKey(e,t){return $.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Sn(0),this.zr=!1,this.zr=!0,this.jr=new lN,this.referenceDelegate=e(this),this.Hr=new dN(this),this.indexManager=new YA,this.remoteDocumentCache=function(i){return new cN(i)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new F0(t),this.Yr=new oN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new uN(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){se("MemoryPersistence","Starting transaction:",e);const i=new fN(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next(a=>this.referenceDelegate.Xr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}ei(e,t){return $.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class fN extends Fw{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.ti=new lm,this.ni=null}static ri(e){return new Xh(e)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),$.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),$.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.ii.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ii,n=>{const i=ye.fromPath(n);return this.si(e,i).next(a=>{a||t.removeEntry(i,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return $.or([()=>$.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Th{constructor(e,t){this.persistence=e,this.oi=new vs(n=>rn(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=H0(this,t)}static ri(e,t){return new Th(e,t)}Zr(){}Xr(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return $.forEach(this.oi,(n,i)=>this.ar(e,n,i).next(a=>a?$.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,u=>this.ar(e,u,t).next(c=>{c||(n++,a.removeEntry(u,xe.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),$.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),$.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}ar(e,t,n){return $.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return $.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.serializer=e}B(e,t,n,i){const a=new Oh("createOrUpgrade",t);n<1&&i>=1&&(function(d){d.createObjectStore(ou)}(e),function(d){d.createObjectStore(Gl,{keyPath:IC}),d.createObjectStore(Sr,{keyPath:v_,autoIncrement:!0}).createIndex(to,w_,{unique:!0}),d.createObjectStore(wa)}(e),lv(e),function(d){d.createObjectStore(Xi)}(e));let u=$.resolve();return n<3&&i>=3&&(n!==0&&(function(d){d.deleteObjectStore(Ta),d.deleteObjectStore(Ea),d.deleteObjectStore(ro)}(e),lv(e)),u=u.next(()=>function(d){const p=d.store(ro),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return p.put(uh,g)}(a))),n<4&&i>=4&&(n!==0&&(u=u.next(()=>function(d,p){return p.store(Sr).G().next(v=>{d.deleteObjectStore(Sr),d.createObjectStore(Sr,{keyPath:v_,autoIncrement:!0}).createIndex(to,w_,{unique:!0});const E=p.store(Sr),C=v.map(A=>E.put(A));return $.waitFor(C)})}(e,a))),u=u.next(()=>{(function(d){d.createObjectStore(Ia,{keyPath:DC})})(e)})),n<5&&i>=5&&(u=u.next(()=>this._i(a))),n<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Kl)}(e),this.ai(a)))),n<7&&i>=7&&(u=u.next(()=>this.ui(a))),n<8&&i>=8&&(u=u.next(()=>this.ci(e,a))),n<9&&i>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(u=u.next(()=>this.li(a))),n<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(Lh,{keyPath:bC})})(e),function(d){d.createObjectStore(jh,{keyPath:VC})}(e)})),n<12&&i>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(Bh,{keyPath:UC});p.createIndex(dp,zC,{unique:!1}),p.createIndex(qw,$C,{unique:!1})})(e)})),n<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(lh,{keyPath:CC});p.createIndex(Qc,AC),p.createIndex(Bw,NC)}(e)).next(()=>this.hi(e,a)).next(()=>e.deleteObjectStore(Xi))),n<14&&i>=14&&(u=u.next(()=>this.Pi(e,a))),n<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore(Hp,{keyPath:MC,autoIncrement:!0}).createIndex(hp,OC,{unique:!1}),d.createObjectStore(ch,{keyPath:FC}).createIndex(zw,LC,{unique:!1}),d.createObjectStore(hh,{keyPath:jC}).createIndex($w,BC,{unique:!1})}(e))),n<16&&i>=16&&(u=u.next(()=>{t.objectStore(ch).clear()}).next(()=>{t.objectStore(hh).clear()})),n<17&&i>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(Qp,{keyPath:qC})})(e)})),u}ai(e){let t=0;return e.store(Xi).Z((n,i)=>{t+=Eh(i)}).next(()=>{const n={byteSize:t};return e.store(Kl).put(cp,n)})}_i(e){const t=e.store(Gl),n=e.store(Sr);return t.G().next(i=>$.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,no],[a.userId,a.lastAcknowledgedBatchId]);return n.G(to,u).next(c=>$.forEach(c,d=>{Ae(d.userId===a.userId);const p=Zi(this.serializer,d);return $0(e,a.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Ta),n=e.store(Xi);return e.store(ro).get(uh).next(i=>{const a=[];return n.Z((u,c)=>{const d=new et(u),p=function(v){return[0,rn(v)]}(d);a.push(t.get(p).next(g=>g?$.resolve():(v=>t.put({targetId:0,path:rn(v),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>$.waitFor(a))})}ci(e,t){e.createObjectStore(Hl,{keyPath:kC});const n=t.store(Hl),i=new am,a=u=>{if(i.add(u)){const c=u.lastSegment(),d=u.popLast();return n.put({collectionId:c,parent:rn(d)})}};return t.store(Xi).Z({Y:!0},(u,c)=>{const d=new et(u);return a(d.popLast())}).next(()=>t.store(wa).Z({Y:!0},([u,c,d],p)=>{const g=zr(c);return a(g.popLast())}))}li(e){const t=e.store(Ea);return t.Z((n,i)=>{const a=bl(i),u=L0(this.serializer,a);return t.put(u)})}hi(e,t){const n=t.store(Xi),i=[];return n.Z((a,u)=>{const c=t.store(lh),d=function(v){return v.document?new ye(et.fromString(v.document.name).popFirst(5)):v.noDocument?ye.fromSegments(v.noDocument.path):v.unknownDocument?ye.fromSegments(v.unknownDocument.path):Te()}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(c.put(p))}).next(()=>$.waitFor(i))}Pi(e,t){const n=t.store(Sr),i=X0(this.serializer),a=new um(Xh.ri,this.serializer.Tt);return n.G().next(u=>{const c=new Map;return u.forEach(d=>{var p;let g=(p=c.get(d.userId))!==null&&p!==void 0?p:Le();Zi(this.serializer,d).keys().forEach(v=>g=g.add(v)),c.set(d.userId,g)}),$.forEach(c,(d,p)=>{const g=new tn(p),v=Hh.It(this.serializer,g),E=a.getIndexManager(g),C=Qh.It(g,this.serializer,E,a.referenceDelegate);return new Y0(i,C,v,E).recalculateAndSaveOverlaysForDocumentKeys(new fp(t,Sn.ae),d).next()})})}}function lv(r){r.createObjectStore(Ta,{keyPath:RC}).createIndex(Kp,PC,{unique:!0}),r.createObjectStore(Ea,{keyPath:"targetId"}).createIndex(Uw,xC,{unique:!0}),r.createObjectStore(ro)}const Xs="IndexedDbPersistence",Gf=18e5,Kf=5e3,Hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mN="main";class cm{constructor(e,t,n,i,a,u,c,d,p,g,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=a,this.window=u,this.document=c,this.Ii=p,this.Ei=g,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=E=>Promise.resolve(),!cm.D())throw new Ee(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nN(this,i),this.gi=t+mN,this.serializer=new F0(d),this.pi=new ai(this.gi,this.di,new pN(this.serializer)),this.jr=new WA,this.Hr=new JA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=X0(this.serializer),this.Yr=new qA,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,g===!1&&Ct(Xs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(ne.FAILED_PRECONDITION,Hf);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Sn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(fi(e))return se(Xs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(Xs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Rl(e).get(sa).next(t=>$.resolve(this.Ni(t)))}Bi(e){return zc(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Gf)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Ot(t,Ia);return n.G().next(i=>{const a=this.qi(i,Gf),u=i.filter(c=>a.indexOf(c)===-1);return $.forEach(u,c=>n.delete(c.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?$.resolve(!0):Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Ee(ne.FAILED_PRECONDITION,Hf);return!1}}return!(!this.networkEnabled||!this.inForeground)||zc(e).G().next(n=>this.qi(n,Kf).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,u=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||u&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(Xs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[ou,Ia],e=>{const t=new fp(e,Sn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(n=>this.ki(n.updateTimeMs,t)&&!this.$i(n.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>zc(e).G().next(t=>this.qi(t,Gf).map(n=>n.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Qh.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZA(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hh.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){se(Xs,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=function(d){return d===17?KC:d===16?GC:d===15?Xp:d===14?Kw:d===13?Gw:d===12?WC:d===11?Ww:void Te()}(this.di);let u;return this.pi.runTransaction(e,i,a,c=>(u=new fp(c,this.Gr?this.Gr.next():Sn.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Ee(ne.FAILED_PRECONDITION,Ow);return n(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>n(u)))).then(c=>(u.raiseOnCommittedEvent(),c))}ji(e){return Rl(e).get(sa).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Kf)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ee(ne.FAILED_PRECONDITION,Hf)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rl(e).put(sa,t)}static D(){return ai.D()}xi(e){const t=Rl(e);return t.get(sa).next(n=>this.Ni(n)?(se(Xs,"Releasing primary lease."),t.delete(sa)):$.resolve())}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ct(`Detected an update time that is in the future: ${e} > ${n}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;fw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(Xs,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ct(Xs,"Failed to get zombied client id.",n),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rl(r){return Ot(r,ou)}function zc(r){return Ot(r,Ia)}function Z0(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=i}static Yi(e,t){let n=Le(),i=Le();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hm(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return fw()?8:Lw(rh())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.rs(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,t,i,n).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new gN;return this._s(e,t,u).next(c=>{if(a.result=c,this.Xi)return this.us(e,t,u,c.size)})}).next(()=>a.result)}us(e,t,n,i){return n.documentReadCount<this.es?(ca()<=$e.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),$.resolve()):(ca()<=$e.DEBUG&&se("QueryEngine","Query:",ha(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(ca()<=$e.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):$.resolve())}rs(e,t){if(b_(t))return $.resolve(null);let n=Un(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vp(t,null,"F"),n=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const u=Le(...a);return this.ns.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const p=this.cs(t,c);return this.ls(t,p,u,d.readTime)?this.rs(e,vp(t,null,"F")):this.hs(e,p,t,d)}))})))}ss(e,t,n,i){return b_(t)||i.isEqual(xe.min())?$.resolve(null):this.ns.getDocuments(e,n).next(a=>{const u=this.cs(t,a);return this.ls(t,u,n,i)?$.resolve(null):(ca()<=$e.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.hs(e,u,t,Vw(i,va)).next(c=>c))})}cs(e,t){let n=new Xe(p0(e));return t.forEach((i,a)=>{uu(e,a)&&(n=n.add(a))}),n}ls(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}_s(e,t,n){return ca()<=$e.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ns.getDocumentsMatchingQuery(e,t,zn.min(),n)}hs(e,t,n,i){return this.ns.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="LocalStore",yN=3e8;class _N{constructor(e,t,n,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new at(Me),this.Is=new vs(a=>lo(a),lu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y0(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function eE(r,e,t,n){return new _N(r,e,t,n)}async function tE(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const u=[],c=[];let d=Le();for(const p of i){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of a){c.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:c}))})})}function vN(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,p,g){const v=p.batch,E=v.keys();let C=$.resolve();return E.forEach(A=>{C=C.next(()=>g.getEntry(d,A)).next(V=>{const M=p.docVersions.get(A);Ae(M!==null),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),g.addEntry(V)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,v))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=Le();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function nE(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function wN(r,e){const t=Se(r),n=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const c=[];e.targetChanges.forEach((g,v)=>{const E=i.get(v);if(!E)return;c.push(t.Hr.removeMatchingKeys(a,g.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(a,g.addedDocuments,v)));let C=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?C=C.withResumeToken(Nt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,n)),i=i.insert(v,C),function(V,M,B){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=yN?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,C,g)&&c.push(t.Hr.updateTargetData(a,C))});let d=tr(),p=Le();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),c.push(EN(a,u,e.documentUpdates).next(g=>{d=g.Vs,p=g.fs})),!n.isEqual(xe.min())){const g=t.Hr.getLastRemoteSnapshotVersion(a).next(v=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(g)}return $.waitFor(c).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,d,p)).next(()=>d)}).then(a=>(t.Ts=i,a))}function EN(r,e,t){let n=Le(),i=Le();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let u=tr();return t.forEach((c,d)=>{const p=a.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(xe.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):se(dm,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Vs:u,fs:i}})}function TN(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=no),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ih(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Hr.getTargetData(n,e).next(a=>a?(i=a,$.resolve(i)):t.Hr.allocateTargetId(n).next(u=>(i=new fs(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function Ra(r,e,t){const n=Se(r),i=n.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,u=>n.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!fi(u))throw u;se(dm,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ts=n.Ts.remove(e),n.Is.delete(i.target)}function Np(r,e,t){const n=Se(r);let i=xe.min(),a=Le();return n.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,g){const v=Se(d),E=v.Is.get(g);return E!==void 0?$.resolve(v.Ts.get(E)):v.Hr.getTargetData(p,g)}(n,u,Un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(u,c.targetId).next(d=>{a=d})}).next(()=>n.Ps.getDocumentsMatchingQuery(u,e,t?i:xe.min(),t?a:Le())).next(c=>(iE(n,f0(e),c),{documents:c,gs:a})))}function rE(r,e){const t=Se(r),n=Se(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>n.lt(a,e).next(u=>u?u.target:null))}function sE(r,e){const t=Se(r),n=t.Es.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,Vw(n,va),Number.MAX_SAFE_INTEGER)).then(i=>(iE(t,e,i),i))}function iE(r,e,t){let n=r.Es.get(e)||xe.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.Es.set(e,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firestore_clients";function uv(r,e){return`${oE}_${r}_${e}`}const aE="firestore_mutations";function cv(r,e,t){let n=`${aE}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const lE="firestore_targets";function Qf(r,e){return`${lE}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="SharedClientState";class Sh{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static bs(e,t,n){const i=JSON.parse(n);let a,u=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return u&&i.error&&(u=typeof i.error.message=="string"&&typeof i.error.code=="string",u&&(a=new Ee(i.error.code,i.error.message))),u?new Sh(e,t,i.state,a):(Ct(Ur,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static bs(e,t){const n=JSON.parse(t);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new Ee(n.error.code,n.error.message))),a?new Bl(e,n.state,i):(Ct(Ur,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ch{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=em();for(let u=0;i&&u<n.activeTargetIds.length;++u)i=EC(n.activeTargetIds[u]),a=a.add(n.activeTargetIds[u]);return i?new Ch(e,a):(Ct(Ur,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fm{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fm(t.clientId,t.onlineState):(Ct(Ur,`Failed to parse online state: ${e}`),null)}}class xp{constructor(){this.activeTargetIds=em()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xf{constructor(e,t,n,i,a){this.window=e,this.Ti=t,this.persistenceKey=n,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new at(Me),this.started=!1,this.Os=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ns=uv(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new xp),this.Ls=new RegExp(`^${oE}_${u}_([^_]*)$`),this.ks=new RegExp(`^${aE}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${lE}_${u}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const n of e){if(n===this.Cs)continue;const i=this.getItem(uv(this.persistenceKey,n));if(i){const a=Ch.bs(n,i);a&&(this.xs=this.xs.insert(a.clientId,a))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const n=this.Us(t);n&&this.Ws(n)}for(const n of this.Os)this.Ms(n);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,n){this.zs(e,t,n),this.js(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qf(this.persistenceKey,e));if(i){const a=Bl.bs(e,i);a&&(n=a.state)}}return t&&this.Hs.Ds(e),this.Ks(),n}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Js(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.js(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Ur,"READ",e,t),t}setItem(e,t){se(Ur,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Ur,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(Ur,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const n=this.Xs(t.key);return this.eo(n,null)}{const n=this.no(t.key,t.newValue);if(n)return this.eo(n.clientId,n)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const n=this.ro(t.key,t.newValue);if(n)return this.io(n)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const n=this.so(t.key,t.newValue);if(n)return this.oo(n)}}else if(t.key===this.Qs){if(t.newValue!==null){const n=this.Us(t.newValue);if(n)return this.Ws(n)}}else if(t.key===this.Bs){const n=function(a){let u=Sn.ae;if(a!=null)try{const c=JSON.parse(a);Ae(typeof c=="number"),u=c}catch(c){Ct(Ur,"Failed to read sequence number from WebStorage",c)}return u}(t.newValue);n!==Sn.ae&&this.sequenceNumberHandler(n)}else if(t.key===this.$s){const n=this._o(t.newValue);await Promise.all(n.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,n){const i=new Sh(this.currentUser,e,t,n),a=cv(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ss())}js(e){const t=cv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,n){const i=Qf(this.persistenceKey,e),a=new Bl(e,t,n);this.setItem(i,a.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const n=this.Xs(e);return Ch.bs(n,t)}ro(e,t){const n=this.ks.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Sh.bs(new tn(a),i,t)}so(e,t){const n=this.qs.exec(e),i=Number(n[1]);return Bl.bs(i,t)}Us(e){return fm.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(Ur,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const n=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),a=this.Gs(n),u=[],c=[];return a.forEach(d=>{i.has(d)||u.push(d)}),i.forEach(d=>{a.has(d)||c.push(d)}),this.syncEngine.lo(u,c).then(()=>{this.xs=n})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=em();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class uE{constructor(){this.ho=new xp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new xp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="ConnectivityMonitor";class dv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(hv,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function Rp(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",SN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CN{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===dh?`project_id=${n}`:`project_id=${n}&database_id=${i}`}bo(e,t,n,i,a){const u=Rp(),c=this.So(e,t.toUriEncodedString());se(Yf,`Sending RPC '${e}' ${u}:`,c,n);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,a),this.vo(e,c,d,n).then(p=>(se(Yf,`Received RPC '${e}' ${u}: `,p),p),p=>{throw $l(Yf,`RPC '${e}' ${u} failed with error: `,p,"url: ",c,"request:",n),p})}Co(e,t,n,i,a,u){return this.bo(e,t,n,i,a)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}So(e,t){const n=SN[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class NN extends CN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,i){const a=Rp();return new Promise((u,c)=>{const d=new Nw;d.setWithCredentials(!0),d.listenOnce(xw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gc.NO_ERROR:const g=d.getResponseJson();se(en,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Gc.TIMEOUT:se(en,`RPC '${e}' ${a} timed out`),c(new Ee(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const v=d.getStatus();if(se(en,`RPC '${e}' ${a} failed with status:`,v,"response text:",d.getResponseText()),v>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E==null?void 0:E.error;if(C&&C.status&&C.message){const A=function(M){const B=M.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(B)>=0?B:ne.UNKNOWN}(C.status);c(new Ee(A,C.message))}else c(new Ee(ne.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ee(ne.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{se(en,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);se(en,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",p,n,15)})}Wo(e,t,n){const i=Rp(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=kw(),c=Pw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=a.join("");se(en,`Creating RPC '${e}' stream ${i}: ${g}`,d);const v=u.createWebChannel(g,d);let E=!1,C=!1;const A=new AN({Fo:M=>{C?se(en,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(E||(se(en,`Opening RPC '${e}' stream ${i} transport.`),v.open(),E=!0),se(en,`RPC '${e}' stream ${i} sending:`,M),v.send(M))},Mo:()=>v.close()}),V=(M,B,K)=>{M.listen(B,q=>{try{K(q)}catch(X){setTimeout(()=>{throw X},0)}})};return V(v,Pl.EventType.OPEN,()=>{C||(se(en,`RPC '${e}' stream ${i} transport opened.`),A.Qo())}),V(v,Pl.EventType.CLOSE,()=>{C||(C=!0,se(en,`RPC '${e}' stream ${i} transport closed`),A.Ko())}),V(v,Pl.EventType.ERROR,M=>{C||(C=!0,$l(en,`RPC '${e}' stream ${i} transport errored:`,M),A.Ko(new Ee(ne.UNAVAILABLE,"The operation could not be completed")))}),V(v,Pl.EventType.MESSAGE,M=>{var B;if(!C){const K=M.data[0];Ae(!!K);const q=K,X=(q==null?void 0:q.error)||((B=q[0])===null||B===void 0?void 0:B.error);if(X){se(en,`RPC '${e}' stream ${i} received error:`,X);const F=X.status;let z=function(N){const b=kt[N];if(b!==void 0)return I0(b)}(F),R=X.message;z===void 0&&(z=ne.INTERNAL,R="Unknown error status: "+F+" with message "+X.message),C=!0,A.Ko(new Ee(z,R)),v.close()}else se(en,`RPC '${e}' stream ${i} received:`,K),A.Uo(K)}}),V(c,Rw.STAT_EVENT,M=>{M.stat===lp.PROXY?se(en,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===lp.NOPROXY&&se(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof window<"u"?window:null}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(r){return new DA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,n=1e3,i=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-n);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="PersistentStream";class fE{constructor(e,t,n,i,a,u,c,d){this.Ti=e,this.n_=n,this.r_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ct(t.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.i_===t&&this.V_(n,i)},n=>{e(()=>{const i=new Ee(ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(i)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{n(()=>this.m_(i))}),this.stream.onMessage(i=>{n(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xN extends fE{constructor(e,t,n,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=OA(this.serializer,e),n=function(a){if(!("targetChange"in a))return xe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?fn(u.readTime):xe.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(a,u){let c;const d=u.target;if(c=ph(d)?{documents:k0(a,d)}:{query:D0(a,d).ht},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=bA(a,u.resumeToken);const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}else if(u.snapshotVersion.compareTo(xe.min())>0){c.readTime=gh(a,u.snapshotVersion.toTimestamp());const p=wp(a,u.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const n=LA(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.I_(t)}}class RN extends fE{constructor(e,t,n,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,u),this.serializer=a}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=FA(e.writeResults,e.commitTime),n=fn(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Tp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>_h(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{}class kN extends PN{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.bo(e,Ep(t,n),i,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ne.UNKNOWN,a.toString())})}Co(e,t,n,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,Ep(t,n),i,u,c,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(ne.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class DN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ct(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class bN{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{n.enqueueAndForget(async()=>{go(this)&&(se(fo,"Restarting streams for network reachability change."),await async function(d){const p=Se(d);p.W_.add(4),await fu(p),p.j_.set("Unknown"),p.W_.delete(4),await Yh(p)}(this))})}),this.j_=new DN(n,i)}}async function Yh(r){if(go(r))for(const e of r.G_)await e(!0)}async function fu(r){for(const e of r.G_)await e(!1)}function Zh(r,e){const t=Se(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),gm(t)?mm(t):Fa(t).c_()&&pm(t,e))}function Pa(r,e){const t=Se(r),n=Fa(t);t.U_.delete(e),n.c_()&&pE(t,e),t.U_.size===0&&(n.c_()?n.P_():go(t)&&t.j_.set("Unknown"))}function pm(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(r).y_(e)}function pE(r,e){r.H_.Ne(e),Fa(r).w_(e)}function mm(r){r.H_=new xA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Fa(r).start(),r.j_.B_()}function gm(r){return go(r)&&!Fa(r).u_()&&r.U_.size>0}function go(r){return Se(r).W_.size===0}function mE(r){r.H_=void 0}async function VN(r){r.j_.set("Online")}async function MN(r){r.U_.forEach((e,t)=>{pm(r,e)})}async function ON(r,e){mE(r),gm(r)?(r.j_.q_(e),mm(r)):r.j_.set("Unknown")}async function FN(r,e,t){if(r.j_.set("Online"),e instanceof C0&&e.state===2&&e.cause)try{await async function(i,a){const u=a.cause;for(const c of a.targetIds)i.U_.has(c)&&(await i.remoteSyncer.rejectListen(c,u),i.U_.delete(c),i.H_.removeTarget(c))}(r,e)}catch(n){se(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ah(r,n)}else if(e instanceof Jc?r.H_.We(e):e instanceof S0?r.H_.Ze(e):r.H_.je(e),!t.isEqual(xe.min()))try{const n=await nE(r.localStore);t.compareTo(n)>=0&&await function(a,u){const c=a.H_.ot(u);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.U_.get(p);g&&a.U_.set(p,g.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,p)=>{const g=a.U_.get(d);if(!g)return;a.U_.set(d,g.withResumeToken(Nt.EMPTY_BYTE_STRING,g.snapshotVersion)),pE(a,d);const v=new fs(g.target,d,p,g.sequenceNumber);pm(a,v)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){se(fo,"Failed to raise snapshot:",n),await Ah(r,n)}}async function Ah(r,e,t){if(!fi(e))throw e;r.W_.add(1),await fu(r),r.j_.set("Offline"),t||(t=()=>nE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{se(fo,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Yh(r)})}function gE(r,e){return e().catch(t=>Ah(r,t,e))}async function pu(r){const e=Se(r),t=ci(e);let n=e.K_.length>0?e.K_[e.K_.length-1].batchId:no;for(;LN(e);)try{const i=await TN(e.localStore,n);if(i===null){e.K_.length===0&&t.P_();break}n=i.batchId,jN(e,i)}catch(i){await Ah(e,i)}yE(e)&&_E(e)}function LN(r){return go(r)&&r.K_.length<10}function jN(r,e){r.K_.push(e);const t=ci(r);t.c_()&&t.b_&&t.S_(e.mutations)}function yE(r){return go(r)&&!ci(r).u_()&&r.K_.length>0}function _E(r){ci(r).start()}async function BN(r){ci(r).C_()}async function UN(r){const e=ci(r);for(const t of r.K_)e.S_(t.mutations)}async function zN(r,e,t){const n=r.K_.shift(),i=rm.from(n,e,t);await gE(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await pu(r)}async function $N(r,e){e&&ci(r).b_&&await async function(n,i){if(function(u){return CA(u)&&u!==ne.ABORTED}(i.code)){const a=n.K_.shift();ci(n).h_(),await gE(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await pu(n)}}(r,e),yE(r)&&_E(r)}async function pv(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),se(fo,"RemoteStore received new credentials");const n=go(t);t.W_.add(3),await fu(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yh(t)}async function Pp(r,e){const t=Se(r);e?(t.W_.delete(2),await Yh(t)):e||(t.W_.add(2),await fu(t),t.j_.set("Unknown"))}function Fa(r){return r.J_||(r.J_=function(t,n,i){const a=Se(t);return a.M_(),new xN(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:VN.bind(null,r),No:MN.bind(null,r),Lo:ON.bind(null,r),p_:FN.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),gm(r)?mm(r):r.j_.set("Unknown")):(await r.J_.stop(),mE(r))})),r.J_}function ci(r){return r.Y_||(r.Y_=function(t,n,i){const a=Se(t);return a.M_(),new RN(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:BN.bind(null,r),Lo:$N.bind(null,r),D_:UN.bind(null,r),v_:zN.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await pu(r)):(await r.Y_.stop(),r.K_.length>0&&(se(fo,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const u=Date.now()+n,c=new ym(e,t,u,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vE(r,e){if(Ct("AsyncQueue",`${e}: ${r}`),fi(r))return new Ee(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ye.comparator(t.key,n.key):(t,n)=>ye.comparator(t.key,n.key),this.keyedMap=kl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ga;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.Z_=new at(ye.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Te():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ka{constructor(e,t,n,i,a,u,c,d,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,i,a){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ka(e,t,ga.emptySet(t),u,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class WN{constructor(){this.queries=gv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const i=Se(t),a=i.queries;i.queries=gv(),a.forEach((u,c)=>{for(const d of c.ta)d.onError(n)})})(this,new Ee(ne.ABORTED,"Firestore shutting down"))}}function gv(){return new vs(r=>d0(r),Wh)}async function GN(r,e){const t=Se(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.na()&&e.ra()&&(n=2):(a=new qN,n=e.ra()?0:1);try{switch(n){case 0:a.ea=await t.onListen(i,!0);break;case 1:a.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const c=vE(u,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&_m(t)}async function KN(r,e){const t=Se(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?i=e.ra()?0:1:!a.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function HN(r,e){const t=Se(r);let n=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const c of u.ta)c.oa(i)&&(n=!0);u.ea=i}}n&&_m(t)}function QN(r,e,t){const n=Se(r),i=n.queries.get(e);if(i)for(const a of i.ta)a.onError(t);n.queries.delete(e)}function _m(r){r.ia.forEach(e=>{e.next()})}var kp,yv;(yv=kp||(kp={}))._a="default",yv.Cache="cache";class XN{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ka(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.key=e}}class EE{constructor(e){this.key=e}}class YN{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=p0(e),this.wa=new ga(this.ya)}get ba(){return this.fa}Sa(e,t){const n=t?t.Da:new mv,i=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const E=i.get(g),C=uu(this.query,v)?v:null,A=!!E&&this.mutatedKeys.has(E.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;E&&C?E.data.isEqual(C.data)?A!==V&&(n.track({type:3,doc:C}),M=!0):this.va(E,C)||(n.track({type:2,doc:C}),M=!0,(d&&this.ya(C,d)>0||p&&this.ya(C,p)<0)&&(c=!0)):!E&&C?(n.track({type:0,doc:C}),M=!0):E&&!C&&(n.track({type:1,doc:E}),M=!0,(d||p)&&(c=!0)),M&&(C?(u=u.add(C),a=V?a.add(g):a.delete(g)):(u=u.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),a=a.delete(g.key),n.track({type:1,doc:g})}return{wa:u,Da:n,ls:c,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((g,v)=>function(C,A){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return V(C)-V(A)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(n),i=i!=null&&i;const c=t&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,p=d!==this.ga;return this.ga=d,u.length!==0||p?{snapshot:new ka(this.query,e.wa,a,u,e.mutatedKeys,d===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new mv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Le(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new EE(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new wE(n))}),t}Oa(e){this.fa=e.gs,this.pa=Le();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ka.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const La="SyncEngine";class ZN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class JN{constructor(e){this.key=e,this.Ba=!1}}class ex{constructor(e,t,n,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new vs(c=>d0(c),Wh),this.qa=new Map,this.Qa=new Set,this.$a=new at(ye.comparator),this.Ka=new Map,this.Ua=new lm,this.Wa={},this.Ga=new Map,this.za=ho.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function tx(r,e,t=!0){const n=Jh(r);let i;const a=n.ka.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await TE(n,e,t,!0),i}async function nx(r,e){const t=Jh(r);await TE(t,e,!0,!1)}async function TE(r,e,t,n){const i=await Ih(r.localStore,Un(e)),a=i.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await vm(r,e,a,u==="current",i.resumeToken)),r.isPrimaryClient&&t&&Zh(r.remoteStore,i),c}async function vm(r,e,t,n,i){r.Ha=(v,E,C)=>async function(V,M,B,K){let q=M.view.Sa(B);q.ls&&(q=await Np(V.localStore,M.query,!1).then(({documents:R})=>M.view.Sa(R,q)));const X=K&&K.targetChanges.get(M.targetId),F=K&&K.targetMismatches.get(M.targetId)!=null,z=M.view.applyChanges(q,V.isPrimaryClient,X,F);return Dp(V,M.targetId,z.Ma),z.snapshot}(r,v,E,C);const a=await Np(r.localStore,e,!0),u=new YN(e,a.gs),c=u.Sa(a.documents),d=du.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),p=u.applyChanges(c,r.isPrimaryClient,d);Dp(r,t,p.Ma);const g=new ZN(e,t,u);return r.ka.set(e,g),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),p.snapshot}async function rx(r,e,t){const n=Se(r),i=n.ka.get(e),a=n.qa.get(i.targetId);if(a.length>1)return n.qa.set(i.targetId,a.filter(u=>!Wh(u,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ra(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Pa(n.remoteStore,i.targetId),Da(n,i.targetId)}).catch(di)):(Da(n,i.targetId),await Ra(n.localStore,i.targetId,!0))}async function sx(r,e){const t=Se(r),n=t.ka.get(e),i=t.qa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Pa(t.remoteStore,n.targetId))}async function IE(r,e){const t=Se(r);try{const n=await wN(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Ka.get(a);u&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Ba=!0:i.modifiedDocuments.size>0?Ae(u.Ba):i.removedDocuments.size>0&&(Ae(u.Ba),u.Ba=!1))}),await yo(t,n,e)}catch(n){await di(n)}}function _v(r,e,t){const n=Se(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ka.forEach((a,u)=>{const c=u.view.sa(e);c.snapshot&&i.push(c.snapshot)}),function(u,c){const d=Se(u);d.onlineState=c;let p=!1;d.queries.forEach((g,v)=>{for(const E of v.ta)E.sa(c)&&(p=!0)}),p&&_m(d)}(n.eventManager,e),i.length&&n.La.p_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ix(r,e,t){const n=Se(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Ka.get(e),a=i&&i.key;if(a){let u=new at(ye.comparator);u=u.insert(a,_t.newNoDocument(a,xe.min()));const c=Le().add(a),d=new hu(xe.min(),new Map,new at(Me),u,c);await IE(n,d),n.$a=n.$a.remove(a),n.Ka.delete(e),Tm(n)}else await Ra(n.localStore,e,!1).then(()=>Da(n,e,t)).catch(di)}async function ox(r,e){const t=Se(r),n=e.batch.batchId;try{const i=await vN(t.localStore,e);Em(t,n,null),wm(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await yo(t,i)}catch(i){await di(i)}}async function ax(r,e,t){const n=Se(r);try{const i=await function(u,c){const d=Se(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return d.mutationQueue.lookupMutationBatch(p,c).next(v=>(Ae(v!==null),g=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>d.localDocuments.getDocuments(p,g))})}(n.localStore,e);Em(n,e,t),wm(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await yo(n,i)}catch(i){await di(i)}}function wm(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function Em(r,e,t){const n=Se(r);let i=n.Wa[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Wa[n.currentUser.toKey()]=i}}function Da(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.qa.get(e))r.ka.delete(n),t&&r.La.Ja(n,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(n=>{r.Ua.containsKey(n)||SE(r,n)})}function SE(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Pa(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),Tm(r))}function Dp(r,e,t){for(const n of t)n instanceof wE?(r.Ua.addReference(n.key,e),lx(r,n)):n instanceof EE?(se(La,"Document no longer in limbo: "+n.key),r.Ua.removeReference(n.key,e),r.Ua.containsKey(n.key)||SE(r,n.key)):Te()}function lx(r,e){const t=e.key,n=t.path.canonicalString();r.$a.get(t)||r.Qa.has(n)||(se(La,"New document in limbo: "+t),r.Qa.add(n),Tm(r))}function Tm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new ye(et.fromString(e)),n=r.za.next();r.Ka.set(n,new JN(t)),r.$a=r.$a.insert(t,n),Zh(r.remoteStore,new fs(Un(qh(t.path)),n,"TargetPurposeLimboResolution",Sn.ae))}}async function yo(r,e,t){const n=Se(r),i=[],a=[],u=[];n.ka.isEmpty()||(n.ka.forEach((c,d)=>{u.push(n.Ha(d,e,t).then(p=>{var g;if((p||t)&&n.isPrimaryClient){const v=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){i.push(p);const v=hm.Yi(d.targetId,p);a.push(v)}}))}),await Promise.all(u),n.La.p_(i),await async function(d,p){const g=Se(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>$.forEach(p,E=>$.forEach(E.Hi,C=>g.persistence.referenceDelegate.addReference(v,E.targetId,C)).next(()=>$.forEach(E.Ji,C=>g.persistence.referenceDelegate.removeReference(v,E.targetId,C)))))}catch(v){if(!fi(v))throw v;se(dm,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const C=g.Ts.get(E),A=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(A);g.Ts=g.Ts.insert(E,V)}}}(n.localStore,a))}async function ux(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){se(La,"User change. New user:",e.toKey());const n=await tE(t.localStore,e);t.currentUser=e,function(a,u){a.Ga.forEach(c=>{c.forEach(d=>{d.reject(new Ee(ne.CANCELLED,u))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await yo(t,n.Rs)}}function cx(r,e){const t=Se(r),n=t.Ka.get(e);if(n&&n.Ba)return Le().add(n.key);{let i=Le();const a=t.qa.get(e);if(!a)return i;for(const u of a){const c=t.ka.get(u);i=i.unionWith(c.view.ba)}return i}}async function hx(r,e){const t=Se(r),n=await Np(t.localStore,e.query,!0),i=e.view.Oa(n);return t.isPrimaryClient&&Dp(t,e.targetId,i.Ma),i}async function dx(r,e){const t=Se(r);return sE(t.localStore,e).then(n=>yo(t,n))}async function fx(r,e,t,n){const i=Se(r),a=await function(c,d){const p=Se(c),g=Se(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>g.Ln(v,d).next(E=>E?p.localDocuments.getDocuments(v,E):$.resolve(null)))}(i.localStore,e);a!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(Em(i,e,n||null),wm(i,e),function(c,d){Se(Se(c).mutationQueue).qn(d)}(i.localStore,e)):Te(),await yo(i,a)):se(La,"Cannot apply mutation batch with id: "+e)}async function px(r,e){const t=Se(r);if(Jh(t),AE(t),e===!0&&t.ja!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await vv(t,n.toArray());t.ja=!0,await Pp(t.remoteStore,!0);for(const a of i)Zh(t.remoteStore,a)}else if(e===!1&&t.ja!==!1){const n=[];let i=Promise.resolve();t.qa.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):i=i.then(()=>(Da(t,u),Ra(t.localStore,u,!0))),Pa(t.remoteStore,u)}),await i,await vv(t,n),function(u){const c=Se(u);c.Ka.forEach((d,p)=>{Pa(c.remoteStore,p)}),c.Ua.Dr(),c.Ka=new Map,c.$a=new at(ye.comparator)}(t),t.ja=!1,await Pp(t.remoteStore,!1)}}async function vv(r,e,t){const n=Se(r),i=[],a=[];for(const u of e){let c;const d=n.qa.get(u);if(d&&d.length!==0){c=await Ih(n.localStore,Un(d[0]));for(const p of d){const g=n.ka.get(p),v=await hx(n,g);v.snapshot&&a.push(v.snapshot)}}else{const p=await rE(n.localStore,u);c=await Ih(n.localStore,p),await vm(n,CE(p),u,!1,c.resumeToken)}i.push(c)}return n.La.p_(a),i}function CE(r){return h0(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function mx(r){return function(t){return Se(Se(t).persistence).zi()}(Se(r).localStore)}async function gx(r,e,t,n){const i=Se(r);if(i.ja)return void se(La,"Ignoring unexpected query state notification.");const a=i.qa.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await sE(i.localStore,f0(a[0])),c=hu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Nt.EMPTY_BYTE_STRING);await yo(i,u,c);break}case"rejected":await Ra(i.localStore,e,!0),Da(i,e,n);break;default:Te()}}async function yx(r,e,t){const n=Jh(r);if(n.ja){for(const i of e){if(n.qa.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){se(La,"Adding an already active target "+i);continue}const a=await rE(n.localStore,i),u=await Ih(n.localStore,a);await vm(n,CE(a),u.targetId,!1,u.resumeToken),Zh(n.remoteStore,u)}for(const i of t)n.qa.has(i)&&await Ra(n.localStore,i,!1).then(()=>{Pa(n.remoteStore,i),Da(n,i)}).catch(di)}}function Jh(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ix.bind(null,e),e.La.p_=HN.bind(null,e.eventManager),e.La.Ja=QN.bind(null,e.eventManager),e}function AE(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ox.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ax.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hE(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return eE(this.persistence,new J0,e.initialUser,this.serializer)}Xa(e){return new um(Xh.ri,this.serializer)}Za(e){return new uE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class _x extends tu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ae(this.persistence.referenceDelegate instanceof Th);const n=this.persistence.referenceDelegate.garbageCollector;return new K0(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new um(n=>Th.ri(n,t),this.serializer)}}class NE extends tu{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await AE(this.ru.syncEngine),await pu(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return eE(this.persistence,new J0,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new K0(n,e.asyncQueue,t)}nu(e,t){const n=new wC(t,this.persistence);return new vC(e.asyncQueue,n)}Xa(e){const t=Z0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new cm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cE(),eh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new uE}}class vx extends NE{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Xf&&(this.sharedClientState.syncEngine={uo:fx.bind(null,t),co:gx.bind(null,t),lo:yx.bind(null,t),zi:mx.bind(null,t),ao:dx.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async n=>{await px(this.ru.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Za(e){const t=cE();if(!Xf.D(t))throw new Ee(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Z0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class nu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>_v(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=ux.bind(null,this.syncEngine),await Pp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WN}()}createDatastore(e){const t=hE(e.databaseInfo.databaseId),n=function(a){return new NN(a)}(e.databaseInfo);return function(a,u,c,d){return new kN(a,u,c,d)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,u,c){return new bN(n,i,a,u,c)}(this.localStore,this.datastore,e.asyncQueue,t=>_v(this.syncEngine,t,0),function(){return dv.D()?new dv:new IN}())}createSyncEngine(e,t){return function(i,a,u,c,d,p,g){const v=new ex(i,a,u,c,d,p);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Se(i);se(fo,"RemoteStore shutting down."),a.W_.add(5),await fu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nu.provider={build:()=>new nu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="FirestoreClient";class Ex{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=Dw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async u=>{se(hi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(se(hi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vE(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zf(r,e){r.asyncQueue.verifyOperationInProgress(),se(hi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await tE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function wv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Tx(r);se(hi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>pv(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>pv(e.remoteStore,i)),r._onlineComponents=e}async function Tx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){se(hi,"Using user provided OfflineComponentProvider");try{await Zf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await Zf(r,new tu)}}else se(hi,"Using default OfflineComponentProvider"),await Zf(r,new _x(void 0));return r._offlineComponents}async function Ix(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(se(hi,"Using user provided OnlineComponentProvider"),await wv(r,r._uninitializedComponentsProvider._online)):(se(hi,"Using default OnlineComponentProvider"),await wv(r,new nu))),r._onlineComponents}async function Sx(r){const e=await Ix(r),t=e.eventManager;return t.onListen=tx.bind(null,e.syncEngine),t.onUnlisten=rx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sx.bind(null,e.syncEngine),t}function Cx(r,e,t={}){const n=new oi;return r.asyncQueue.enqueueAndForget(async()=>function(a,u,c,d,p){const g=new wx({next:E=>{g.su(),u.enqueueAndForget(()=>KN(a,v));const C=E.docs.has(c);!C&&E.fromCache?p.reject(new Ee(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&d&&d.source==="server"?p.reject(new Ee(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new XN(qh(c.path),g,{includeMetadataChanges:!0,Ta:!0});return GN(a,v)}(await Sx(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(r,e,t){if(!t)throw new Ee(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Nx(r,e,t,n){if(e===!0&&n===!0)throw new Ee(ne.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Tv(r){if(!ye.isDocumentKey(r))throw new Ee(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function xx(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function Iv(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ee(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xx(r);throw new Ee(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="firestore.googleapis.com",Sv=!0;class Cv{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rx,this.ssl=Sv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sv;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G0)throw new Ee(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xE((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RE{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cC;switch(n.type){case"firstParty":return new fC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ee(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Ev.get(t);n&&(se("ComponentProvider","Removing Datastore"),Ev.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Im(this.firestore,e,this._query)}}class ps{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ps(this.firestore,e,this._key)}}class ru extends Im{constructor(e,t,n){super(e,t,qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ps(this.firestore,null,new ye(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function Px(r,e,...t){if(r=gw(r),arguments.length===1&&(e=Dw.newId()),Ax("doc","path",e),r instanceof RE){const n=et.fromString(e,...t);return Tv(n),new ps(r,null,new ye(n))}{if(!(r instanceof ps||r instanceof ru))throw new Ee(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(et.fromString(e,...t));return Tv(n),new ps(r.firestore,r instanceof ru?r.converter:null,new ye(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="AsyncQueue";class Nv{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dE(this,"async_queue_retry"),this.bu=()=>{const n=eh();n&&se(Av,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.Su=e;const t=eh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=eh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new oi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fi(e))throw e;se(Av,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const i=function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(n);throw Ct("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.pu=!1,n))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=ym.createAndSchedule(this,e,t,n,a=>this.Fu(a));return this.fu.push(i),i}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class PE extends RE{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Nv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,await e}}}function kx(r,e,t){t||(t=dh);const n=ww(r,"firestore");if(n.isInitialized(t)){const i=n.getImmediate({identifier:t}),a=n.getOptions(t);if(sh(a,e))return i;throw new Ee(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G0)throw new Ee(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function Dx(r){if(r._terminated)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||bx(r),r._firestoreClient}function bx(r){var e,t,n;const i=r._freezeSettings(),a=function(c,d,p,g){return new XC(c,d,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,xE(g.experimentalLongPollingOptions),g.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new Ex(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nh(Nt.fromBase64String(e))}catch(t){throw new Ee(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nh(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}const Ox=new RegExp("[~\\*/\\[\\]]");function Fx(r,e,t){if(e.search(Ox)>=0)throw xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new kE(...e.split("."))._internalPath}catch{throw xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function xv(r,e,t,n,i){let a=`Function ${e}() called with invalid data`;a+=". ";let u="";return new Ee(ne.INVALID_ARGUMENT,a+r+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Lx extends DE{data(){return super.data()}}function bE(r,e){return typeof e=="string"?Fx(r,e):e instanceof kE?e._internalPath:e._delegate._internalPath}class jx{convertValue(e,t="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return au(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[Xl].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(u=>ht(u.doubleValue));return new Mx(a)}convertGeoPoint(e){return new Vx(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Uh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const t=ys(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=et.fromString(e);Ae(O0(n));const i=new ao(n.get(1),n.get(3)),a=new ye(n.popFirst(5));return i.isEqual(t)||Ct(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VE extends DE{constructor(e,t,n,i,a,u){super(e,t,n,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ux(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ux extends VE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r){r=Iv(r,ps);const e=Iv(r.firestore,PE);return Cx(Dx(e),r._key).then(t=>qx(e,r,t))}class $x extends jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ps(this.firestore,null,t)}}function qx(r,e,t){const n=t.docs.get(e._key),i=new $x(r);return new VE(r,i,e._key,n,new Bx(t.hasPendingWrites,t.fromCache),e.converter)}class Wx{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Qx(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Gx(r){return new Wx(r)}class Kx{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new NE(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Hx{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nu.provider,this._offlineComponentProvider={build:t=>new vx(t,e==null?void 0:e.cacheSizeBytes)}}}function Qx(r){return new Kx(void 0)}function Xx(){return new Hx}(function(e,t=!0){(function(i){Ma=i})(Tw),Ul(new ya("firestore",(n,{instanceIdentifier:i,options:a})=>{const u=n.getProvider("app").getImmediate(),c=new PE(new hC(n.getProvider("auth-internal")),new pC(u,n.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(p.options.projectId,g)}(u,i),u);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),si(h_,d_,e),si(h_,d_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebasestorage.googleapis.com",Yx="storageBucket",Zx=2*60*1e3,Jx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends mo{constructor(e,t,n=0){super(Jf(e),`Firebase Storage: ${t} (${Jf(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wr||(Wr={}));function Jf(r){return"storage/"+r}function eR(){const r="An unknown error occurred, please check the error payload for server response.";return new Kr(Wr.UNKNOWN,r)}function tR(){return new Kr(Wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nR(){return new Kr(Wr.CANCELED,"User canceled the upload/download.")}function rR(r){return new Kr(Wr.INVALID_URL,"Invalid URL '"+r+"'.")}function sR(r){return new Kr(Wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Rv(r){return new Kr(Wr.INVALID_ARGUMENT,r)}function OE(){return new Kr(Wr.APP_DELETED,"The Firebase app was deleted.")}function iR(r){return new Kr(Wr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ar.makeFromUrl(e,t)}catch{return new Ar(e,"")}if(n.path==="")return n;throw sR(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const u="(/(.*))?$",c=new RegExp("^gs://"+i+u,"i"),d={bucket:1,path:3};function p(X){X.path_=decodeURIComponent(X.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",C=new RegExp(`^https?://${v}/${g}/b/${i}/o${E}`,"i"),A={bucket:1,path:3},V=t===ME?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",B=new RegExp(`^https?://${V}/${i}/${M}`,"i"),q=[{regex:c,indices:d,postModify:a},{regex:C,indices:A,postModify:p},{regex:B,indices:{bucket:1,path:2},postModify:p}];for(let X=0;X<q.length;X++){const F=q[X],z=F.regex.exec(e);if(z){const R=z[F.indices.bucket];let I=z[F.indices.path];I||(I=""),n=new Ar(R,I),F.postModify(n);break}}if(n==null)throw rR(e);return n}}class oR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r,e,t){let n=1,i=null,a=null,u=!1,c=0;function d(){return c===2}let p=!1;function g(...M){p||(p=!0,e.apply(null,M))}function v(M){i=setTimeout(()=>{i=null,r(C,d())},M)}function E(){a&&clearTimeout(a)}function C(M,...B){if(p){E();return}if(M){E(),g.call(null,M,...B);return}if(d()||u){E(),g.call(null,M,...B);return}n<64&&(n*=2);let q;c===1?(c=2,q=0):q=(n+Math.random())*1e3,v(q)}let A=!1;function V(M){A||(A=!0,E(),!p&&(i!==null?(M||(c=2),clearTimeout(i),v(0)):M||(c=1)))}return v(0),a=setTimeout(()=>{u=!0,V(!0)},t),V}function lR(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){return r!==void 0}function Pv(r,e,t,n){if(n<e)throw Rv(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw Rv(`Invalid value for '${r}'. Expected ${t} or less.`)}function cR(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var xh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(xh||(xh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t,n,i,a,u,c,d,p,g,v,E=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new qc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const c=a.getErrorCode()===xh.NO_ERROR,d=a.getStatus();if(!c||hR(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===xh.ABORT;n(!1,new qc(!1,null,g));return}const p=this.successCodes_.indexOf(d)!==-1;n(!0,new qc(p,a))})},t=(n,i)=>{const a=this.resolve_,u=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());uR(d)?a(d):a()}catch(d){u(d)}else if(c!==null){const d=eR();d.serverResponse=c.getErrorText(),this.errorCallback_?u(this.errorCallback_(c,d)):u(d)}else if(i.canceled){const d=this.appDelete_?OE():nR();u(d)}else{const d=tR();u(d)}};this.canceled_?t(!1,new qc(!1,null,!0)):this.backoffId_=aR(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function fR(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function pR(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mR(r,e){e&&(r["X-Firebase-GMPID"]=e)}function gR(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function yR(r,e,t,n,i,a,u=!0){const c=cR(r.urlParams),d=r.url+c,p=Object.assign({},r.headers);return mR(p,e),fR(p,t),pR(p,a),gR(p,n),new dR(d,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function vR(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this._service=e,t instanceof Ar?this._location=t:this._location=Ar.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rh(e,t)}get root(){const e=new Ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vR(this._location.path)}get storage(){return this._service}get parent(){const e=_R(this._location.path);if(e===null)return null;const t=new Ar(this._location.bucket,e);return new Rh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iR(e)}}function kv(r,e){const t=e==null?void 0:e[Yx];return t==null?null:Ar.makeFromBucketSpec(t,r)}function wR(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:GS(i,r.app.options.projectId))}class ER{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ME,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zx,this._maxUploadRetryTime=Jx,this._requests=new Set,i!=null?this._bucket=Ar.makeFromBucketSpec(i,this._host):this._bucket=kv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ar.makeFromBucketSpec(this._url,e):this._bucket=kv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ew(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new oR(OE());{const u=yR(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const Dv="@firebase/storage",bv="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="storage";function TR(r=X1(),e){r=gw(r);const n=ww(r,FE).getImmediate({identifier:e}),i=qS("storage");return i&&IR(n,...i),n}function IR(r,e,t,n={}){wR(r,e,t,n)}function SR(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new ER(t,n,i,e,Tw)}function CR(){Ul(new ya(FE,SR,"PUBLIC").setMultipleInstances(!0)),si(Dv,bv,""),si(Dv,bv,"esm2017")}CR();const AR={apiKey:"AIzaSyAlv8DyWdhTjJjZYPqkghZUyEupG5g8SFk",authDomain:"groove-slider.firebaseapp.com",projectId:"groove-slider",storageBucket:"groove-slider.appspot.com",messagingSenderId:"87433841566",appId:"1:87433841566:web:da11fb420a121cc700248f",measurementId:"G-X0QJM954YF"},LE=Iw(AR),ep=kx(LE,{localCache:Gx({tabManager:Xx()})});TR(LE);function NR(r,e){return new Promise((t,n)=>{try{const i=xR();i.onmessage=a=>{a.data.type==="complete"?(t(a.data.file),i.terminate()):a.data.type==="error"&&(n(new Error(a.data.error)),i.terminate())},i.onerror=a=>{n(a),i.terminate()},i.postMessage({data:r,config:e})}catch(i){n(i)}})}function xR(){const r=`
    self.onmessage = async (event) => {
      const { data, config } = event.data;
      
      try {
        // Basic export processing
        const exportedFile = await processExport(data, config);
        
        self.postMessage({ 
          type: 'complete', 
          file: exportedFile 
        });
      } catch (error) {
        self.postMessage({ 
          type: 'error', 
          error: error.message 
        });
      }
    };
    
    async function processExport(data, config) {
      console.log('Processing export', data, config);
      return data; // Temporary return
    }
  `,e=new Blob([r],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}const RR=({isOpen:r,progress:e,message:t,onClose:n,onExport:i,isExporting:a,storyData:u})=>{const[c,d]=ce.useState("1080x1920"),[p,g]=ce.useState(!1),[v,E]=ce.useState(30),[C,A]=ce.useState(null),V=async()=>{const M={resolution:c,isExportLoopEnabled:p,exportLoopDuration:v};try{A(null);const K=await NR({storyData:u,resolution:c,isExportLoopEnabled:p,exportLoopDuration:v},M);i(K)}catch(B){console.error("Export failed",B),A(B.message||"Export failed. Please try again.")}};return r?T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content export-modal",children:[T.jsx("button",{className:"modal-close",onClick:n,children:T.jsx(io,{size:20})}),a?T.jsxs("div",{className:"loading-container",children:[T.jsx("h3",{children:"Exporting Video"}),T.jsx("p",{children:t}),T.jsxs("div",{className:"progress-container",children:[T.jsx("div",{className:"progress-bar",children:T.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),T.jsxs("span",{className:"progress-text",children:[Math.round(e),"%"]})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("h3",{className:"modal-title",children:"Export Settings"}),T.jsxs("div",{className:"resolution-selector",children:[T.jsx("label",{children:"Resolution:"}),T.jsxs("select",{value:c,onChange:M=>d(M.target.value),className:"resolution-select",children:[T.jsx("option",{value:"720x1280",children:"720p"}),T.jsx("option",{value:"1080x1920",children:"1080p"}),T.jsx("option",{value:"1440x2560",children:"2K"})]})]}),T.jsxs("div",{className:"export-loop-settings",children:[T.jsx("div",{className:"loop-toggle",children:T.jsxs("label",{children:[T.jsx("span",{children:"Export as Loop"}),T.jsx("input",{type:"checkbox",checked:p,onChange:()=>g(!p)})]})}),p&&T.jsxs("div",{className:"input-container",children:[T.jsx("label",{children:"Loop Duration (seconds):"}),T.jsx("input",{type:"number",min:"5",max:"300",value:v,onChange:M=>E(Number(M.target.value)),className:"loop-duration-input"})]})]}),C&&T.jsx("div",{className:"export-error-message",children:C}),T.jsxs("div",{className:"export-actions",children:[T.jsxs("button",{className:"action-button share",onClick:()=>{},children:[T.jsx(SS,{className:"button-icon"}),"Share"]}),T.jsxs("button",{className:"action-button download",onClick:V,children:[T.jsx(ow,{className:"button-icon"}),"Export"]})]})]})]})}):null},PR=({isOpen:r,onClose:e,onSave:t})=>{const[n,i]=ce.useState(""),[a,u]=ce.useState(!1),[c,d]=ce.useState(null);if(!r)return null;const p=async g=>{if(g.preventDefault(),!n.trim()){d("Please enter a session name");return}try{u(!0),d(null),await t(n),i(""),e()}catch(v){console.error("Error saving session:",v),d("Failed to save session: "+v.message)}finally{u(!1)}};return T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content save-session-modal",children:[T.jsx("button",{className:"modal-close",onClick:e,children:T.jsx(io,{size:20})}),T.jsx("h3",{className:"modal-title",children:"Save Session"}),T.jsxs("form",{onSubmit:p,children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"session-name",children:"Session Name:"}),T.jsx("input",{type:"text",id:"session-name",value:n,onChange:g=>i(g.target.value),placeholder:"Enter a name for your session",autoFocus:!0,maxLength:50,className:"session-name-input"})]}),c&&T.jsx("div",{className:"save-error",children:c}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:e,disabled:a,children:"Cancel"}),T.jsx("button",{type:"submit",className:"save-button",disabled:a,children:a?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"spinner small"}),"Saving..."]}):T.jsxs(T.Fragment,{children:[T.jsx(uw,{size:16}),"Save Session"]})})]})]})]})})},Vv={name:"GrooveGalleryDB",version:1},ed=()=>new Promise((r,e)=>{const t=indexedDB.open(Vv.name,Vv.version);t.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains("sessions")){const a=i.createObjectStore("sessions",{keyPath:"id",autoIncrement:!0});a.createIndex("name","name",{unique:!1}),a.createIndex("createdAt","createdAt",{unique:!1})}i.objectStoreNames.contains("images")||i.createObjectStore("images",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1}),i.objectStoreNames.contains("music")||i.createObjectStore("music",{keyPath:"id",autoIncrement:!0}).createIndex("sessionId","sessionId",{unique:!1})},t.onsuccess=n=>{const i=n.target.result;r(i)},t.onerror=n=>{console.error("IndexedDB error:",n.target.error),e(n.target.error)}}),kR=async r=>{try{const e=[];for(const d of r.stories)try{const g=await(await fetch(d.url)).blob();e.push({type:d.type,blob:g})}catch(p){console.error("Error processing image:",p)}let t=null;if(r.musicUrl)try{t=await(await fetch(r.musicUrl)).blob()}catch(d){console.error("Error processing music:",d)}const i=(await ed()).transaction(["sessions","images","music"],"readwrite"),a=i.objectStore("sessions"),u={name:r.name,createdAt:new Date,bpm:r.bpm,musicStartPoint:r.musicStartPoint,imageFitMode:r.imageFitMode,duration:r.duration,isLoopingEnabled:r.isLoopingEnabled,currentIndex:r.currentIndex},c=a.add(u);return new Promise((d,p)=>{c.onsuccess=async g=>{const v=g.target.result,E=i.objectStore("images");for(const C of e)E.add({sessionId:v,type:C.type,blob:C.blob});t&&i.objectStore("music").add({sessionId:v,blob:t}),i.oncomplete=()=>{console.log(`Session saved with ID: ${v}`),d(v)},i.onerror=C=>{console.error("Transaction error:",C.target.error),p(C.target.error)}},c.onerror=g=>{console.error("Error adding session:",g.target.error),p(g.target.error)}})}catch(e){throw console.error("saveSession error:",e),e}},DR=async r=>{try{const e=await ed(),t=await new Promise((c,d)=>{const v=e.transaction("sessions","readonly").objectStore("sessions").get(r);v.onsuccess=E=>{c(E.target.result)},v.onerror=E=>{d(E.target.error)}});if(!t)throw new Error(`Session with ID ${r} not found`);const i=(await new Promise((c,d)=>{const E=e.transaction("images","readonly").objectStore("images").index("sessionId").getAll(r);E.onsuccess=C=>{c(C.target.result)},E.onerror=C=>{d(C.target.error)}})).map(c=>({type:c.type,url:URL.createObjectURL(c.blob)})),a=await new Promise((c,d)=>{const E=e.transaction("music","readonly").objectStore("music").index("sessionId").get(r);E.onsuccess=C=>{c(C.target.result)},E.onerror=C=>{d(C.target.error)}});let u=null;return a&&a.blob&&(u=URL.createObjectURL(a.blob)),{...t,stories:i,musicUrl:u}}catch(e){throw console.error("loadSession error:",e),e}},bR=async()=>{try{const r=await ed();return new Promise((e,t)=>{const a=r.transaction("sessions","readonly").objectStore("sessions").getAll();a.onsuccess=u=>{e(u.target.result)},a.onerror=u=>{t(u.target.error)}})}catch(r){throw console.error("getAllSessions error:",r),r}},VR=async r=>{try{const t=(await ed()).transaction(["sessions","images","music"],"readwrite");t.objectStore("sessions").delete(r);const u=t.objectStore("images").index("sessionId").openCursor(IDBKeyRange.only(r));u.onsuccess=g=>{const v=g.target.result;v&&(v.delete(),v.continue())};const p=t.objectStore("music").index("sessionId").openCursor(IDBKeyRange.only(r));return p.onsuccess=g=>{const v=g.target.result;v&&(v.delete(),v.continue())},new Promise((g,v)=>{t.oncomplete=()=>{console.log(`Session ${r} deleted successfully`),g()},t.onerror=E=>{console.error("Error deleting session:",E.target.error),v(E.target.error)}})}catch(e){throw console.error("deleteSession error:",e),e}},MR=({onLoadSession:r,visible:e})=>{const[t,n]=ce.useState([]),[i,a]=ce.useState(!0),[u,c]=ce.useState(null);ce.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{a(!0);const v=await bR();v.sort((E,C)=>new Date(C.createdAt)-new Date(E.createdAt)),n(v),c(null)}catch(v){console.error("Error loading sessions:",v),c("Failed to load saved sessions")}finally{a(!1)}},p=async(v,E)=>{if(v.stopPropagation(),window.confirm("Are you sure you want to delete this session?"))try{await VR(E),n(t.filter(C=>C.id!==E))}catch(C){console.error("Error deleting session:",C),alert("Failed to delete session")}},g=v=>new Date(v).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?T.jsxs("div",{className:"sessions-list",children:[T.jsx("h3",{className:"sessions-title",children:"Saved Sessions"}),i&&T.jsx("div",{className:"sessions-loading",children:"Loading saved sessions..."}),u&&T.jsx("div",{className:"sessions-error",children:u}),!i&&t.length===0&&T.jsxs("div",{className:"sessions-empty",children:[T.jsx("p",{children:"No saved sessions yet"}),T.jsx("p",{className:"sessions-hint",children:"Create a slideshow and click Save to add one"})]}),!i&&t.length>0&&T.jsx("ul",{className:"sessions-items",children:t.map(v=>T.jsxs("li",{className:"session-item",onClick:()=>r(v.id),children:[T.jsxs("div",{className:"session-info",children:[T.jsx("div",{className:"session-name",children:v.name}),T.jsxs("div",{className:"session-date",children:[T.jsx(iw,{size:12}),T.jsx("span",{children:g(v.createdAt)})]}),T.jsxs("div",{className:"session-details",children:[T.jsxs("span",{children:[v.bpm," BPM"]}),T.jsxs("span",{children:[v.duration.toFixed(1),"s/slide"]})]})]}),T.jsxs("div",{className:"session-actions",children:[T.jsx("button",{className:"session-delete-btn",onClick:E=>p(E,v.id),title:"Delete session",children:T.jsx(PS,{size:16})}),T.jsx(Zs,{size:16,className:"session-arrow"})]})]},v.id))})]}):null},OR=({audioUrl:r,onStartPointChange:e,audioRef:t,musicStartPoint:n=0})=>{const i=ce.useRef(null),a=ce.useRef(null),[u,c]=ce.useState(null),[d,p]=ce.useState(!1),[g,v]=ce.useState(0),[E,C]=ce.useState(!0),[A,V]=ce.useState(0),[M,B]=ce.useState(800),[K,q]=ce.useState(n),[X,F]=ce.useState(()=>{var D;const k=((D=i.current)==null?void 0:D.width)||800;return-(n/A)*k});ce.useEffect(()=>{if(!r)return;C(!0);const k=new(window.AudioContext||window.webkitAudioContext);fetch(r).then(D=>D.arrayBuffer()).then(D=>k.decodeAudioData(D)).then(D=>{var fe;c(D),V(D.duration);const P=((fe=i.current)==null?void 0:fe.width)||800;B(P);const ae=n/D.duration*P;F(-ae),C(!1)}).catch(D=>{console.error("Error decoding audio data",D),C(!1)})},[r]),ce.useEffect(()=>{const k=t==null?void 0:t.current;if(!k)return;const D=()=>{q(k.currentTime)};return k.addEventListener("timeupdate",D),()=>{k.removeEventListener("timeupdate",D)}},[t]),ce.useEffect(()=>{i.current&&B(i.current.width)},[i.current]),ce.useEffect(()=>{if(!u||!i.current)return;const k=i.current,D=k.getContext("2d"),P=M,ae=k.height;D.clearRect(0,0,P,ae),D.fillStyle="#222",D.fillRect(0,0,P,ae);const fe=u.getChannelData(0),me=Math.floor(fe.length*.01),le=Math.floor(fe.length*.4),J=5,te=3,ee=Math.floor(P/(J+te)),L=Math.floor(me/ee);D.fillStyle="#FFFFFF";const Y=K/A*P;for(let ge=0;ge<ee;ge++){const Re=le+ge/ee*me,pe=Math.floor(Re);let Ve=0;for(let ln=0;ln<L;ln++){const We=pe+ln;if(We<fe.length){const An=Math.abs(fe[We]);An>Ve&&(Ve=An)}}const Oe=Math.min(2,Ve*.9)*(ae/2),Ze=ge*(J+te)-Y,Ft=ae/2-Oe,an=Oe*2;D.fillRect(Ze,Ft,J,an)}D.fillStyle="#FFD700",D.fillRect(0,0,20,ae)},[u,K,M,A]);const z=k=>{u&&(k.preventDefault(),p(!0),v(k.clientX),k.currentTarget.style.cursor="grabbing")},R=k=>{if(!d||!u)return;const D=k.clientX-g,P=0,ae=-(u.duration/u.duration)*M;F(fe=>{const me=fe+D;return Math.max(ae,Math.min(P,me))}),v(k.clientX)},I=k=>{p(!1),k.currentTarget.style.cursor="grab"},N=k=>{const D=Math.floor(k/60),P=Math.floor(k%60);return`${D.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`},b=()=>{var D,P;const k=(t==null?void 0:t.current)||((P=(D=a.current)==null?void 0:D.closest(".music-panel"))==null?void 0:P.querySelector("audio"))||document.querySelector("audio");if(k){const ae=k.currentTime;e(ae)}else console.error("No audio element found to set start time")};return T.jsx("div",{className:"waveform-container",ref:a,children:E?T.jsx("div",{className:"waveform-loading",children:"Loading waveform..."}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"waveform-canvas-container",onMouseDown:z,onMouseMove:R,onMouseUp:I,onMouseLeave:I,style:{cursor:"default",pointerEvents:"none"},children:T.jsx("canvas",{ref:i,width:800,height:80,className:"waveform-canvas"})}),T.jsxs("div",{className:"waveform-timestamps",children:[T.jsx("span",{className:"start-time",children:N(0)}),T.jsxs("span",{className:"play-from",children:["Play from: ",N(K)]}),T.jsx("span",{className:"end-time",children:N(A)})]}),T.jsx("div",{className:"waveform-controls",children:T.jsx("button",{className:"choose-segment",onClick:b,children:"Set Start Point"})})]})})},FR=r=>(e,t)=>(r.set(e,t),t),Mv=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,jE=536870912,Ov=jE*2,LR=(r,e)=>t=>{const n=e.get(t);let i=n===void 0?t.size:n<Ov?n+1:0;if(!t.has(i))return r(t,i);if(t.size<jE){for(;t.has(i);)i=Math.floor(Math.random()*Ov);return r(t,i)}if(t.size>Mv)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*Mv);return r(t,i)},BE=new WeakMap,jR=FR(BE),BR=LR(jR,BE),UR=r=>typeof r.start=="function",Fv=new WeakMap,zR=r=>({...r,connect:({call:e})=>async()=>{const{port1:t,port2:n}=new MessageChannel,i=await e("connect",{port:t},[t]);return Fv.set(n,i),n},disconnect:({call:e})=>async t=>{const n=Fv.get(t);if(n===void 0)throw new Error("The given port is not connected.");await e("disconnect",{portId:n})},isSupported:({call:e})=>()=>e("isSupported")}),tp=new WeakMap,$R=r=>{if(tp.has(r))return tp.get(r);const e=new Map;return tp.set(r,e),e},qR=r=>{const e=zR(r);return t=>{const n=$R(t);t.addEventListener("message",({data:c})=>{const{id:d}=c;if(d!==null&&n.has(d)){const{reject:p,resolve:g}=n.get(d);n.delete(d),c.error===void 0?g(c.result):p(new Error(c.error.message))}}),UR(t)&&t.start();const i=(c,d=null,p=[])=>new Promise((g,v)=>{const E=BR(n);n.set(E,{reject:v,resolve:g}),d===null?t.postMessage({id:E,method:c},p):t.postMessage({id:E,method:c,params:d},p)}),a=(c,d,p=[])=>{t.postMessage({id:null,method:c,params:d},p)};let u={};for(const[c,d]of Object.entries(e))u={...u,[c]:d({call:i,notify:a})};return{...u}}},Lv=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),jv=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),bp=(r,e)=>({startTime:e,type:"setValue",value:r}),UE=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),zE=(r,e,{startTime:t,target:n,timeConstant:i})=>n+(e-n)*Math.exp((t-r)/i),ma=r=>r.type==="exponentialRampToValue",Ph=r=>r.type==="linearRampToValue",Js=r=>ma(r)||Ph(r),Sm=r=>r.type==="setValue",hs=r=>r.type==="setValueCurve",kh=(r,e,t,n)=>{const i=r[e];return i===void 0?n:Js(i)||Sm(i)?i.value:hs(i)?i.values[i.values.length-1]:zE(t,kh(r,e-1,i.startTime,n),i)},Bv=(r,e,t,n,i)=>t===void 0?[n.insertTime,i]:Js(t)?[t.endTime,t.value]:Sm(t)?[t.startTime,t.value]:hs(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,kh(r,e-1,t.startTime,i)],Vp=r=>r.type==="cancelAndHold",Mp=r=>r.type==="cancelScheduledValues",Ys=r=>Vp(r)||Mp(r)?r.cancelTime:ma(r)||Ph(r)?r.endTime:r.startTime,Uv=(r,e,t,{endTime:n,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((r-e)/(n-e)):0,zv=(r,e,t,{endTime:n,value:i})=>t+(r-e)/(n-e)*(i-t),WR=(r,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?r[t]:(1-(e-t))*r[t]+(1-(n-e))*r[n]},GR=(r,{duration:e,startTime:t,values:n})=>{const i=(r-t)/e*(n.length-1);return WR(n,i)},Wc=r=>r.type==="setTarget";class KR{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Ys(e);if(Vp(e)||Mp(e)){const n=this._automationEvents.findIndex(a=>Mp(e)&&hs(a)?a.startTime+a.duration>=t:Ys(a)>=t),i=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Vp(e)){const a=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Js(i)){if(a!==void 0&&Wc(a))throw new Error("The internal list is malformed.");const u=a===void 0?i.insertTime:hs(a)?a.startTime+a.duration:Ys(a),c=a===void 0?this._defaultValue:hs(a)?a.values[a.values.length-1]:a.value,d=ma(i)?Uv(t,u,c,i):zv(t,u,c,i),p=ma(i)?Lv(d,t,this._currenTime):jv(d,t,this._currenTime);this._automationEvents.push(p)}if(a!==void 0&&Wc(a)&&this._automationEvents.push(bp(this.getValue(t),t)),a!==void 0&&hs(a)&&a.startTime+a.duration>t){const u=t-a.startTime,c=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(u*c)),p=u/(d-1)*c,g=a.values.slice(0,d);if(p<1)for(let v=1;v<d;v+=1){const E=p*v%1;g[v]=a.values[v-1]*(1-E)+a.values[v]*E}this._automationEvents[this._automationEvents.length-1]=UE(g,a.startTime,u)}}}else{const n=this._automationEvents.findIndex(u=>Ys(u)>t),i=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(i!==void 0&&hs(i)&&Ys(i)+i.duration>t)return!1;const a=ma(e)?Lv(e.value,e.endTime,this._currenTime):Ph(e)?jv(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(a);else{if(hs(e)&&t+e.duration>Ys(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Ys(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),i=n[0];Wc(i)&&n.unshift(bp(kh(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>Ys(u)>e),n=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[i];if(a!==void 0&&Wc(a)&&(n===void 0||!Js(n)||n.insertTime>e))return zE(e,kh(this._automationEvents,i-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Sm(a)&&(n===void 0||!Js(n)))return a.value;if(a!==void 0&&hs(a)&&(n===void 0||!Js(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?GR(e,a):a.values[a.values.length-1];if(a!==void 0&&Js(a)&&(n===void 0||!Js(n)))return a.value;if(n!==void 0&&ma(n)){const[u,c]=Bv(this._automationEvents,i,a,n,this._defaultValue);return Uv(e,u,c,n)}if(n!==void 0&&Ph(n)){const[u,c]=Bv(this._automationEvents,i,a,n,this._defaultValue);return zv(e,u,c,n)}return this._defaultValue}}const HR=r=>({cancelTime:r,type:"cancelAndHold"}),QR=r=>({cancelTime:r,type:"cancelScheduledValues"}),XR=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),YR=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),ZR=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),JR=()=>new DOMException("","AbortError"),eP=r=>(e,t,[n,i,a],u)=>{r(e[i],[t,n,a],c=>c[0]===t&&c[1]===n,u)},tP=r=>(e,t,n)=>{const i=[];for(let a=0;a<n.numberOfInputs;a+=1)i.push(new Set);r.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},nP=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},ba=new WeakSet,$E=new WeakMap,qE=new WeakMap,WE=new WeakMap,GE=new WeakMap,KE=new WeakMap,HE=new WeakMap,Op=new WeakMap,$v=new WeakMap,QE={construct(){return QE}},rP=r=>{try{const e=new Proxy(r,QE);new e}catch{return!1}return!0},qv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Wv=(r,e)=>{const t=[];let n=r.replace(/^[\s]+/,""),i=n.match(qv);for(;i!==null;){const a=i[1].slice(1,-1),u=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(u),n=n.slice(i[0].length).replace(/^[\s]+/,""),i=n.match(qv)}return[t.join(";"),n]},Gv=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Kv=r=>{if(!rP(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},sP=(r,e,t,n,i,a,u,c,d,p,g,v,E)=>{let C=0;return(A,V,M={credentials:"omit"})=>{const B=g.get(A);if(B!==void 0&&B.has(V))return Promise.resolve();const K=p.get(A);if(K!==void 0){const F=K.get(V);if(F!==void 0)return F}const q=a(A),X=q.audioWorklet===void 0?i(V).then(([F,z])=>{const[R,I]=Wv(F,z),N=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${I}
})})(window,'_AWGS')`;return t(N)}).then(()=>{const F=E._AWGS.pop();if(F===void 0)throw new SyntaxError;n(q.currentTime,q.sampleRate,()=>F(class{},void 0,(z,R)=>{if(z.trim()==="")throw e();const I=$v.get(q);if(I!==void 0){if(I.has(z))throw e();Kv(R),Gv(R.parameterDescriptors),I.set(z,R)}else Kv(R),Gv(R.parameterDescriptors),$v.set(q,new Map([[z,R]]))},q.sampleRate,void 0,void 0))}):Promise.all([i(V),Promise.resolve(r(v,v))]).then(([[F,z],R])=>{const I=C+1;C=I;const[N,b]=Wv(F,z),ae=`${N};((AudioWorkletProcessor,registerProcessor)=>{${b}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${I}',class extends AudioWorkletProcessor{process(){return !1}})`,fe=new Blob([ae],{type:"application/javascript; charset=utf-8"}),me=URL.createObjectURL(fe);return q.audioWorklet.addModule(me,M).then(()=>{if(c(q))return q;const le=u(q);return le.audioWorklet.addModule(me,M).then(()=>le)}).then(le=>{if(d===null)throw new SyntaxError;try{new d(le,`__sac${I}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(me))});return K===void 0?p.set(A,new Map([[V,X]])):K.set(V,X),X.then(()=>{const F=g.get(A);F===void 0?g.set(A,new Set([V])):F.add(V)}).finally(()=>{const F=p.get(A);F!==void 0&&F.delete(V)}),X}},pi=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},td=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return r.delete(n),n},XE=(r,e,t,n)=>{const i=pi(r,e),a=td(i,u=>u[0]===t&&u[1]===n);return i.size===0&&r.delete(e),a},mu=r=>pi(HE,r),Va=r=>{if(ba.has(r))throw new Error("The AudioNode is already stored.");ba.add(r),mu(r).forEach(e=>e(!0))},YE=r=>"port"in r,gu=r=>{if(!ba.has(r))throw new Error("The AudioNode is not stored.");ba.delete(r),mu(r).forEach(e=>e(!1))},Fp=(r,e)=>{!YE(r)&&e.every(t=>t.size===0)&&gu(r)},iP=(r,e,t,n,i,a,u,c,d,p,g,v,E)=>{const C=new WeakMap;return(A,V,M,B,K)=>{const{activeInputs:q,passiveInputs:X}=a(V),{outputs:F}=a(A),z=c(A),R=I=>{const N=d(V),b=d(A);if(I){const k=XE(X,A,M,B);r(q,A,k,!1),!K&&!v(A)&&t(b,N,M,B),E(V)&&Va(V)}else{const k=n(q,A,M,B);e(X,B,k,!1),!K&&!v(A)&&i(b,N,M,B);const D=u(V);if(D===0)g(V)&&Fp(V,q);else{const P=C.get(V);P!==void 0&&clearTimeout(P),C.set(V,setTimeout(()=>{g(V)&&Fp(V,q)},D*1e3))}}};return p(F,[V,M,B],I=>I[0]===V&&I[1]===M&&I[2]===B,!0)?(z.add(R),g(A)?r(q,A,[M,B,R],!0):e(X,B,[A,M,R],!0),!0):!1}},oP=r=>(e,t,[n,i,a],u)=>{const c=e.get(n);c===void 0?e.set(n,new Set([[i,t,a]])):r(c,[i,t,a],d=>d[0]===i&&d[1]===t,u)},aP=r=>(e,t)=>{const n=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(n),n.disconnect()};t.addEventListener("ended",i)},lP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},uP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...lP,...d},v=n(p,g),E=a(p)?e():null;super(c,!1,v,E),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},pn=(r,e)=>r.context===e,cP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!pn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},Dh=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},_o=()=>new DOMException("","IndexSizeError"),Cm=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(n){throw n.code===12?_o():n}})(r.getChannelData)},hP={numberOfChannels:1},dP=(r,e,t,n,i,a,u,c)=>{let d=null;return class ZE{constructor(g){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:E,sampleRate:C}={...hP,...g};d===null&&(d=new i(1,1,44100));const A=n!==null&&e(a,a)?new n({length:v,numberOfChannels:E,sampleRate:C}):d.createBuffer(E,v,C);if(A.numberOfChannels===0)throw t();return typeof A.copyFromChannel!="function"?(u(A),Cm(A)):e(Dh,()=>Dh(A))||c(A),r.add(A),A}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===ZE.prototype||r.has(g)}}},Jn=-34028234663852886e22,In=34028234663852886e22,ms=r=>ba.has(r),fP={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},pP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const v=a(p),E={...fP,...g},C=i(v,E),A=u(v),V=A?e():null;super(p,!1,C,V),this._audioBufferSourceNodeRenderer=V,this._isBufferNullified=!1,this._isBufferSet=E.buffer!==null,this._nativeAudioBufferSourceNode=C,this._onended=null,this._playbackRate=t(this,A,C.playbackRate,In,Jn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?c(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===g?p:v}get playbackRate(){return this._playbackRate}start(p=0,g=0,v){if(this._nativeAudioBufferSourceNode.start(p,g,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[p,g]:[p,g,v]),this.context.state!=="closed"){Va(this);const E=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",E),ms(this)&&gu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",E)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},mP=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let v=t(p);const E=pn(v,g);if(!E){const C={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=e(g,C),u!==null&&v.start(...u),c!==null&&v.stop(c)}return a.set(g,v),E?await r(g,p.playbackRate,v.playbackRate):await n(g,p.playbackRate,v.playbackRate),await i(p,g,v),v};return{set start(p){u=p},set stop(p){c=p},render(p,g){const v=a.get(g);return v!==void 0?Promise.resolve(v):d(p,g)}}},gP=r=>"playbackRate"in r,yP=r=>"frequency"in r&&"gain"in r,_P=r=>"offset"in r,vP=r=>!("frequency"in r)&&"gain"in r,wP=r=>"detune"in r&&"frequency"in r&&!("gain"in r),EP=r=>"pan"in r,Bn=r=>pi($E,r),yu=r=>pi(WE,r),Lp=(r,e)=>{const{activeInputs:t}=Bn(r);t.forEach(i=>i.forEach(([a])=>{e.includes(r)||Lp(a,[...e,r])}));const n=gP(r)?[r.playbackRate]:YE(r)?Array.from(r.parameters.values()):yP(r)?[r.Q,r.detune,r.frequency,r.gain]:_P(r)?[r.offset]:vP(r)?[r.gain]:wP(r)?[r.detune,r.frequency]:EP(r)?[r.pan]:[];for(const i of n){const a=yu(i);a!==void 0&&a.activeInputs.forEach(([u])=>Lp(u,e))}ms(r)&&gu(r)},TP=r=>{Lp(r.destination,[])},IP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const v=a(p),E=u(v),C=i(v,g,E),A=E?e(c):null;super(p,!1,C,A),this._isNodeOfNativeOfflineAudioContext=E,this._nativeAudioDestinationNode=C}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},SP=r=>{const e=new WeakMap,t=async(n,i)=>{const a=i.destination;return e.set(i,a),await r(n,i,a),a};return{render(n,i){const a=e.get(i);return a!==void 0?Promise.resolve(a):t(n,i)}}},CP=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=p.listener,v=()=>{const F=new Float32Array(1),z=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=u(p);let I=!1,N=[0,0,-1,0,1,0],b=[0,0,0];const k=()=>{if(I)return;I=!0;const fe=n(p,256,9,0);fe.onaudioprocess=({inputBuffer:me})=>{const le=[a(me,F,0),a(me,F,1),a(me,F,2),a(me,F,3),a(me,F,4),a(me,F,5)];le.some((te,ee)=>te!==N[ee])&&(g.setOrientation(...le),N=le);const J=[a(me,F,6),a(me,F,7),a(me,F,8)];J.some((te,ee)=>te!==b[ee])&&(g.setPosition(...J),b=J)},z.connect(fe)},D=fe=>me=>{me!==N[fe]&&(N[fe]=me,g.setOrientation(...N))},P=fe=>me=>{me!==b[fe]&&(b[fe]=me,g.setPosition(...b))},ae=(fe,me,le)=>{const J=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:me});J.connect(z,0,fe),J.start(),Object.defineProperty(J.offset,"defaultValue",{get(){return me}});const te=r({context:d},R,J.offset,In,Jn);return c(te,"value",ee=>()=>ee.call(te),ee=>L=>{try{ee.call(te,L)}catch(Y){if(Y.code!==9)throw Y}k(),R&&le(L)}),te.cancelAndHoldAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.cancelAndHoldAtTime),te.cancelScheduledValues=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.cancelScheduledValues),te.exponentialRampToValueAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.exponentialRampToValueAtTime),te.linearRampToValueAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.linearRampToValueAtTime),te.setTargetAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.setTargetAtTime),te.setValueAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.setValueAtTime),te.setValueCurveAtTime=(ee=>R?()=>{throw i()}:(...L)=>{const Y=ee.apply(te,L);return k(),Y})(te.setValueCurveAtTime),te};return{forwardX:ae(0,0,D(0)),forwardY:ae(1,0,D(1)),forwardZ:ae(2,-1,D(2)),positionX:ae(6,0,P(0)),positionY:ae(7,0,P(1)),positionZ:ae(8,0,P(2)),upX:ae(3,0,D(3)),upY:ae(4,1,D(4)),upZ:ae(5,0,D(5))}},{forwardX:E,forwardY:C,forwardZ:A,positionX:V,positionY:M,positionZ:B,upX:K,upY:q,upZ:X}=g.forwardX===void 0?v():g;return{get forwardX(){return E},get forwardY(){return C},get forwardZ(){return A},get positionX(){return V},get positionY(){return M},get positionZ(){return B},get upX(){return K},get upY(){return q},get upZ(){return X}}},bh=r=>"context"in r,_u=r=>bh(r[0]),vo=(r,e,t,n)=>{for(const i of r)if(t(i)){if(n)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},Hv=(r,e,[t,n],i)=>{vo(r,[e,t,n],a=>a[0]===e&&a[1]===t,i)},Qv=(r,[e,t,n],i)=>{const a=r.get(e);a===void 0?r.set(e,new Set([[t,n]])):vo(a,[t,n],u=>u[0]===t,i)},ja=r=>"inputs"in r,Vh=(r,e,t,n)=>{if(ja(e)){const i=e.inputs[n];return r.connect(i,t,0),[i,t,0]}return r.connect(e,t,n),[e,t,n]},JE=(r,e,t)=>{for(const n of r)if(n[0]===e&&n[1]===t)return r.delete(n),n;return null},AP=(r,e,t)=>td(r,n=>n[0]===e&&n[1]===t),eT=(r,e)=>{if(!mu(r).delete(e))throw new Error("Missing the expected event listener.")},tT=(r,e,t)=>{const n=pi(r,e),i=td(n,a=>a[0]===t);return n.size===0&&r.delete(e),i},Mh=(r,e,t,n)=>{ja(e)?r.disconnect(e.inputs[n],t,0):r.disconnect(e,t,n)},mt=r=>pi(qE,r),su=r=>pi(GE,r),po=r=>Op.has(r),th=r=>!ba.has(r),Xv=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=r.createScriptProcessor(256,1,1),i=r.createGain(),a=r.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const c=r.createBufferSource();c.buffer=a,c.loop=!0,c.connect(n).connect(r.destination),c.connect(i),c.disconnect(i),n.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?t(!0):t(!1),c.stop(),n.onaudioprocess=null,c.disconnect(n),n.disconnect(r.destination)},c.start()}}),np=(r,e)=>{const t=new Map;for(const n of r)for(const i of n){const a=t.get(i);t.set(i,a===void 0?1:a+1)}t.forEach((n,i)=>e(i,n))},Yv=r=>"context"in r,NP=r=>{const e=new Map;r.connect=(t=>(n,i=0,a=0)=>{const u=Yv(n)?t(n,i,a):t(n,i),c=e.get(n);return c===void 0?e.set(n,[{input:a,output:i}]):c.every(d=>d.input!==a||d.output!==i)&&c.push({input:a,output:i}),u})(r.connect.bind(r)),r.disconnect=(t=>(n,i,a)=>{if(t.apply(r),n===void 0)e.clear();else if(typeof n=="number")for(const[u,c]of e){const d=c.filter(p=>p.output!==n);d.length===0?e.delete(u):e.set(u,d)}else if(e.has(n))if(i===void 0)e.delete(n);else{const u=e.get(n);if(u!==void 0){const c=u.filter(d=>d.output!==i&&(d.input!==a||a===void 0));c.length===0?e.delete(n):e.set(n,c)}}for(const[u,c]of e)c.forEach(d=>{Yv(u)?r.connect(u,d.output,d.input):r.connect(u,d.output)})})(r.disconnect)},xP=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=yu(e),{outputs:u}=Bn(r),c=mu(r),d=p=>{const g=mt(r),v=su(e);if(p){const E=tT(a,r,t);Hv(i,r,E,!1),!n&&!po(r)&&g.connect(v,t)}else{const E=AP(i,r,t);Qv(a,E,!1),!n&&!po(r)&&g.disconnect(v,t)}};return vo(u,[e,t],p=>p[0]===e&&p[1]===t,!0)?(c.add(d),ms(r)?Hv(i,r,[t,d],!0):Qv(a,[r,t,d],!0),!0):!1},RP=(r,e,t,n)=>{const{activeInputs:i,passiveInputs:a}=Bn(e),u=JE(i[n],r,t);return u===null?[XE(a,r,t,n)[2],!1]:[u[2],!0]},PP=(r,e,t)=>{const{activeInputs:n,passiveInputs:i}=yu(e),a=JE(n,r,t);return a===null?[tT(i,r,t)[1],!1]:[a[2],!0]},Am=(r,e,t,n,i)=>{const[a,u]=RP(r,t,n,i);if(a!==null&&(eT(r,a),u&&!e&&!po(r)&&Mh(mt(r),mt(t),n,i)),ms(t)){const{activeInputs:c}=Bn(t);Fp(t,c)}},Nm=(r,e,t,n)=>{const[i,a]=PP(r,t,n);i!==null&&(eT(r,i),a&&!e&&!po(r)&&mt(r).disconnect(su(t),n))},kP=(r,e)=>{const t=Bn(r),n=[];for(const i of t.outputs)_u(i)?Am(r,e,...i):Nm(r,e,...i),n.push(i[0]);return t.outputs.clear(),n},DP=(r,e,t)=>{const n=Bn(r),i=[];for(const a of n.outputs)a[1]===t&&(_u(a)?Am(r,e,...a):Nm(r,e,...a),i.push(a[0]),n.outputs.delete(a));return i},bP=(r,e,t,n,i)=>{const a=Bn(r);return Array.from(a.outputs).filter(u=>u[0]===t&&(n===void 0||u[1]===n)&&(i===void 0||u[2]===i)).map(u=>(_u(u)?Am(r,e,...u):Nm(r,e,...u),a.outputs.delete(u),u[0]))},VP=(r,e,t,n,i,a,u,c,d,p,g,v,E,C,A,V)=>class extends p{constructor(B,K,q,X){super(q),this._context=B,this._nativeAudioNode=q;const F=g(B);v(F)&&t(Xv,()=>Xv(F,V))!==!0&&NP(q),qE.set(this,q),HE.set(this,new Set),B.state!=="closed"&&K&&Va(this),r(this,X,q)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(B){this._nativeAudioNode.channelCount=B}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(B){this._nativeAudioNode.channelCountMode=B}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(B){this._nativeAudioNode.channelInterpretation=B}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(B,K=0,q=0){if(K<0||K>=this._nativeAudioNode.numberOfOutputs)throw i();const X=g(this._context),F=A(X);if(E(B)||C(B))throw a();if(bh(B)){const I=mt(B);try{const b=Vh(this._nativeAudioNode,I,K,q),k=th(this);(F||k)&&this._nativeAudioNode.disconnect(...b),this.context.state!=="closed"&&!k&&th(B)&&Va(B)}catch(b){throw b.code===12?a():b}if(e(this,B,K,q,F)){const b=d([this],B);np(b,n(F))}return B}const z=su(B);if(z.name==="playbackRate"&&z.maxValue===1024)throw u();try{this._nativeAudioNode.connect(z,K),(F||th(this))&&this._nativeAudioNode.disconnect(z,K)}catch(I){throw I.code===12?a():I}if(xP(this,B,K,F)){const I=d([this],B);np(I,n(F))}}disconnect(B,K,q){let X;const F=g(this._context),z=A(F);if(B===void 0)X=kP(this,z);else if(typeof B=="number"){if(B<0||B>=this.numberOfOutputs)throw i();X=DP(this,z,B)}else{if(K!==void 0&&(K<0||K>=this.numberOfOutputs)||bh(B)&&q!==void 0&&(q<0||q>=B.numberOfInputs))throw i();if(X=bP(this,z,B,K,q),X.length===0)throw a()}for(const R of X){const I=d([this],R);np(I,c)}}},MP=(r,e,t,n,i,a,u,c,d,p,g,v,E)=>(C,A,V,M=null,B=null)=>{const K=V.value,q=new KR(K),X=A?n(q):null,F={get defaultValue(){return K},get maxValue(){return M===null?V.maxValue:M},get minValue(){return B===null?V.minValue:B},get value(){return V.value},set value(z){V.value=z,F.setValueAtTime(z,C.context.currentTime)},cancelAndHoldAtTime(z){if(typeof V.cancelAndHoldAtTime=="function")X===null&&q.flush(C.context.currentTime),q.add(i(z)),V.cancelAndHoldAtTime(z);else{const R=Array.from(q).pop();X===null&&q.flush(C.context.currentTime),q.add(i(z));const I=Array.from(q).pop();V.cancelScheduledValues(z),R!==I&&I!==void 0&&(I.type==="exponentialRampToValue"?V.exponentialRampToValueAtTime(I.value,I.endTime):I.type==="linearRampToValue"?V.linearRampToValueAtTime(I.value,I.endTime):I.type==="setValue"?V.setValueAtTime(I.value,I.startTime):I.type==="setValueCurve"&&V.setValueCurveAtTime(I.values,I.startTime,I.duration))}return F},cancelScheduledValues(z){return X===null&&q.flush(C.context.currentTime),q.add(a(z)),V.cancelScheduledValues(z),F},exponentialRampToValueAtTime(z,R){if(z===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const I=C.context.currentTime;return X===null&&q.flush(I),Array.from(q).length===0&&(q.add(p(K,I)),V.setValueAtTime(K,I)),q.add(u(z,R)),V.exponentialRampToValueAtTime(z,R),F},linearRampToValueAtTime(z,R){const I=C.context.currentTime;return X===null&&q.flush(I),Array.from(q).length===0&&(q.add(p(K,I)),V.setValueAtTime(K,I)),q.add(c(z,R)),V.linearRampToValueAtTime(z,R),F},setTargetAtTime(z,R,I){return X===null&&q.flush(C.context.currentTime),q.add(d(z,R,I)),V.setTargetAtTime(z,R,I),F},setValueAtTime(z,R){return X===null&&q.flush(C.context.currentTime),q.add(p(z,R)),V.setValueAtTime(z,R),F},setValueCurveAtTime(z,R,I){const N=z instanceof Float32Array?z:new Float32Array(z);if(v!==null&&v.name==="webkitAudioContext"){const b=R+I,k=C.context.sampleRate,D=Math.ceil(R*k),P=Math.floor(b*k),ae=P-D,fe=new Float32Array(ae);for(let le=0;le<ae;le+=1){const J=(N.length-1)/I*((D+le)/k-R),te=Math.floor(J),ee=Math.ceil(J);fe[le]=te===ee?N[te]:(1-(J-te))*N[te]+(1-(ee-J))*N[ee]}X===null&&q.flush(C.context.currentTime),q.add(g(fe,R,I)),V.setValueCurveAtTime(fe,R,I);const me=P/k;me<b&&E(F,fe[fe.length-1],me),E(F,N[N.length-1],b)}else X===null&&q.flush(C.context.currentTime),q.add(g(N,R,I)),V.setValueCurveAtTime(N,R,I);return F}};return t.set(F,V),e.set(F,C),r(F,X),F},OP=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:n,value:i}=t;e.exponentialRampToValueAtTime(i,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:i}=t;e.linearRampToValueAtTime(i,n)}else if(t.type==="setTarget"){const{startTime:n,target:i,timeConstant:a}=t;e.setTargetAtTime(i,n,a)}else if(t.type==="setValue"){const{startTime:n,value:i}=t;e.setValueAtTime(i,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:i,values:a}=t;e.setValueCurveAtTime(a,i,n)}else throw new Error("Can't apply an unknown automation.")}}),FP=(r,e,t,n,i,a,u,c,d,p,g,v,E,C,A,V,M,B,K,q)=>class extends A{constructor(F,z){super(F,z),this._nativeContext=F,this._audioWorklet=r===void 0?void 0:{addModule:(R,I)=>r(this,R,I)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(F,z,R){return new t({length:z,numberOfChannels:F,sampleRate:R})}createBufferSource(){return new n(this)}createChannelMerger(F=6){return new a(this,{numberOfInputs:F})}createChannelSplitter(F=6){return new u(this,{numberOfOutputs:F})}createConstantSource(){return new c(this)}createConvolver(){return new d(this)}createDelay(F=1){return new g(this,{maxDelayTime:F})}createDynamicsCompressor(){return new v(this)}createGain(){return new E(this)}createIIRFilter(F,z){return new C(this,{feedback:z,feedforward:F})}createOscillator(){return new V(this)}createPanner(){return new M(this)}createPeriodicWave(F,z,R={disableNormalization:!1}){return new B(this,{...R,imag:z,real:F})}createStereoPanner(){return new K(this)}createWaveShaper(){return new q(this)}decodeAudioData(F,z,R){return p(this._nativeContext,F).then(I=>(typeof z=="function"&&z(I),I),I=>{throw typeof R=="function"&&R(I),I})}},LP={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},jP=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const v=a(p),E={...LP,...g},C=i(v,E),A=u(v),V=A?t():null;super(p,!1,C,V),this._Q=e(this,A,C.Q,In,Jn),this._detune=e(this,A,C.detune,1200*Math.log2(In),-1200*Math.log2(In)),this._frequency=e(this,A,C.frequency,p.sampleRate/2,0),this._gain=e(this,A,C.gain,40*Math.log10(In),Jn),this._nativeBiquadFilterNode=C,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,v)}catch(E){throw E.code===11?n():E}if(p.length!==g.length||g.length!==v.length)throw n()}},BP=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=pn(p,d);if(!g){const v={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=e(d,v)}return a.set(d,p),g?(await r(d,c.Q,p.Q),await r(d,c.detune,p.detune),await r(d,c.frequency,p.frequency),await r(d,c.gain,p.gain)):(await n(d,c.Q,p.Q),await n(d,c.detune,p.detune),await n(d,c.frequency,p.frequency),await n(d,c.gain,p.gain)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},UP=(r,e)=>(t,n)=>{const i=e.get(t);if(i!==void 0)return i;const a=r.get(t);if(a!==void 0)return a;try{const u=n();return u instanceof Promise?(r.set(t,u),u.catch(()=>!1).then(c=>(r.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},zP={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},$P=(r,e,t,n,i)=>class extends r{constructor(u,c){const d=n(u),p={...zP,...c},g=t(d,p),v=i(d)?e():null;super(u,!1,g,v)}},qP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!pn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},WP={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},GP=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=a({...WP,...d}),v=t(p,g),E=i(p)?e():null;super(c,!1,v,E)}},KP=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!pn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=r(u,p)}return n.set(u,c),await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},HP=r=>(e,t,n)=>r(t,e,n),QP=r=>(e,t)=>{const n=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return n.buffer=i,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},XP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},YP=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),v={...XP,...p},E=n(g,v),C=a(g),A=C?t():null;super(d,!1,E,A),this._constantSourceNodeRenderer=A,this._nativeConstantSourceNode=E,this._offset=e(this,C,E.offset,In,Jn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?d:g}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),ms(this)&&gu(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},ZP=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null;const d=async(p,g)=>{let v=t(p);const E=pn(v,g);if(!E){const C={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=e(g,C),u!==null&&v.start(u),c!==null&&v.stop(c)}return a.set(g,v),E?await r(g,p.offset,v.offset):await n(g,p.offset,v.offset),await i(p,g,v),v};return{set start(p){u=p},set stop(p){c=p},render(p,g){const v=a.get(g);return v!==void 0?Promise.resolve(v):d(p,g)}}},JP=r=>e=>(r[0]=e,r[0]),ek={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g={...ek,...d},v=t(p,g),C=i(p)?e():null;super(c,!1,v,C),this._isBufferNullified=!1,this._nativeConvolverNode=v,g.buffer!==null&&a(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},nk=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!pn(c,u)){const p={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},rk=(r,e)=>(t,n,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,i)}catch(a){throw a.name==="SyntaxError"?r():a}},sk=()=>new DOMException("","DataCloneError"),Zv=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const i=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>i();try{e.postMessage(r,[r])}catch{}finally{i()}})},ik=(r,e,t,n,i,a,u,c,d,p,g)=>(v,E)=>{const C=u(v)?v:a(v);if(i.has(E)){const A=t();return Promise.reject(A)}try{i.add(E)}catch{}return e(d,()=>d(C))?C.decodeAudioData(E).then(A=>(Zv(E).catch(()=>{}),e(c,()=>c(A))||g(A),r.add(A),A)):new Promise((A,V)=>{const M=async()=>{try{await Zv(E)}catch{}},B=K=>{V(K),M()};try{C.decodeAudioData(E,K=>{typeof K.copyFromChannel!="function"&&(p(K),Cm(K)),r.add(K),M().then(()=>A(K))},K=>{B(K===null?n():K)})}catch(K){B(K)}})},ok=(r,e,t,n,i,a,u,c)=>(d,p)=>{const g=e.get(d);if(g===void 0)throw new Error("Missing the expected cycle count.");const v=a(d.context),E=c(v);if(g===p){if(e.delete(d),!E&&u(d)){const C=n(d),{outputs:A}=t(d);for(const V of A)if(_u(V)){const M=n(V[0]);r(C,M,V[1],V[2])}else{const M=i(V[0]);C.connect(M,V[1])}}}else e.set(d,g-p)},ak={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},lk=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),v={...ak,...p},E=n(g,v),C=a(g),A=C?t(v.maxDelayTime):null;super(d,!1,E,A),this._delayTime=e(this,C,E.delayTime),u(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},uk=(r,e,t,n,i)=>a=>{const u=new WeakMap,c=async(d,p)=>{let g=t(d);const v=pn(g,p);if(!v){const E={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:a};g=e(p,E)}return u.set(p,g),v?await r(p,d.delayTime,g.delayTime):await n(p,d.delayTime,g.delayTime),await i(d,p,g),g};return{render(d,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):c(d,p)}}},ck=r=>(e,t,n,i)=>r(e[i],a=>a[0]===t&&a[1]===n),hk=r=>"delayTime"in r,dk=(r,e,t)=>function n(i,a){const u=bh(a)?a:t(r,a);if(hk(u))return[];if(i[0]===u)return[i];if(i.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(d=>n([...i,u],d[0])).reduce((d,p)=>d.concat(p),[])},fk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},pk=(r,e,t,n,i,a,u,c)=>class extends r{constructor(p,g){const v=a(p),E={...fk,...g},C=n(v,E),A=u(v),V=A?t():null;super(p,!1,C,V),this._attack=e(this,A,C.attack),this._knee=e(this,A,C.knee),this._nativeDynamicsCompressorNode=C,this._ratio=e(this,A,C.ratio),this._release=e(this,A,C.release),this._threshold=e(this,A,C.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},mk=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=pn(p,d);if(!g){const v={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=e(d,v)}return a.set(d,p),g?(await r(d,c.attack,p.attack),await r(d,c.knee,p.knee),await r(d,c.ratio,p.ratio),await r(d,c.release,p.release),await r(d,c.threshold,p.threshold)):(await n(d,c.attack,p.attack),await n(d,c.knee,p.knee),await n(d,c.ratio,p.ratio),await n(d,c.release,p.release),await n(d,c.threshold,p.threshold)),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},gk=()=>new DOMException("","EncodingError"),yk=r=>e=>new Promise((t,n)=>{if(r===null){n(new SyntaxError);return}const i=r.document.head;if(i===null)n(new SyntaxError);else{const a=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),d=r.onerror,p=()=>{r.onerror=d,URL.revokeObjectURL(c)};r.onerror=(g,v,E,C,A)=>{if(v===c||v===r.location.href&&E===1&&C===1)return p(),n(A),!1;if(d!==null)return d(g,v,E,C,A)},a.onerror=()=>{p(),n(new SyntaxError)},a.onload=()=>{p(),t()},a.src=c,a.type="module",i.appendChild(a)}}),_k=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,i){if(n!==null){let a=this._listeners.get(n);a===void 0&&(a=r(this,n),typeof n=="function"&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,i){const a=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,i)}},vk=r=>(e,t,n)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},wk=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},Ek={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Tk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...Ek,...d},v=n(p,g),E=a(p),C=E?t():null;super(c,!1,v,C),this._gain=e(this,E,v.gain,In,Jn)}get gain(){return this._gain}},Ik=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=pn(p,d);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=e(d,v)}return a.set(d,p),g?await r(d,c.gain,p.gain):await n(d,c.gain,p.gain),await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},Sk=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Ck=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},Ak=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Cn=()=>new DOMException("","InvalidStateError"),Nk=r=>e=>{const t=r.get(e);if(t===void 0)throw Cn();return t},xk=(r,e)=>t=>{let n=r.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),r.set(t,n),n},Rk=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},nd=()=>new DOMException("","InvalidAccessError"),Pk=r=>{r.getFrequencyResponse=(e=>(t,n,i)=>{if(t.length!==n.length||n.length!==i.length)throw nd();return e.call(r,t,n,i)})(r.getFrequencyResponse)},kk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Dk=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=n(c),g=i(p),v={...kk,...d},E=e(p,g?null:c.baseLatency,v),C=g?t(v.feedback,v.feedforward):null;super(c,!1,E,C),Pk(E),this._nativeIIRFilterNode=E,a(this,1)}getFrequencyResponse(c,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(c,d,p)}},nT=(r,e,t,n,i,a,u,c,d,p,g)=>{const v=p.length;let E=c;for(let C=0;C<v;C+=1){let A=t[0]*p[C];for(let V=1;V<i;V+=1){const M=E-V&d-1;A+=t[V]*a[M],A-=r[V]*u[M]}for(let V=i;V<n;V+=1)A+=t[V]*a[E-V&d-1];for(let V=i;V<e;V+=1)A-=r[V]*u[E-V&d-1];a[E]=p[C],u[E]=A,E=E+1&d-1,g[C]=A}return E},bk=(r,e,t,n)=>{const i=t instanceof Float64Array?t:new Float64Array(t),a=n instanceof Float64Array?n:new Float64Array(n),u=i.length,c=a.length,d=Math.min(u,c);if(i[0]!==1){for(let A=0;A<u;A+=1)a[A]/=i[0];for(let A=1;A<c;A+=1)i[A]/=i[0]}const p=32,g=new Float32Array(p),v=new Float32Array(p),E=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),C=r.numberOfChannels;for(let A=0;A<C;A+=1){const V=r.getChannelData(A),M=E.getChannelData(A);g.fill(0),v.fill(0),nT(i,u,a,c,d,g,v,0,p,V,M)}return E},Vk=(r,e,t,n,i)=>(a,u)=>{const c=new WeakMap;let d=null;const p=async(g,v)=>{let E=null,C=e(g);const A=pn(C,v);if(v.createIIRFilter===void 0?E=r(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):A||(C=v.createIIRFilter(u,a)),c.set(v,E===null?C:E),E!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new t(g.context.destination.channelCount,g.context.length,v.sampleRate);d=(async()=>{await n(g,M,M.destination);const B=await i(M);return bk(B,v,a,u)})()}const V=await d;return E.buffer=V,E.start(0),E}return await n(g,v,C),C};return{render(g,v){const E=c.get(v);return E!==void 0?Promise.resolve(E):p(g,v)}}},Mk=(r,e,t,n,i,a)=>u=>(c,d)=>{const p=r.get(c);if(p===void 0){if(!u&&a(c)){const g=n(c),{outputs:v}=t(c);for(const E of v)if(_u(E)){const C=n(E[0]);e(g,C,E[1],E[2])}else{const C=i(E[0]);g.disconnect(C,E[1])}}r.set(c,d)}else r.set(c,p+d)},Ok=r=>e=>r!==null&&e instanceof r,Fk=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,Lk=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,jk=(r,e)=>t=>r(t)||e(t),Bk=r=>e=>r!==null&&e instanceof r,Uk=r=>r!==null&&r.isSecureContext,zk=(r,e,t,n,i,a)=>class extends t{constructor(c,d){super(c),this._nativeContext=c,KE.set(this,c),n(c)&&i.set(c,new Set),this._destination=new r(this,d),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const d=typeof c=="function"?a(this,c):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?c:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},iu=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},$k=(r,e)=>(t,n,i)=>{const a=new Set;return t.connect=(u=>(c,d=0,p=0)=>{const g=a.size===0;if(e(c))return u.call(t,c,d,p),r(a,[c,d,p],v=>v[0]===c&&v[1]===d&&v[2]===p,!0),g&&n(),c;u.call(t,c,d),r(a,[c,d],v=>v[0]===c&&v[1]===d,!0),g&&n()})(t.connect),t.disconnect=(u=>(c,d,p)=>{const g=a.size>0;if(c===void 0)u.apply(t),a.clear();else if(typeof c=="number"){u.call(t,c);for(const E of a)E[1]===c&&a.delete(E)}else{e(c)?u.call(t,c,d,p):u.call(t,c,d);for(const E of a)E[0]===c&&(d===void 0||E[1]===d)&&(p===void 0||E[2]===p)&&a.delete(E)}const v=a.size===0;g&&v&&i()})(t.disconnect),t},dt=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t]&&(r[t]=n)},qt=(r,e)=>{dt(r,e,"channelCount"),dt(r,e,"channelCountMode"),dt(r,e,"channelInterpretation")},Jv=r=>typeof r.getFloatTimeDomainData=="function",qk=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const n=Math.max(t.length,r.fftSize);for(let i=0;i<n;i+=1)e[i]=(t[i]-128)*.0078125;return e}},Wk=(r,e)=>(t,n)=>{const i=t.createAnalyser();if(qt(i,n),!(n.maxDecibels>n.minDecibels))throw e();return dt(i,n,"fftSize"),dt(i,n,"maxDecibels"),dt(i,n,"minDecibels"),dt(i,n,"smoothingTimeConstant"),r(Jv,()=>Jv(i))||qk(i),i},Gk=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,vt=(r,e,t)=>{const n=e[t];n!==void 0&&n!==r[t].value&&(r[t].value=n)},Kk=r=>{r.start=(e=>{let t=!1;return(n=0,i=0,a)=>{if(t)throw Cn();e.call(r,n,i,a),t=!0}})(r.start)},xm=r=>{r.start=(e=>(t=0,n=0,i)=>{if(typeof i=="number"&&i<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,n,i)})(r.start)},Rm=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},Hk=(r,e,t,n,i,a,u,c,d,p,g)=>(v,E)=>{const C=v.createBufferSource();return qt(C,E),vt(C,E,"playbackRate"),dt(C,E,"buffer"),dt(C,E,"loop"),dt(C,E,"loopEnd"),dt(C,E,"loopStart"),e(t,()=>t(v))||Kk(C),e(n,()=>n(v))||d(C),e(i,()=>i(v))||p(C,v),e(a,()=>a(v))||xm(C),e(u,()=>u(v))||g(C,v),e(c,()=>c(v))||Rm(C),r(v,C),C},Qk=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,Xk=(r,e)=>(t,n,i)=>{const a=t.destination;if(a.channelCount!==n)try{a.channelCount=n}catch{}i&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:n});const u=r(t,{channelCount:n,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>d=>{c.call(u,d);try{a.channelCount=d}catch(p){if(d>a.maxChannelCount)throw p}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelCountMode=d}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>d=>{c.call(u,d),a.channelInterpretation=d}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},Yk=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,Zk=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),rT=(r,e)=>{const t=r.createBiquadFilter();return qt(t,e),vt(t,e,"Q"),vt(t,e,"detune"),vt(t,e,"frequency"),vt(t,e,"gain"),dt(t,e,"type"),t},Jk=(r,e)=>(t,n)=>{const i=t.createChannelMerger(n.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,i),qt(i,n),i},e2=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Cn()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Cn()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Cn()}})},Pm=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return qt(t,e),e2(t),t},t2=(r,e,t,n,i)=>(a,u)=>{if(a.createConstantSource===void 0)return t(a,u);const c=a.createConstantSource();return qt(c,u),vt(c,u,"offset"),e(n,()=>n(a))||xm(c),e(i,()=>i(a))||Rm(c),r(a,c),c},Ba=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),n2=(r,e,t,n)=>(i,{offset:a,...u})=>{const c=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(i,{...u,gain:a}),g=c.getChannelData(0);g[0]=1,g[1]=1,d.buffer=c,d.loop=!0;const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(A){p.channelCount=A},get channelCountMode(){return p.channelCountMode},set channelCountMode(A){p.channelCountMode=A},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(A){p.channelInterpretation=A},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(A){d.onended=A},addEventListener(...A){return d.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return d.dispatchEvent(A[0])},removeEventListener(...A){return d.removeEventListener(A[0],A[1],A[2])},start(A=0){d.start.call(d,A)},stop(A=0){d.stop.call(d,A)}},E=()=>d.connect(p),C=()=>d.disconnect(p);return r(i,d),n(Ba(v,p),E,C)},r2=(r,e)=>(t,n)=>{const i=t.createConvolver();if(qt(i,n),n.disableNormalization===i.normalize&&(i.normalize=!n.disableNormalization),dt(i,n,"buffer"),n.channelCount>2||(e(i,"channelCount",a=>()=>a.call(i),a=>u=>{if(u>2)throw r();return a.call(i,u)}),n.channelCountMode==="max"))throw r();return e(i,"channelCountMode",a=>()=>a.call(i),a=>u=>{if(u==="max")throw r();return a.call(i,u)}),i},sT=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return qt(t,e),vt(t,e,"delayTime"),t},s2=r=>(e,t)=>{const n=e.createDynamicsCompressor();if(qt(n,t),t.channelCount>2||t.channelCountMode==="max")throw r();return vt(n,t,"attack"),vt(n,t,"knee"),vt(n,t,"ratio"),vt(n,t,"release"),vt(n,t,"threshold"),n},Nr=(r,e)=>{const t=r.createGain();return qt(t,e),vt(t,e,"gain"),t},i2=r=>(e,t,n)=>{if(e.createIIRFilter===void 0)return r(e,t,n);const i=e.createIIRFilter(n.feedforward,n.feedback);return qt(i,n),i};function o2(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function a2(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function ew(r,e){let t=[0,0];for(let n=r.length-1;n>=0;n-=1)t=a2(t,e),t[0]+=r[n];return t}const l2=(r,e,t,n)=>(i,a,{channelCount:u,channelCountMode:c,channelInterpretation:d,feedback:p,feedforward:g})=>{const v=Zk(a,i.sampleRate),E=p instanceof Float64Array?p:new Float64Array(p),C=g instanceof Float64Array?g:new Float64Array(g),A=E.length,V=C.length,M=Math.min(A,V);if(A===0||A>20)throw n();if(E[0]===0)throw e();if(V===0||V>20)throw n();if(C[0]===0)throw e();if(E[0]!==1){for(let I=0;I<V;I+=1)C[I]/=E[0];for(let I=1;I<A;I+=1)E[I]/=E[0]}const B=t(i,v,u,u);B.channelCount=u,B.channelCountMode=c,B.channelInterpretation=d;const K=32,q=[],X=[],F=[];for(let I=0;I<u;I+=1){q.push(0);const N=new Float32Array(K),b=new Float32Array(K);N.fill(0),b.fill(0),X.push(N),F.push(b)}B.onaudioprocess=I=>{const N=I.inputBuffer,b=I.outputBuffer,k=N.numberOfChannels;for(let D=0;D<k;D+=1){const P=N.getChannelData(D),ae=b.getChannelData(D);q[D]=nT(E,A,C,V,M,X[D],F[D],q[D],K,P,ae)}};const z=i.sampleRate/2;return Ba({get bufferSize(){return v},get channelCount(){return B.channelCount},set channelCount(I){B.channelCount=I},get channelCountMode(){return B.channelCountMode},set channelCountMode(I){B.channelCountMode=I},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(I){B.channelInterpretation=I},get context(){return B.context},get inputs(){return[B]},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},addEventListener(...I){return B.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return B.dispatchEvent(I[0])},getFrequencyResponse(I,N,b){if(I.length!==N.length||N.length!==b.length)throw r();const k=I.length;for(let D=0;D<k;D+=1){const P=-Math.PI*(I[D]/z),ae=[Math.cos(P),Math.sin(P)],fe=ew(C,ae),me=ew(E,ae),le=o2(fe,me);N[D]=Math.sqrt(le[0]*le[0]+le[1]*le[1]),b[D]=Math.atan2(le[1],le[0])}},removeEventListener(...I){return B.removeEventListener(I[0],I[1],I[2])}},B)},u2=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,c2=(r,e,t,n,i,a)=>(u,c)=>{const d=u.createOscillator();return qt(d,c),vt(d,c,"detune"),vt(d,c,"frequency"),c.periodicWave!==void 0?d.setPeriodicWave(c.periodicWave):dt(d,c,"type"),e(t,()=>t(u))||xm(d),e(n,()=>n(u))||a(d,u),e(i,()=>i(u))||Rm(d),r(u,d),d},h2=r=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?r(e,t):(qt(n,t),vt(n,t,"orientationX"),vt(n,t,"orientationY"),vt(n,t,"orientationZ"),vt(n,t,"positionX"),vt(n,t,"positionY"),vt(n,t,"positionZ"),dt(n,t,"coneInnerAngle"),dt(n,t,"coneOuterAngle"),dt(n,t,"coneOuterGain"),dt(n,t,"distanceModel"),dt(n,t,"maxDistance"),dt(n,t,"panningModel"),dt(n,t,"refDistance"),dt(n,t,"rolloffFactor"),n)},d2=(r,e,t,n,i,a,u,c,d,p)=>(g,{coneInnerAngle:v,coneOuterAngle:E,coneOuterGain:C,distanceModel:A,maxDistance:V,orientationX:M,orientationY:B,orientationZ:K,panningModel:q,positionX:X,positionY:F,positionZ:z,refDistance:R,rolloffFactor:I,...N})=>{const b=g.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw u();qt(b,N);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=t(g,{...k,channelInterpretation:"speakers",numberOfInputs:6}),P=n(g,{...N,gain:1}),ae=n(g,{...k,gain:1}),fe=n(g,{...k,gain:0}),me=n(g,{...k,gain:0}),le=n(g,{...k,gain:0}),J=n(g,{...k,gain:0}),te=n(g,{...k,gain:0}),ee=i(g,256,6,1),L=a(g,{...k,curve:new Float32Array([1,1]),oversample:"none"});let Y=[M,B,K],ge=[X,F,z];const Re=new Float32Array(1);ee.onaudioprocess=({inputBuffer:he})=>{const qe=[d(he,Re,0),d(he,Re,1),d(he,Re,2)];qe.some((Ft,an)=>Ft!==Y[an])&&(b.setOrientation(...qe),Y=qe);const Ze=[d(he,Re,3),d(he,Re,4),d(he,Re,5)];Ze.some((Ft,an)=>Ft!==ge[an])&&(b.setPosition(...Ze),ge=Ze)},Object.defineProperty(fe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(me.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0});const pe={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(he){if(he>2)throw u();P.channelCount=he,b.channelCount=he},get channelCountMode(){return b.channelCountMode},set channelCountMode(he){if(he==="max")throw u();P.channelCountMode=he,b.channelCountMode=he},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(he){P.channelInterpretation=he,b.channelInterpretation=he},get coneInnerAngle(){return b.coneInnerAngle},set coneInnerAngle(he){b.coneInnerAngle=he},get coneOuterAngle(){return b.coneOuterAngle},set coneOuterAngle(he){b.coneOuterAngle=he},get coneOuterGain(){return b.coneOuterGain},set coneOuterGain(he){if(he<0||he>1)throw e();b.coneOuterGain=he},get context(){return b.context},get distanceModel(){return b.distanceModel},set distanceModel(he){b.distanceModel=he},get inputs(){return[P]},get maxDistance(){return b.maxDistance},set maxDistance(he){if(he<0)throw new RangeError;b.maxDistance=he},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get orientationX(){return ae.gain},get orientationY(){return fe.gain},get orientationZ(){return me.gain},get panningModel(){return b.panningModel},set panningModel(he){b.panningModel=he},get positionX(){return le.gain},get positionY(){return J.gain},get positionZ(){return te.gain},get refDistance(){return b.refDistance},set refDistance(he){if(he<0)throw new RangeError;b.refDistance=he},get rolloffFactor(){return b.rolloffFactor},set rolloffFactor(he){if(he<0)throw new RangeError;b.rolloffFactor=he},addEventListener(...he){return P.addEventListener(he[0],he[1],he[2])},dispatchEvent(...he){return P.dispatchEvent(he[0])},removeEventListener(...he){return P.removeEventListener(he[0],he[1],he[2])}};v!==pe.coneInnerAngle&&(pe.coneInnerAngle=v),E!==pe.coneOuterAngle&&(pe.coneOuterAngle=E),C!==pe.coneOuterGain&&(pe.coneOuterGain=C),A!==pe.distanceModel&&(pe.distanceModel=A),V!==pe.maxDistance&&(pe.maxDistance=V),M!==pe.orientationX.value&&(pe.orientationX.value=M),B!==pe.orientationY.value&&(pe.orientationY.value=B),K!==pe.orientationZ.value&&(pe.orientationZ.value=K),q!==pe.panningModel&&(pe.panningModel=q),X!==pe.positionX.value&&(pe.positionX.value=X),F!==pe.positionY.value&&(pe.positionY.value=F),z!==pe.positionZ.value&&(pe.positionZ.value=z),R!==pe.refDistance&&(pe.refDistance=R),I!==pe.rolloffFactor&&(pe.rolloffFactor=I),(Y[0]!==1||Y[1]!==0||Y[2]!==0)&&b.setOrientation(...Y),(ge[0]!==0||ge[1]!==0||ge[2]!==0)&&b.setPosition(...ge);const Ve=()=>{P.connect(b),r(P,L,0,0),L.connect(ae).connect(D,0,0),L.connect(fe).connect(D,0,1),L.connect(me).connect(D,0,2),L.connect(le).connect(D,0,3),L.connect(J).connect(D,0,4),L.connect(te).connect(D,0,5),D.connect(ee).connect(g.destination)},Oe=()=>{P.disconnect(b),c(P,L,0,0),L.disconnect(ae),ae.disconnect(D),L.disconnect(fe),fe.disconnect(D),L.disconnect(me),me.disconnect(D),L.disconnect(le),le.disconnect(D),L.disconnect(J),J.disconnect(D),L.disconnect(te),te.disconnect(D),D.disconnect(ee),ee.disconnect(g.destination)};return p(Ba(pe,b),Ve,Oe)},f2=r=>(e,{disableNormalization:t,imag:n,real:i})=>{const a=n instanceof Float32Array?n:new Float32Array(n),u=i instanceof Float32Array?i:new Float32Array(i),c=e.createPeriodicWave(u,a,{disableNormalization:t});if(Array.from(n).length<2)throw r();return c},rd=(r,e,t,n)=>r.createScriptProcessor(e,t,n),p2=(r,e)=>(t,n)=>{const i=n.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,n);const a=t.createStereoPanner();return qt(a,n),vt(a,n,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>i,set:u=>{if(u!==i)throw e()}}),a},m2=(r,e,t,n,i,a)=>{const c=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},v=(A,V,M,B)=>{const K=new Float32Array(16385),q=new Float32Array(16385);for(let N=0;N<16385;N+=1){const b=N/16384*d;K[N]=Math.cos(b),q[N]=Math.sin(b)}const X=t(A,{...p,gain:0}),F=n(A,{...g,curve:K}),z=n(A,{...g,curve:c}),R=t(A,{...p,gain:0}),I=n(A,{...g,curve:q});return{connectGraph(){V.connect(X),V.connect(z.inputs===void 0?z:z.inputs[0]),V.connect(R),z.connect(M),M.connect(F.inputs===void 0?F:F.inputs[0]),M.connect(I.inputs===void 0?I:I.inputs[0]),F.connect(X.gain),I.connect(R.gain),X.connect(B,0,0),R.connect(B,0,1)},disconnectGraph(){V.disconnect(X),V.disconnect(z.inputs===void 0?z:z.inputs[0]),V.disconnect(R),z.disconnect(M),M.disconnect(F.inputs===void 0?F:F.inputs[0]),M.disconnect(I.inputs===void 0?I:I.inputs[0]),F.disconnect(X.gain),I.disconnect(R.gain),X.disconnect(B,0,0),R.disconnect(B,0,1)}}},E=(A,V,M,B)=>{const K=new Float32Array(16385),q=new Float32Array(16385),X=new Float32Array(16385),F=new Float32Array(16385),z=Math.floor(16385/2);for(let le=0;le<16385;le+=1)if(le>z){const J=(le-z)/(16384-z)*d;K[le]=Math.cos(J),q[le]=Math.sin(J),X[le]=0,F[le]=1}else{const J=le/(16384-z)*d;K[le]=1,q[le]=0,X[le]=Math.cos(J),F[le]=Math.sin(J)}const R=e(A,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),I=t(A,{...p,gain:0}),N=n(A,{...g,curve:K}),b=t(A,{...p,gain:0}),k=n(A,{...g,curve:q}),D=n(A,{...g,curve:c}),P=t(A,{...p,gain:0}),ae=n(A,{...g,curve:X}),fe=t(A,{...p,gain:0}),me=n(A,{...g,curve:F});return{connectGraph(){V.connect(R),V.connect(D.inputs===void 0?D:D.inputs[0]),R.connect(I,0),R.connect(b,0),R.connect(P,1),R.connect(fe,1),D.connect(M),M.connect(N.inputs===void 0?N:N.inputs[0]),M.connect(k.inputs===void 0?k:k.inputs[0]),M.connect(ae.inputs===void 0?ae:ae.inputs[0]),M.connect(me.inputs===void 0?me:me.inputs[0]),N.connect(I.gain),k.connect(b.gain),ae.connect(P.gain),me.connect(fe.gain),I.connect(B,0,0),P.connect(B,0,0),b.connect(B,0,1),fe.connect(B,0,1)},disconnectGraph(){V.disconnect(R),V.disconnect(D.inputs===void 0?D:D.inputs[0]),R.disconnect(I,0),R.disconnect(b,0),R.disconnect(P,1),R.disconnect(fe,1),D.disconnect(M),M.disconnect(N.inputs===void 0?N:N.inputs[0]),M.disconnect(k.inputs===void 0?k:k.inputs[0]),M.disconnect(ae.inputs===void 0?ae:ae.inputs[0]),M.disconnect(me.inputs===void 0?me:me.inputs[0]),N.disconnect(I.gain),k.disconnect(b.gain),ae.disconnect(P.gain),me.disconnect(fe.gain),I.disconnect(B,0,0),P.disconnect(B,0,0),b.disconnect(B,0,1),fe.disconnect(B,0,1)}}},C=(A,V,M,B,K)=>{if(V===1)return v(A,M,B,K);if(V===2)return E(A,M,B,K);throw i()};return(A,{channelCount:V,channelCountMode:M,pan:B,...K})=>{if(M==="max")throw i();const q=r(A,{...K,channelCount:1,channelCountMode:M,numberOfInputs:2}),X=t(A,{...K,channelCount:V,channelCountMode:M,gain:1}),F=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:B});let{connectGraph:z,disconnectGraph:R}=C(A,V,X,F,q);Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"maxValue",{get:()=>1}),Object.defineProperty(F.gain,"minValue",{get:()=>-1});const I={get bufferSize(){},get channelCount(){return X.channelCount},set channelCount(D){X.channelCount!==D&&(N&&R(),{connectGraph:z,disconnectGraph:R}=C(A,D,X,F,q),N&&z()),X.channelCount=D},get channelCountMode(){return X.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw i();X.channelCountMode=D},get channelInterpretation(){return X.channelInterpretation},set channelInterpretation(D){X.channelInterpretation=D},get context(){return X.context},get inputs(){return[X]},get numberOfInputs(){return X.numberOfInputs},get numberOfOutputs(){return X.numberOfOutputs},get pan(){return F.gain},addEventListener(...D){return X.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return X.dispatchEvent(D[0])},removeEventListener(...D){return X.removeEventListener(D[0],D[1],D[2])}};let N=!1;const b=()=>{z(),N=!0},k=()=>{R(),N=!1};return a(Ba(I,q),b,k)}},g2=(r,e,t,n,i,a,u)=>(c,d)=>{const p=c.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,d);qt(p,d);const g=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(g!==null&&g.length<2)throw e();dt(p,{curve:g},"curve"),dt(p,d,"oversample");let v=null,E=!1;return u(p,"curve",V=>()=>V.call(p),V=>M=>(V.call(p,M),E&&(n(M)&&v===null?v=r(c,p):!n(M)&&v!==null&&(v(),v=null)),M)),i(p,()=>{E=!0,n(p.curve)&&(v=r(c,p))},()=>{E=!1,v!==null&&(v(),v=null)})},y2=(r,e,t,n,i)=>(a,{curve:u,oversample:c,...d})=>{const p=a.createWaveShaper(),g=a.createWaveShaper();qt(p,d),qt(g,d);const v=t(a,{...d,gain:1}),E=t(a,{...d,gain:-1}),C=t(a,{...d,gain:1}),A=t(a,{...d,gain:-1});let V=null,M=!1,B=null;const K={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(F){v.channelCount=F,E.channelCount=F,p.channelCount=F,C.channelCount=F,g.channelCount=F,A.channelCount=F},get channelCountMode(){return p.channelCountMode},set channelCountMode(F){v.channelCountMode=F,E.channelCountMode=F,p.channelCountMode=F,C.channelCountMode=F,g.channelCountMode=F,A.channelCountMode=F},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(F){v.channelInterpretation=F,E.channelInterpretation=F,p.channelInterpretation=F,C.channelInterpretation=F,g.channelInterpretation=F,A.channelInterpretation=F},get context(){return p.context},get curve(){return B},set curve(F){if(F!==null&&F.length<2)throw e();if(F===null)p.curve=F,g.curve=F;else{const z=F.length,R=new Float32Array(z+2-z%2),I=new Float32Array(z+2-z%2);R[0]=F[0],I[0]=-F[z-1];const N=Math.ceil((z+1)/2),b=(z+1)/2-1;for(let k=1;k<N;k+=1){const D=k/N*b,P=Math.floor(D),ae=Math.ceil(D);R[k]=P===ae?F[P]:(1-(D-P))*F[P]+(1-(ae-D))*F[ae],I[k]=P===ae?-F[z-1-P]:-((1-(D-P))*F[z-1-P])-(1-(ae-D))*F[z-1-ae]}R[N]=z%2===1?F[N-1]:(F[N-2]+F[N-1])/2,p.curve=R,g.curve=I}B=F,M&&(n(B)&&V===null?V=r(a,v):V!==null&&(V(),V=null))},get inputs(){return[v]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(F){p.oversample=F,g.oversample=F},addEventListener(...F){return v.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return v.dispatchEvent(F[0])},removeEventListener(...F){return v.removeEventListener(F[0],F[1],F[2])}};u!==null&&(K.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==K.oversample&&(K.oversample=c);const q=()=>{v.connect(p).connect(C),v.connect(E).connect(g).connect(A).connect(C),M=!0,n(B)&&(V=r(a,v))},X=()=>{v.disconnect(p),p.disconnect(C),v.disconnect(E),E.disconnect(g),g.disconnect(A),A.disconnect(C),M=!1,V!==null&&(V(),V=null)};return i(Ba(K,C),q,X)},nr=()=>new DOMException("","NotSupportedError"),_2={numberOfChannels:1},v2=(r,e,t,n,i)=>class extends r{constructor(u,c,d){let p;if(typeof u=="number"&&c!==void 0&&d!==void 0)p={length:c,numberOfChannels:u,sampleRate:d};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:v,sampleRate:E}={..._2,...p},C=n(v,g,E);e(iu,()=>iu(C))||C.addEventListener("statechange",(()=>{let A=0;const V=M=>{this._state==="running"&&(A>0?(C.removeEventListener("statechange",V),M.stopImmediatePropagation(),this._waitForThePromiseToSettle(M)):A+=1)};return V})()),super(C,v),this._length=g,this._nativeOfflineAudioContext=C,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,TP(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},w2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},E2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),v={...w2,...p},E=t(g,v),C=a(g),A=C?n():null,V=d.sampleRate/2;super(d,!1,E,A),this._detune=e(this,C,E.detune,153600,-153600),this._frequency=e(this,C,E.frequency,V,-V),this._nativeOscillatorNode=E,this._onended=null,this._oscillatorNodeRenderer=A,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?d:g}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){Va(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),ms(this)&&gu(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},T2=(r,e,t,n,i)=>()=>{const a=new WeakMap;let u=null,c=null,d=null;const p=async(g,v)=>{let E=t(g);const C=pn(E,v);if(!C){const A={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,detune:E.detune.value,frequency:E.frequency.value,periodicWave:u===null?void 0:u,type:E.type};E=e(v,A),c!==null&&E.start(c),d!==null&&E.stop(d)}return a.set(v,E),C?(await r(v,g.detune,E.detune),await r(v,g.frequency,E.frequency)):(await n(v,g.detune,E.detune),await n(v,g.frequency,E.frequency)),await i(g,v,E),E};return{set periodicWave(g){u=g},set start(g){c=g},set stop(g){d=g},render(g,v){const E=a.get(v);return E!==void 0?Promise.resolve(E):p(g,v)}}},I2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},S2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),v={...I2,...p},E=t(g,v),C=a(g),A=C?n():null;super(d,!1,E,A),this._nativePannerNode=E,this._orientationX=e(this,C,E.orientationX,In,Jn),this._orientationY=e(this,C,E.orientationY,In,Jn),this._orientationZ=e(this,C,E.orientationZ,In,Jn),this._positionX=e(this,C,E.positionX,In,Jn),this._positionY=e(this,C,E.positionY,In,Jn),this._positionZ=e(this,C,E.positionZ,In,Jn),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},C2=(r,e,t,n,i,a,u,c,d,p)=>()=>{const g=new WeakMap;let v=null;const E=async(C,A)=>{let V=null,M=a(C);const B={channelCount:M.channelCount,channelCountMode:M.channelCountMode,channelInterpretation:M.channelInterpretation},K={...B,coneInnerAngle:M.coneInnerAngle,coneOuterAngle:M.coneOuterAngle,coneOuterGain:M.coneOuterGain,distanceModel:M.distanceModel,maxDistance:M.maxDistance,panningModel:M.panningModel,refDistance:M.refDistance,rolloffFactor:M.rolloffFactor},q=pn(M,A);if("bufferSize"in M)V=n(A,{...B,gain:1});else if(!q){const X={...K,orientationX:M.orientationX.value,orientationY:M.orientationY.value,orientationZ:M.orientationZ.value,positionX:M.positionX.value,positionY:M.positionY.value,positionZ:M.positionZ.value};M=i(A,X)}if(g.set(A,V===null?M:V),V!==null){if(v===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new u(6,C.context.length,A.sampleRate),D=e(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(k.destination),v=(async()=>{const P=await Promise.all([C.orientationX,C.orientationY,C.orientationZ,C.positionX,C.positionY,C.positionZ].map(async(ae,fe)=>{const me=t(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe===0?1:0});return await c(k,ae,me.offset),me}));for(let ae=0;ae<6;ae+=1)P[ae].connect(D,0,ae),P[ae].start(0);return p(k)})()}const X=await v,F=n(A,{...B,gain:1});await d(C,A,F);const z=[];for(let k=0;k<X.numberOfChannels;k+=1)z.push(X.getChannelData(k));let R=[z[0][0],z[1][0],z[2][0]],I=[z[3][0],z[4][0],z[5][0]],N=n(A,{...B,gain:1}),b=i(A,{...K,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]});F.connect(N).connect(b.inputs[0]),b.connect(V);for(let k=128;k<X.length;k+=128){const D=[z[0][k],z[1][k],z[2][k]],P=[z[3][k],z[4][k],z[5][k]];if(D.some((ae,fe)=>ae!==R[fe])||P.some((ae,fe)=>ae!==I[fe])){R=D,I=P;const ae=k/A.sampleRate;N.gain.setValueAtTime(0,ae),N=n(A,{...B,gain:0}),b=i(A,{...K,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:I[0],positionY:I[1],positionZ:I[2]}),N.gain.setValueAtTime(1,ae),F.connect(N).connect(b.inputs[0]),b.connect(V)}}return V}return q?(await r(A,C.orientationX,M.orientationX),await r(A,C.orientationY,M.orientationY),await r(A,C.orientationZ,M.orientationZ),await r(A,C.positionX,M.positionX),await r(A,C.positionY,M.positionY),await r(A,C.positionZ,M.positionZ)):(await c(A,C.orientationX,M.orientationX),await c(A,C.orientationY,M.orientationY),await c(A,C.orientationZ,M.orientationZ),await c(A,C.positionX,M.positionX),await c(A,C.positionY,M.positionY),await c(A,C.positionZ,M.positionZ)),ja(M)?await d(C,A,M.inputs[0]):await d(C,A,M),M};return{render(C,A){const V=g.get(A);return V!==void 0?Promise.resolve(V):E(C,A)}}},A2={disableNormalization:!1},N2=(r,e,t,n)=>class iT{constructor(a,u){const c=e(a),d=n({...A2,...u}),p=r(c,d);return t.add(p),p}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===iT.prototype||t.has(a)}},x2=(r,e)=>(t,n,i)=>(r(n).replay(i),e(n,t,i)),R2=(r,e,t)=>async(n,i,a)=>{const u=r(n);await Promise.all(u.activeInputs.map((c,d)=>Array.from(c).map(async([p,g])=>{const E=await e(p).render(p,i),C=n.context.destination;!t(p)&&(n!==C||!t(n))&&E.connect(a,g,d)})).reduce((c,d)=>[...c,...d],[]))},P2=(r,e,t)=>async(n,i,a)=>{const u=e(n);await Promise.all(Array.from(u.activeInputs).map(async([c,d])=>{const g=await r(c).render(c,i);t(c)||g.connect(a,d)}))},k2=(r,e,t,n)=>i=>r(iu,()=>iu(i))?Promise.resolve(r(n,n)).then(a=>{if(!a){const u=t(i,512,0,1);i.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>i.currentTime,u.connect(i.destination)}return i.startRendering()}):new Promise(a=>{const u=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=c=>{u.disconnect(),a(c.renderedBuffer)},u.connect(i.destination),i.startRendering()}),D2=r=>(e,t)=>r.set(e,t),b2=(r,e,t,n,i,a,u,c)=>(d,p)=>t(d).render(d,p).then(()=>Promise.all(Array.from(n(p)).map(g=>t(g).render(g,p)))).then(()=>i(p)).then(g=>(typeof g.copyFromChannel!="function"?(u(g),Cm(g)):e(a,()=>a(g))||c(g),r.add(g),g)),V2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},M2=(r,e,t,n,i,a)=>class extends r{constructor(c,d){const p=i(c),g={...V2,...d},v=t(p,g),E=a(p),C=E?n():null;super(c,!1,v,C),this._pan=e(this,E,v.pan)}get pan(){return this._pan}},O2=(r,e,t,n,i)=>()=>{const a=new WeakMap,u=async(c,d)=>{let p=t(c);const g=pn(p,d);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=e(d,v)}return a.set(d,p),g?await r(d,c.pan,p.pan):await n(d,c.pan,p.pan),ja(p)?await i(c,d,p.inputs[0]):await i(c,d,p),p};return{render(c,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):u(c,d)}}},F2=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},L2=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),i=URL.createObjectURL(t);let a=!1,u=!1;try{await n.audioWorklet.addModule(i);const c=new r(n,"a",{numberOfOutputs:0}),d=n.createOscillator();c.port.onmessage=()=>a=!0,c.onprocessorerror=()=>u=!0,d.connect(c),d.start(0),await n.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(i)}return a&&!u},j2=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{n.disconnect(),i(t.currentTime!==0)},t.startRendering()})},B2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},U2=(r,e,t,n,i,a,u)=>class extends r{constructor(d,p){const g=i(d),v={...B2,...p},E=t(g,v),A=a(g)?n():null;super(d,!0,E,A),this._isCurveNullified=!1,this._nativeWaveShaperNode=E,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},z2=(r,e,t)=>()=>{const n=new WeakMap,i=async(a,u)=>{let c=e(a);if(!pn(c,u)){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=r(u,p)}return n.set(u,c),ja(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=n.get(u);return c!==void 0?Promise.resolve(c):i(a,u)}}},$2=()=>typeof window>"u"?null:window,q2=(r,e)=>t=>{t.copyFromChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let v=u<0?-u:0;v+u<d&&v<g;v+=1)n[v]=p[v+u]},t.copyToChannel=(n,i,a=0)=>{const u=r(a),c=r(i);if(c>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(c),g=n.length;for(let v=u<0?-u:0;v+u<d&&v<g;v+=1)p[v+u]=n[v]}},W2=r=>e=>{e.copyFromChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(n,i,a=0)=>{const u=r(a),c=r(i);if(u<e.length)return t.call(e,n,c,u)})(e.copyToChannel)},G2=r=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),r(e,"buffer",i=>()=>{const a=i.call(e);return a===n?null:a},i=>a=>i.call(e,a===null?n:a))},K2=(r,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const i=t.createBufferSource();e(n,()=>{const c=n.numberOfInputs;for(let d=0;d<c;d+=1)i.connect(n,0,d)},()=>i.disconnect(n))},oT=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),aT=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},vu=(r,e,t,n)=>{let i=r;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:a,set:u}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(r,e,{get:t(a),set:n(u)})},H2=r=>({...r,channelCount:r.numberOfOutputs}),Q2=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},lT=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;lT(r,e,t+1e-7)}},X2=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Y2=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Z2=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},km=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},uT=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Dm=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},J2=r=>{r.start=(e=>(t=0,n=0,i)=>{const a=r.buffer,u=a===null?n:Math.min(a.duration,n);a!==null&&u>a.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,u,i)})(r.start)},cT=(r,e)=>{const t=e.createGain();r.connect(t);const n=(i=>()=>{i.call(r,t),r.removeEventListener("ended",n)})(r.disconnect);r.addEventListener("ended",n),Ba(r,t),r.stop=(i=>{let a=!1;return(u=0)=>{if(a)try{i.call(r,u)}catch{t.gain.setValueAtTime(0,u)}else i.call(r,u),a=!0}})(r.stop)},wu=(r,e)=>t=>{const n={value:r};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},eD=eP(vo),tD=oP(vo),nD=ck(td),hT=new WeakMap,rD=Ck(hT),xr=UP(new Map,new WeakMap),Gr=$2(),dT=Wk(xr,_o),bm=Sk(Bn),sn=R2(Bn,bm,po),sD=cP(dT,mt,sn),xt=Nk(KE),mi=u2(Gr),wt=Bk(mi),fT=new WeakMap,pT=_k(wu),sd=Qk(Gr),mT=Ok(sd),gT=Fk(Gr),iD=Lk(Gr),jp=Yk(Gr),on=VP(tP($E),iP(eD,tD,Vh,nD,Mh,Bn,rD,mu,mt,vo,ms,po,th),xr,Mk(Op,Mh,Bn,mt,su,ms),_o,nd,nr,ok(Vh,Op,Bn,mt,su,xt,ms,wt),dk(fT,Bn,pi),pT,xt,mT,gT,iD,wt,jp),oD=uP(on,sD,_o,dT,xt,wt),Vm=new WeakSet,tw=Gk(Gr),yT=JP(new Uint32Array(1)),Mm=q2(yT,_o),Om=W2(yT),aD=dP(Vm,xr,nr,tw,mi,F2(tw),Mm,Om),id=aP(Nr),_T=P2(bm,yu,po),ws=HP(_T),Eu=Hk(id,xr,X2,Y2,Z2,km,uT,Dm,J2,G2(vu),cT),Es=x2(Ak(yu),_T),lD=mP(ws,Eu,mt,Es,sn),Hr=MP(nP(WE),fT,GE,OP,HR,QR,XR,YR,ZR,bp,UE,sd,lT),uD=pP(on,lD,Hr,Cn,Eu,xt,wt,wu),cD=IP(on,SP,_o,Cn,Xk(Nr,vu),xt,wt,sn),hD=BP(ws,rT,mt,Es,sn),wo=D2(hT),dD=jP(on,Hr,hD,nd,rT,xt,wt,wo),Ua=$k(vo,gT),fD=K2(Cn,Ua),za=Jk(sd,fD),pD=qP(za,mt,sn),mD=$P(on,pD,za,xt,wt),gD=KP(Pm,mt,sn),yD=GP(on,gD,Pm,xt,wt,H2),_D=n2(id,Eu,Nr,Ua),od=t2(id,xr,_D,km,Dm),vD=ZP(ws,od,mt,Es,sn),wD=YP(on,Hr,vD,od,xt,wt,wu),vT=r2(nr,vu),ED=nk(vT,mt,sn),TD=tk(on,ED,vT,xt,wt,wo),ID=uk(ws,sT,mt,Es,sn),SD=lk(on,Hr,ID,sT,xt,wt,wo),wT=s2(nr),CD=mk(ws,wT,mt,Es,sn),AD=pk(on,Hr,CD,wT,nr,xt,wt,wo),ND=Ik(ws,Nr,mt,Es,sn),xD=Tk(on,Hr,ND,Nr,xt,wt),RD=l2(nd,Cn,rd,nr),Fm=k2(xr,Nr,rd,j2(Nr,mi)),PD=Vk(Eu,mt,mi,sn,Fm),kD=i2(RD),DD=Dk(on,kD,PD,xt,wt,wo),bD=CP(Hr,za,od,rd,nr,oT,wt,vu),ET=new WeakMap,VD=zk(cD,bD,pT,wt,ET,wu),TT=c2(id,xr,km,uT,Dm,cT),MD=T2(ws,TT,mt,Es,sn),OD=E2(on,Hr,TT,MD,xt,wt,wu),IT=QP(Eu),FD=y2(IT,Cn,Nr,aT,Ua),ad=g2(IT,Cn,FD,aT,Ua,sd,vu),LD=d2(Vh,Cn,za,Nr,rd,ad,nr,Mh,oT,Ua),ST=h2(LD),jD=C2(ws,za,od,Nr,ST,mt,mi,Es,sn,Fm),BD=S2(on,Hr,ST,jD,xt,wt,wo),UD=f2(_o),zD=N2(UD,xt,new WeakSet,Q2),$D=m2(za,Pm,Nr,ad,nr,Ua),CT=p2($D,nr),qD=O2(ws,CT,mt,Es,sn),WD=M2(on,Hr,CT,qD,xt,wt),GD=z2(ad,mt,sn),KD=U2(on,Cn,ad,GD,xt,wt,wo),HD=Uk(Gr),QD=vk(Gr),XD=new WeakMap,YD=xk(XD,mi),ZD=HD?sP(xr,nr,yk(Gr),QD,wk(JR),xt,YD,wt,jp,new WeakMap,new WeakMap,L2(jp,mi),Gr):void 0,JD=jk(mT,wt),eb=ik(Vm,xr,sk,gk,new WeakSet,xt,JD,Dh,iu,Mm,Om),tb=FP(ZD,oD,aD,uD,dD,mD,yD,wD,TD,eb,SD,AD,xD,DD,VD,OD,BD,zD,WD,KD),nb=Rk(ET),rb=rk(nr,mi),sb=b2(Vm,xr,bm,nb,Fm,Dh,Mm,Om),ib=v2(tb,xr,Cn,rb,sb),nw=(r,e,t)=>{const n=new ib(r.numberOfChannels,Math.round(t*r.sampleRate),r.sampleRate),i=n.createBiquadFilter(),a=n.createBufferSource();return i.frequency.value=240,i.type="lowpass",a.buffer=r,a.connect(i).connect(n.destination),a.start(0,e,t),n.startRendering().then(u=>{const c=u.getChannelData(0),d=u.sampleRate;return{channelData:c,sampleRate:d}})},ob=qR({analyze:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await nw(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("analyze",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])},guess:({call:r})=>async(...e)=>{var t;const[n,i,a]=e,u=typeof i=="number"?i:0,c=typeof a=="number"?a:n.duration-u,{channelData:d,sampleRate:p}=await nw(n,u,c),g=typeof i=="object"?i:typeof a=="object"?a:(t=e[3])!==null&&t!==void 0?t:null;return r("guess",{channelData:d,sampleRate:p,...g===null?g:{tempoSettings:g}},[d.buffer])}}),ab=r=>{const e=new Worker(r);return ob(e)},lb=(r,e)=>{let t=null;return()=>{if(t!==null)return t;const n=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return t=r(i),setTimeout(()=>URL.revokeObjectURL(i)),t}},ub=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:c}})=>{const u=r[i];try{if(void 0===u)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const c=new Map,u=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(c);return c.set(o,(()=>{n(),t.close(),c.delete(o)})),{result:o}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=u(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},h=(e,t,r)=>{const n=e.length,o=[];let s=!1;for(let a=0;a<n;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=r/4-1);return s&&o.push(n-1),o},d=(e,t,r)=>{const n=(e=>{let t=0;const r=e.length;for(let n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t})(e),o=.3*n;let s=[],a=n-.05*n;if(n>.25)for(;s.length<30&&a>=o;)s=h(e,a,t),a-=.05*n;const i=(e=>{const t=[];return e.forEach(((r,n)=>{const o=Math.min(e.length-n,10);for(let s=1;s<o;s+=1){const o=e[n+s]-r;t.some((e=>e.interval===o&&(e.peaks.push(r),!0)))||t.push({interval:o,peaks:[r]})}})),t})(s),c=((e,t,r={})=>{var n,o;const s=Math.max(0,null!==(n=r.maxTempo)&&void 0!==n?n:180),a=Math.max(0,null!==(o=r.minTempo)&&void 0!==o?o:90),i=[];return e.forEach((e=>{let r=60/(e.interval/t);for(;r<a;)r*=2;for(;r>s;)r/=2;if(r<a)return;let n=!1,o=e.peaks.length;i.forEach((t=>{if(t.tempo===r&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],n=!0),t.tempo>r-.5&&t.tempo<r+.5){const n=2*Math.abs(t.tempo-r);o+=(1-n)*t.peaks.length,t.score+=(1-n)*e.peaks.length}})),n||i.push({peaks:e.peaks,score:o,tempo:r})})),i})(i,t,r);return c.sort(((e,t)=>t.score-e.score)),c},p=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo},f=(e,t,r)=>{const n=d(e,t,r);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:o,tempo:s}=n[0],a=Math.round(s),i=60/a;o.sort(((e,t)=>e-t));let c=o[0]/t;for(;c>i;)c-=i;return{bpm:a,offset:c,tempo:s}};l(self,{analyze:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:p(e,t,r)}),guess:({channelData:e,sampleRate:t,tempoSettings:r})=>({result:f(e,t,r)})})})()})();`,cb=lb(ab,ub),hb=(...r)=>cb().analyze(...r),Ln=new PI({log:!0,corePath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.js",wasmPath:"https://unpkg.com/@ffmpeg/core@0.12.4/dist/ffmpeg-core.wasm"}),rw=async()=>{try{console.log("Starting FFmpeg load..."),await Ln.load({corePath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.js",wasmPath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.15/dist/ffmpeg-core.wasm"}),console.log("FFmpeg loaded successfully")}catch(r){throw console.error("FFmpeg load error:",r),r instanceof Error&&console.error({message:r.message,name:r.name,stack:r.stack,cause:r.cause}),alert("Failed to load FFmpeg. Please check your internet connection."),r}},db=({onCreateSlideshow:r,onLoadSession:e,onClose:t})=>{const[n,i]=ce.useState(!0),[a,u]=ce.useState(!1);return T.jsx("div",{className:"landing-wrapper",children:T.jsxs("div",{className:"landing-container",children:[T.jsxs("div",{className:"landing-header",children:[T.jsx("button",{className:"info-button",onClick:()=>u(!0),children:T.jsx("span",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid white",fontSize:"16px"},children:"i"})}),T.jsx("h1",{className:"app-title",children:"Groove Slider"}),T.jsx("button",{className:"close-landing-button",onClick:t,children:T.jsx(io,{size:24})})]}),T.jsxs("div",{className:"retro-background",children:[T.jsx("div",{className:"wave-pattern top"}),T.jsx("div",{className:"wave-pattern bottom"}),T.jsxs("div",{className:"project-management",children:[T.jsx("button",{className:"create-button",onClick:r,children:"Create Slideshow"}),T.jsx("button",{className:"sessions-toggle-button",onClick:()=>i(!n),children:n?"Hide Saved Projects":"Show Saved Projects"}),n&&T.jsx("div",{className:"landing-sessions-container",children:T.jsx(MR,{visible:!0,onLoadSession:e})})]})]}),T.jsx("div",{className:"featured-section",children:T.jsxs("button",{className:"use-style-button",children:[T.jsx(Up,{size:18}),T.jsx("span",{children:"Follow Us "})]})}),a&&T.jsx(vb,{isOpen:a,onClose:()=>u(!1)})]})})},fb=({onBPMChange:r,isAnalyzing:e})=>{const[t,n]=ce.useState([]),[i,a]=ce.useState(0),u=()=>{if(n(newTaps),newTaps.length>1){const c=[];for(let g=1;g<newTaps.length;g++)c.push(newTaps[g]-newTaps[g-1]);const d=c.reduce((g,v)=>g+v)/c.length,p=Math.round(6e4/d);p>=60&&p<=180&&(a(p),r(p))}};return ce.useEffect(()=>{const c=setTimeout(()=>{t.length>0&&Date.now()-t[t.length-1]>2e3&&n([])},2e3);return()=>clearTimeout(c)},[t]),T.jsxs("div",{className:"tap-tempo",children:[T.jsxs("button",{onClick:u,className:"tap-button",children:["Tap Tempo",T.jsx("span",{className:"bpm-text",children:i>0?`${i} BPM`:""})]}),e&&T.jsxs("div",{className:"bpm-analyzer",children:[T.jsx("div",{className:"spinner"}),T.jsx("span",{children:"Analyzing beat..."})]})]})},pb=({onUpload:r,onBPMChange:e,currentBPM:t,onStartPointChange:n,audioRef:i,musicUrl:a,musicStartPoint:u})=>{const[c,d]=ce.useState(0),[p,g]=ce.useState(!1),[v,E]=ce.useState(1),[C,A]=ce.useState(0),V=ce.useRef(null),[M,B]=ce.useState(""),[K,q]=ce.useState(!1),X=async I=>{try{const N=new(window.AudioContext||window.webkitAudioContext),k=await(await fetch(I)).arrayBuffer(),D=await N.decodeAudioData(k),P=await hb(D);return P>140?Math.round(P/2):Math.round(P)}catch(N){return console.error("BPM detection failed:",N),120}},F=()=>{V.current&&d(V.current.currentTime)};ce.useEffect(()=>(V.current&&i.current&&(V.current.addEventListener("timeupdate",F),V.current.addEventListener("timeupdate",I=>{i.current.currentTime=I.target.currentTime}),V.current.addEventListener("loadedmetadata",()=>{A(V.current.duration)})),()=>{V.current&&i.current&&(V.current.removeEventListener("timeupdate",F),V.current.removeEventListener("timeupdate",I=>{i.current.currentTime=I.target.currentTime}))}),[i,V]);const z=()=>{V.current&&(p?V.current.pause():V.current.play(),g(!p))},R=I=>{const N=Math.floor(I/60),b=Math.floor(I%60);return`${N}:${b.toString().padStart(2,"0")}`};return T.jsx("div",{className:"music-panel",children:T.jsxs("div",{className:"music-controls",children:[T.jsx("div",{className:"music-upload",children:T.jsxs("label",{className:"upload-button",children:[T.jsx(Up,{className:"icon"}),T.jsx("span",{children:"Upload Music"}),T.jsx("input",{type:"file",accept:"audio/*",onChange:I=>{const N=I.target.files[0];if(N){const b=URL.createObjectURL(N);B(N.name),q(!0),X(b).then(k=>{console.log(`Detected BPM: ${k}`),e(k),q(!1)}).catch(k=>{console.error("BPM detection failed:",k),q(!1)}),r(b)}},className:"hidden-input"})]})}),T.jsxs("div",{className:"bpm-control",children:[T.jsx(fb,{onBPMChange:e}),K&&T.jsxs("div",{className:"bpm-analyzer",children:[T.jsx(cS,{className:"spinner",size:18}),T.jsx("span",{children:"Analyzing beat..."})]}),T.jsxs("div",{className:"manual-bpm",children:[T.jsxs("label",{children:[T.jsx("span",{children:"AUTO-BPM"}),T.jsx("span",{children:"DETECTION:"})]}),T.jsx("input",{type:"number",min:"60",max:"180",value:t,onChange:I=>e(parseInt(I.target.value)),className:"bpm-input"})]})]}),T.jsxs("div",{className:"music-player",children:[T.jsx("audio",{ref:V,src:a,onTimeUpdate:F}),a&&T.jsx("div",{className:"music-info",children:T.jsx("span",{children:M||"Track Title"})}),T.jsx("button",{className:"audio-control-button",onClick:z,children:p?T.jsx(aw,{size:32}):T.jsx(lw,{size:32})}),a&&T.jsx(OR,{audioUrl:a,audioRef:i,onStartPointChange:I=>{n(I),V.current&&(V.current.currentTime=I)},musicStartPoint:u}),T.jsxs("div",{className:"audio-progress",children:[T.jsxs("div",{className:"time-display",children:[T.jsx("span",{children:R(c)}),T.jsx("span",{children:R(C)})]}),T.jsx("input",{type:"range",min:"0",max:C||100,value:c,onChange:I=>{const N=parseFloat(I.target.value);V.current&&(V.current.currentTime=N)},className:"progress-slider"})]}),T.jsxs("div",{className:"volume-control",children:[T.jsx(DS,{size:20}),T.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:v,onChange:I=>{const N=parseFloat(I.target.value);V.current&&(V.current.volume=N),E(N)},className:"volume-slider"})]})]})]})})},mb=({currentIndex:r,totalSlides:e,onProgressClick:t})=>(console.log("Rendering ProgressBar",{currentIndex:r,totalSlides:e,bars:[...Array(e)].map((n,i)=>({index:i,isActive:i===r}))}),T.jsx("div",{className:"progress-container",children:[...Array(e)].map((n,i)=>T.jsx("div",{className:`progress-bar ${i===r?"active":""}`,style:{backgroundColor:i===r?"white":"rgba(255,255,255,0.3)"},onClick:()=>t(i)},i))})),gb=({onPrevious:r,onNext:e,isFirstSlide:t,isLastSlide:n})=>T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:r,className:"nav-button prev",disabled:t,children:T.jsx(Ki,{})}),T.jsx("button",{onClick:e,className:"nav-button next",disabled:n,children:T.jsx(Zs,{})})]}),yb=({onFileUpload:r})=>T.jsx("div",{className:"empty-state",children:T.jsxs("label",{htmlFor:"file-upload",className:"file-upload-label",children:[T.jsx(HI,{size:48}),T.jsx("span",{children:"Add Images"}),T.jsx("input",{type:"file",id:"file-upload",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]})}),_b=({isOpen:r,progress:e,message:t})=>r?T.jsx("div",{className:"modal-overlay",children:T.jsx("div",{className:"modal-content export-progress",children:T.jsxs("div",{className:"loading-container",children:[T.jsx("h3",{className:"progress-title",children:t}),T.jsx("div",{className:"progress-bar-container",children:T.jsx("div",{className:"progress-bar-fill",style:{width:`${e||0}%`,transition:"width 0.3s ease-in-out"}})}),T.jsxs("div",{className:"progress-percentage",children:[Math.round(e||0),"%"]})]})})}):null,vb=({isOpen:r,onClose:e})=>{const[t,n]=ce.useState(null),[i,a]=ce.useState(""),[u,c]=ce.useState(!0);ce.useEffect(()=>{r&&(async()=>{try{if(console.group("🔍 License Fetch Debugging"),console.log("Firestore DB:",ep),console.log("Modal Open:",r),!ep){console.error("❌ Firestore DB not initialized");return}const E=Px(ep,"content","license");console.log("📄 Document Reference:",E);try{const C=await zx(E);if(console.log("📋 Document Exists:",C.exists()),C.exists()){const A=C.data();console.log("📝 License Data:",A),A&&A.text?(console.log("✅ License Text Found"),a(A.text)):(console.warn("❗ No text field in license document"),a("No license text found."))}else console.warn("❌ No such document in Firestore"),a("License document does not exist.")}catch(C){if(console.error("❌ Snapshot Error:",C),C.code==="unavailable"){console.log("🌐 Offline mode: Attempting to use cached data");const A=await getDocFromCache(E);if(A.exists()){const V=A.data();a(V.text||"Cached license text")}else a("License unavailable offline")}else a(`Error loading license: ${C.message}`)}}catch(E){console.error("❌ Detailed Firebase Error:",E),a(`Error loading license: ${E.message}`)}finally{console.groupEnd(),c(!1)}})()},[r]);const d=v=>{n(v)},p=()=>{n(null)},g=()=>{switch(t){case"credits":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"Credits"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"credits-content",children:[T.jsxs("div",{className:"developer-profile",children:[T.jsx("div",{className:"developer-avatar",children:T.jsx(qI,{size:64})}),T.jsx("h3",{children:"Ben Hayes"}),T.jsx("p",{className:"developer-title",children:"Creator & Developer"})]}),T.jsxs("div",{className:"company-info",children:[T.jsx("h4",{children:"Hayzer Apps"}),T.jsx("p",{children:"Groove Slider was designed, developed, and maintained by Ben Hayes as the sole developer."})]}),T.jsxs("div",{className:"developer-note",children:[T.jsx("p",{children:"From concept to implementation, every aspect of this app was crafted to provide an elegant way to create musical slideshows of your favorite moments."}),T.jsx("p",{children:"I hope you enjoy using Groove Slider as much as I enjoyed creating it."})]}),T.jsxs("div",{className:"contact-section",children:[T.jsx("h4",{children:"Connect"}),T.jsx("p",{children:"Have feedback or suggestions? I'd love to hear from you!"}),T.jsx("p",{children:"Email: contact@hayzerapps.com"})]})]})})]});case"feedback":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"Feedback"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"feedback-form",children:[T.jsx("p",{children:"We'd love to hear your thoughts on Groove Slider!"}),T.jsx("textarea",{placeholder:"Share your feedback here...",className:"feedback-textarea",rows:6}),T.jsx("button",{className:"submit-button",children:"Submit Feedback"})]})})]});case"restore":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"Restore Purchase"})]}),T.jsxs("div",{className:"section-body",children:[T.jsx("p",{children:"Tap the button below to restore your previous purchases."}),T.jsx("button",{className:"restore-button",children:"Restore Purchases"})]})]});case"unsubscribe":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"How to Unsubscribe"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"unsubscribe-info",children:[T.jsx("p",{children:"For information on how to manage or cancel your subscription, please visit Google's official support page:"}),T.jsx("button",{className:"external-link-button",onClick:()=>window.open("https://support.google.com/googleplay/answer/7018481?hl=en&co=GENIE.Platform%3DAndroid","_blank"),children:"Google Play Subscription Help"})]})})]});case"privacy":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"Privacy Policy"})]}),T.jsx("div",{className:"section-body",children:T.jsxs("div",{className:"privacy-content",children:[T.jsx("h3",{children:"Privacy Policy for Groove Slider"}),T.jsx("p",{children:"Last Updated: March 2, 2025"}),T.jsx("h4",{children:"Introduction"}),T.jsx("p",{children:"Welcome to Groove Slider. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we handle your data when you use our application and tell you about your privacy rights."}),T.jsx("h4",{children:"What Data We Collect"}),T.jsx("p",{children:"Groove Slider requires access to the following on your device:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Image files (photos, pictures) that you select to include in your slideshows"}),T.jsx("li",{children:"Audio files (music, sounds) that you select to add to your slideshows"})]}),T.jsx("h4",{children:"How We Use Your Data"}),T.jsx("p",{children:"We use your data for the following purposes:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"To create slideshows with your selected images"}),T.jsx("li",{children:"To add your selected music to your slideshows"}),T.jsx("li",{children:"To export these slideshows as MP4 video files to your device"})]}),T.jsx("h4",{children:"Data Processing"}),T.jsx("p",{children:"All data processing happens locally on your device. Your images and music:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Are not uploaded to our servers"}),T.jsx("li",{children:"Are not shared with third parties"}),T.jsx("li",{children:"Are only accessed when you explicitly grant permission"}),T.jsx("li",{children:"Are only used for the purpose of creating and exporting your slideshows"})]}),T.jsx("h4",{children:"Storage"}),T.jsx("p",{children:"The app stores:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Temporary copies of your selected images and music while processing"}),T.jsx("li",{children:"Your slideshow settings and preferences"}),T.jsx("li",{children:"Completed MP4 video files that are saved to your device storage"})]}),T.jsx("h4",{children:"Third-Party Services"}),T.jsx("p",{children:"Our app does not integrate with third-party analytics or advertising services."}),T.jsx("h4",{children:"Your Rights"}),T.jsx("p",{children:"You have the right to:"}),T.jsxs("ul",{children:[T.jsx("li",{children:"Delete your saved slideshows and preferences by uninstalling the app"}),T.jsx("li",{children:"Control what files you share with the app through your device permissions"})]}),T.jsx("h4",{children:"Children's Privacy"}),T.jsx("p",{children:"Our service is not directed to anyone under the age of 13. We do not knowingly collect personal information from children."}),T.jsx("h4",{children:"Changes to This Privacy Policy"}),T.jsx("p",{children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'}),T.jsx("h4",{children:"Contact Us"}),T.jsx("p",{children:"If you have any questions about this Privacy Policy, please contact us at: contact@grooveslider.app"})]})})]});case"license":return T.jsxs("div",{className:"section-content",children:[T.jsxs("header",{className:"section-header",children:[T.jsx("button",{className:"back-button",onClick:p,children:T.jsx(Ki,{size:24})}),T.jsx("h2",{children:"License Agreement"})]}),T.jsx("div",{className:"section-body",children:T.jsx("div",{className:"license-content",children:u?T.jsx("p",{children:"Loading license..."}):T.jsxs(T.Fragment,{children:[T.jsx("h3",{children:"End User License Agreement"}),T.jsx("p",{children:"Last Updated: March 2, 2025"}),T.jsx("div",{className:"license-text",children:i||"No license text available."})]})})})]});default:return null}};return T.jsx("div",{className:"modal-overlay",children:T.jsx("div",{className:"info-modal",children:t?g():T.jsxs(T.Fragment,{children:[T.jsxs("header",{className:"info-header",children:[T.jsx("h2",{children:"Settings"}),T.jsx("button",{className:"close-button",onClick:e,children:T.jsx(io,{size:24})})]}),T.jsxs("div",{className:"info-content",children:[T.jsxs("div",{className:"pro-banner",children:[T.jsxs("div",{className:"pro-text",children:[T.jsxs("h3",{children:["Groove Slider ",T.jsx("span",{className:"pro-badge",children:"Pro"})]}),T.jsx("p",{children:"Unlock All Features"})]}),T.jsx("div",{className:"pro-image",children:T.jsx("div",{style:{width:80,height:80,background:"rgba(255,255,255,0.2)",borderRadius:"8px"}})})]}),T.jsxs("div",{className:"info-item-group",children:[T.jsxs("div",{className:"info-item",onClick:()=>d("credits"),children:[T.jsx(oS,{className:"info-icon"}),T.jsxs("div",{className:"info-text",children:[T.jsx("h4",{children:"Credits"}),T.jsx("p",{children:"About"})]}),T.jsx(Zs,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("feedback"),children:[T.jsx(pS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Feedback"})}),T.jsx(Zs,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("restore"),children:[T.jsx(AS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Restore Purchase"})}),T.jsx(Zs,{})]})]}),T.jsxs("div",{className:"info-item-group",children:[T.jsxs("div",{className:"info-item",onClick:()=>d("unsubscribe"),children:[T.jsx(XI,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"How to unsubscribe"})}),T.jsx(Zs,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("privacy"),children:[T.jsx(dS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"Privacy Policy"})}),T.jsx(Zs,{})]}),T.jsxs("div",{className:"info-item",onClick:()=>d("license"),children:[T.jsx(nS,{className:"info-icon"}),T.jsx("div",{className:"info-text",children:T.jsx("h4",{children:"License"})}),T.jsx(Zs,{})]}),T.jsxs("div",{className:"info-item",children:[T.jsx(sS,{className:"info-icon"}),T.jsxs("div",{className:"info-text",children:[T.jsx("h4",{children:"Version"}),T.jsx("p",{children:"Version 0.9.0 (Beta)"})]})]})]})]})]})})})},wb=({isVisible:r,onClose:e})=>r?T.jsx("div",{className:"share-notification",children:T.jsxs("div",{className:"share-content",children:[T.jsx("h3",{children:"Export Complete! 🎉"}),T.jsx("p",{children:"Share your creation:"}),T.jsxs("div",{className:"share-buttons",children:[T.jsx("button",{onClick:()=>window.open("https://instagram.com","_blank"),className:"share-button instagram",children:"Share to Instagram"}),T.jsx("button",{onClick:()=>window.open("https://tiktok.com","_blank"),className:"share-button tiktok",children:"Share to TikTok"})]}),T.jsx("button",{onClick:e,className:"close-notification",children:T.jsx(io,{size:20})})]})}):null,AT=({stories:r,onClose:e,onReorder:t,onDelete:n})=>{const[i,a]=ce.useState(r.map((M,B)=>B+1)),[u,c]=ce.useState(null),[d,p]=ce.useState(null),[g,v]=ce.useState(!1),E=M=>{c(u===M?null:M)},C=(M,B)=>{u===B&&(v(!0),M.currentTarget.style.cursor="grabbing")},A=(M,B)=>{M.preventDefault(),g&&u!==null&&u!==B&&p(B)},V=M=>{if(u!==null&&u!==M){const B=[...r],[K]=B.splice(u,1);B.splice(M,0,K);const q=B.map((X,F)=>F+1);a(q),t(B),c(null),p(null),v(!1)}};return T.jsxs("div",{className:"edit-panel",children:[T.jsxs("div",{className:"edit-panel-header",children:[T.jsx("h3",{children:"Re-order (tap, drap, drop)"}),T.jsx("button",{className:"edit-panel-close",onClick:e,children:T.jsx(io,{size:20})})]}),T.jsx("div",{className:"thumbnails-container",children:r.map((M,B)=>T.jsx("div",{className:`thumbnail ${u===B?"selected":""}
${d===B?"drag-over":""}`,onClick:()=>E(B),onMouseDown:K=>C(K,B),onTouchStart:K=>C(K,B),onDragOver:K=>A(K,B),onMouseOver:K=>g&&A(K,B),onTouchMove:K=>{const q=K.touches[0],F=document.elementFromPoint(q.clientX,q.clientY).closest(".thumbnail");if(F){const z=Array.from(F.parentNode.children).indexOf(F);A(K,z)}},onMouseUp:()=>V(B),onTouchEnd:()=>d!==null&&V(d),draggable:u===B,children:T.jsxs("div",{className:"thumbnail-content",children:[T.jsx("button",{className:"delete-button",onClick:K=>{K.stopPropagation(),n(B)},children:T.jsx(io,{size:16})}),T.jsxs("div",{className:"image-thumbnail",children:[T.jsx("img",{src:M.url,alt:`Slide ${B+1}`}),u===B&&T.jsx("div",{className:"selection-dot"})]})]})},B))})]})},Eb=({onFileUpload:r,onSaveSession:e,onExportSession:t,onPlayPause:n,isPlaying:i,duration:a,onDurationChange:u,onEdit:c,onMusicUpload:d,onBPMChange:p,musicUrl:g,bpm:v,onStartPointChange:E,musicStartPoint:C,audioRef:A,isLoopingEnabled:V,setIsLoopingEnabled:M,showEditPanel:B,setShowEditPanel:K,stories:q,setStories:X,handleDelete:F,handleReorder:z})=>{const[R,I]=ce.useState(!1),[N,b]=ce.useState(!1),[k,D]=ce.useState(1);ce.useEffect(()=>{const J=[.125,.25,.5,1,2,4,8,16].find(te=>Math.abs(a*v/(4*60)-te)<.01);J&&D(J)},[a,v]);const P=(le,J)=>le*4*60/J,ae=()=>{I(!R),N&&b(!1),B&&K(!1)},fe=()=>{b(!N),R&&I(!1),B&&K(!1)},me=()=>{K(!B),R&&I(!1),N&&b(!1)};return T.jsxs("div",{className:"bottom-menu w-full flex flex-col items-stretch",children:[R&&T.jsx("div",{className:"duration-panel",children:T.jsxs("div",{className:"duration-controls",children:[T.jsx("h3",{children:"Bar-Based Slide Transitions"}),T.jsx("div",{className:"bar-options",children:[{value:.125,label:"⅛ Bar"},{value:.25,label:"¼ Bar"},{value:.5,label:"½ Bar"},{value:1,label:"1 Bar"},{value:2,label:"2 Bars"},{value:4,label:"4 Bars"},{value:8,label:"8 Bars"},{value:16,label:"16 Bars"}].map(le=>T.jsx("button",{className:`bar-option ${k===le.value?"selected":""}`,onClick:()=>{const J=P(le.value,v);D(le.value),u(J)},children:le.label},le.value))}),T.jsxs("div",{className:"duration-info",children:[T.jsx("span",{children:"Slide Change Speed:"}),T.jsxs("span",{className:"time-info",children:[a.toFixed(2),"s /",v," BPM"]})]})]})}),N&&T.jsx(pb,{audioRef:A,onUpload:d,onBPMChange:p,currentBPM:v,onStartPointChange:E,musicStartPoint:C,musicUrl:g}),B&&T.jsx(AT,{stories:q,onClose:()=>K(!1),onReorder:le=>{X(le),z(le)},onDelete:F}),T.jsxs("div",{className:"bottom-menu-buttons",children:[T.jsxs("button",{className:`bottom-menu-button ${V?"active":""}`,onClick:()=>M(!V),"data-loop":"true",children:[T.jsx(ES,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Loop"})]}),T.jsxs("button",{className:`bottom-menu-button ${R?"active":""}`,onClick:ae,children:[T.jsx(iw,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Speed"})]}),T.jsxs("button",{className:`bottom-menu-button ${N?"active":""}`,onClick:fe,children:[T.jsx(Up,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Music"})]}),T.jsxs("button",{className:`bottom-menu-button ${i?"active":""}`,onClick:n,children:[i?T.jsx(aw,{className:"bottom-menu-icon"}):T.jsx(lw,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:i?"Pause":"Play"})]}),T.jsxs("div",{className:"bottom-menu-right-group",children:[T.jsxs("button",{className:`bottom-menu-button ${B?"active":""}`,onClick:me,children:[T.jsx(xS,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Edit"})]}),T.jsxs("label",{className:"bottom-menu-button",children:[T.jsx(lS,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Add"}),T.jsx("input",{type:"file",id:"file-upload-bottom",accept:"image/*",multiple:!0,onChange:r,className:"hidden-input"})]}),T.jsxs("button",{className:"bottom-menu-button",onClick:e,children:[T.jsx(uw,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Save"})]}),T.jsxs("button",{className:"bottom-menu-button",onClick:t,children:[T.jsx(ow,{className:"bottom-menu-icon"}),T.jsx("span",{className:"bottom-menu-text",children:"Export"})]})]})]})]})},Tb=()=>{const[r,e]=ce.useState(!0),[t,n]=ce.useState(0),[i,a]=ce.useState([]),[u,c]=ce.useState(!1),[d,p]=ce.useState(2),[g,v]=ce.useState(!1),[E,C]=ce.useState(!1),[A,V]=ce.useState(!1),[M,B]=ce.useState(null),[K,q]=ce.useState(!1),[X,F]=ce.useState(!1),[z,R]=ce.useState(!1),[I,N]=ce.useState("cover"),[b,k]=ce.useState(!1),[D,P]=ce.useState(!1),[ae,fe]=ce.useState(null),[me,le]=ce.useState(""),[J,te]=ce.useState(!1),[ee,L]=ce.useState(null),[Y,ge]=ce.useState(120),[Re,pe]=ce.useState(0),[Ve,Oe]=ce.useState(!0),[he,qe]=ce.useState({}),[Ze,Ft]=ce.useState(null),[an,ln]=ce.useState(null),We=ce.useRef(null),An=ce.useRef(null),gi=()=>{i.length>0?window.confirm("Start a new project? Any unsaved changes will be lost.")&&(yi(),e(!1)):e(!1)},yi=()=>{a([]),n(0),L(null),We.current&&(We.current.pause(),We.current.src=""),c(!1),ge(120),pe(0),p(2),Oe(!1)},Eo=Ne=>new Promise((De,He)=>{const nt=new Image;nt.onload=()=>De(Ne),nt.onerror=He,nt.src=Ne});ce.useEffect(()=>{const Ne=async()=>{const De=[t-1,t,t+1].filter(He=>He>=0&&He<i.length);for(const He of De)if(!he[i[He].url])try{await Eo(i[He].url),qe(nt=>({...nt,[i[He].url]:!0}))}catch(nt){console.error("Failed to preload image:",nt)}};i.length>0&&Ne()},[t,i]),ce.useEffect(()=>{rw().catch(console.error)},[]);const Qr=Ne=>{const De=Array.from(Ne.target.files).filter(nt=>nt.type.startsWith("image/"));if(De.length===0){alert("Please select image files only.");return}const He=De.map(nt=>({type:"image",url:URL.createObjectURL(nt)}));a(nt=>[...nt,...He]),Ne.target.value=""},rr=Ne=>{L(Ne),pe(0),We.current&&(We.current.src=Ne,We.current.currentTime=0)},sr=Ne=>{ge(Ne);const nt=([.125,.25,.5,1,2,4,8,16].find(ar=>Math.abs(d*Ne/(4*60)-ar)<.01)||1)*4*60/Ne;p(nt)},Ts=()=>{An.current=setInterval(()=>{n(Ne=>!Ve&&Ne>=i.length-1?(Nn(),c(!1),We.current&&We.current.pause(),Ne):(Ne+1)%i.length)},d*1e3)},Nn=()=>{An.current&&clearInterval(An.current)},Is=()=>{u?(Nn(),We.current&&We.current.pause()):(t===i.length-1&&n(0),Ts(),We.current&&ee&&(We.current.currentTime=Re,We.current.play().catch(Ne=>console.log("Play error:",Ne)))),c(Ne=>!Ne)};ce.useEffect(()=>()=>Nn(),[]),ce.useEffect(()=>{u&&(Nn(),Ts())},[d]);const Ss=()=>{t<i.length-1&&n(t+1)},gt=()=>{t>0&&n(t-1)},Et=Ne=>Ft(Ne.touches[0].clientX),ir=Ne=>ln(Ne.touches[0].clientX),_i=()=>{if(!Ze||!an)return;const Ne=Ze-an,De=Ne>50,He=Ne<-50;De&&t<i.length-1&&Ss(),He&&t>0&&gt(),Ft(null),ln(null)},or=Ne=>{u&&(Nn(),c(!1),We.current&&We.current.pause()),n(0),a(Ne)},Rr=Ne=>{const De=i.filter((He,nt)=>nt!==Ne);a(De),t>=Ne&&n(Math.max(0,t-1))},Xr=(Ne,De,He)=>He!=="cover"?`scale=${Ne}:${De}:force_original_aspect_ratio=1,pad=${Ne}:${De}:(ow-iw)/2:(oh-ih)/2:black`:`scale=iw*max(${Ne}/iw\\,${De}/ih):ih*max(${Ne}/iw\\,${De}/ih),crop=${Ne}:${De}`,vi=async Ne=>{try{u&&(Nn(),We.current&&We.current.pause(),c(!1));const De=await DR(Ne);a(De.stories),ge(De.bpm),p(De.duration),Oe(De.isLoopingEnabled),n(De.currentIndex),N(De.imageFitMode||"cover"),De.musicUrl&&(L(De.musicUrl),pe(De.musicStartPoint),We.current&&(We.current.src=De.musicUrl,We.current.currentTime=De.musicStartPoint)),r&&e(!1),alert("Session loaded successfully!")}catch(De){console.error("Error loading session:",De),alert("Failed to load session: "+De.message)}},wi=async Ne=>{const De={...Ne},{resolution:He="1080x1920",isExportLoopEnabled:nt=!1,exportLoopDuration:ar=0}=De;try{let Dt,xn="untitled.mp4";if("showSaveFilePicker"in window)Dt=await window.showSaveFilePicker({suggestedName:xn,types:[{description:"MP4 Video",accept:{"video/mp4":[".mp4"]}}]});else{const Tt=document.createElement("a");Tt.download=xn,Dt={createWritable:async()=>({write:async It=>{const $n=URL.createObjectURL(new Blob([It],{type:"video/mp4"}));Tt.href=$n,Tt.click(),URL.revokeObjectURL($n)},close:async()=>{}})}}P(!0),te(!0),le("Preparing to export video..."),fe(0),Ln.loaded||await rw();let lr=[];const Rn=[],[Ti,Yr]=He.split("x").map(Number),Ii=i.length*d,Pn=nt&&ar>0?Math.ceil(ar/Ii):1;for(let Tt=0;Tt<Pn;Tt++)for(let It=0;It<i.length;It++){const $n=i[It];le(`Processing image ${It+1}/${i.length} (Loop ${Tt+1}/${Pn})`);const ur=`input_${Tt}_${It}.png`,Pr=`processed_${Tt}_${It}.mp4`;await Ln.writeFile(ur,await qy($n.url)),lr.push(ur),await Ln.exec(["-loop","1","-i",ur,"-c:v","libx264","-t",`${d}`,"-pix_fmt","yuv420p","-vf",Xr(Ti,Yr,I),"-r","30","-preset","ultrafast",Pr]),lr.push(Pr),Rn.push({name:Pr}),fe((Tt*i.length+It+1)/(Pn*i.length)*75)}if(await Ln.writeFile("list.txt",Rn.map(Tt=>`file '${Tt.name}'`).join(`
`)),lr.push("list.txt"),le("Creating final video..."),fe(85),await Ln.exec(["-f","concat","-safe","0","-i","list.txt","-c:v","copy","temp_output.mp4"]),lr.push("temp_output.mp4"),ee){le("Adding background music...");try{await Ln.writeFile("background.mp3",await qy(ee)),await Ln.exec(["-i","temp_output.mp4","-ss",String(Re),"-i","background.mp3","-shortest","-map","0:v","-map","1:a","-c:v","copy","-c:a","aac","-b:a","192k","final_output.mp4"]),await Ln.deleteFile("background.mp3"),await Ln.deleteFile("temp_output.mp4")}catch(Tt){console.error("Music error:",Tt),await Ln.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"])}}else await Ln.exec(["-i","temp_output.mp4","-c","copy","final_output.mp4"]);le("Preparing download..."),fe(95);const Si=await Ln.readFile("final_output.mp4");fe(100);const lt=await Dt.createWritable();await lt.write(new Blob([Si.buffer],{type:"video/mp4"})),await lt.close(),te(!1),P(!1),k(!0)}catch(Dt){console.error("Export error:",Dt),te(!1),P(!1),alert(`Export failed: ${Dt.message}`)}},Ei=async Ne=>{try{te(!0),le("Saving session..."),fe(10);const De={name:Ne,stories:i,musicUrl:ee,bpm:Y,musicStartPoint:Re,imageFitMode:I,duration:d,isLoopingEnabled:Ve,currentIndex:t};fe(40),await kR(De),fe(100),le("Session saved successfully!"),setTimeout(()=>{te(!1),alert("Session saved successfully!")},1e3)}catch(De){console.error("Error saving session to database:",De),te(!1),alert(`Failed to save session: ${De.message}`)}};return T.jsx(T.Fragment,{children:r?T.jsx(db,{onCreateSlideshow:gi,onLoadSession:vi,onClose:()=>e(!1)}):T.jsx("div",{className:"app-container",children:T.jsx("div",{className:"app-content",children:T.jsxs("div",{className:"slider-container",children:[T.jsxs("div",{className:"title-bar",children:[T.jsx("h1",{className:"slider-title",children:"Groove Slider"}),T.jsx("button",{onClick:()=>e(!0),className:"projects-button",children:"back"})]}),T.jsx("audio",{ref:We,src:ee,loop:!0}),i.length===0?T.jsx(yb,{onFileUpload:Qr}):T.jsxs("div",{className:"story-container",onTouchStart:Et,onTouchMove:ir,onTouchEnd:_i,children:[T.jsx("div",{className:"story-slide",children:T.jsx("div",{className:"media-wrapper",children:T.jsxs("div",{className:"image-container",style:{position:"relative",width:"100%",height:"100%"},children:[T.jsx("button",{className:"image-fit-toggle",onClick:Ne=>{Ne.preventDefault(),console.log("Image fit button clicked"),N(De=>{const He=De==="cover"?"contain":"cover";return console.log("New image fit mode:",He),He})},children:I==="cover"?T.jsx(gS,{}):T.jsx(eS,{})}),i[t]&&i[t].url?T.jsx("img",{src:i[t].url,alt:`Slide ${t+1}`,className:"media-content",style:{objectFit:I,width:"100%",height:"100%",display:"block"},loading:"eager"}):T.jsx("div",{className:"empty-image-placeholder",style:{backgroundColor:"#f5f5f5",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#333"},children:"Select an image to display"})]})})}),T.jsx(gb,{onPrevious:gt,onNext:Ss,isFirstSlide:t===0,isLastSlide:t===i.length-1}),T.jsx(mb,{currentIndex:t,totalSlides:i.length,onProgressClick:Ne=>{console.log("Current Index:",t),console.log("Clicked Index:",Ne),console.log("Total Stories:",i.length),n(Ne)}})]}),T.jsx(Eb,{audioRef:We,onFileUpload:Qr,onSaveSession:()=>q(!0),onExportSession:()=>V(!0),onPlayPause:Is,isPlaying:u,duration:d,onDurationChange:p,onEdit:()=>C(!E),onMusicUpload:rr,onBPMChange:sr,musicUrl:ee,bpm:Y,onStartPointChange:pe,musicStartPoint:Re,onMusicPanelToggle:()=>setShowMusicPanel(!showMusicPanel),isLoopingEnabled:Ve,setIsLoopingEnabled:Oe,showEditPanel:E,setShowEditPanel:C,stories:i,setStories:a,handleDelete:Rr,handleReorder:or}),E&&T.jsx(AT,{stories:i,onClose:()=>C(!E),onReorder:or,onDelete:Rr}),T.jsx(RR,{isOpen:A,progress:ae,message:me,onClose:()=>V(!1),onExport:wi,isExporting:D}),T.jsx(PR,{isOpen:K,onClose:()=>q(!1),onSave:Ei}),T.jsx(_b,{isOpen:J,progress:ae,message:me}),T.jsx(wb,{isVisible:b,onClose:()=>k(!1)})]})})})})};function Ib({installPrompt:r,onInstallClick:e}){return T.jsxs("div",{className:"app-container",children:[r&&T.jsx("button",{onClick:e,style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Install App"}),T.jsx(Tb,{})]})}function Sb(){const[r,e]=ce.useState(null);ce.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{console.log("Attempting to register service worker"),console.log("Current origin:",window.location.origin),console.log("Current pathname:",window.location.pathname);const a=await navigator.serviceWorker.register("/groove-slider-img/sw.js",{scope:"/groove-slider-img/",type:"classic"});console.log("Service Worker registered successfully:",a),console.log("Registration scope:",a.scope)}catch(a){console.error("Service Worker registration failed:",a),console.error("Full error:",JSON.stringify(a,Object.getOwnPropertyNames(a)))}});const n=a=>{a.preventDefault(),e(a)},i=a=>{console.log("App was successfully installed")};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",i)}},[]);const t=async()=>{if(r){r.prompt();const{outcome:n}=await r.userChoice;console.log(n==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null)}};return T.jsx(ce.StrictMode,{children:T.jsx(Ib,{installPrompt:r,onInstallClick:t})})}jI.createRoot(document.getElementById("root")).render(T.jsx(Sb,{}));
